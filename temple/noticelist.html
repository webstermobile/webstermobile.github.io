<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" id="viewport" content="width=device-width,initial-scale=1">
    <title>触屏手机移动端侧滑删除插件Hewenqi _ 何问起</title>
	<meta charset="utf-8">
    
    <style>
    .hewenqi{overflow:hidden;margin:0px;padding:0px;}
.hewenqi * {
padding: 0;
margin: 0;
list-style: none;
}
.hewenqi li{line-height: 60px;
border-bottom: 1px solid #fcfcfc;
position: relative;
padding: 0 12px;
color: #666;
background: #f2f2f2;
}
.hewenqi-btn{position: absolute;
top: 0;
right: -80px;
text-align: center;
background: #ffcb20;
color: #fff;
width: 80px;}
        .hewenqihead * {
            padding: 0;
            margin: 0;
            list-style: none;
        }
        header.hewenqihead {
            background: #f7483b;
            border-bottom: 1px solid #ccc;
        }
        header.hewenqihead h2 {
            text-align: center;
            line-height: 54px;
            font-size: 16px;
            color: #fff;
        }
        a{color:blue;}
    </style>
    <script>
        /*
* Hewenqi(JavaScript Plugin)
* version: 0.1.2
* Copyright (c) 2016 HoverTree
* http://hovertree.com
* http://hovertree.com/texiao/hewenqi/
*/

var $Hewenqi = (function () {
    var _option = {
        id:"hewenqi"
    }
    var _hewenqi = function () {
        var h_obj;
        h_obj = document.getElementById(_option.id);
        if (h_obj){}
        else{return;}

        var initX;
        var moveX;
        var X = 0;
        var objX = 0;


        h_obj.addEventListener('touchstart', function (event) {
            var obj = event.target.parentNode;
            if (obj.className == "hewenqi-li") {
                initX = event.targetTouches[0].pageX;
                objX = (obj.style.transform.replace(/translateX\(/g, "").replace(/px\)/g, "")) * 1;
            }
            if (objX == 0) {
                h_obj.addEventListener('touchmove', function (event) {
                    var obj = event.target.parentNode;
                    if (obj.className == "hewenqi-li") {
                        moveX = event.targetTouches[0].pageX;
                        X = moveX - initX;
                        if (X > 0) {
                            obj.style.transform = "translateX(" + 0 + "px)";
                        }
                        else if (X < 0) {
                            var l = Math.abs(X);
                            obj.style.transform = "translateX(" + -l + "px)";
                            if (l > 80) {
                                l = 80;
                                obj.style.transform = "translateX(" + -l + "px)";
                            }
                        }
                    }
                });
            }
            else if (objX < 0) {
                h_obj.addEventListener('touchmove', function (event) {
                    var obj = event.target.parentNode;
                    if (obj.className == "hewenqi-li") {
                        moveX = event.targetTouches[0].pageX;
                        X = moveX - initX;
                        if (X > 0) {
                            var r = -80 + Math.abs(X);
                            obj.style.transform = "translateX(" + r + "px)";
                            if (r > 0) {
                                r = 0;
                                obj.style.transform = "translateX(" + r + "px)";
                            }
                        }
                        else {     //向左滑动
                            obj.style.transform = "translateX(" + -80 + "px)";
                        }
                    }
                });
            }

        })
        h_obj.addEventListener('touchend', function (event) {
            var obj = event.target.parentNode;
            if (obj.className == "hewenqi-li") {

                var h_li = document.getElementsByClassName("hewenqi-li");
                var h_count = h_li.length;
                for (var i = 0; i < h_count; i++) {
                    if (obj != h_li[i])
                    h_li[i].style.transform = "translateX(" + 0 + "px)";
                }

                objX = (obj.style.transform.replace(/translateX\(/g, "").replace(/px\)/g, "")) * 1;
                if (objX > -40) {
                    obj.style.transform = "translateX(" + 0 + "px)";
                } else {
                    obj.style.transform = "translateX(" + -80 + "px)";
                }
            }
        })

        var hewenqi_items = document.getElementsByClassName("hewenqi-btn");
        var h_count = hewenqi_items.length;
        for (var i = 0; i < h_count; i++) {
            hewenqi_items[i].addEventListener('click', function (event) {
                var hewenqi_items = event.target.parentNode;
                hewenqi_items.style.display = 'none';//这里应该实现隐藏或者删除节点的功能
            })
        }
    }

    var _set=function(option)
    {
        _option = option;
    }

    return {
        Hewenqi: _hewenqi,
        Set:_set
    }
})();
    </script>
<link href="css/common.css" rel="stylesheet"></head>
<body>
    <header class="hewenqihead">
        <h2>消息列表(hewenqi插件)</h2>
    </header>
    <ul id="hewenqi" class="hewenqi">
        <li class="hewenqi-li">
            <div class="hewenqi-con">
                hewenqi插件是一个javascript插件。
            </div>
            <div class="hewenqi-btn">删除</div>
        </li>

        <li id="li" class="hewenqi-li">
            <div class="hewenqi-con">
               官网：hovertree.com/texiao/hewenqi
            </div>
            <div class="hewenqi-btn">删除</div>
        </li>       

        <li class="hewenqi-li">
            <div class="hewenqi-con">
                应用于触屏端的列表滑动删除
            </div>
            <div class="hewenqi-btn">删除</div>
        </li>

        <li class="hewenqi-li">
            <div class="hewenqi-con">
                请使用手机等触屏设备体验效果。
            </div>
            <div class="hewenqi-btn">删除</div>
        </li>
        
        <li class="hewenqi-li">
            <div class="hewenqi-con">
                欢迎使用 HovertreeImg 图片轮播插件
            </div>
            <div class="hewenqi-btn">删除</div>
        </li>
        <li class="hewenqi-li">
            <div class="hewenqi-con">
                何问起，你的快递到了，请到楼下签收<a href="http://hovertree.com/">详情</a>
            </div>
            <div class="hewenqi-btn">删除</div>
        </li>
        <li class="hewenqi-li">
            <div class="hewenqi-con">
                HoverClock是一款jQuery网页时钟。
            </div>
            <div class="hewenqi-btn">删除</div>
        </li>
        <li class="hewenqi-li">
            <div class="hewenqi-con">
                何问起你有一个到付快递，请到门口查收。
            </div>
            <div class="hewenqi-btn">删除</div>
        </li>
        <li class="hewenqi-li">
            <div class="hewenqi-con">
                柯乐义给你寄来了一张贺卡，请到门口查收。
            </div>
            <div class="hewenqi-btn">删除</div>
        </li>
    </ul>
    
    <script>
        $Hewenqi.Set({id:"hewenqi"});//指定ul的id，如果id为hewenqi的话可以屏蔽这条语句。
        $Hewenqi.Hewenqi();//执行滑动删除等功能。
    </script>
</body>
</html>