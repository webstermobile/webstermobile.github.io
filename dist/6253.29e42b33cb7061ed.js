"use strict";(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[6253],{51766:(A,M,n)=>{n.d(M,{C:()=>u});var e=n(3927),p=n(26245),P=n(591),D=n(27221),m=n(66708),O=n(94650),s=n(60097),d=n(28555),t=n(80529),_=n(91599);let u=(()=>{class v extends e.su{constructor(g,r,o,c){super(o,r),this.carparkService=g,this.store=r,this.http=o,this.$seasonData=new P.X({}),this.modelName="Carpark",this.handleError=c.createHandleError(`${this.modelName}Service`)}ngOnInit(){}handleDynamicUrl(){const g=JSON.parse(localStorage.getItem("user")).login;this.baseUrl=this.carparkService.isMotorist()&&m.Z.isNotNull(g)?`carpark/api/drivers/${g}/seasons`:"carpark/api/season-parkings"}filterModel(g,r){return this.handleDynamicUrl(),super.filterModel(g,r).map(o=>o.data?o:{data:[],pagination:(0,p.f$)()})}filterModelOfCarpark(g,r,o){const c=this.getUrl((0,p.U8)(`carpark/api/season-parking/${g}/getList`,{...r,...(0,p.jq)(o)}));return this.get(c).pipe((0,D.K)(this.handleError(`${this.modelName}Filter`,{}))).map(a=>Array.isArray(a)?(0,e.eC)(a.slice(0,o.rowsPerPage+1)):(0,e.O7)(a))}filterModelOfVehicle(g,r,o){const c=this.getUrl((0,p.U8)(`carpark/api/vehicles/${g}/seasons`,{...r,...(0,p.jq)(o)}));return this.get(c).pipe((0,D.K)(this.handleError(`${this.modelName}Filter`,{}))).map(a=>Array.isArray(a)?(0,e.eC)(a.slice(0,o.rowsPerPage+1)):(0,e.O7)(a))}getIdentity(g){const r=this.getUrl(`carpark/api/seasons/applications/${g}`);return this.get(r)}downloadSessonPdf(g){const r=this.getUrl(`carpark/api/printBilling/seasoncode/pdf/${g}`);return this.get(r,{responseType:"blob"}).pipe((0,D.K)(this.handleError(`${this.modelName}Get`,{})))}getGroupSeason(g){const r=this.getUrl(`carpark/api/season-group/query/${g}`);return this.get(r)}applyHandle(g){return this.post(this.getUrl("carpark/api/season-group"),g)}clearHandle(g){return this.delete(this.getUrl(`carpark/api/season-group/clear/${g}`))}}return v.\u0275fac=function(g){return new(g||v)(O.LFG(s.x),O.LFG(d.yh),O.LFG(t.eN),O.LFG(_.k))},v.\u0275prov=O.Yz7({token:v,factory:v.\u0275fac}),v})()},31289:(A,M,n)=>{n.d(M,{K:()=>O});var e=n(94650),p=n(3927),P=n(28555),D=n(80529),m=n(91599);let O=(()=>{class s extends p.su{constructor(t,_,u){super(_,t),this.store=t,this.http=_,this.modelName="Tariff",this.baseUrl="carpark/api/tariffs",this.tariffEventer=new e.vpe,this.handleError=u.createHandleError(`${this.modelName}Service`)}updateModel(t){const _=this.getUrl(this.baseUrl);return this.put(_,t)}addOrUpdateEvTariff(t){const _=this.getUrl("scp-mg-devicemgt/costmode/addOrUpdateEvTariff");return this.post(_,t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(P.yh),e.LFG(D.eN),e.LFG(m.k))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})()},71942:(A,M,n)=>{n.d(M,{f:()=>v});var e=n(38014),p=n(3927),P=n(26245),D=n(21086),m=n(27221),O=n(66708),s=n(94650),d=n(60097),t=n(80529),_=n(28555),u=n(91599);let v=(()=>{class U extends p.su{constructor(r,o,c,a){super(o,c),this.carparkService=r,this.http=o,this.store=c,this.modelName="Vehicle",this.handleError=a.createHandleError(`${this.modelName}Service`),this.handleDynamicUrl()}ngOnInit(){}handleDynamicUrl(){const r=JSON.parse(localStorage.getItem("user")).login;this.baseUrl=this.carparkService.isMotorist()&&O.Z.isNotNull(r)?`carpark/api/drivers/${r}/vehicles`:"carpark/api/vehicle/get-vehicles"}getTelList(r,o){console.log(r);const c=this.getUrl((0,P.U8)("carpark/api/vehicle/vehicles",{...r,...(0,P.jq)(o)}));return this.get(c)}filterModel(r,o){const c=this.getUrl((0,P.U8)(this.baseUrl,{...r,...(0,P.jq)(o)}));return this.get(c).pipe((0,m.K)(this.handleError(`${this.modelName}Filter`,{}))).map(a=>Array.isArray(a)?(0,p.eC)(a):(0,p.O7)(a))}updateVehicle(r){const o=this.getUrl(`carpark/api/drivers/${r.driverCode}/vehicles/${r.vehicleId}`);return this.patch(o,r.vehicle).pipe((0,m.K)(this.handleError(`${this.modelName}Update`,{})))}getModel(r){const o=this.getUrl(`carpark/api/vehicle/${r}`);return this.get(o).pipe((0,m.K)(this.handleError(`${this.modelName}Get`,{})))}deleteModel(r,o){const c=this.getUrl(`carpark/api/drivers/${r}/vehicles/${o}`);return this.delete(c).pipe((0,m.K)(this.handleError(`${this.modelName}Delete`)))}deleteAdminModel(r){const o=this.getUrl(`carpark/api/admin/vehicle/${r}`);return this.delete(o).pipe((0,m.K)(this.handleError(`${this.modelName}Delete`)))}createVehicle(r,o){const c=this.getUrl(`carpark/api/drivers/${r}/vehicles`);return this.post(c,o)}putUpdateVehicle(r,o){const c=this.getUrl(`carpark/api/drivers/${r}/vehicles/${o.id}`);return this.put(c,o)}getDriverCode(r){const o=this.getUrl(`carpark/api/drivers/${r}/driverCode`);return this.get(o)}createModel(r,o){const c=this.getUrl(`carpark/api/drivers/${r}/vehicles`);return this.post(c,o).pipe((0,m.K)(this.handleError(`${this.modelName}Create`,{})))}createVehicleAdmin(r){const o=this.getUrl(`carpark/api/admin/vehicles/${r.mobile}`);return this.post(o,r).pipe((0,m.K)(this.handleError(`${this.modelName}Create`,{})))}updateModel(r){const o=this.getUrl("carpark/api/admin/vehicle-changes");return this.post(o,r).pipe((0,m.K)(this.handleError(`${this.modelName}Update`,{})))}getSimpleList(){const r=this.getUrl("carpark/api/vehicle/simple-vehicles-list");return this.get(r).pipe((0,m.K)(this.handleError(`${this.modelName}SimpleList`,{})))}filterModelByDriver(r){const o=this.getUrl(`carpark/api/drivers/${r}/vehicles`);return this.get(o).pipe((0,m.K)(()=>(0,D.of)([])))}isOperator(){const r=JSON.parse(localStorage.getItem("user-roles"));return!(!O.Z.isNotNull(r)||!r.includes(e.i44.Operator))}getUserVehicle(r,o){this.baseUrl=`carpark/api/drivers/${r}/vehicles`;const c=this.getUrl((0,P.U8)(this.baseUrl,{...(0,P.jq)(o)}));return this.get(c).pipe((0,m.K)(this.handleError(`${this.modelName}Filter`,{}))).map(a=>Array.isArray(a)?(0,p.eC)(a):(0,p.O7)(a))}}return U.\u0275fac=function(r){return new(r||U)(s.LFG(d.x),s.LFG(t.eN),s.LFG(_.yh),s.LFG(u.k))},U.\u0275prov=s.Yz7({token:U,factory:U.\u0275fac}),U})()},11917:(A,M,n)=>{n.d(M,{X:()=>s});var e=n(94650),p=n(34793),P=n(20388),D=n(66616),m=n(47044),O=n(21811);let s=(()=>{class d{constructor(_,u){this.router=_,this.bsModalRef=u,this.cancel=new e.vpe,this.submit=new e.vpe}doSubmit(){this.submit.emit()}doCancel(){this.cancel.emit()}}return d.\u0275fac=function(_){return new(_||d)(e.Y36(p.F0),e.Y36(P.UZ))},d.\u0275cmp=e.Xpm({type:d,selectors:[["confirm-modal"]],inputs:{options:"options"},outputs:{cancel:"cancel",submit:"submit"},decls:10,vars:4,consts:[[1,"modal-body"],[1,"modal-title"],[1,"modal-msg"],[1,"modal-btns"],["type","button","nz-button","","nzType","primary","nzGhost","",3,"click"],["type","button","nz-button","","nzType","primary",3,"click"]],template:function(_,u){1&_&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2),e._uU(4),e.qZA(),e.TgZ(5,"div",3)(6,"button",4),e.NdJ("click",function(){return u.doCancel()}),e._uU(7),e.qZA(),e.TgZ(8,"button",5),e.NdJ("click",function(){return u.doSubmit()}),e._uU(9),e.qZA()()()),2&_&&(e.xp6(2),e.hij(" ",u.options.title," "),e.xp6(2),e.Oqu(u.options.message),e.xp6(3),e.hij(" ",u.options.cancelText||"Cancel"," "),e.xp6(2),e.hij(" ",u.options.submitText||"Submit"," "))},dependencies:[D.ix,m.w,O.dQ],styles:[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-items:center;align-items:center}.modal-body[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{color:#6c6e86}.modal-body[_ngcontent-%COMP%]   .modal-msg[_ngcontent-%COMP%]{color:#868aa8}.modal-body[_ngcontent-%COMP%]   .modal-btns[_ngcontent-%COMP%]{margin-top:20px}.modal-body[_ngcontent-%COMP%]   .modal-btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 10px}"]}),d})()},60086:(A,M,n)=>{n.d(M,{G:()=>s});var e=n(94650),p=n(36895),P=n(34984);function D(d,t){1&d&&e._UZ(0,"img",9),2&d&&e.Q6J("src","assets/app/media/img/icons/park-placeholder.png",e.LSH)}const m=function(d){return{"border-color":d}};function O(d,t){if(1&d&&(e.TgZ(0,"div",5),e._UZ(1,"div",6),e.TgZ(2,"div",7),e.YNc(3,D,1,1,"img",8),e.qZA()()),2&d){const _=t.$implicit,u=e.oxw();e.xp6(1),e.Q6J("ngStyle",e.VKq(3,m,u.setBorderColor(_.status,1))),e.xp6(1),e.Q6J("ngStyle",e.VKq(5,m,u.setBorderColor(_.status,2))),e.xp6(1),e.Q6J("ngIf",0!==_.status)}}let s=(()=>{class d{constructor(){this.xAxisData=[{name:"Smart_100EV_3.3KW"},{name:"Smart_100EV_6.63KW"},{name:"Smart_900EV_3.3KW"},{name:"Smart_900EV_6.6KW"}],this.evStatusList=[{status:0},{status:1},{status:2},{status:0},{status:1}]}ngOnInit(){this.setEvStatusEcharts()}setEvStatusEcharts(){const _=Array.from(new Array(24).keys()).map(v=>(v<10?`0${v}`:`${v}`)+":00"),u=this.xAxisData.map(v=>v.name);this.xAxisData.forEach(v=>{v.type="line",v.smooth=!0,v.data=_.map(()=>Math.floor(1e4*Math.random()))}),this.option={title:{text:"Power Consumption comparison for smart charging scenario",left:"center",textStyle:{fontSize:14}},tooltip:{trigger:"axis"},legend:{data:u,bottom:0},grid:{left:"5%",right:"4%",bottom:"12%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:_},yAxis:{type:"value",name:"Power [KW]",nameLocation:"middle",nameGap:50},series:this.xAxisData}}setBorderColor(_,u){return 0!==_&&1!==u?"#000":{0:"#22b14c",1:"#fff200",2:"#ed1c24"}[_]}}return d.\u0275fac=function(_){return new(_||d)},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-carpark-ev-status"]],decls:6,vars:2,consts:[[1,"evc-status-container","row"],[1,"col-md-6"],["echarts","",3,"options"],[1,"status-main"],["class","status-item",4,"ngFor","ngForOf"],[1,"status-item"],[1,"border-status",3,"ngStyle"],[1,"car-container",3,"ngStyle"],["width","50px","height","50px","class","m--img-rounded m--img-centered","alt","",3,"src",4,"ngIf"],["width","50px","height","50px","alt","",1,"m--img-rounded","m--img-centered",3,"src"]],template:function(_,u){1&_&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",1)(4,"div",3),e.YNc(5,O,4,7,"div",4),e.qZA()()()),2&_&&(e.xp6(2),e.Q6J("options",u.option),e.xp6(3),e.Q6J("ngForOf",u.evStatusList))},dependencies:[p.sg,p.O5,p.PC,P._w],styles:[".ev-status-container[_ngcontent-%COMP%]{display:flex}.status-main[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;margin-top:40px}.status-item[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;flex-wrap:nowrap;align-items:center}.border-status[_ngcontent-%COMP%]{width:30px;height:30px;border:5px solid #000;border-radius:50%;margin-bottom:10px}.car-container[_ngcontent-%COMP%]{width:60px;height:80px;border:5px solid #000;display:flex;align-items:center;justify-content:center;border-radius:10%}"]}),d})()},23175:(A,M,n)=>{n.d(M,{w:()=>r});var e=n(94650),p=n(64870),P=n(34793),D=n(89383),m=n(36895),O=n(38231),s=n(24006),d=n(11194);function t(o,c){if(1&o&&e._UZ(0,"nz-option",12),2&o){const a=c.$implicit;e.Q6J("nzValue",a)("nzLabel",a)}}function _(o,c){if(1&o&&(e.TgZ(0,"h4"),e._uU(1),e.qZA()),2&o){const a=e.oxw(2);e.xp6(1),e.hij("Section ",null==a.layout?null:a.layout.section,"")}}function u(o,c){if(1&o&&e._UZ(0,"img",13),2&o){const a=e.oxw(2);e.Q6J("src",a.layout.layout,e.LSH)}}function v(o,c){if(1&o){const a=e.EpF();e.TgZ(0,"li")(1,"a",24),e.NdJ("click",function(){const S=e.CHM(a).index,y=e.oxw(3);return e.KtG(y.sectionIdx=S)}),e._uU(2),e.qZA()()}if(2&o){const a=c.index,T=e.oxw(3);e.xp6(1),e.Q6J("ngClass",a===T.sectionIdx?"m-datatable__pager-link--active":""),e.xp6(1),e.Oqu(a+1)}}function U(o,c){if(1&o){const a=e.EpF();e.TgZ(0,"ul",14)(1,"li")(2,"a",15),e.NdJ("click",function(){e.CHM(a);const E=e.oxw(2);return e.KtG(E.sectionIdx=0)}),e._UZ(3,"i",16),e.qZA()(),e.TgZ(4,"li")(5,"a",17),e.NdJ("click",function(){e.CHM(a);const E=e.oxw(2);return e.KtG(0!==E.sectionIdx&&(E.sectionIdx=E.sectionIdx-1))}),e._UZ(6,"i",18),e.qZA()(),e.YNc(7,v,3,2,"li",19),e.TgZ(8,"li")(9,"a",20),e.NdJ("click",function(){e.CHM(a);const E=e.oxw(2);return e.KtG(E.sectionIdx!==E.sections[E.level].length-1&&(E.sectionIdx=E.sectionIdx+1))}),e._UZ(10,"i",21),e.qZA()(),e.TgZ(11,"li")(12,"a",22),e.NdJ("click",function(){e.CHM(a);const E=e.oxw(2);return e.KtG(E.sectionIdx=E.sections[E.level].length-1)}),e._UZ(13,"i",23),e.qZA()()()}if(2&o){const a=e.oxw(2);e.xp6(2),e.Q6J("ngClass",0!==a.sectionIdx?"":"m-datatable__pager-link--disabled"),e.xp6(3),e.Q6J("ngClass",0!==a.sectionIdx?"":"m-datatable__pager-link--disabled"),e.xp6(2),e.Q6J("ngForOf",a.sections[a.level]),e.xp6(2),e.Q6J("ngClass",a.sectionIdx!==a.sections[a.level].length-1?"":"m-datatable__pager-link--disabled"),e.xp6(3),e.Q6J("ngClass",a.sectionIdx!==a.sections[a.level].length-1?"":"m-datatable__pager-link--disabled")}}function g(o,c){if(1&o){const a=e.EpF();e.ynx(0),e.TgZ(1,"div",2)(2,"div",3)(3,"label",4)(4,"span",5),e._uU(5,"*"),e.qZA(),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",6)(9,"nz-select",7),e.NdJ("ngModelChange",function(E){e.CHM(a);const S=e.oxw();return e.KtG(S.level=E)})("ngModelChange",function(){e.CHM(a);const E=e.oxw();return e.KtG(E.changeLevel())}),e.YNc(10,t,1,2,"nz-option",8),e.qZA()()(),e.YNc(11,_,2,1,"h4",0),e.YNc(12,u,1,1,"img",9),e.TgZ(13,"div",10),e.YNc(14,U,14,5,"ul",11),e.qZA()(),e.BQk()}if(2&o){const a=e.oxw();e.xp6(6),e.hij(" ",e.lcZ(7,6,"Level")," "),e.xp6(3),e.Q6J("ngModel",a.level),e.xp6(1),e.Q6J("ngForOf",a.levels),e.xp6(1),e.Q6J("ngIf",a.layout),e.xp6(1),e.Q6J("ngIf",a.layout),e.xp6(2),e.Q6J("ngIf",a.sections[a.level])}}let r=(()=>{class o{constructor(a,T,E){this.layoutService=a,this.route=T,this.translate=E,this.sections={}}set sectionIdx(a){this._sectionIdx=a,this.reloadData()}get sectionIdx(){return this._sectionIdx}ngOnInit(){this.layoutService.getList({carPark:this.parkId?this.parkId:this.route.parent.snapshot.paramMap.get("id")}).subscribe(a=>{this.layouts=a,a.forEach(T=>{this.sections[T.level]=this.sections[T.level]?[...this.sections[T.level],T.section]:[T.section]}),this.levels=Object.keys(this.sections),this.level=this.levels[0],this.sectionIdx=0})}changeLevel(){this.sectionIdx=0}reloadData(){this.layout=this.layouts.find(a=>a.level===this.level&&a.section===this.sections[this.level][this.sectionIdx])}}return o.\u0275fac=function(a){return new(a||o)(e.Y36(p.P),e.Y36(P.gz),e.Y36(D.sK))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-carpark-vpgs"]],inputs:{parkId:"parkId"},decls:3,vars:3,consts:[[4,"ngIf"],[3,"allowActions","parkId"],[1,"m-datatable--default","m-datatable--brand","m-datatable--loaded"],[1,"row","form-group","m-form__group"],[1,"col-form-label","col-2"],[1,"m--font-danger"],[1,"col-3"],["name","level","nzPlaceHolder","Please Select",2,"width","100%",3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["style","width: 100%;",3,"src",4,"ngIf"],[1,"m-datatable__pager","m-datatable--paging-loaded","clearfix"],["class","m-datatable__pager-nav",4,"ngIf"],[3,"nzValue","nzLabel"],[2,"width","100%",3,"src"],[1,"m-datatable__pager-nav"],["title","First",1,"m-datatable__pager-link","m-datatable__pager-link--first",3,"ngClass","click"],[1,"la","la-angle-double-left"],["title","Previous",1,"m-datatable__pager-link","m-datatable__pager-link--prev",3,"ngClass","click"],[1,"la","la-angle-left"],[4,"ngFor","ngForOf"],["title","Next",1,"m-datatable__pager-link","m-datatable__pager-link--next",3,"ngClass","click"],[1,"la","la-angle-right"],["title","Last",1,"m-datatable__pager-link","m-datatable__pager-link--last",3,"ngClass","click"],[1,"la","la-angle-double-right"],[1,"m-datatable__pager-link","m-datatable__pager-link-number",3,"ngClass","click"]],template:function(a,T){1&a&&(e.YNc(0,g,15,8,"ng-container",0),e.TgZ(1,"div"),e._UZ(2,"app-slots-table",1),e.qZA()),2&a&&(e.Q6J("ngIf",T.layouts),e.xp6(2),e.Q6J("allowActions",!1)("parkId",T.parkId))},dependencies:[m.mk,m.sg,m.O5,O.Ip,O.Vq,s.JJ,s.On,d.E,D.X$],encapsulation:2}),o})()},11194:(A,M,n)=>{n.d(M,{E:()=>F});var e=n(38014),p=n(79118),P=n(28555),D=n(8929),m=n(17489),d=(n(19612),n(52746)),t=n(94650),_=n(20388),u=n(85265),v=n(34793),U=n(36511),g=n(89383),r=n(36895),o=n(24006),c=n(11917),a=n(40269),T=n(38231),E=n(35635),S=n(66616),y=n(47044),k=n(21811);function Z(h,x){if(1&h&&(t._UZ(0,"nz-option",18),t.ALo(1,"titlecase")),2&h){const l=x.$implicit;t.Q6J("nzValue",l.value)("nzLabel",t.lcZ(1,2,l.value))}}function K(h,x){if(1&h&&(t._UZ(0,"nz-option",18),t.ALo(1,"titlecase")),2&h){const l=x.$implicit;t.Q6J("nzValue",l)("nzLabel",t.lcZ(1,2,l))}}function z(h,x){if(1&h&&(t._UZ(0,"nz-option",18),t.ALo(1,"titlecase")),2&h){const l=x.$implicit;t.Q6J("nzValue",l)("nzLabel",t.lcZ(1,2,l))}}function W(h,x){if(1&h&&t._uU(0),2&h){const l=x.range;t.lnq(" ",l[0],"-",l[1]," of ",x.$implicit," items\n")}}function R(h,x){if(1&h&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&h){const l=x.$implicit;t.xp6(1),t.Oqu(l.text)}}const B=function(h){return[h,"update"]};function N(h,x){if(1&h){const l=t.EpF();t.TgZ(0,"td")(1,"a",20),t._UZ(2,"i",21),t.qZA(),t.TgZ(3,"button",22),t.NdJ("click",function(){t.CHM(l);const C=t.oxw().$implicit,f=t.oxw(),b=t.MAs(44);return t.KtG(f.openModal(b,C.id))}),t._UZ(4,"i",23),t.qZA()()}if(2&h){const l=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(1,B,"../"+l.id))}}function J(h,x){if(1&h&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"titlecase"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"titlecase"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"titlecase"),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.YNc(18,N,5,3,"td",19),t.qZA()),2&h){const l=x.$implicit,i=x.index,C=t.oxw();t.ekj("ant-table-row-odd",i%2==1),t.xp6(2),t.Oqu(l.id),t.xp6(2),t.Oqu(l.code),t.xp6(2),t.Oqu(l.plot),t.xp6(2),t.Oqu(t.lcZ(9,10,l.reservationType)),t.xp6(3),t.Oqu(t.lcZ(12,12,l.status)),t.xp6(3),t.Oqu(t.lcZ(15,14,l.type)),t.xp6(3),t.Oqu(l.vehiclePlateNo),t.xp6(1),t.Q6J("ngIf",C.tableHeaders[7])}}function $(h,x){if(1&h){const l=t.EpF();t.TgZ(0,"confirm-modal",24),t.NdJ("cancel",function(){t.CHM(l);const C=t.oxw();return t.KtG(C.hideModal())})("submit",function(){t.CHM(l);const C=t.oxw();return t.KtG(C.deleteSlot())}),t.qZA()}if(2&h){const l=t.oxw();t.Q6J("options",l.deleteModalOptions)}}const I=[{text:"ID",width:"80px",align:p.iW.Center},{text:"Code",width:"80px"},{text:"Plot",width:"120px"},{text:"Reservation",width:"120px"},{text:"Status",width:"120px"},{text:"Type",width:"120px"},{text:"Vehicle Plate No",width:"150px"}];let F=(()=>{class h extends d.t{constructor(l,i,C,f,b,V,L){super(),this.modalService=l,this.slotService=i,this.router=C,this.route=f,this.codeTablesService=b,this.translate=V,this.store=L,this.allowActions=!0,this.deleteModalOptions={title:"Do you want to delete this slot?",message:"This can not be reverted"},this.vehicleType="",this.RESERVATION_TYPES=e.x5Q,this.reservationType="",this.SLOT_STATUSES=e.n$S,this.slotStatus="",this.keyword="",this.keyword$=new D.xQ,this.alive=!0,this.user$=L.pipe((0,P.Ys)("global"))}get filterParams(){return{carPark:this.carPark.id,type:this.vehicleType,reservationType:this.reservationType,status:this.slotStatus,keyword:this.keyword}}get carPark(){return this.parkId?this.parkId:{id:this.router.url.replace(/[^0-9]/gi,"")}}ngOnInit(){this.tableHeaders=this.allowActions?[...I,{text:"Action",width:"100px"}]:I,this.vehicleTypes$=this.codeTablesService.filterModelByType(e.BcL.VehicleType),this.keyword$.debounceTime(500).subscribe(()=>{this.reloadData()}),this.reloadData();const l=this.tableHeaders.map(i=>i.text);this.translate.get(l).subscribe(i=>{this.tableHeaders.forEach(C=>{for(let f in i)i.hasOwnProperty(f)&&C.text===f&&(C.text=i[f])})}),this.user$.takeWhile(()=>this.alive).subscribe(({user:i})=>{this.viewOnly=(0,m.intersection)([e.i44.ThirdParty,e.i44.Tester,e.i44.Auditor],i.authorities).length>0})}reloadData(){this.reloadDataService(this.slotService,"filterModelByCarPark")}pageChanged(l){this.pagination=l,this.reloadData()}openModal(l,i){this.selectedSlotId=i,this.modalRef=this.modalService.show(l,{class:"modal-dialog-centered"})}hideModal(){this.modalRef.hide()}deleteSlot(){this.slotService.deleteModel(this.selectedSlotId).subscribe(()=>{this.modalRef.hide(),this.reloadData()})}gotoCreate(){this.router.navigate([`${this.router.url}/create`])}}return h.\u0275fac=function(l){return new(l||h)(t.Y36(_.tT),t.Y36(u.K),t.Y36(v.F0),t.Y36(v.gz),t.Y36(U.I),t.Y36(g.sK),t.Y36(P.yh))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-slots-table"]],inputs:{allowActions:"allowActions",parkId:"parkId"},features:[t.qOj],decls:45,vars:32,consts:[[1,"form-group","m-form__group","m-portlet__filters"],[1,"m-portlet__filter"],[1,"col-form-label"],["name","vehicle","nzPlaceHolder","Please Select",2,"width","100%",3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["name","reservation","nzPlaceHolder","Please Select",2,"width","100%",3,"ngModel","ngModelChange"],["nzPlaceHolder","Please Select",2,"width","100%",3,"ngModel","ngModelChange"],[1,"m-input-icon","m-input-icon--left"],["type","text","nz-input","","placeholder","",3,"ngModel","ngModelChange"],[1,"m-portlet__filter",2,"margin-top","10px"],["nz-button","","nzType","primary","nzGhost","","nzShape","round",3,"disabled","click"],[1,"la","la-plus"],["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowSizeChanger","nzShowTotal","nzQueryParams"],["basicTable",""],[4,"ngFor","ngForOf"],[3,"ant-table-row-odd",4,"ngFor","ngForOf"],["deleteConfirm",""],[3,"nzValue","nzLabel"],[4,"ngIf"],[1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","no-border",3,"routerLink"],[1,"la","la-edit"],[1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","no-border",3,"click"],[1,"la","la-close"],[3,"options","cancel","submit"]],template:function(l,i){if(1&l&&(t.TgZ(0,"div",0)(1,"div",1)(2,"label",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div")(6,"nz-select",3),t.NdJ("ngModelChange",function(f){return i.vehicleType=f})("ngModelChange",function(){return i.reloadData()}),t.YNc(7,Z,2,4,"nz-option",4),t.ALo(8,"async"),t.qZA()()(),t.TgZ(9,"div",1)(10,"label",2),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div")(14,"nz-select",5),t.NdJ("ngModelChange",function(f){return i.reservationType=f})("ngModelChange",function(){return i.reloadData()}),t.YNc(15,K,2,4,"nz-option",4),t.qZA()()(),t.TgZ(16,"div",1)(17,"label",2),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"div")(21,"nz-select",6),t.NdJ("ngModelChange",function(f){return i.slotStatus=f})("ngModelChange",function(){return i.reloadData()}),t.YNc(22,z,2,4,"nz-option",4),t.qZA()()(),t.TgZ(23,"div",1)(24,"label",2),t._uU(25," Code / Plot / Vehicle Plate No. "),t.qZA(),t.TgZ(26,"div",7)(27,"input",8),t.NdJ("ngModelChange",function(f){return i.keyword=f})("ngModelChange",function(f){return i.keyword$.next(f)}),t.qZA()()(),t.TgZ(28,"div",9)(29,"button",10),t.NdJ("click",function(){return i.gotoCreate()}),t._UZ(30,"i",11),t.TgZ(31,"span"),t._uU(32),t.ALo(33,"translate"),t.qZA()()()(),t.YNc(34,W,1,3,"ng-template",null,12,t.W1O),t.TgZ(36,"nz-table",13,14),t.NdJ("nzQueryParams",function(f){return i.onQueryParamsChange(f)}),t.TgZ(38,"thead")(39,"tr"),t.YNc(40,R,2,1,"th",15),t.qZA()(),t.TgZ(41,"tbody"),t.YNc(42,J,19,16,"tr",16),t.qZA()(),t.YNc(43,$,1,1,"ng-template",null,17,t.W1O)),2&l){const C=t.MAs(35),f=t.MAs(37);t.xp6(3),t.hij(" ",t.lcZ(4,22,"Type"),": "),t.xp6(3),t.Q6J("ngModel",i.vehicleType),t.xp6(1),t.Q6J("ngForOf",t.lcZ(8,24,i.vehicleTypes$)),t.xp6(4),t.hij(" ",t.lcZ(12,26,"Reservation Type"),": "),t.xp6(3),t.Q6J("ngModel",i.reservationType),t.xp6(1),t.Q6J("ngForOf",i.RESERVATION_TYPES),t.xp6(3),t.hij(" ",t.lcZ(19,28,"Status"),": "),t.xp6(3),t.Q6J("ngModel",i.slotStatus),t.xp6(1),t.Q6J("ngForOf",i.SLOT_STATUSES),t.xp6(5),t.Q6J("ngModel",i.keyword),t.xp6(2),t.Q6J("disabled",i.viewOnly),t.xp6(3),t.hij(" ",t.lcZ(33,30,"Add New Slot")," "),t.xp6(4),t.Q6J("nzData",i.listData)("nzFrontPagination",!1)("nzLoading",i.loading)("nzTotal",i.pagination.totalCount)("nzPageSize",i.pagination.rowsPerPage)("nzPageIndex",i.pagination.page)("nzShowSizeChanger",!0)("nzShowTotal",C),t.xp6(4),t.Q6J("ngForOf",i.tableHeaders),t.xp6(2),t.Q6J("ngForOf",f.data)}},dependencies:[r.sg,r.O5,o.Fj,o.JJ,o.On,v.yS,c.X,a.N8,a.Uo,a._C,a.Om,a.p0,a.$Z,T.Ip,T.Vq,E.Zp,S.ix,y.w,k.dQ,r.Ov,r.rS,g.X$],encapsulation:2}),h})()},15035:(A,M,n)=>{n.d(M,{W8:()=>O});var e=n(21837),p=(()=>((p||(p={})).Med="yyyy-LL-dd",p))();function O(s,d=p.Med){return s?e.ou.fromJSDate(s).toFormat(d):null}},7499:(A,M,n)=>{Object.defineProperty(M,"__esModule",{value:!0});var e=n(77415),p=n(67694);e.Observable.prototype.takeWhile=p.takeWhile},67694:(A,M,n)=>{Object.defineProperty(M,"__esModule",{value:!0});var e=n(41451);M.takeWhile=function p(P){return e.takeWhile(P)(this)}},19612:(A,M,n)=>{n(7499)}}]);