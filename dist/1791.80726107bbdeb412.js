"use strict";(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[1791],{4483:(D,v,c)=>{c.d(v,{y:()=>C}),c(38014);var o=c(3927),_=c(27221),e=c(86181),g=c(94650),E=c(80529),p=c(28555),f=c(91599);let C=(()=>{class l extends o.su{constructor(r,a,s){super(r,a),this.http=r,this.store=a,this.modelName="tenantManagement-ticket",this.baseUrl="carpark/api/card",this.handleError=s.createHandleError(`${this.modelName}Service`)}filterModel(r,a){const s=(0,e.U8)(`${this.baseUrl}/list`,{...r,...(0,e.jq)(a)});return this.get(this.getUrl(s)).pipe((0,_.K)(this.handleError(`${this.modelName}Filter`,{}))).map(n=>Array.isArray(n)?(0,o.eC)(n):(0,o.O7)(n))}getTicketDashboardData(r=""){let a=this.getUrl("carpark/api/card/statisticsStatus");return r&&(a+=`?tenantId=${r}`),this.get(a)}getTenantsDashboardData(r=""){let a=this.getUrl("carpark/api/tenant/statisticsStatus");return r&&(a+=`?tenantId=${r}`),this.get(a)}getTenantDriverDashboardData(r=""){let a=this.getUrl("carpark/api/tenantDriver/getTenantDriverCount");return r&&(a+=`/${r}`),this.get(a)}exportTemplate(){const r=this.getUrl("carpark/api/card/template");return this.get(r,{responseType:"blob"})}importTicket(r){const a=this.getUrl("carpark/api/card/importList");return this.post(a,r)}deleteTicket(r){const a=this.getUrl(`carpark/api/card/deleteByIdList?idList=${r}`);return this.delete(a)}stopUse(r){const a=this.getUrl(`carpark/api/card/deactivate/${r}`);return this.put(a,null)}lostHandle(r){const a=this.getUrl(`carpark/api/card/lost/${r}`);return this.put(a,null)}cancellostHandle(r){const a=this.getUrl(`carpark/api/card/cancelLost/${r}`);return this.put(a,null)}tenantList(){const r=this.getUrl("carpark/api/tenant/list");return this.get(r)}assignTicketToTenant(r){const a=this.getUrl("carpark/api/card/assignTenant");return this.put(a,r)}getTenantsInformation(){const r=this.getUrl("carpark/api/tenant/getMyTenant");return this.get(r)}getTenantDriver(r){const a=this.getUrl(`carpark/api/tenantDriver/getNoCardDriver?tenantId=${r}`);return this.get(a)}getCarsByDriverId(r){const a=this.getUrl(`carpark/api/drivers/${r}/vehicles`);return this.get(a)}postAssignTicket(r){const a=this.getUrl("carpark/api/card/assignDriver");return this.put(a,r)}getDeLinkTicket(r){const a=this.getUrl(`carpark/api/card/deLink/${r}`);return this.put(a,null)}getInfoByTenantDriverId(r){const a=this.getUrl(`carpark/api/tenantDriver/getTenantDriverById/${r}`);return this.get(a)}}return l.\u0275fac=function(r){return new(r||l)(g.LFG(E.eN),g.LFG(p.yh),g.LFG(f.k))},l.\u0275prov=g.Yz7({token:l,factory:l.\u0275fac}),l})()},76916:(D,v,c)=>{c.d(v,{G:()=>a});var u=c(34793),o=c(92198),_=c(38014),e=c(94650),g=c(89383),E=c(60097),p=c(36895);function f(s,n){if(1&s&&(e.TgZ(0,"a",14)(1,"span",15),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&s){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,1,t.label)," ")}}function C(s,n){if(1&s&&(e.TgZ(0,"a",16)(1,"span",15),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&s){const t=e.oxw(),i=t.$implicit,h=t.last,d=e.oxw(2);e.Q6J("routerLink",i.url)("queryParams",h&&d.route.snapshot.queryParams),e.xp6(2),e.hij(" ",e.lcZ(3,3,i.label)," ")}}function l(s,n){if(1&s&&(e.ynx(0),e.TgZ(1,"li",10)(2,"span"),e._uU(3," > "),e.qZA()(),e.TgZ(4,"li",11),e.YNc(5,f,4,3,"a",12),e.YNc(6,C,4,5,"a",13),e.qZA(),e.BQk()),2&s){const t=n.first;e.xp6(5),e.Q6J("ngIf",t),e.xp6(1),e.Q6J("ngIf",!t)}}function m(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3),e._UZ(3,"h3",4),e.TgZ(4,"ul",5)(5,"li",6)(6,"a",7),e.NdJ("click",function(){e.CHM(t);const h=e.oxw();return e.KtG(h.jumpHome())}),e._UZ(7,"i",8),e.qZA()(),e.YNc(8,l,7,2,"ng-container",9),e.qZA()(),e.TgZ(9,"div"),e.Hsn(10),e.qZA()()()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("innerHTML",t.title,e.oJD),e.xp6(5),e.Q6J("ngForOf",t.breads)}}const r=["*"];let a=(()=>{class s{constructor(t,i,h,d){this.router=t,this.route=i,this.translate=h,this._carparkService=d,this.breads=[],this.loginUser=""}ngOnInit(){let t=JSON.parse(localStorage.getItem("user-roles"))[0];this.loginUser=t,console.log(this.loginUser,"\u4fe1\u606f"),this.breads=this.buildBreadCrumb(this.route.root),this.translate.get(this.breads[0].label).subscribe(h=>{this.label=h}),this.router.events.pipe((0,o.h)(h=>h instanceof u.m2)).subscribe(()=>{this.breads=this.buildBreadCrumb(this.route.root)})}buildBreadCrumb(t,i=[""],h=[]){const d=t.snapshot.url[0]&&t.snapshot.url[0].path,y=[...i,d],M={...this.extractBreadcrumb(t),url:y},O=d&&M.label?[...h,M]:h;return this.title=M.title||this.title||"",this.isMotorist&&"My Vehicle(s)"===M.label&&(this.title="My Vehicle(s)"),t.firstChild?d?this.buildBreadCrumb(t.firstChild,y,O):this.buildBreadCrumb(t.firstChild,i,h):(this.translate.get(this.title).subscribe(L=>{this.title=L}),O)}get isMotorist(){return this._carparkService.isMotorist()}extractBreadcrumb(t){return t.snapshot.data.breadcrumb instanceof Function?t.snapshot.data.breadcrumb(t):t.snapshot.data.breadcrumb}jumpHome(){let t=JSON.parse(localStorage.getItem("user-roles"))[0]??"";this.router.navigate(t.length?[_.gpL[t]]:["/"])}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(u.F0),e.Y36(u.gz),e.Y36(g.sK),e.Y36(E.x))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-title-bar"]],ngContentSelectors:r,decls:1,vars:1,consts:[["class","m-subheader",4,"ngIf"],[1,"m-subheader"],[1,"d-flex","align-items-center"],[1,"mr-auto"],[1,"m-subheader__title","m-subheader__title--separator","text-main",3,"innerHTML"],[1,"m-subheader__breadcrumbs","m-nav","m-nav--inline"],[1,"m-nav__item","m-nav__item--home"],[1,"m-nav__link","m-nav__link--icon",3,"click"],[1,"m-nav__link-icon","la","la-home"],[4,"ngFor","ngForOf"],[1,"m-nav__separator"],[1,"m-nav__item"],["class","m-nav__link",4,"ngIf"],["class","m-nav__link",3,"routerLink","queryParams",4,"ngIf"],[1,"m-nav__link"],[1,"m-nav__link-text"],[1,"m-nav__link",3,"routerLink","queryParams"]],template:function(t,i){1&t&&(e.F$t(),e.YNc(0,m,11,2,"div",0)),2&t&&e.Q6J("ngIf","ROLE_TPO_PARTNER"!==i.loginUser)},dependencies:[p.sg,p.O5,u.yS,g.X$],encapsulation:2}),s})()},34984:(D,v,c)=>{c.d(v,{Ns:()=>a,_w:()=>r});var u=c(15861),o=c(94650),_=c(21086),e=c(68896),g=c(8929),E=c(20353),p=c(34202),f=c(66753),C=c(87545);class l{constructor(n){this.changes=n}static of(n){return new l(n)}notEmpty(n){if(this.changes[n]){const t=this.changes[n].currentValue;if(null!=t)return(0,_.of)(t)}return e.E}has(n){return this.changes[n]?(0,_.of)(this.changes[n].currentValue):e.E}notFirst(n){return this.changes[n]&&!this.changes[n].isFirstChange()?(0,_.of)(this.changes[n].currentValue):e.E}notFirstAndEmpty(n){if(this.changes[n]&&!this.changes[n].isFirstChange()){const t=this.changes[n].currentValue;if(null!=t)return(0,_.of)(t)}return e.E}}const m=new o.OlP("NGX_ECHARTS_CONFIG");let r=(()=>{class s{constructor(t,i,h){this.el=i,this.ngZone=h,this.autoResize=!0,this.loadingType="default",this.chartInit=new o.vpe,this.optionsError=new o.vpe,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartPieSelectChanged=this.createLazyEvent("pieselectchanged"),this.chartPieSelected=this.createLazyEvent("pieselected"),this.chartPieUnselected=this.createLazyEvent("pieunselected"),this.chartMapSelectChanged=this.createLazyEvent("mapselectchanged"),this.chartMapSelected=this.createLazyEvent("mapselected"),this.chartMapUnselected=this.createLazyEvent("mapunselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartFocusNodeAdjacency=this.createLazyEvent("focusnodeadjacency"),this.chartUnfocusNodeAdjacency=this.createLazyEvent("unfocusnodeadjacency"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.resize$=new g.xQ,this.echarts=t.echarts}ngOnChanges(t){const i=l.of(t);i.notFirstAndEmpty("options").subscribe(h=>this.onOptionsChange(h)),i.notFirstAndEmpty("merge").subscribe(h=>this.setOption(h)),i.has("loading").subscribe(h=>this.toggleLoading(!!h)),i.notFirst("theme").subscribe(()=>this.refreshChart())}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe((0,f.p)(100,E.z,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(()=>{this.animationFrameID=window.requestAnimationFrame(()=>this.resize$.next())})),this.resizeOb.observe(this.el.nativeElement))}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(t){this.chart&&(t?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading())}setOption(t,i){if(this.chart)try{this.chart.setOption(t,i)}catch(h){console.error(h),this.optionsError.emit(h)}}refreshChart(){var t=this;return(0,u.Z)(function*(){t.dispose(),yield t.initChart()})()}createChart(){const t=this.el.nativeElement;if(window&&window.getComputedStyle){const i=window.getComputedStyle(t,null).getPropertyValue("height");(!i||"0px"===i)&&(!t.style.height||"0px"===t.style.height)&&(t.style.height="400px")}return this.ngZone.runOutsideAngular(()=>("function"==typeof this.echarts?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:h})=>h(t,this.theme,this.initOpts)))}initChart(){var t=this;return(0,u.Z)(function*(){yield t.onOptionsChange(t.options),t.merge&&t.chart&&t.setOption(t.merge)})()}onOptionsChange(t){var i=this;return(0,u.Z)(function*(){!t||(i.chart||(i.chart=yield i.createChart(),i.chartInit.emit(i.chart)),i.setOption(i.options,!0))})()}createLazyEvent(t){return this.chartInit.pipe((0,C.w)(i=>new p.y(h=>(i.on(t,d=>this.ngZone.run(()=>h.next(d))),()=>{this.chart&&(this.chart.isDisposed()||i.off(t))}))))}}return s.\u0275fac=function(t){return new(t||s)(o.Y36(m),o.Y36(o.SBq),o.Y36(o.R0b))},s.\u0275dir=o.lG2({type:s,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",loading:"loading",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartPieSelectChanged:"chartPieSelectChanged",chartPieSelected:"chartPieSelected",chartPieUnselected:"chartPieUnselected",chartMapSelectChanged:"chartMapSelectChanged",chartMapSelected:"chartMapSelected",chartMapUnselected:"chartMapUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartFocusNodeAdjacency:"chartFocusNodeAdjacency",chartUnfocusNodeAdjacency:"chartUnfocusNodeAdjacency",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],features:[o.TTD]}),s})(),a=(()=>{class s{static forRoot(t){return{ngModule:s,providers:[{provide:m,useValue:t}]}}static forChild(){return{ngModule:s}}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=o.oAB({type:s}),s.\u0275inj=o.cJS({}),s})()}}]);