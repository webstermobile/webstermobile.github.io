"use strict";(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[2693],{70362:(N,C,o)=>{o.d(C,{X:()=>S});var d=o(36895),g=o(24006),_=o(34793),T=o(372),m=o(60097),b=o(4666),Z=o(30329),w=o(21532),x=o(88796),y=o(59245),M=o(89518),t=o(36511),v=o(80529),h=o(89383),A=o(19832),u=o(34984),O=o(32521),c=o(29252),p=o(67556),f=o(94650);function E(r){return new A.w(r,"../assets/i18n/",".json")}let S=(()=>{class r{}return r.\u0275fac=function(U){return new(U||r)},r.\u0275mod=f.oAB({type:r}),r.\u0275inj=f.cJS({providers:[b.p,m.x,t.I,p.z$],imports:[d.ez,g.u5,_.Bz,w.x,Z.D,T.kn,y.mr,x.A0,M.H3,u.Ns.forRoot({echarts:()=>o.e(4734).then(o.bind(o,14734))}),O.u3,c.E7,h.aw.forChild({loader:{provide:h.Zw,useFactory:E,deps:[v.eN]}})]}),r})()},11415:(N,C,o)=>{o.d(C,{t:()=>ht});var d=o(38014),g=o(79118),_=o(86181),T=o(15035),m=o(8929),b=o(1059),Z=o(80013),w=o(75778),x=o(2994),y=o(87545),M=o(72986),t=o(94650),v=o(4666),h=o(60097),A=o(36511),u=o(89383),O=o(67556),c=o(36895),p=o(24006),f=o(88796),E=o(89518),S=o(34984),r=o(17489),D=o(94327),U=o(15439),L=o(34793),J=o(71942),K=o(70853),$=o(40269),B=o(59245),Y=o(53033);function R(a,l){if(1&a&&(t.TgZ(0,"td",5)(1,"span"),t._uU(2),t.qZA()()),2&a){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Udp("width",n.setTableContent("station").width),t.xp6(1),t.hij(" ",(null==e?null:e.station)||"Kranji"," ")}}function Q(a,l){if(1&a&&(t.TgZ(0,"td",5)(1,"span"),t._uU(2),t.qZA()()),2&a){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Udp("width",n.setTableContent("lot").width),t.xp6(1),t.hij(" ",null==e?null:e.lot," ")}}function j(a,l){if(1&a&&(t.TgZ(0,"td",5)(1,"span"),t._uU(2),t.qZA()()),2&a){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Udp("width",n.setTableContent("chargerId").width),t.xp6(1),t.hij(" ",(null==e?null:e.chargerId)||"-"," ")}}function H(a,l){if(1&a&&(t.TgZ(0,"td",5)(1,"span"),t._uU(2),t.qZA()()),2&a){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Udp("width",n.setTableContent("connector").width),t.xp6(1),t.hij(" ",(null==e?null:e.connector)||"-"," ")}}function W(a,l){if(1&a&&(t.TgZ(0,"td",5)(1,"span"),t._uU(2),t.qZA()()),2&a){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Udp("width",n.setTableContent("busPlateNo").width),t.xp6(1),t.hij(" ",(null==e?null:e.carPlateNo)||"-"," ")}}function F(a,l){if(1&a&&(t.TgZ(0,"td",5)(1,"span"),t._uU(2),t.qZA()()),2&a){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Udp("width",n.setTableContent("model").width),t.xp6(1),t.hij(" ",(null==e?null:e.model)||"BYD K9"," ")}}const G=function(a){return{"background-color":a}};function z(a,l){if(1&a&&(t.TgZ(0,"td",5)(1,"span"),t._UZ(2,"span",11),t._uU(3),t.qZA()()),2&a){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Udp("width",n.setTableContent("status").width),t.xp6(1),t.Q6J("ngStyle",t.VKq(4,G,n.statusColor(e.status))),t.xp6(1),t.hij(" ",null==e?null:e.status," ")}}const V=function(a){return{color:a}};function X(a,l){if(1&a&&(t.TgZ(0,"td",5)(1,"span",12),t._uU(2),t.qZA()()),2&a){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Udp("width",n.setTableContent("soc").width),t.Q6J("ngStyle",t.VKq(4,V,n.setSocColor(e.soc))),t.xp6(1),t.hij(" ",null==e?null:e.soc," ")}}function q(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"span",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.download(i))}),t.TgZ(1,"span"),t._UZ(2,"i",19),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&a&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"Download Receipt")))}function k(a,l){if(1&a&&(t.TgZ(0,"ul",13)(1,"li",14)(2,"span",15)(3,"span"),t._UZ(4,"i",16),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.YNc(8,q,6,3,"span",17),t.qZA()()),2&a){const e=t.oxw(2);t.xp6(6),t.Oqu(t.lcZ(7,2,"Edit Transaction")),t.xp6(2),t.Q6J("ngIf",e.downloadRole())}}function tt(a,l){if(1&a&&(t.YNc(0,R,3,3,"td",4),t.YNc(1,Q,3,3,"td",4),t.YNc(2,j,3,3,"td",4),t.YNc(3,H,3,3,"td",4),t.YNc(4,W,3,3,"td",4),t.YNc(5,F,3,3,"td",4),t.YNc(6,z,4,6,"td",4),t.YNc(7,X,3,6,"td",4),t.TgZ(8,"td",5)(9,"span"),t._uU(10),t.qZA()(),t.TgZ(11,"td",5)(12,"span"),t._uU(13),t.qZA()(),t.TgZ(14,"td",5)(15,"span"),t._uU(16),t.qZA()(),t.TgZ(17,"td",5)(18,"span"),t._uU(19),t.qZA()(),t.TgZ(20,"td",5)(21,"span"),t._uU(22),t.qZA()(),t.TgZ(23,"td",5)(24,"span"),t._uU(25),t.qZA()(),t.TgZ(26,"td",5)(27,"span"),t._uU(28),t.qZA()(),t.TgZ(29,"td",6)(30,"span")(31,"div",7)(32,"button",8),t._UZ(33,"i",9),t.qZA(),t.YNc(34,k,9,4,"ul",10),t.qZA()()()),2&a){const e=l.$implicit,n=t.oxw();t.Q6J("ngIf",n.setTableContent("station").show),t.xp6(1),t.Q6J("ngIf",n.setTableContent("lot").show),t.xp6(1),t.Q6J("ngIf",n.setTableContent("chargerId").show),t.xp6(1),t.Q6J("ngIf",n.setTableContent("connector").show),t.xp6(1),t.Q6J("ngIf",n.setTableContent("busPlateNo").show),t.xp6(1),t.Q6J("ngIf",n.setTableContent("model").show),t.xp6(1),t.Q6J("ngIf",n.setTableContent("status").show),t.xp6(1),t.Q6J("ngIf",n.setTableContent("soc").show),t.xp6(2),t.Udp("width",n.setTableContent("entryDateTime").width),t.xp6(1),t.hij(" ",null==e?null:e.startTime," "),t.xp6(2),t.Udp("width",n.setTableContent("startSoc").width),t.xp6(1),t.hij(" ",(null==e?null:e.startSoc)||"-"," "),t.xp6(2),t.Udp("width",n.setTableContent("endTime").width),t.xp6(1),t.hij(" ",e.endTime," "),t.xp6(2),t.Udp("width",n.setTableContent("duration").width),t.xp6(1),t.hij(" ",e.duration||0," "),t.xp6(2),t.Udp("width",n.setTableContent("timeLeft").width),t.xp6(1),t.hij(" ",e.timeLeft," "),t.xp6(2),t.Udp("width",n.setTableContent("power").width),t.xp6(1),t.hij(" ","0.07"," KWH "),t.xp6(2),t.Udp("width",n.setTableContent("maxTemp").width),t.xp6(1),t.hij(" ",(null==e?null:e.maxTemp)||"-"," "),t.xp6(2),t.Udp("width",n.setTableContent("Action").width)}}function et(a,l){if(1&a&&(t._UZ(0,"td",5),t.TgZ(1,"td",5)(2,"div",20)(3,"div",21),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",22),t._uU(7),t.ALo(8,"excurrency"),t.qZA()(),t.TgZ(9,"div",20)(10,"div",21),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",22),t._uU(14),t.ALo(15,"excurrency"),t.qZA()(),t.TgZ(16,"div",20)(17,"div",21),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"div",22),t._uU(21),t.ALo(22,"excurrency"),t.qZA()()()),2&a){const e=l.$implicit;t.xp6(4),t.hij(" ",t.lcZ(5,6,"Calculation Cost")," "),t.xp6(3),t.hij(" ",t.xi3(8,8,(null==e.chargeSummary||null==e.chargeSummary.calculation?null:e.chargeSummary.calculation.amount)||0,null==e.chargeSummary||null==e.chargeSummary.calculation?null:e.chargeSummary.calculation.currency)," "),t.xp6(4),t.hij(" ",t.lcZ(12,11,"Promotions")," "),t.xp6(3),t.hij(" ",t.xi3(15,13,(null==e.chargeSummary||null==e.chargeSummary.promotion?null:e.chargeSummary.promotion.amount)||0,null==e.chargeSummary||null==e.chargeSummary.promotion?null:e.chargeSummary.promotion.currency)," "),t.xp6(4),t.hij(" ",t.lcZ(19,16,"Amount to Pay")," "),t.xp6(3),t.hij(" ",t.xi3(22,18,(null==e.chargeSummary||null==e.chargeSummary.total?null:e.chargeSummary.total.amount)||0,null==e.chargeSummary||null==e.chargeSummary.total?null:e.chargeSummary.total.currency)," ")}}const P=[{text:"Station",column:"station",width:"120px"},{text:"Lot",column:"lot",width:"80px"},{text:"Charger ID",column:"chargerId",width:"100px"},{text:"Connector",column:"connector",width:"100px"},{text:"Vehicle No.",column:"busPlateNo",width:"120px"},{text:"Model",column:"model",width:"120px"},{text:"Status",column:"status",width:"180px"},{text:"SOC%",column:"soc",width:"80px"},{text:"Start Time",column:"entryDateTime",width:"120px"},{text:"Start SOC%",column:"startSoc",width:"100px"},{text:"End Time",column:"endTime",width:"100px"},{text:"Duration(mins)",column:"duration",width:"80px"},{text:"Time Left(mins)",column:"timeLeft",width:"80px"},{text:"Power(kWh)",column:"power",width:"100px"},{text:"Max Temp(\u2103)",column:"maxTemp",width:"100px"}],nt=[...P,{text:"Action",width:"60px"}];let at=(()=>{class a{constructor(e,n,i,s,I,gt){this.router=e,this.translate=n,this.carparkService=i,this.vehicleService=s,this.transactionService=I,this.busService=gt,this.loading=!1,this.pageChange=new t.vpe,this.pagination=(0,_.f$)(),this.data=[],this.transactionData=[],this.tableHeaders=nt,this.setTableHeaders()}vehicleTypeLogo(e){return d.php.filter(n=>n.value===e.vehicle.vehicleType).map(n=>n.icon)[0]}getStatusOption(e,n){const i=d.EKt.filter(s=>s.value===e.status).map(s=>s[n]);return i.length>0?i[0]:(0,r.capitalize)(e.status)}getTransactionType(e){return d.L0I.find(n=>n.value===e)}getTransactionTypeString(e){return"openParking"===e||"Open Parking"===e?"Hourly Parking":e}pageChanged(e){this.pagination=e,this.pageChange.emit(this.pagination)}ngOnInit(){this.getHardCode();const e=this.tableHeaders.map(n=>n.text);this.translate.get(e).subscribe(n=>{this.tableHeaders.forEach(i=>{for(let s in n)n.hasOwnProperty(s)&&i.text===s&&(i.text=n[s])})}),this.isExtended&&(this.tableHeaders=[{text:"",width:"30px"},...P])}ngOnChanges(e){}get isOwner(){return this.carparkService.isOwner()}get isOperator(){return this.vehicleService.isOperator()}get isAdmin(){return this.carparkService.isAdmin()}get notOwnerAndOperator(){return!this.isOwner}get isMotorist(){return this.carparkService.isMotorist()}downloadRole(){return this.isMotorist||this.isAdmin||this.isOperator}download(e){const n=`${e.vehicle.vehicleNumber}_${U(e.endTime).format("YYYYMMDD_HH_mm")}`;this.transactionService.getFile(e.id).subscribe(i=>{(0,D.saveAs)(i,`${n}`)})}setTableHeaders(){this.isMotorist?this.tableHeaders=this.tableHeaders.filter(e=>"iuNumber"!==e.column):this.notOwnerAndOperator||(this.tableHeaders=P)}setTableContent(e){let n={width:null,show:!1};const i=this.tableHeaders.filter(s=>s.column===e);return i.length&&(n={width:i[0].width,show:!0}),n}setData(e){const n={0:"Charging",1:"Completed",2:"Vehicle suspended",3:"Charger suspended",4:"Operator suspended",5:"Unavailable"};return e.map(i=>({...i,soc:Math.floor(101*Math.random()),timeLeft:Math.floor(101*Math.random()),lot:Math.floor(500*Math.random()),status:n[Math.floor(6*Math.random())]}))}statusColor(e){return{Charging:"#00b0f0",Completed:"#00b050","Vehicle suspended":"#ff0000","Charger suspended":"#ff0000","Operator suspended":"#ff0000",Unavailable:"#595959"}[e]||"#fff"}getHardCode(){this.busService.getTransactionData().subscribe(e=>{this.transactionData=e.overview})}setSocColor(e){return Number(e)>90?"#00b050":"#e79277"}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(L.F0),t.Y36(u.sK),t.Y36(h.x),t.Y36(J.f),t.Y36(v.p),t.Y36(K.Z))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-bus-transactions-datatable"]],inputs:{isExtended:"isExtended",loading:"loading",pagination:"pagination",data:"data"},outputs:{pageChange:"pageChange"},features:[t.TTD],decls:6,vars:4,consts:[[3,"headers","items","loading","scrollingDisabled"],["tableTransactions",""],["rowTemplate",""],["expandTemplate",""],["class","m-datatable__cell",4,"ngIf"],[1,"m-datatable__cell"],[1,"m-datatable__cell","action-cell"],["dropdown","","placement","bottom right"],["dropdownToggle","",1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--outline-2x","m-btn--pill","no-border"],[1,"la","la-ellipsis-h"],["class","dropdown-menu dropdown-menu-right","role","menu",4,"dropdownMenu"],[1,"status-circle","transaction-status-circle","mr-1",3,"ngStyle"],[3,"ngStyle"],["role","menu",1,"dropdown-menu","dropdown-menu-right"],["role","menuitem"],[1,"dropdown-item","m--font-metal"],[1,"la","la-edit"],["class","dropdown-item","style","cursor: pointer;",3,"click",4,"ngIf"],[1,"dropdown-item",2,"cursor","pointer",3,"click"],[1,"la","la-cloud-download"],[1,"row"],[1,"col-3","col-md-2","m-font-weight-500"],[1,"col"]],template:function(e,n){1&e&&(t.TgZ(0,"app-datatable",0,1),t.YNc(2,tt,35,31,"ng-template",null,2,t.W1O),t.YNc(4,et,23,21,"ng-template",null,3,t.W1O),t.qZA()),2&e&&t.Q6J("headers",n.tableHeaders)("items",n.transactionData)("loading",n.loading)("scrollingDisabled",!0)},dependencies:[c.O5,c.PC,$.Uo,g.nE,B.Hz,B.Mq,B.TO,Y.Z,u.X$],encapsulation:2}),a})();const ot=["filterTemplate"];function it(a,l){if(1&a&&(t.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6),t._UZ(5,"div",7),t.qZA()()()(),t.TgZ(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",8),t._UZ(11,"div",7),t.qZA()()()()()()),2&a){const e=t.oxw();t.xp6(5),t.Q6J("options",e.energyCostChargedOption),t.xp6(6),t.Q6J("options",e.energyCostOption)}}function st(a,l){}function lt(a,l){if(1&a&&(t.TgZ(0,"div"),t.ynx(1),t.YNc(2,st,0,0,"ng-template",9),t.BQk(),t.qZA()),2&a){const e=t.oxw();t.xp6(2),t.Q6J("ngTemplateOutlet",e.filterTemplate)}}function rt(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"div",12)(1,"label",17),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",18)(5,"input",19),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw(3);return t.KtG(s.vehicle=i)})("ngModelChange",function(i){t.CHM(e);const s=t.oxw(3);return t.KtG(s.vehicle$.next(i))}),t.qZA(),t.TgZ(6,"span",20)(7,"span"),t._UZ(8,"i",21),t.qZA()()()()}if(2&a){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,2,"Vehicle No."),": "),t.xp6(3),t.Q6J("ngModel",e.vehicle)}}function ct(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"div",12)(1,"label",17),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",18)(5,"input",19),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw(3);return t.KtG(s.iuNumber=i)})("ngModelChange",function(i){t.CHM(e);const s=t.oxw(3);return t.KtG(s.iuNumber$.next(i))}),t.qZA(),t.TgZ(6,"span",20)(7,"span"),t._UZ(8,"i",21),t.qZA()()()()}if(2&a){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,2,"Model"),": "),t.xp6(3),t.Q6J("ngModel",e.iuNumber)}}function dt(a,l){if(1&a&&(t.TgZ(0,"option",26),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&a){const e=l.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",t.lcZ(2,2,e.value)," ")}}function pt(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"div",22)(1,"label",13),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div")(5,"select",23),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw(3);return t.KtG(s.vehicleType=i)})("ngModelChange",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.reloadData())}),t.TgZ(6,"option",24),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.YNc(9,dt,3,4,"option",25),t.ALo(10,"async"),t.qZA()()()}if(2&a){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,4,"Status"),": "),t.xp6(3),t.Q6J("ngModel",e.vehicleType),t.xp6(2),t.Oqu(t.lcZ(8,6,"All")),t.xp6(2),t.Q6J("ngForOf",t.lcZ(10,8,e.vehicleTypes$))}}function ut(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"div")(1,"div",11)(2,"div",12)(3,"label",13),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div")(7,"ng-select",14),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw(2);return t.KtG(s.carParkId=i)})("change",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.reloadData())}),t.ALo(8,"async"),t.qZA()()(),t.YNc(9,rt,9,4,"div",15),t.YNc(10,ct,9,4,"div",15),t.YNc(11,pt,11,10,"div",16),t.qZA()()}if(2&a){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.lcZ(5,8,"Station"),": "),t.xp6(3),t.Q6J("items",t.lcZ(8,10,e.carParks$))("ngModel",e.carParkId)("typeahead",e.carParkInput$)("loading",e.carParkLoading),t.xp6(2),t.Q6J("ngIf",!e.isMotorist),t.xp6(1),t.Q6J("ngIf",!e.isMotorist),t.xp6(1),t.Q6J("ngIf",!e.isMotorist)}}function mt(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"div"),t.YNc(1,ut,12,12,"div",1),t.TgZ(2,"app-bus-transactions-datatable",10),t.NdJ("pageChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.pageChanged(i))}),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isExtended),t.xp6(1),t.Q6J("data",e.data)("loading",e.loading)("pagination",e.pagination)}}let ht=(()=>{class a extends g.Gw{constructor(e,n,i,s,I){super(),this.transactionService=e,this.carParkService=n,this.codeTablesService=i,this.translate=s,this.evcService=I,this.isShowChart=!0,this.vehiclePlateNo="",this.loading=!1,this.vehicleType="",this.status="",this.type="",this.timeRange=[],this.vehicle$=new m.xQ,this.iuNumber$=new m.xQ,this.carParkInput$=new m.xQ,this.pagination=(0,_.f$)(),this.data=[]}getEnergyCostChargedOption(){const e=["Normal","Emergency Stop","Stopped Vehicle","Reboot","Charging Station Stopped","Others","On-going"];this.energyCostChargedOption={title:{text:"Type of charges"},legend:{orient:"vertical",right:10,top:10},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c}$ ({d}%)",textStyle:{fontFamily:"Poppins"}},series:[{name:"Sources of Charging",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:30,name:e[0]},{value:21,name:e[1]},{value:22,name:e[2]},{value:25,name:e[3]},{value:20,name:e[4]},{value:25,name:e[3]},{value:20,name:e[4]}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},normal:{label:{textStyle:{fontFamily:"Poppins"}}}},label:{normal:{show:!1,position:"inside",formatter:"{b} : {c}$ ({d}%)"}}}]}}getEnergyCostOption(){const e=[];for(let n=0;n<23;n++)e.push(`${n+1}:00`);e.push("00:00"),this.energyCostOption={title:{text:"Energy Consumption by Source (kWh)"},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{data:["Grid","BSS"],bottom:0},xAxis:[{type:"category",data:e,axisPointer:{type:"shadow"}}],yAxis:[{type:"value"}],series:[{name:"Grid",type:"bar",stack:"analyze",data:[200,200,150,100,150,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,200],itemStyle:{color:"#5c98d0"}},{name:"BSS",type:"bar",stack:"analyze",data:[400,400,500,400,300,0,0,0,0,0,200,240,0,0,0,0,0,0,0,0,0,0,0,500],itemStyle:{color:"#e27830"}}]}}get filterParams(){return{vehicle:this.vehicle,iuNumber:this.iuNumber,carPark:this.carParkId,vehicleType:this.vehicleType,status:this.status,type:this.type,from:this.timeRange[0]&&(0,T.W8)(this.timeRange[0]),to:this.timeRange[1]&&(0,T.W8)(this.timeRange[1]),sort:"entryDateTime,desc"}}reloadData(){this.reloadDataService(this.transactionService)}pageChanged(e){this.pagination=e,this.reloadData()}ngOnInit(){this.vehicle$.debounceTime(500).subscribe(()=>{this.reloadData()}),this.iuNumber$.debounceTime(500).subscribe(()=>{this.reloadData()}),this.reloadData(),this.carParks$=this.carParkInput$.pipe((0,b.O)(""),(0,Z.b)(200),(0,w.x)(),(0,x.b)(()=>this.carParkLoading=!0),(0,y.w)(e=>this.carParkService.getSimpleList(e).pipe((0,x.b)(()=>this.carParkLoading=!1)))),this.vehicleTypes$=this.codeTablesService.filterModelByType(d.BcL.VehicleType).pipe((0,M.q)(1)),this.statuses$=this.codeTablesService.filterModelByType(d.BcL.ParkingStatus),this.types$=this.codeTablesService.filterModelByType(d.BcL.ParkingType),this.getEnergyCostChargedOption(),this.getEnergyCostOption()}get isMotorist(){return this.carParkService.isMotorist()}get isEvOwner(){return this.evcService.isEvOwner()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(v.p),t.Y36(h.x),t.Y36(A.I),t.Y36(u.sK),t.Y36(O.z$))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-bus-transactions-table"]],contentQueries:function(e,n,i){if(1&e&&t.Suo(i,ot,5),2&e){let s;t.iGM(s=t.CRH())&&(n.filterTemplate=s.first)}},inputs:{isExtended:"isExtended",isShowChart:"isShowChart"},features:[t.qOj],decls:3,vars:3,consts:[["class","row general-statistics",4,"ngIf"],[4,"ngIf"],[1,"row","general-statistics"],[1,"col-lg-6","m--padding-right-10"],[1,"m-portlet"],[1,"m-portlet__body"],[1,"stats-chart-container"],["echarts","",1,"demo-chart",3,"options"],[1,"col-10"],[3,"ngTemplateOutlet"],[3,"data","loading","pagination","pageChange"],[1,"form-group","m-form__group","m-portlet__filters","row"],[1,"m-portlet__filter","col-3"],[1,"col-form-label"],["placeholder","","bindLabel","name","bindValue","id",3,"items","ngModel","typeahead","loading","ngModelChange","change"],["class","m-portlet__filter col-3",4,"ngIf"],["class","m-portlet__filter",4,"ngIf"],[1,"col-form-label","col-form-label-nowrap"],[1,"m-input-icon","m-input-icon--left"],["type","text","placeholder","",1,"form-control","m-input",3,"ngModel","ngModelChange"],[1,"m-input-icon__icon","m-input-icon__icon--left"],[1,"la","la-search"],[1,"m-portlet__filter"],["name","vehicleType",1,"form-control","m-input",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,n){1&e&&(t.YNc(0,it,12,2,"div",0),t.YNc(1,lt,3,1,"div",1),t.YNc(2,mt,3,4,"div",1)),2&e&&(t.Q6J("ngIf",n.isShowChart&&!n.isEvOwner),t.xp6(1),t.Q6J("ngIf",n.filterTemplate),t.xp6(1),t.Q6J("ngIf",!n.filterTemplate))},dependencies:[c.sg,c.O5,c.tP,p.YN,p.Kr,p.Fj,p.EJ,p.JJ,p.On,f.w9,E.Bp,S._w,at,c.Ov,c.rS,u.X$],encapsulation:2}),a})()}}]);