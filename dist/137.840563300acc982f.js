(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[137,9226],{64050:(S,y,a)=>{"use strict";a.d(y,{F:()=>u}),a(38014);var C=a(3927),o=a(21086),v=a(27221),U=a(24850),t=a(26245),x=a(94650),b=a(80529),A=a(28555),h=a(91599);let u=(()=>{class g extends C.su{constructor(c,s,p){super(c,s),this.http=c,this.store=s,this.modelName="Driver",this.baseUrl="api/drivers",this.handleError=p.createHandleError(`${this.modelName}Service`)}getDriversSimpleList(c,s){const p=(0,t.U8)(`${this.baseUrl}`,{...c,...(0,t.jq)(s)});return this.get(this.getUrl(p)).pipe((0,v.K)(()=>(0,o.of)([]))).map(_=>Array.isArray(_)?(0,C.eC)(_):(0,C.O7)(_))}getModel(c){const s=this.getUrl(`api/users/${c}`);return this.get(s).map(p=>({...p,mobile:p.mobile||{},address:p.address||{}}))}createModel(c){const s=this.getUrl("api/register");return this.post(s,c)}updateModel(c){const s=this.getUrl("api/users/");return this.put(s,c)}deleteModel(c){const s=this.getUrl(`api/users/${c}`);return this.delete(s)}searchModel(c){const s=this.getUrl(`carpark/api/drivers/filter/${c||""}`);return this.get(s).pipe((0,U.U)(p=>p.content),(0,v.K)(()=>(0,o.of)([])))}getByCode(c){const s=this.getUrl(`carpark/api/drivers/${c}`);return this.get(s).pipe((0,v.K)(()=>(0,o.of)({})))}createModelApplication(c){const s=this.getUrl(`carpark/api/drivers/${c.driverCode}/seasons/applications`);return this.post(s,c)}getSimpleList(){return this.get(this.getUrl("carpark/api/drivers/simple-drivers-list"))}getEnforcementList(){return this.get(this.getUrl("carpark/api/drivers/enforcement"))}createAccount(c,s){const p=this.getUrl("api/register");return this.post(p,{hpNumber:c,password:s})}activeAccount(c,s){const p=this.getUrl("api/account/SMS_activate");return this.post(p,{hpNumber:c,key:s})}getBatchUser(c){return this.get(this.getUrl(`carpark/api/batch/user/info?status=${c}&size=99999`))}putBatchUser(c,s,p){const _=this.getUrl("carpark/api/batch/user/info");return this.put(_,{id:c,status:s,remarks:p})}}return g.\u0275fac=function(c){return new(c||g)(x.LFG(b.eN),x.LFG(A.yh),x.LFG(h.k))},g.\u0275prov=x.Yz7({token:g,factory:g.\u0275fac}),g})()},4666:(S,y,a)=>{"use strict";a.d(y,{p:()=>g}),a(38014);var C=a(3927),o=a(26245),v=a(27221),U=a(66708),t=a(94650),x=a(60097),b=a(93764),A=a(80529),h=a(28555),u=a(91599);let g=(()=>{class l extends C.su{constructor(s,p,_,f,Z){super(_,f),this.carparkService=s,this.condoService=p,this.http=_,this.store=f,this.modelName="Transaction",this.handleError=Z.createHandleError(`${this.modelName}Service`)}ngOnInit(){}handleDynamicUrl(){const s=JSON.parse(localStorage.getItem("user")).login;this.baseUrl=this.carparkService.isMotorist()&&U.Z.isNotNull(s)?`carpark/api/drivers/${s}/transactions`:this.condoService.isCondoOwner()?"carpark/api/working-sessions/transactions":"carpark/api/car-parks/transactions"}filterModel(s,p){return this.handleDynamicUrl(),super.filterModel(s,p).map(_=>_.data?_:{data:[],pagination:(0,o.f$)()})}fetchAbnormalTransactions(s,p){const _=(0,o.U8)("carpark/api/car-parks/transactions/abnormal",{...s,...(0,o.jq)(p)});return this.get(this.getUrl(_)).map(C.O7)}fetchAbnormalTransaction(s){return this.get(this.getUrl(`carpark/api/parking-transactions/${s}`))}verifyAbnormalTransaction(s){return this.post(this.getUrl(`carpark/api/parking-transactions/${s.id}/update`),s)}filterByVehicle(s,p){const _=this.getUrl((0,o.U8)(`carpark/api/parking-transactions/plateNo/${s}`,{...(0,o.jq)(p)}));return this.get(_).pipe((0,v.K)(this.handleError(`${this.modelName}Filter`,{}))).map(f=>Array.isArray(f)?(0,C.eC)(f):(0,C.O7)(f))}createModel(s){const p=this.getUrl("carpark/api/parking-transactions-entry");return this.post(p,s)}closeTransactions(s){const p=this.getUrl(`carpark/api/close/working-sessions/${s}`);return this.put(p,null)}getFile(s){const p=this.getUrl(`carpark/api/printTransactionReceipt/pdf/parking_transaction/${s}`);return this.get(p,{responseType:"blob"})}findIndentByPage(s,p){const _=this.getUrl(`scp-app-ordermanagement/chargepile/findIndentByPage/${p.rowsPerPage}/${p.page}`);return this.post(_,s)}exportExcellist(s,p){const _=this.getUrl("scp-app-ordermanagement/chargepile/exportFindIndent");return this.post(_,s,{responseType:"blob"})}exportExcelDetail(s,p){const _=this.getUrl("scp-app-ordermanagement/chargepile/export/detail");return this.post(_,s,{responseType:"blob"})}exportCondoOwnerExcel(s){const p=(0,o.U8)("carpark/api/working-sessions/exportParkingTransaction",{...s});return this.get(this.getUrl(p),{responseType:"blob"})}}return l.\u0275fac=function(s){return new(s||l)(t.LFG(x.x),t.LFG(b.p),t.LFG(A.eN),t.LFG(h.yh),t.LFG(u.k))},l.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac}),l})()},76916:(S,y,a)=>{"use strict";a.d(y,{G:()=>g});var M=a(34793),C=a(92198),o=a(94650),v=a(89383),U=a(60097),t=a(36895);function x(l,c){if(1&l&&(o.TgZ(0,"a",14)(1,"span",15),o._uU(2),o.ALo(3,"translate"),o.qZA()()),2&l){const s=o.oxw().$implicit;o.xp6(2),o.hij(" ",o.lcZ(3,1,s.label)," ")}}function b(l,c){if(1&l&&(o.TgZ(0,"a",16)(1,"span",15),o._uU(2),o.ALo(3,"translate"),o.qZA()()),2&l){const s=o.oxw(),p=s.$implicit,_=s.last,f=o.oxw(2);o.Q6J("routerLink",p.url)("queryParams",_&&f.route.snapshot.queryParams),o.xp6(2),o.hij(" ",o.lcZ(3,3,p.label)," ")}}function A(l,c){if(1&l&&(o.ynx(0),o.TgZ(1,"li",10)(2,"span"),o._uU(3," > "),o.qZA()(),o.TgZ(4,"li",11),o.YNc(5,x,4,3,"a",12),o.YNc(6,b,4,5,"a",13),o.qZA(),o.BQk()),2&l){const s=c.first;o.xp6(5),o.Q6J("ngIf",s),o.xp6(1),o.Q6J("ngIf",!s)}}function h(l,c){if(1&l&&(o.TgZ(0,"div",1)(1,"div",2)(2,"div",3),o._UZ(3,"h3",4),o.TgZ(4,"ul",5)(5,"li",6)(6,"a",7),o._UZ(7,"i",8),o.qZA()(),o.YNc(8,A,7,2,"ng-container",9),o.qZA()(),o.TgZ(9,"div"),o.Hsn(10),o.qZA()()()),2&l){const s=o.oxw();o.xp6(3),o.Q6J("innerHTML",s.title,o.oJD),o.xp6(5),o.Q6J("ngForOf",s.breads)}}const u=["*"];let g=(()=>{class l{constructor(s,p,_,f){this.router=s,this.route=p,this.translate=_,this._carparkService=f,this.breads=[],this.loginUser=""}ngOnInit(){let s=JSON.parse(localStorage.getItem("user-roles"))[0];this.loginUser=s,console.log(this.loginUser,"\u4fe1\u606f"),this.breads=this.buildBreadCrumb(this.route.root),this.translate.get(this.breads[0].label).subscribe(_=>{this.label=_}),this.router.events.pipe((0,C.h)(_=>_ instanceof M.m2)).subscribe(()=>{this.breads=this.buildBreadCrumb(this.route.root)})}buildBreadCrumb(s,p=[""],_=[]){const f=s.snapshot.url[0]&&s.snapshot.url[0].path,Z=[...p,f],T={...this.extractBreadcrumb(s),url:Z},O=f&&T.label?[..._,T]:_;return this.title=T.title||this.title||"",this.isMotorist&&"My Vehicle(s)"===T.label&&(this.title="My Vehicle(s)"),s.firstChild?f?this.buildBreadCrumb(s.firstChild,Z,O):this.buildBreadCrumb(s.firstChild,p,_):(this.translate.get(this.title).subscribe(E=>{this.title=E}),O)}get isMotorist(){return this._carparkService.isMotorist()}extractBreadcrumb(s){return s.snapshot.data.breadcrumb instanceof Function?s.snapshot.data.breadcrumb(s):s.snapshot.data.breadcrumb}}return l.\u0275fac=function(s){return new(s||l)(o.Y36(M.F0),o.Y36(M.gz),o.Y36(v.sK),o.Y36(U.x))},l.\u0275cmp=o.Xpm({type:l,selectors:[["app-title-bar"]],ngContentSelectors:u,decls:1,vars:1,consts:[["class","m-subheader",4,"ngIf"],[1,"m-subheader"],[1,"d-flex","align-items-center"],[1,"mr-auto"],[1,"m-subheader__title","m-subheader__title--separator","text-main",3,"innerHTML"],[1,"m-subheader__breadcrumbs","m-nav","m-nav--inline"],[1,"m-nav__item","m-nav__item--home"],["routerLink","/",1,"m-nav__link","m-nav__link--icon"],[1,"m-nav__link-icon","la","la-home"],[4,"ngFor","ngForOf"],[1,"m-nav__separator"],[1,"m-nav__item"],["class","m-nav__link",4,"ngIf"],["class","m-nav__link",3,"routerLink","queryParams",4,"ngIf"],[1,"m-nav__link"],[1,"m-nav__link-text"],[1,"m-nav__link",3,"routerLink","queryParams"]],template:function(s,p){1&s&&(o.F$t(),o.YNc(0,h,11,2,"div",0)),2&s&&o.Q6J("ngIf","ROLE_TPO_PARTNER"!==p.loginUser)},dependencies:[t.sg,t.O5,M.yS,v.X$],encapsulation:2}),l})()},70137:(S,y,a)=>{"use strict";a.r(y),a.d(y,{AssetModule:()=>ot});var M=a(36895),C=a(79118),o=a(26245),v=a(8929),U=a(94327),t=a(94650),b=(a(38014),a(3927)),A=a(27221),h=a(80529),u=a(28555),g=a(91599);let l=(()=>{class r extends b.su{constructor(e,n,i){super(e,n),this.http=e,this.store=n,this.modelName="asset",this.baseUrl="maintenance/api/stationassertlink",this.handleError=i.createHandleError(`${this.modelName}Service`)}filterModel(e,n){const i=(0,o.U8)(`${this.baseUrl}/queryByParam`,{...e,...(0,o.jq)(n)});return this.get(this.getUrl(i)).pipe((0,A.K)(this.handleError(`${this.modelName}Filter`,{}))).map(d=>Array.isArray(d)?(0,b.eC)(d):(0,b.O7)(d))}clearHandle(e){const n=this.getUrl(`maintenance/api/stationassertlink?id=${e||""}`);return this.delete(n)}exportCondo(e,n){const i=(0,o.U8)(`${this.baseUrl}/export`,{...e,...(0,o.jq)(n)});return this.get(this.getUrl(i),{responseType:"blob"})}importCondo(e){const n=this.getUrl("maintenance/api/stationassertlink/importData");return this.post(n,e)}citySelect(){const e=this.getUrl("maintenance/api/station/city");return this.get(e)}lineSelect(e){const n=this.getUrl("maintenance/api/station/lineCode");return this.post(n,e)}stationSelect(e){const n=this.getUrl("maintenance/api/station/stationName");return this.post(n,e)}instationLocationSelect(e){const n=this.getUrl("maintenance/api/station/inStationLocation");return this.post(n,e)}doorWaySelect(e){const n=this.getUrl("maintenance/api/station/doorwayNumber");return this.post(n,e)}getResult(e){const n=this.getUrl("maintenance/api/station/get");return this.post(n,e)}systemSelect(){const e=this.getUrl("maintenance/api/asset/getByParamWithoutStation");return this.get(e)}subSystemSelect(e){const n=this.getUrl(`maintenance/api/asset/getByParamWithoutStation?${e}`);return this.get(n)}itemOptionsSelect(e){const n=this.getUrl(`maintenance/api/asset/getByParamWithoutStation?${e}`);return this.get(n)}getVideoUuid(e){const n=this.getUrl("maintenance/api/file/upload"),i=new FormData;return i.append("file",e,e.name),this.post(n,i)}sureAddAsset(e){const n=this.getUrl("maintenance/api/stationassertlink");return this.post(n,e)}changeAddAsset(e){const n=this.getUrl("maintenance/api/stationassertlink");return this.put(n,e)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(h.eN),t.LFG(u.yh),t.LFG(g.k))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),r})();var c=a(89383),s=a(76916),p=a(40269),_=a(24006),f=a(59245);const Z=["inputfile"],T=["inputfilePDF"];function O(r,m){1&r&&(t.TgZ(0,"div",14),t._uU(1," success! "),t.qZA())}function E(r,m){1&r&&(t.TgZ(0,"div",15),t._uU(1," fail\uff01 "),t.qZA())}function w(r,m){if(1&r){const e=t.EpF();t.TgZ(0,"ul",36)(1,"li",37),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,d=t.oxw(2);return t.KtG(d.editHandle(i))}),t.TgZ(2,"a",38)(3,"span"),t._UZ(4,"i",39),t.qZA(),t.TgZ(5,"span"),t._uU(6,"Edit"),t.qZA()()(),t.TgZ(7,"li",37),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,d=t.oxw(2);return t.KtG(d.clearHandle(i.id))}),t.TgZ(8,"a",38)(9,"span"),t._UZ(10,"i",39),t.qZA(),t.TgZ(11,"span"),t._uU(12,"Delete"),t.qZA()()()()}}function L(r,m){if(1&r){const e=t.EpF();t.TgZ(0,"td",27),t.NdJ("click",function(){const d=t.CHM(e).index;t.oxw();const at=t.MAs(35);return t.KtG(at.toggleItem(d))}),t.TgZ(1,"span"),t._UZ(2,"i",28),t.qZA()(),t.TgZ(3,"td",29)(4,"span"),t._uU(5),t.qZA()(),t.TgZ(6,"td",29)(7,"span"),t._uU(8),t.qZA()(),t.TgZ(9,"td",29)(10,"span"),t._uU(11),t.qZA()(),t.TgZ(12,"td",29)(13,"span"),t._uU(14),t.qZA()(),t.TgZ(15,"td",29)(16,"span"),t._uU(17),t.qZA()(),t.TgZ(18,"td",29)(19,"span"),t._uU(20),t.qZA()(),t.TgZ(21,"td",29)(22,"span"),t._uU(23),t.qZA()(),t.TgZ(24,"td",29)(25,"span"),t._uU(26),t.qZA()(),t.TgZ(27,"td",29)(28,"span"),t._uU(29),t.qZA()(),t.TgZ(30,"td",29)(31,"span"),t._uU(32),t.qZA()(),t.TgZ(33,"td",30)(34,"span",31)(35,"div",32)(36,"button",33),t._UZ(37,"i",34),t.qZA(),t.YNc(38,w,13,0,"ul",35),t.qZA()()()}if(2&r){const e=m.$implicit,n=m.expanded,i=t.oxw(2);t.xp6(1),t.Udp("width",i.tableHeaders[0].width),t.xp6(1),t.Q6J("ngClass",n?"fa-caret-down":"fa-caret-right"),t.xp6(2),t.Udp("width",i.tableHeaders[1].width),t.xp6(1),t.hij(" ",e.geoLoc.locationCode," "),t.xp6(2),t.Udp("width",i.tableHeaders[2].width),t.xp6(1),t.hij(" ",e.geoLoc.stationName," "),t.xp6(2),t.Udp("width",i.tableHeaders[3].width),t.xp6(1),t.hij(" ",e.geoLoc.inStationLocation," "),t.xp6(2),t.Udp("width",i.tableHeaders[4].width),t.xp6(1),t.hij(" ",e.item.system," "),t.xp6(2),t.Udp("width",i.tableHeaders[5].width),t.xp6(1),t.hij(" ",e.item.subSystem," "),t.xp6(2),t.Udp("width",i.tableHeaders[6].width),t.xp6(1),t.hij(" ",e.item.item," "),t.xp6(2),t.Udp("width",i.tableHeaders[7].width),t.xp6(1),t.hij(" ",e.geoLoc.lineCode," "),t.xp6(2),t.Udp("width",i.tableHeaders[8].width),t.xp6(1),t.hij(" ",e.item.module||"NO data"," "),t.xp6(2),t.Udp("width",i.tableHeaders[9].width),t.xp6(1),t.hij(" ",e.item.videoUrl||"NO data"," "),t.xp6(2),t.Udp("width",i.tableHeaders[10].width),t.xp6(1),t.hij(" ",e.item.pdfUrl||"NO data"," "),t.xp6(2),t.Udp("width",i.tableHeaders[11].width)}}function P(r,m){if(1&r){const e=t.EpF();t.TgZ(0,"div",16)(1,"div",17)(2,"div",18)(3,"label",19),t._uU(4),t.qZA(),t.TgZ(5,"div",20)(6,"input",21),t.NdJ("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.itemNumber=i)})("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.itemNumber$.next(i))}),t.qZA(),t.TgZ(7,"span",22)(8,"span"),t._UZ(9,"i",23),t.qZA()()()(),t.TgZ(10,"div",18)(11,"label",19),t._uU(12),t.qZA(),t.TgZ(13,"div",20)(14,"input",21),t.NdJ("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.systemString=i)})("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.systemString$.next(i))}),t.qZA(),t.TgZ(15,"span",22)(16,"span"),t._UZ(17,"i",23),t.qZA()()()(),t.TgZ(18,"div",18)(19,"label",19),t._uU(20),t.qZA(),t.TgZ(21,"div",20)(22,"input",21),t.NdJ("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.subsystemString=i)})("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.subsystemString$.next(i))}),t.qZA(),t.TgZ(23,"span",22)(24,"span"),t._UZ(25,"i",23),t.qZA()()()(),t.TgZ(26,"div",18)(27,"label",19),t._uU(28),t.qZA(),t.TgZ(29,"div",20)(30,"input",21),t.NdJ("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.locationstr=i)})("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.locationstr$.next(i))}),t.qZA(),t.TgZ(31,"span",22)(32,"span"),t._UZ(33,"i",23),t.qZA()()()()(),t.TgZ(34,"app-datatable",24,25),t.NdJ("pageChanged",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.pageChanged(i))}),t.YNc(36,L,39,35,"ng-template",null,26,t.W1O),t.qZA()()}if(2&r){const e=t.oxw();t.xp6(4),t.hij(" ","ITEM",": "),t.xp6(2),t.Q6J("ngModel",e.itemNumber),t.xp6(6),t.hij(" ","System",": "),t.xp6(2),t.Q6J("ngModel",e.systemString),t.xp6(6),t.hij(" ","Subsystem",": "),t.xp6(2),t.Q6J("ngModel",e.subsystemString),t.xp6(6),t.hij(" ","Location",": "),t.xp6(2),t.Q6J("ngModel",e.locationstr),t.xp6(4),t.Q6J("headers",e.tableHeaders)("items",e.data)("pagination",e.pagination)}}function D(r,m){if(1&r&&(t.TgZ(0,"option",66),t._uU(1),t.qZA()),2&r){const e=m.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function N(r,m){if(1&r&&(t.TgZ(0,"option",66),t._uU(1),t.qZA()),2&r){const e=m.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function I(r,m){if(1&r&&(t.TgZ(0,"option",66),t._uU(1),t.qZA()),2&r){const e=m.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function J(r,m){if(1&r&&(t.TgZ(0,"option",66),t._uU(1),t.qZA()),2&r){const e=m.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function H(r,m){if(1&r&&(t.TgZ(0,"option",66),t._uU(1),t.qZA()),2&r){const e=m.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function K(r,m){if(1&r&&(t.TgZ(0,"option",66),t._uU(1),t.qZA()),2&r){const e=m.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function B(r,m){if(1&r&&(t.TgZ(0,"option",66),t._uU(1),t.qZA()),2&r){const e=m.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function F(r,m){if(1&r&&(t.TgZ(0,"span",67),t._uU(1),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.Oqu(e.uploadVideoName)}}function k(r,m){1&r&&(t.TgZ(0,"span",67),t._uU(1,"Click Here To Upload Video"),t.qZA())}function $(r,m){if(1&r&&(t.TgZ(0,"span",67),t._uU(1),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.Oqu(e.uploadPdfName)}}function j(r,m){1&r&&(t.TgZ(0,"span",67),t._uU(1,"Click Here To Upload PDF"),t.qZA())}function G(r,m){if(1&r){const e=t.EpF();t.TgZ(0,"div",40)(1,"h1"),t._uU(2," Create ITEM "),t.qZA(),t.TgZ(3,"div",41),t._uU(4," Location "),t.qZA(),t._UZ(5,"hr"),t.TgZ(6,"div",42)(7,"div",43),t._uU(8," Line "),t.qZA(),t.TgZ(9,"div",43),t._uU(10," Station "),t.qZA(),t.TgZ(11,"div",43),t._uU(12," In Station Location "),t.qZA(),t.TgZ(13,"div",43),t._uU(14," Doorway Number "),t.qZA()(),t.TgZ(15,"div",44)(16,"select",45),t.NdJ("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.selectLine=i)})("ngModelChange",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.getStation())}),t.YNc(17,D,2,2,"option",46),t.qZA(),t.TgZ(18,"select",47),t.NdJ("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.stationsLine=i)})("ngModelChange",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.getStationLocation())}),t.YNc(19,N,2,2,"option",46),t.qZA(),t.TgZ(20,"select",48),t.NdJ("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.inStationsLocationLine=i)})("ngModelChange",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.getDoor())}),t.YNc(21,I,2,2,"option",46),t.qZA(),t.TgZ(22,"select",49),t.NdJ("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.doorLine=i)})("ngModelChange",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.doorChange())}),t.YNc(23,J,2,2,"option",46),t.qZA()(),t.TgZ(24,"h1",50),t._uU(25," ITEM "),t.qZA(),t._UZ(26,"hr"),t.TgZ(27,"div",42)(28,"div",51),t._uU(29," System "),t.qZA(),t.TgZ(30,"div",51),t._uU(31," Subsystem "),t.qZA(),t.TgZ(32,"div",51),t._uU(33," ITEM "),t.qZA()(),t.TgZ(34,"div",44)(35,"select",52),t.NdJ("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.system=i)})("ngModelChange",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.systemChange())}),t.YNc(36,H,2,2,"option",46),t.qZA(),t.TgZ(37,"select",52),t.NdJ("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.subSystem=i)})("ngModelChange",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.subSystemChange())}),t.YNc(38,K,2,2,"option",46),t.qZA(),t.TgZ(39,"select",53),t.NdJ("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.itemOptions=i)})("ngModelChange",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.itemOptionsChange())}),t.YNc(40,B,2,2,"option",46),t.qZA()(),t.TgZ(41,"div",54)(42,"button",55),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.cancelHandle())}),t._uU(43,"CANCEL"),t.qZA(),t.TgZ(44,"button",56),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.saveHandle())}),t._uU(45,"SAVE"),t.qZA()(),t.TgZ(46,"div",57)(47,"div",42)(48,"div",58),t._uU(49," video "),t.qZA(),t.TgZ(50,"div",58),t._uU(51," PDF "),t.qZA()(),t.TgZ(52,"div",42)(53,"div",59)(54,"input",60,6),t.NdJ("change",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.importVideo(i.target.files[0]))}),t.qZA(),t.TgZ(56,"a",61),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.openInputfile())}),t.YNc(57,F,2,1,"span",62),t.YNc(58,k,2,0,"span",62),t.qZA()(),t.TgZ(59,"div",59)(60,"input",63,64),t.NdJ("change",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.importPdf(i.target.files[0]))}),t.qZA(),t.TgZ(62,"a",61),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.openInputfilePdf())}),t.YNc(63,$,2,1,"span",62),t.YNc(64,j,2,0,"span",62),t.qZA()()(),t.TgZ(65,"h1",50),t._uU(66," Description "),t.qZA(),t.TgZ(67,"textarea",65),t.NdJ("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.textAreaInput=i)}),t.qZA()()()}if(2&r){const e=t.oxw();t.xp6(16),t.Q6J("ngModel",e.selectLine),t.xp6(1),t.Q6J("ngForOf",e.lines),t.xp6(1),t.Q6J("ngModel",e.stationsLine),t.xp6(1),t.Q6J("ngForOf",e.stations),t.xp6(1),t.Q6J("ngModel",e.inStationsLocationLine),t.xp6(1),t.Q6J("ngForOf",e.inStationsLocation),t.xp6(1),t.Q6J("ngModel",e.doorLine),t.xp6(1),t.Q6J("ngForOf",e.door),t.xp6(12),t.Q6J("ngModel",e.system),t.xp6(1),t.Q6J("ngForOf",e.systemArr),t.xp6(1),t.Q6J("ngModel",e.subSystem),t.xp6(1),t.Q6J("ngForOf",e.subSystemArr),t.xp6(1),t.Q6J("ngModel",e.itemOptions),t.xp6(1),t.Q6J("ngForOf",e.itemOptionsArr),t.xp6(17),t.Q6J("ngIf",e.uploadVideoName.length>0),t.xp6(1),t.Q6J("ngIf",e.uploadVideoName.length<=0),t.xp6(5),t.Q6J("ngIf",e.uploadPdfName.length>0),t.xp6(1),t.Q6J("ngIf",e.uploadPdfName.length<=0),t.xp6(3),t.Q6J("ngModel",e.textAreaInput)}}let R=(()=>{class r extends C.Gw{constructor(e,n){super(),this.assetService=e,this.translate=n,this.keyword="",this.keyword$=new v.xQ,this.itemNumber="",this.itemNumber$=new v.xQ,this.systemString="",this.systemString$=new v.xQ,this.subsystemString="",this.subsystemString$=new v.xQ,this.locationstr="",this.locationstr$=new v.xQ,this.dataShow=!0,this.lines=[],this.selectLine="",this.stations=[],this.stationsLine="",this.inStationsLocation=[],this.inStationsLocationLine="",this.door=[],this.doorLine="",this.system="",this.systemArr=[],this.subSystem="",this.subSystemArr=[],this.itemOptions="",this.itemOptionsArr=[],this.uploadVideoName="",this.uploadPdfName="",this.videoUuid="",this.PdfUuid="",this.pdfUrl="",this.videoUrl="",this.failShow=!1,this.textAreaInput="",this.tableHeaders=[{text:"",width:"20px"},{text:"Location code",column:"Location",width:"150px"},{text:"Station Name",column:"Location",width:"150px"},{text:"In Station Location",column:"Location",width:"200px"},{text:"System",column:"ITEM",width:"100px"},{text:"Subsystem",column:"ITEM",width:"100px"},{text:"Item",column:"ITEM",width:"100px"},{text:"Line Code",column:"ITEM",width:"100px"},{text:"Description",column:"ITEM",width:"100px"},{text:"Video",column:"ITEM",width:"100px"},{text:"Pdf",column:"ITEM",width:"100px"},{text:"Actions",width:"100px"}],this.loading=!1,this.data=[],this.successShow=!1}get filterParams(){return{sort:"id,desc",item:this.itemNumber,location:this.locationstr,subSystem:this.subsystemString,system:this.systemString}}reloadData(){this.reloadDataService(this.assetService)}pageChanged(e){this.pagination=e,this.reloadData()}getDaySeasonList(){this.loading=!0}ngOnInit(){this.itemNumber$.debounceTime(500).subscribe(()=>{this.reloadData()}),this.systemString$.debounceTime(500).subscribe(()=>{this.reloadData()}),this.subsystemString$.debounceTime(500).subscribe(()=>{this.reloadData()}),this.locationstr$.debounceTime(500).subscribe(()=>{this.reloadData()}),this.assetService.citySelect().subscribe(e=>{this.city=e.data.city[0],this.assetService.lineSelect({city:this.city}).subscribe(i=>{this.lines=i.data.lineCode})}),this.assetService.systemSelect().subscribe(e=>{this.systemArr=e.system}),this.reloadData()}getStation(){this.assetService.stationSelect({city:this.city,lineCode:this.selectLine}).subscribe(n=>{this.stations=n.data.stationName})}getStationLocation(){this.assetService.instationLocationSelect({city:this.city,lineCode:this.selectLine,stationName:this.stationsLine}).subscribe(n=>{this.inStationsLocation=n.data.inStationLocation})}getDoor(){this.assetService.doorWaySelect({city:this.city,lineCode:this.selectLine,stationName:this.stationsLine,inStationLocation:this.inStationsLocationLine}).subscribe(n=>{this.door=n.data.doorwayNumber})}doorChange(){this.assetService.getResult({city:this.city,lineCode:this.selectLine,stationName:this.stationsLine,inStationLocation:this.inStationsLocationLine,doorwayNumber:this.doorLine}).subscribe(n=>{this.locationData=n.data})}systemChange(){this.assetService.subSystemSelect(`system=${this.system}`).subscribe(n=>{this.subSystemArr=n.subSystem})}subSystemChange(){this.assetService.itemOptionsSelect(`system=${this.system}&subSystem=${this.subSystem}`).subscribe(n=>{this.itemOptionsArr=n.item})}itemOptionsChange(){this.assetService.itemOptionsSelect(`system=${this.system}&subSystem=${this.subSystem}&item=${this.itemOptions}`).subscribe(n=>{this.itemData=n.data[0]})}openInputfile(){this.inputfile.nativeElement.click()}importVideo(e){this.assetService.getVideoUuid(e).subscribe(n=>{this.uploadVideoName=n[0].originalName,this.videoUuid=n[0].uuid,this.videoUrl=n[0].url})}openInputfilePdf(){this.inputfilePDF.nativeElement.click()}importPdf(e){this.assetService.getVideoUuid(e).subscribe(n=>{this.uploadPdfName=n[0].originalName,this.PdfUuid=n[0].uuid,this.pdfUrl=n[0].url})}createOneData(){this.dataShow=!1}saveHandle(){this.dataShow=!1,this.changeId?this.assetService.changeAddAsset({geoLoc:this.locationData,item:this.itemData,id:this.changeId}).subscribe(n=>{this.dataShow=!0,this.selectLine=this.stationsLine=this.inStationsLocationLine=this.doorLine=this.system=this.subSystem=this.itemOptions="",this.reloadDataService(this.assetService),this.changeId=""}):this.assetService.sureAddAsset({geoLoc:this.locationData,item:this.itemData}).subscribe(n=>{this.reloadDataService(this.assetService),this.dataShow=!0,this.selectLine=this.stationsLine=this.inStationsLocationLine=this.doorLine=this.system=this.subSystem=this.itemOptions="",this.changeId=""})}cancelHandle(){this.dataShow=!0,this.changeId="",this.selectLine=this.stationsLine=this.inStationsLocationLine=this.doorLine=this.system=this.subSystem=this.itemOptions="",this.reloadData()}clearHandle(e){this.assetService.clearHandle(e).subscribe(n=>{this.reloadDataService(this.assetService)})}editHandle(e){this.dataShow=!1,this.changeId=e.id}exportExcel(){this.assetService.exportCondo(this.filterParams,this.pagination).subscribe(e=>{(0,U.saveAs)(e,"Asset.csv")})}importExcel(){this.inputfile.nativeElement.click()}importMembers(e){const n=new FormData;n.append("file",e),this.assetService.importCondo(n).subscribe(i=>{i.total?(this.successShow=!0,setTimeout(()=>{this.successShow=!1},2e3)):(this.failShow=!0,setTimeout(()=>{this.failShow=!1},2e3))})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(l),t.Y36(c.sK))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-asset"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Z,5),t.Gf(T,5)),2&e){let i;t.iGM(i=t.CRH())&&(n.inputfile=i.first),t.iGM(i=t.CRH())&&(n.inputfilePDF=i.first)}},features:[t.qOj],decls:19,vars:4,consts:[[1,"body-wrapper"],[1,"head-line"],["class","alert alert-success","role","alert",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"right-btn"],["type","file","accept",".csv,audio/*,video/*,image/*",2,"display","none",3,"change"],["inputfile",""],["type","button",1,"btn","btn-default","exportBtn",3,"click"],["type","button",1,"btn","btn-default","btn-save","create-btn",3,"click"],[1,"m-content"],[1,"m-portlet","m-portlet--tabs"],[1,"m-portlet__body","m-portlet__body--scrollable"],["class","m-portlet__frame",4,"ngIf"],["class","m-portlet__frame  create-data-form",4,"ngIf"],["role","alert",1,"alert","alert-success"],["role","alert",1,"alert","alert-danger"],[1,"m-portlet__frame"],[1,"form-group"],[1,"m-portlet__filter"],[1,"col-form-label","col-form-label-nowrap"],[1,"m-input-icon","m-input-icon--left"],["type","text","placeholder","",1,"form-control","m-input","selectAreas",3,"ngModel","ngModelChange"],[1,"m-input-icon__icon","m-input-icon__icon--left"],[1,"la","la-search"],[3,"headers","items","pagination","pageChanged"],["driverTable",""],["rowTemplate",""],[1,"m-datatable__cell","text-center",3,"click"],[1,"fa","text-primary",3,"ngClass"],[1,"m-datatable__cell"],[1,"m-datatable__cell","action-cell"],[1,"cell-actions"],["dropdown","","placement","bottom right"],["dropdownToggle","",1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--outline-2x","m-btn--pill","no-border"],[1,"la","la-ellipsis-h"],["class","dropdown-menu dropdown-menu-right","role","menu",4,"dropdownMenu"],["role","menu",1,"dropdown-menu","dropdown-menu-right"],[3,"click"],[1,"dropdown-item"],[1,"la","la-edit"],[1,"m-portlet__frame","create-data-form"],[1,"location"],[1,"choose-titles"],[1,"tit-options"],[1,"m-portlet__filter","choose-titles"],["name","line",1,"form-control","m-input",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","station",1,"form-control","m-input",3,"ngModel","ngModelChange"],["name","inStationLocation",1,"form-control","m-input",3,"ngModel","ngModelChange"],["name","door",1,"form-control","m-input",3,"ngModel","ngModelChange"],[1,"big-title"],[1,"tit-options-33"],["name","system",1,"form-control-33","m-input",3,"ngModel","ngModelChange"],["name","itemOptions",1,"form-control-33","m-input",3,"ngModel","ngModelChange"],[1,"btn-area"],["type","button",1,"btn","btn-default","btn-calcel",3,"click"],["type","button",1,"btn","btn-default","btn-save",3,"click"],[2,"display","none","height","20px"],[1,"tit-options-40"],[1,"m-portlet__filter","tit-options-40"],["type","file","name","video","id","video","accept","image/*,video/*,image/*MIME_type",2,"display","none",3,"change"],[1,"dropdown-item","clickBtn",3,"click"],["class","description-title",4,"ngIf"],["type","file","name","pdfs","id","pdfs","accept","image/*,video/*,image/*MIME_type",2,"display","none",3,"change"],["inputfilePDF",""],["name","","id","","cols","30","rows","5",3,"ngModel","ngModelChange"],[3,"value"],[1,"description-title"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"app-title-bar"),t.YNc(3,O,2,0,"div",2),t.YNc(4,E,2,0,"div",3),t.TgZ(5,"div",4)(6,"input",5,6),t.NdJ("change",function(d){return n.importMembers(d.target.files[0])}),t.qZA(),t.TgZ(8,"button",7),t.NdJ("click",function(){return n.importExcel()}),t._uU(9," import"),t.qZA(),t.TgZ(10,"button",7),t.NdJ("click",function(){return n.exportExcel()}),t._uU(11," export"),t.qZA(),t.TgZ(12,"button",8),t.NdJ("click",function(){return n.createOneData()}),t._uU(13," + New Asset"),t.qZA()()(),t.TgZ(14,"div",9)(15,"div",10)(16,"div",11),t.YNc(17,P,38,11,"div",12),t.YNc(18,G,68,19,"div",13),t.qZA()()()()),2&e&&(t.xp6(3),t.Q6J("ngIf",1==n.successShow),t.xp6(1),t.Q6J("ngIf",1==n.failShow),t.xp6(13),t.Q6J("ngIf",1==n.dataShow),t.xp6(1),t.Q6J("ngIf",0==n.dataShow))},dependencies:[M.mk,M.sg,M.O5,s.G,p.Uo,_.YN,_.Kr,_.Fj,_.EJ,_.JJ,_.On,C.nE,f.Hz,f.Mq,f.TO],styles:["h1[_ngcontent-%COMP%]{font-weight:500;font-size:24px}.selectAreas[_ngcontent-%COMP%]{width:300px}.head-line[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end}.create-btn[_ngcontent-%COMP%]{height:40px;width:200px!important}.btnss[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.btnss[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:200px;height:42px;display:flex;justify-content:center;align-items:center;border-radius:5px;border:1px solid #00bdb5;margin-right:20px;font-size:16x;cursor:pointer;font-weight:500}.col-form-label[_ngcontent-%COMP%]{font-weight:500;font-size:16px;width:90px}.btnss[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:120px!important;margin-left:20px}.btnss[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-of-type(1){color:#00bdb5}.btnss[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-of-type(2){color:#fff;background-color:#00bdb5}.form-group[_ngcontent-%COMP%]{display:flex!important;justify-content:space-between}.m-portlet__filter[_ngcontent-%COMP%]{display:flex;margin-right:10px!important;justify-content:center;align-items:center;width:19%}.col-form-label-nowrap[_ngcontent-%COMP%]{width:40%;text-align:end}.create-data-form[_ngcontent-%COMP%]{border-radius:20px;height:70vh;height:auto;box-sizing:border-box;padding:20px}.location[_ngcontent-%COMP%]{font-size:20px}.choose-titles[_ngcontent-%COMP%]{display:flex!important;justify-content:space-between!important}.tit-options[_ngcontent-%COMP%]{width:20%;font-size:20px}.form-control[_ngcontent-%COMP%]{width:20%;height:40px}.big-title[_ngcontent-%COMP%]{margin-top:20px}.tit-options-33[_ngcontent-%COMP%]{width:30%;font-size:20px}.form-control-33[_ngcontent-%COMP%]{width:30%;border:1px solid #ebedf2;height:40px}.tit-options-40[_ngcontent-%COMP%]{width:40%;font-size:20px;margin-top:20px;display:flex;justify-content:center;align-items:center}.clickBtn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border:1px solid gray;border-radius:10px}.description-title[_ngcontent-%COMP%]{color:#65acff;border-bottom:1px solid #65acff}.btn-area[_ngcontent-%COMP%]{display:flex!important;justify-content:flex-end!important;margin-top:40px;margin-bottom:40px}.btn-default[_ngcontent-%COMP%]{width:100px;margin-right:30px}.btn-calcel[_ngcontent-%COMP%]{border-color:#00bdb5;color:#00bdb5}.btn-save[_ngcontent-%COMP%]{color:#fff;background-color:#00bdb5}.selectAreas[_ngcontent-%COMP%]{width:200px}.exportBtn[_ngcontent-%COMP%]{color:#fff;background-color:#00bdb5;height:40px}.right-btn[_ngcontent-%COMP%]{display:flex;width:30%}.importBtn[_ngcontent-%COMP%]{color:#00bdb5;background-color:#fff;height:40px}.m-datatable__cell[_ngcontent-%COMP%]{width:60px!important}"]}),r})();var Q=a(34793),q=a(59501),W=a(21532),Y=a(88796),z=a(4666),V=a(80601),X=a(98062),tt=a(372),et=a(30329),nt=a(82641),it=a(64050);const st=[{path:"",component:q.f,children:[{path:"",component:R}]}];let ot=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[V.N,z.p,X.I,nt.E,it.F,l],imports:[M.ez,W.x,Q.Bz.forChild(st),Y.A0,_.u5,_.UX,et.D,tt.kn,f.mr]}),r})()},94327:function(S,y){var C;void 0!==(C=function(){"use strict";function v(h,u,g){var l=new XMLHttpRequest;l.open("GET",h),l.responseType="blob",l.onload=function(){A(l.response,u,g)},l.onerror=function(){console.error("could not download file")},l.send()}function U(h){var u=new XMLHttpRequest;u.open("HEAD",h,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function t(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(u)}}var x="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,b=x.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),A=x.saveAs||("object"!=typeof window||window!==x?function(){}:"download"in HTMLAnchorElement.prototype&&!b?function(h,u,g){var l=x.URL||x.webkitURL,c=document.createElement("a");c.download=u=u||h.name||"download",c.rel="noopener","string"==typeof h?(c.href=h,c.origin===location.origin?t(c):U(c.href)?v(h,u,g):t(c,c.target="_blank")):(c.href=l.createObjectURL(h),setTimeout(function(){l.revokeObjectURL(c.href)},4e4),setTimeout(function(){t(c)},0))}:"msSaveOrOpenBlob"in navigator?function(h,u,g){if(u=u||h.name||"download","string"!=typeof h)navigator.msSaveOrOpenBlob(function o(h,u){return typeof u>"u"?u={autoBom:!1}:"object"!=typeof u&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\ufeff",h],{type:h.type}):h}(h,g),u);else if(U(h))v(h,u,g);else{var l=document.createElement("a");l.href=h,l.target="_blank",setTimeout(function(){t(l)})}}:function(h,u,g,l){if((l=l||open("","_blank"))&&(l.document.title=l.document.body.innerText="downloading..."),"string"==typeof h)return v(h,u,g);var c="application/octet-stream"===h.type,s=/constructor/i.test(x.HTMLElement)||x.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||c&&s||b)&&typeof FileReader<"u"){var _=new FileReader;_.onloadend=function(){var T=_.result;T=p?T:T.replace(/^data:[^;]*;/,"data:attachment/file;"),l?l.location.href=T:location=T,l=null},_.readAsDataURL(h)}else{var f=x.URL||x.webkitURL,Z=f.createObjectURL(h);l?l.location=Z:location.href=Z,l=null,setTimeout(function(){f.revokeObjectURL(Z)},4e4)}});x.saveAs=A.saveAs=A,S.exports=A}.apply(y,[]))&&(S.exports=C)}}]);