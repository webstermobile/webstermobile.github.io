"use strict";(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[122],{10122:(kn,C,i)=>{i.r(C),i.d(C,{BusMaintenanceModule:()=>Hn,createTranslateLoader:()=>x});var l=i(36895),T=i(80529),g=i(24006),u=i(34793),h=i(69440),Z=i(30329),w=i(21532),A=i(59501),r=i(38014),y=i(6368),M=i(28555),H=i(21837),N=i(61715),m=i(21086),S=i(5646),F=i(74327),E=i(1059),d=i(72986),U=i(17489),I=i(23753),O=i(15439),n=(i(19612),i(94650)),J=i(7053),k=i(4666),R=i(36511),f=i(89383),q=i(71942),Y=i(60097),v=i(20388),P=i(70853),G=i(76916),Q=i(35635),L=i(91846),K=i(798),D=i(84607),$=i(72156),B=i(19654),V=i(16233),j=i(65274),z=i(37713),b=i(46367);const W=["enforcementHome"],X=["modal"],nn=["maintenanceTransactions"],tn=["tipModal"],en=function(o){return{color:o}};function on(o,s){if(1&o&&(n.TgZ(0,"div",49)(1,"div",50),n._UZ(2,"div",51),n.TgZ(3,"div",52)(4,"div",53)(5,"div",54),n._uU(6),n.qZA(),n.TgZ(7,"div",55)(8,"small"),n._uU(9),n.qZA()()(),n.TgZ(10,"div",56),n._UZ(11,"i",57),n.qZA()(),n.TgZ(12,"div",58)(13,"div",59)(14,"p"),n._uU(15),n.qZA(),n.TgZ(16,"p"),n._uU(17),n.qZA()(),n.TgZ(18,"div",60),n._uU(19),n.qZA()()()()),2&o){const t=s.$implicit,e=n.oxw();n.xp6(6),n.Oqu(t.name),n.xp6(3),n.Oqu(e.formatRaisedTime(t.time)),n.xp6(2),n.Q6J("ngClass",t.icon),n.xp6(4),n.Oqu(t.depotName),n.xp6(2),n.hij("Lot ",t.lot,""),n.xp6(1),n.Q6J("ngStyle",n.VKq(7,en,t.codeColor)),n.xp6(1),n.Oqu(t.code)}}function an(o,s){if(1&o){const t=n.EpF();n.TgZ(0,"div"),n._UZ(1,"div"),n.TgZ(2,"div",61)(3,"div",62)(4,"div",54),n._uU(5),n.qZA(),n.TgZ(6,"div",63),n.NdJ("click",function(){const c=n.CHM(t).$implicit,_=n.oxw();return n.KtG(_.openFaultCreationFromIntercall(c.id))}),n._UZ(7,"i",64),n.qZA()(),n.TgZ(8,"div")(9,"div",65),n._UZ(10,"i",66),n.TgZ(11,"div"),n._uU(12),n.qZA()(),n.TgZ(13,"div",65),n._UZ(14,"i",67),n.TgZ(15,"div"),n._uU(16),n.qZA()(),n.TgZ(17,"div",68)(18,"small"),n._uU(19),n.qZA()()()(),n.TgZ(20,"div",69)(21,"div",59),n._uU(22),n.qZA(),n.TgZ(23,"div",70),n._uU(24),n.ALo(25,"titlecase"),n.qZA()()()}if(2&o){const t=s.$implicit,e=n.oxw();n.Gre("intercall mb-3 ",null==t.status?null:t.status.toLowerCase(),""),n.xp6(1),n.Gre("background ",null==t.status?null:t.status.toLowerCase(),""),n.xp6(4),n.Oqu(null==t.carPark?null:t.carPark.code),n.xp6(7),n.Oqu(t.phoneNumber),n.xp6(4),n.Oqu(t.duration),n.xp6(3),n.Oqu(e.formatRaisedTime(t.reportDate)),n.xp6(3),n.Oqu(t.gateId),n.xp6(2),n.Oqu(n.lcZ(25,12,t.status))}}function cn(o,s){if(1&o){const t=n.EpF();n.TgZ(0,"div",71)(1,"textarea",72),n.NdJ("ngModelChange",function(a){n.CHM(t);const c=n.oxw();return n.KtG(c.newNote=a)}),n.qZA(),n.TgZ(2,"div",62)(3,"button",73),n.NdJ("click",function(){n.CHM(t);const a=n.oxw();return a.newNote="",n.KtG(a.creatingNote=!1)}),n.TgZ(4,"small"),n._uU(5,"Cancel"),n.qZA()(),n.TgZ(6,"button",74),n.NdJ("click",function(){n.CHM(t);const a=n.oxw();return n.KtG(a.submitNote())}),n.TgZ(7,"small"),n._uU(8,"Submit"),n.qZA()()()()}if(2&o){const t=n.oxw();n.xp6(1),n.Q6J("ngModel",t.newNote)}}function sn(o,s){if(1&o&&(n.TgZ(0,"div",75)(1,"div",76),n._uU(2),n.qZA(),n.TgZ(3,"div",55)(4,"small"),n._uU(5),n.ALo(6,"date"),n.qZA()()()),2&o){const t=s.$implicit;n.xp6(2),n.Oqu(t.message),n.xp6(3),n.Oqu(n.xi3(6,2,t.createdDate,"d LLL yyyy"))}}function ln(o,s){if(1&o&&(n.TgZ(0,"p"),n._uU(1),n.qZA()),2&o){const t=n.oxw().$implicit;n.xp6(1),n.AsE("",t.durationToReturn," | ",t.temperature,"")}}function rn(o,s){if(1&o&&(n.TgZ(0,"p"),n._uU(1),n.qZA()),2&o){const t=n.oxw().$implicit;n.xp6(1),n.AsE("",t.soc," | ",t.remainJourney,"")}}function mn(o,s){if(1&o&&(n.TgZ(0,"div",49)(1,"div",77),n._UZ(2,"div",51),n.TgZ(3,"div",52)(4,"div",53)(5,"div",54),n._uU(6),n.qZA(),n.TgZ(7,"div",55)(8,"small"),n._uU(9),n.qZA()()(),n.TgZ(10,"div",56),n._UZ(11,"i",57),n.qZA()(),n.TgZ(12,"div",58)(13,"div",59),n.YNc(14,ln,2,2,"ng-template",78),n.YNc(15,rn,2,2,"ng-template",78),n.qZA(),n.TgZ(16,"div",79),n._uU(17),n.qZA()()()()),2&o){const t=s.$implicit,e=n.oxw();n.xp6(6),n.Oqu(t.vehicleNo),n.xp6(3),n.Oqu(e.formatRaisedTime(t.time)),n.xp6(2),n.Q6J("ngClass",t.icon),n.xp6(3),n.Q6J("ngIf",t.durationToReturn),n.xp6(1),n.Q6J("ngIf",!t.durationToReturn),n.xp6(2),n.Oqu(t.code)}}const p=function(o){return{active:o}};function pn(o,s){if(1&o){const t=n.EpF();n.TgZ(0,"li",35)(1,"a",36),n.NdJ("click",function(){n.CHM(t);const a=n.oxw();return a.showBottom=!0,n.KtG(a.currentTab="ENFORCEMENT")}),n._uU(2," Enforcement "),n.qZA()()}if(2&o){const t=n.oxw();n.xp6(1),n.Q6J("ngClass",n.VKq(1,p,t.showBottom&&"ENFORCEMENT"===t.currentTab))}}function _n(o,s){if(1&o){const t=n.EpF();n.TgZ(0,"li",35)(1,"a",36),n.NdJ("click",function(){n.CHM(t);const a=n.oxw();return a.showBottom=!0,n.KtG(a.currentTab="VEHICLE_VERIFICATION")}),n._uU(2," Vehicle Verification "),n.qZA()()}if(2&o){const t=n.oxw();n.xp6(1),n.Q6J("ngClass",n.VKq(1,p,t.showBottom&&"VEHICLE_VERIFICATION"===t.currentTab))}}function gn(o,s){if(1&o){const t=n.EpF();n.TgZ(0,"app-maintenance-transactions",80,81),n.NdJ("verifyVehicle",function(a){n.CHM(t);const c=n.oxw();return n.KtG(c.verifyVehicle(a))})("endTransactions",function(a){n.CHM(t);const c=n.oxw();return n.KtG(c.endTransaction(a))})("closeTransactions",function(a){n.CHM(t);const c=n.oxw();return n.KtG(c.closeTransaction(a))}),n.qZA()}}function dn(o,s){1&o&&n._UZ(0,"app-maintenance-fault-history")}function un(o,s){if(1&o){const t=n.EpF();n.TgZ(0,"app-enforcement-home",82,83),n.NdJ("openEnforcementCreation",function(){n.CHM(t);const a=n.oxw();return n.KtG(a.openSideModal("CREATE_ENFORCEMENT"))}),n.qZA()}}function fn(o,s){if(1&o){const t=n.EpF();n.TgZ(0,"app-maintenance-vehicle-verification",84),n.NdJ("submit",function(a){n.CHM(t);const c=n.oxw();return n.KtG(c.submitVerification(a))})("cancel",function(){n.CHM(t);const a=n.oxw();return n.KtG(a.currentTab="TRANSACTIONS")}),n.qZA()}if(2&o){const t=n.oxw();n.Q6J("transactionId",t.transactionId)}}function Cn(o,s){1&o&&n._UZ(0,"app-list-refund")}function hn(o,s){if(1&o){const t=n.EpF();n.TgZ(0,"app-fault-detail",85),n.NdJ("solve",function(a){n.CHM(t);const c=n.oxw();return n.KtG(c.onSolve(a))})("assign",function(a){n.CHM(t);const c=n.oxw();return n.KtG(c.onAssign(a))})("cancel",function(a){n.CHM(t);const c=n.oxw();return n.KtG(c.onCancel(a))})("reject",function(a){n.CHM(t);const c=n.oxw();return n.KtG(c.onReject(a))})("edit",function(){n.CHM(t);const a=n.oxw();return n.KtG(a.modalType="UPDATE")}),n.ALo(1,"async"),n.qZA()}if(2&o){const t=n.oxw();n.Q6J("fault",n.lcZ(1,1,t.selectedFault$))}}function Mn(o,s){if(1&o){const t=n.EpF();n.TgZ(0,"app-fault-dialog",86),n.NdJ("submit",function(a){n.CHM(t);const c=n.oxw();return n.KtG(c.onSubmitFault(a))})("cancel",function(a){n.CHM(t);const c=n.oxw();return n.KtG(c.onCancel(a))}),n.ALo(1,"async"),n.qZA()}if(2&o){const t=n.oxw();n.Q6J("form",n.lcZ(1,1,t.selectedFault$))}}function On(o,s){if(1&o){const t=n.EpF();n.TgZ(0,"app-fault-dialog",86),n.NdJ("submit",function(a){n.CHM(t);const c=n.oxw();return n.KtG(c.onUpdateFault(a))})("cancel",function(a){n.CHM(t);const c=n.oxw();return n.KtG(c.onCancel(a))}),n.ALo(1,"async"),n.qZA()}if(2&o){const t=n.oxw();n.Q6J("form",n.lcZ(1,1,t.selectedFault$))}}function vn(o,s){if(1&o){const t=n.EpF();n.TgZ(0,"app-enforcement-create",87),n.NdJ("submit",function(a){n.CHM(t);const c=n.oxw();return n.KtG(c.onCreateEnforcement(a))})("cancel",function(a){n.CHM(t);const c=n.oxw();return n.KtG(c.onCancel(a))}),n.qZA()}}function Pn(o,s){if(1&o){const t=n.EpF();n.TgZ(0,"div",88)(1,"p"),n._uU(2),n.qZA(),n.TgZ(3,"div")(4,"button",89),n.NdJ("click",function(){n.CHM(t);const a=n.oxw();return n.KtG(a.cancel())}),n._uU(5,"Cancel"),n.qZA(),n.TgZ(6,"button",90),n.NdJ("debounceClick",function(){n.CHM(t);const a=n.oxw();return n.KtG(a.submit())}),n._uU(7,"Confirm"),n.qZA()()()}if(2&o){const t=n.oxw();n.xp6(2),n.Oqu(t.modalMsg)}}function bn(o,s){if(1&o){const t=n.EpF();n.TgZ(0,"div",88)(1,"p"),n._uU(2),n.qZA(),n.TgZ(3,"div")(4,"button",89),n.NdJ("click",function(){n.CHM(t);const a=n.oxw();return n.KtG(a.cancel())}),n._uU(5,"Close"),n.qZA()()()}if(2&o){const t=n.oxw();n.xp6(2),n.Oqu(t.tipModalMsg)}}const xn=function(o){return{"background-color":o}};let Tn=(()=>{class o{constructor(t,e,a,c,_,Nn,Sn,Fn,En,Un,In,Jn){this.router=t,this.store=e,this.maintenanceService=a,this.authenticationService=c,this.transactionService=_,this.codeTablesService=Nn,this.translate=Sn,this.vehicleService=Fn,this.carparkService=En,this.bsModalRef=Un,this.modalService=In,this.busService=Jn,this.currentTab="TRANSACTIONS",this.faultsPagination=[],this.newNote="",this.searchDate=H.ou.local().toFormat("yyyy-LL-dd"),this.alive=!0,this.currentPage=0,this.totalPage=0,this.paginationList=[],this.statusConfig=(0,r.ngG)(),this.chargingAlerts=[],this.busAlerts=[],this.user$=e.pipe((0,M.Ys)("global"))}ngOnInit(){this.equipments$=this.codeTablesService.filterModelByType(r.BcL.FaultEquipment).pipe((0,S._)(1),(0,F.x)()),(0,N.F)(3e4).takeWhile(()=>this.alive).pipe((0,E.O)(0)).subscribe(()=>{this.maintenanceService.fetchFaults().pipe((0,d.q)(1)).subscribe(t=>{this.faults$=(0,m.of)(t),this.initFaults()}),this.maintenanceService.fetchIntercalls({searchDate:this.searchDate}).pipe((0,d.q)(1)).subscribe(t=>this.intercalls$=(0,m.of)(t)),this.maintenanceService.fetchNotes({searchDate:this.searchDate}).pipe((0,d.q)(1)).subscribe(t=>this.notes$=(0,m.of)(t)),this.maintenanceService.getStatusSign().subscribe(()=>{this.statusConfig.date=O().format("YYYY-MM-DD HH:mmA"),this.statusConfig.status=!0},t=>{this.statusConfig.status&&(this.statusConfig.date=O().format("YYYY-MM-DD HH:mmA"),this.statusConfig.status=!1)})}),this.user$.takeWhile(()=>this.alive).subscribe(({user:t})=>{this.viewOnly=(0,U.intersection)([r.i44.ThirdParty,r.i44.Tester,r.i44.Auditor],t.authorities).length>0}),this.scrolling=(0,I.R)(window,"scroll").subscribe(t=>{this.onScroll()})}initFaults(){this.busService.getAlertsData().subscribe(t=>{this.chargingAlerts=t.charging,this.busAlerts=t.bus})}getFaults(){this.maintenanceService.fetchFaults(this.currentPage).pipe((0,d.q)(1)).subscribe(t=>{this.faults$=(0,m.of)(t),this.initFaults()})}getPaginationList(t){if(this.paginationList=[],t-3<=0)for(let e=1;e<=10&&(this.paginationList.push(e),e!==this.totalPage);e++);else if(t+6>=this.totalPage)for(let e=this.totalPage;e>=this.totalPage-10&&(this.paginationList.unshift(e),1!==e);e--);else for(let e=-3;e<=6;e++)this.paginationList.push(e+t)}retrunToPage(t){t-1===this.currentPage||t<1||t>this.totalPage||(this.currentPage=t-1,this.getFaults(),this.getPaginationList(this.currentPage))}onScroll(){}createNote(t){t.scrollTo(0,0),this.creatingNote=!0}submitNote(){this.maintenanceService.createNote({message:this.newNote}).subscribe(()=>{this.creatingNote=!1,this.newNote="",this.notes$=this.maintenanceService.fetchNotes({searchDate:this.searchDate})})}onSubmitFault(t){this.maintenanceService.createFault(t).subscribe(()=>{this.modalOpen=!1,this.faults$=this.maintenanceService.fetchFaults(),this.notes$=this.maintenanceService.fetchNotes({searchDate:this.searchDate})})}onUpdateFault(t){this.maintenanceService.updateFault(t).subscribe(()=>{this.modalOpen=!1,this.faults$=this.maintenanceService.fetchFaults(),this.notes$=this.maintenanceService.fetchNotes({searchDate:this.searchDate})})}onCancel(){this.modalOpen=!1}openSideModal(t){this.modalOpen=!0,this.modalType=t,this.store.dispatch({type:y.Us.ToggleAside,payload:{minimizeAside:!0}})}formatRaisedTime(t){return this.maintenanceService.formatTime(t)}openFaultEdit(t){this.selectedFault$=this.maintenanceService.fetchFault(t.id),this.openSideModal("DETAIL")}onSolve({fault:t,callback:e}){this.maintenanceService.solveFault(t).subscribe(()=>{this.modalOpen=!1,this.faults$=this.maintenanceService.fetchFaults(),e&&e()})}onAssign({fault:t,callback:e}){this.maintenanceService.assignFault(t).subscribe(()=>{this.modalOpen=!1,this.faults$=this.maintenanceService.fetchFaults(),e&&e()})}onReject({fault:t,callback:e}){this.maintenanceService.rejectFault(t.id).subscribe(()=>{this.modalOpen=!1,this.faults$=this.maintenanceService.fetchFaults(),e&&e()})}onCreateEnforcement(t){this.maintenanceService.createEnforcement(t).subscribe(()=>{this.modalOpen=!1,this.enforcementHome.reloadData()})}openFaultCreation({carParkId:t}){const e={carParkId:t,raisedBy:this.authenticationService.getCurrentUser().login,equipment:"",faultName:null,faultLevel:"",remark:"",noteMessageFlag:!0};this.selectedFault$=(0,m.of)(e),this.openSideModal("CREATE")}openFaultCreationFromIntercall(t){this.maintenanceService.fetchIntercall(t).subscribe(({carParkId:e})=>this.openFaultCreation({carParkId:e}))}verifyVehicle(t){this.transactionId=t,this.currentTab="VEHICLE_VERIFICATION"}endTransaction(t){this.openModal(this.modal,t,"End Transaction ?")}closeTransaction(t){this.openModal(this.modal,t,"Close Transaction ?")}submitVerification(t){this.transactionService.verifyAbnormalTransaction(t).subscribe(()=>{this.currentTab="TRANSACTIONS"})}getIcon(t){return this.equipments$.map(e=>{const a=e.find(c=>c.name.replace(/\s+/g,"").toLowerCase()===t.replace(/\s+/g,"").toLowerCase());return a&&a.remarks})}ngOnDestroy(){this.alive=!1}openModal(t,e,a){e&&(this.selectedData=e,this.modalMsg=a),this.bsModalRef=this.modalService.show(t,{class:"modal-dialog-centered"})}cancel(){this.bsModalRef.hide()}submit(){this.bsModalRef.hide(),this.modalMsg.indexOf("End")>-1?this.router.navigate(["/simulator/exit"],{queryParams:{carparkId:this.selectedData.carPark.id,vehicle:this.selectedData.vehicle.vehicleNumber}}):this.transactionService.closeTransactions(this.selectedData.id).subscribe(t=>{this.tipModalMsg=t.message,200===t.code&&this.maintenanceTransactions.reloadData(),this.bsModalRef=this.modalService.show(this.tipModal,{class:"modal-dialog-centered"})},t=>{this.tipModalMsg="Serve Error",this.bsModalRef=this.modalService.show(this.tipModal,{class:"modal-dialog-centered"})})}get isOperator(){return this.vehicleService.isOperator()}get isAdmin(){return this.carparkService.isAdmin()}get notOwnerAndOperator(){return!(this.isOperator||this.isAdmin)}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(u.F0),n.Y36(M.yh),n.Y36(h.N),n.Y36(J.$),n.Y36(k.p),n.Y36(R.I),n.Y36(f.sK),n.Y36(q.f),n.Y36(Y.x),n.Y36(v.UZ),n.Y36(v.tT),n.Y36(P.Z))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-maintenance-home"]],viewQuery:function(t,e){if(1&t&&(n.Gf(W,5),n.Gf(X,5),n.Gf(nn,5),n.Gf(tn,5)),2&t){let a;n.iGM(a=n.CRH())&&(e.enforcementHome=a.first),n.iGM(a=n.CRH())&&(e.modal=a.first),n.iGM(a=n.CRH())&&(e.maintenanceTransactions=a.first),n.iGM(a=n.CRH())&&(e.tipModal=a.first)}},decls:81,vars:45,consts:[[1,"maintenance"],[1,"body-wrapper"],[1,"maintenance-home",2,"position","relative"],[1,"d-flex","align-items-center",2,"position","absolute","right","200px","top","-40px"],[1,"status-circle",3,"ngStyle"],[2,"font-size","18px","font-weight","500"],[1,"top-contents"],[1,"m-content"],[1,"row","h-100"],[1,"col-8","pr-0","d-flex","flex-column","h-100"],[1,"mb-3","m--padding-right-20"],[1,"float-left"],[1,"float-right","create-fault-link","m--font-brand","m--font-bold",3,"click"],[1,"la","la-plus"],[1,"faults"],["class","fault-wrapper mb-3",4,"ngFor","ngForOf"],[1,"col-2","p-0","d-flex","flex-column"],[1,"mb-3","m--padding-right-15"],[1,"intercalls-title","text-ellipsis"],[1,"intercalls-today"],[3,"class",4,"ngFor","ngForOf"],[1,"notes-section","col-2","p-0","d-flex","flex-column"],[1,"header","mb-3","m--padding-right-15"],[1,"float-left","text-ellipsis"],[1,"float-right","create-note-link","m--font-brand","m--font-bold","text-ellipsis",3,"hidden","click"],[1,"notes"],["notesRef",""],["class","note-create mb-3",4,"ngIf"],["class","note mb-3",4,"ngFor","ngForOf"],[1,"m-portlet","m-portlet--tabs","mb-0","h-100","d-flex","flex-column"],[1,"nav-wrapper"],["role","tablist",1,"navs"],[1,"nav-item"],[1,"nav-link",3,"ngClass","click"],["class","nav-item m-tabs__item",4,"ngIf"],[1,"nav-item","m-tabs__item"],[1,"nav-link","m-tabs__link",3,"ngClass","click"],[1,"btn","btn-outline-main","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","m-btn--air","btn-toggle","btn-sm",3,"click"],[1,"m-portlet__body","m-portlet__body--scrollable",3,"hidden"],[1,"m-portlet__frame",3,"ngSwitch"],[3,"verifyVehicle","endTransactions","closeTransactions",4,"ngSwitchCase"],[4,"ngSwitchCase"],[3,"openEnforcementCreation",4,"ngSwitchCase"],[3,"transactionId","submit","cancel",4,"ngSwitchCase"],[3,"fault","solve","assign","cancel","reject","edit",4,"ngIf"],[3,"form","submit","cancel",4,"ngIf"],[3,"submit","cancel",4,"ngIf"],["modal",""],["tipModal",""],[1,"fault-wrapper","mb-3"],[1,"fault","pending"],[1,"background"],[1,"fault__body","mb-3"],[1,"left"],[1,"m--font-bolder"],[1,"text-muted"],[1,"right","text-muted"],[3,"ngClass"],[1,"fault__footer"],[1,"m--font-bold","text-ellipsis"],[1,"m--font-bold","status",3,"ngStyle"],[1,"intercall__body","mb-2"],[1,"d-flex","justify-content-between"],[1,"btn-add",3,"click"],[1,"fa","fa-plus-circle"],[1,"d-flex","m--margin-top-5"],[1,"la","la-phone-square"],[1,"la","la-headphones"],[1,"text-muted","m--margin-top-5"],[1,"intercall__footer","d-flex","justify-content-between","m--margin-top-10"],[1,"m--font-bold","status","text-danger"],[1,"note-create","mb-3"],["rows","4","nz-input","","placeholder","",3,"ngModel","ngModelChange"],[1,"btn","btn-sm","btn-outline-main","px-2","py-1","text-ellipsis",3,"click"],[1,"btn","btn-sm","btn-primary","px-2","py-1","text-ellipsis",3,"click"],[1,"note","mb-3"],[1,"content","m--font-bold","mb-2","text"],[1,"fault","assigned"],[3,"ngIf"],[1,"m--font-bold","status",2,"color","#f00"],[3,"verifyVehicle","endTransactions","closeTransactions"],["maintenanceTransactions",""],[3,"openEnforcementCreation"],["enforcementHome",""],[3,"transactionId","submit","cancel"],[3,"fault","solve","assign","cancel","reject","edit"],[3,"form","submit","cancel"],[3,"submit","cancel"],[1,"modal-body","text-center"],["type","button",1,"btn","btn-default","mr-3",3,"click"],["type","button","appDebounceClick","",1,"btn","btn-default","mr-3",3,"debounceClick"]],template:function(t,e){if(1&t){const a=n.EpF();n.TgZ(0,"div",0)(1,"div",1),n._UZ(2,"app-title-bar"),n.TgZ(3,"div",2)(4,"div",3),n._UZ(5,"div",4),n.TgZ(6,"span",5),n._uU(7),n.qZA()(),n.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"h6",11),n._uU(14,"Charging Alerts"),n.qZA(),n.TgZ(15,"a",12),n.NdJ("click",function(){return e.openFaultCreation({carParkId:null})}),n._UZ(16,"i",13),n._uU(17,"Create Fault "),n.qZA()(),n.TgZ(18,"div",14),n.YNc(19,on,20,9,"div",15),n.qZA()(),n.TgZ(20,"div",16)(21,"div",17)(22,"h6",18),n._uU(23,"Intercalls Today"),n.qZA()(),n.TgZ(24,"div",19),n.YNc(25,an,26,14,"div",20),n.ALo(26,"async"),n.qZA()(),n.TgZ(27,"div",21)(28,"div",22)(29,"h6",23),n._uU(30,"Notes"),n.qZA(),n.TgZ(31,"a",24),n.NdJ("click",function(){n.CHM(a);const _=n.MAs(35);return n.KtG(e.createNote(_))}),n._UZ(32,"i",13),n._uU(33,"Create Note"),n.qZA()(),n.TgZ(34,"div",25,26),n.YNc(36,cn,9,1,"div",27),n.YNc(37,sn,7,5,"div",28),n.ALo(38,"async"),n.qZA()()()()(),n.TgZ(39,"div",6)(40,"div",7)(41,"div",8)(42,"div",9)(43,"div",10)(44,"h6",11),n._uU(45,"Bus Alerts"),n.qZA()(),n.TgZ(46,"div",14),n.YNc(47,mn,18,6,"div",15),n.qZA()()()()(),n.TgZ(48,"div")(49,"div",29)(50,"div",30)(51,"ul",31)(52,"li",32)(53,"a",33),n.NdJ("click",function(){return e.showBottom=!0,e.currentTab="TRANSACTIONS"}),n._uU(54," Transactions "),n.qZA()(),n.TgZ(55,"li",32)(56,"a",33),n.NdJ("click",function(){return e.showBottom=!0,e.currentTab="FAULT_HISTORY"}),n._uU(57," Fault History "),n.qZA()(),n.YNc(58,pn,3,3,"li",34),n.YNc(59,_n,3,3,"li",34),n.TgZ(60,"li",35)(61,"a",36),n.NdJ("click",function(){return e.showBottom=!0,e.currentTab="REFUND_REQUEST"}),n._uU(62," Refund Request "),n.qZA()(),n.TgZ(63,"button",37),n.NdJ("click",function(){return e.showBottom=!e.showBottom}),n._UZ(64,"i"),n.qZA()()(),n.TgZ(65,"div",38)(66,"div",39),n.YNc(67,gn,2,0,"app-maintenance-transactions",40),n.YNc(68,dn,1,0,"app-maintenance-fault-history",41),n.YNc(69,un,2,0,"app-enforcement-home",42),n.YNc(70,fn,1,1,"app-maintenance-vehicle-verification",43),n.YNc(71,Cn,1,0,"app-list-refund",41),n.qZA()()()()()()(),n.TgZ(72,"div"),n.YNc(73,hn,2,3,"app-fault-detail",44),n.YNc(74,Mn,2,3,"app-fault-dialog",45),n.YNc(75,On,2,3,"app-fault-dialog",45),n.YNc(76,vn,1,0,"app-enforcement-create",46),n.qZA(),n.YNc(77,Pn,8,1,"ng-template",null,47,n.W1O),n.YNc(79,bn,6,1,"ng-template",null,48,n.W1O)}2&t&&(n.xp6(5),n.Q6J("ngStyle",n.VKq(37,xn,e.statusConfig.status?"#00ff00":"#ff0000")),n.xp6(2),n.Oqu(e.statusConfig.date),n.xp6(12),n.Q6J("ngForOf",e.chargingAlerts),n.xp6(6),n.Q6J("ngForOf",n.lcZ(26,33,e.intercalls$)),n.xp6(6),n.Q6J("hidden",e.creatingNote),n.xp6(5),n.Q6J("ngIf",e.creatingNote),n.xp6(1),n.Q6J("ngForOf",n.lcZ(38,35,e.notes$)),n.xp6(10),n.Q6J("ngForOf",e.busAlerts),n.xp6(1),n.Gre("bottom-contents ",e.showBottom?"open":"",""),n.xp6(5),n.Q6J("ngClass",n.VKq(39,p,e.showBottom&&"TRANSACTIONS"===e.currentTab)),n.xp6(3),n.Q6J("ngClass",n.VKq(41,p,e.showBottom&&"FAULT_HISTORY"===e.currentTab)),n.xp6(2),n.Q6J("ngIf",e.notOwnerAndOperator),n.xp6(1),n.Q6J("ngIf",e.notOwnerAndOperator),n.xp6(2),n.Q6J("ngClass",n.VKq(43,p,e.showBottom&&"REFUND_REQUEST"===e.currentTab)),n.xp6(3),n.Gre("la ",e.showBottom?"la-minus-square":"la-arrows",""),n.xp6(1),n.Q6J("hidden",!e.showBottom),n.xp6(1),n.Q6J("ngSwitch",e.currentTab),n.xp6(1),n.Q6J("ngSwitchCase","TRANSACTIONS"),n.xp6(1),n.Q6J("ngSwitchCase","FAULT_HISTORY"),n.xp6(1),n.Q6J("ngSwitchCase","ENFORCEMENT"),n.xp6(1),n.Q6J("ngSwitchCase","VEHICLE_VERIFICATION"),n.xp6(1),n.Q6J("ngSwitchCase","REFUND_REQUEST"),n.xp6(1),n.Gre("side-modal ",e.modalOpen?"open":"",""),n.xp6(1),n.Q6J("ngIf","DETAIL"===e.modalType),n.xp6(1),n.Q6J("ngIf",e.modalOpen&&"CREATE"===e.modalType),n.xp6(1),n.Q6J("ngIf",e.modalOpen&&"UPDATE"===e.modalType),n.xp6(1),n.Q6J("ngIf",e.modalOpen&&"CREATE_ENFORCEMENT"===e.modalType))},dependencies:[l.mk,l.sg,l.O5,l.PC,l.RF,l.n9,G.G,Q.Zp,L.J,K.P,D.s,$.H,B.e,V.x,j.r,g.Fj,g.JJ,g.On,z.R,b.P,l.Ov,l.rS,l.uU],styles:["[_nghost-%COMP%]{display:flex;height:100%}.side-modal[_ngcontent-%COMP%]{width:0;transition:.2s;height:100%;background:white;overflow:auto;border-left:1px solid #ebedf2}.side-modal.open[_ngcontent-%COMP%]{width:300px}.maintenance[_ngcontent-%COMP%]{height:100%;display:flex;overflow:hidden;flex-direction:column;flex:1}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .top-contents[_ngcontent-%COMP%]{overflow:hidden;display:flex;margin-bottom:auto;flex:1}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .top-contents[_ngcontent-%COMP%] > .m-content[_ngcontent-%COMP%]{padding:15px 30px;flex:1}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .top-contents[_ngcontent-%COMP%]   .create-fault-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .top-contents[_ngcontent-%COMP%]   .create-note-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .top-contents[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%], .maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .top-contents[_ngcontent-%COMP%]   .create-note-link[_ngcontent-%COMP%]{word-break:break-all}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .top-contents[_ngcontent-%COMP%]   .create-note-link[_ngcontent-%COMP%]{text-align:right}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents[_ngcontent-%COMP%]{background:white;height:45px;transition:.2s}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents.open[_ngcontent-%COMP%]{height:60%}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%]{display:flex;margin-left:auto;margin-top:auto;margin-bottom:auto}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]{padding:0 30px;height:45px;display:flex;align-items:center;border-bottom:1px solid #ebedf2}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]   .navs[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none;padding:0;margin:0;width:100%}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]   .navs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{cursor:pointer;font-weight:400;font-size:1rem}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]   .navs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{height:45px;vertical-align:middle;display:table-cell;color:#6c757d}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]   .navs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover, .maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]   .navs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus, .maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]   .navs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:active, .maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]   .navs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#716aca}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]   .navs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{border-bottom:1px solid #00bdb5}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents[_ngcontent-%COMP%]   .m-portlet__body[_ngcontent-%COMP%]{display:flex;flex:1;padding:0 30px;margin-top:15px;overflow:auto}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents[_ngcontent-%COMP%]   .m-portlet__body[_ngcontent-%COMP%]   .m-portlet__frame[_ngcontent-%COMP%]{padding-bottom:30px}.faults[_ngcontent-%COMP%]{display:flex;margin:0 7px 0 -5px;overflow:auto;flex-wrap:wrap;padding-right:10px}.faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]{flex:0 0 25%;max-width:25%;padding:0 5px}.faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault[_ngcontent-%COMP%]{padding:15px 10px;position:relative;border-left:4px solid #c4c5d6}.faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault.level1[_ngcontent-%COMP%]{border-left:4px solid #c4c5d6}.faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault.level2[_ngcontent-%COMP%]{border-left:4px solid #ffb822}.faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault.level3[_ngcontent-%COMP%]{border-left:4px solid #f4516c}.faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault.new[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{background-color:#f4516c}.faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault.pending[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{background-color:#ffb822}.faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault.assigned[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{background-color:#c4c5d6}.faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{background-color:#c4c5d6;position:absolute;width:100%;height:100%;top:0;left:0;opacity:.1}.faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault[_ngcontent-%COMP%]   .fault__body[_ngcontent-%COMP%], .faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault[_ngcontent-%COMP%]   .fault__footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault[_ngcontent-%COMP%]   .fault__body[_ngcontent-%COMP%]   .status.new[_ngcontent-%COMP%], .faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault[_ngcontent-%COMP%]   .fault__footer[_ngcontent-%COMP%]   .status.new[_ngcontent-%COMP%]{color:#f4516c}.faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault[_ngcontent-%COMP%]   .fault__body[_ngcontent-%COMP%]   .status.pending[_ngcontent-%COMP%], .faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault[_ngcontent-%COMP%]   .fault__footer[_ngcontent-%COMP%]   .status.pending[_ngcontent-%COMP%]{color:#ffb822}.faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault[_ngcontent-%COMP%]   .fault__body[_ngcontent-%COMP%]   .status.assigned[_ngcontent-%COMP%], .faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault[_ngcontent-%COMP%]   .fault__footer[_ngcontent-%COMP%]   .status.assigned[_ngcontent-%COMP%]{color:#c4c5d6}.intercalls-today[_ngcontent-%COMP%]{display:flex;overflow:auto;flex-direction:column;padding-right:15px;margin-right:7px}.intercalls-today[_ngcontent-%COMP%]   .intercall[_ngcontent-%COMP%]{border-left:4px solid #c4c5d6;padding:15px 10px;position:relative}.intercalls-today[_ngcontent-%COMP%]   .intercall[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{background-color:#c4c5d6;position:absolute;width:100%;height:100%;top:0;left:0;opacity:.1;pointer-events:none}.intercalls-today[_ngcontent-%COMP%]   .intercall.ongoing[_ngcontent-%COMP%]{border-left:4px solid #36a3f7}.intercalls-today[_ngcontent-%COMP%]   .intercall.ongoing[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{background-color:#36a3f7}.intercalls-today[_ngcontent-%COMP%]   .intercall.pending[_ngcontent-%COMP%]{border-left:4px solid #ffb822}.intercalls-today[_ngcontent-%COMP%]   .intercall.pending[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{background-color:#ffb822}.intercalls-today[_ngcontent-%COMP%]   .intercall.success[_ngcontent-%COMP%]{border-left:4px solid #34bfa3}.intercalls-today[_ngcontent-%COMP%]   .intercall.success[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{background-color:#34bfa3}.intercalls-today[_ngcontent-%COMP%]   .intercall.hangup[_ngcontent-%COMP%]{border-left:4px solid #f4516c}.intercalls-today[_ngcontent-%COMP%]   .intercall.hangup[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{background-color:#f4516c}.intercalls-today[_ngcontent-%COMP%]   .intercall[_ngcontent-%COMP%]   .intercall__body[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-direction:column}.intercalls-today[_ngcontent-%COMP%]   .intercall[_ngcontent-%COMP%]   .intercall__body[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]{color:#716aca;cursor:pointer}.notes-section[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{width:40%}.notes-section[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:60%}.notes-section[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]{display:flex;overflow:auto;flex-direction:column;padding-right:15px}.notes-section[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{background:white;padding:15px 10px}.notes-section[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.notes-section[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]   .note-create[_ngcontent-%COMP%]{background:white;padding:15px 10px}.notes-section[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]   .note-create[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{outline:none;resize:none;border:none}"]}),o})();var Zn=i(19832),wn=i(22730),An=i(46442);function x(o){return new Zn.w(o,"../assets/i18n/",".json")}const yn=[{path:"",component:A.f,children:[{path:"",component:Tn},{path:"enforcement/create",component:b.P,data:{breadcrumb:{title:"Create Enforcement",label:"Create Enforcement"}}}]}];let Hn=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({providers:[h.N,P.Z],imports:[l.ez,u.Bz.forChild(yn),w.x,Z.D,wn.S,g.u5,An.s,f.aw.forChild({loader:{provide:f.Zw,useFactory:x,deps:[T.eN]}}),u.Bz]}),o})()}}]);