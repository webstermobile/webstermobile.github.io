"use strict";(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[3881],{63881:(rt,b,i)=>{i.r(b),i.d(b,{CarParkLayoutModule:()=>nt,LayoutResolver:()=>y});var g=i(36895),s=i(34793),_=i(76284),T=i(60097),A=i(91599),p=i(64870),S=i(42684),Z=i(30329),F=i(72986),M=i(21532),u=i(24006),U=i(80529),c=i(89383),J=i(19832),t=i(94650);function O(a){return new J.w(a,"../assets/i18n/",".json")}let Y=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[g.ez,u.u5,s.Bz,Z.D,c.aw.forChild({loader:{provide:c.Zw,useFactory:O,deps:[U.eN]}})]}),a})();var h=i(76916),I=i(67869),N=i(35635),L=i(66616),P=i(47044),k=i(21811);function Q(a,n){1&a&&(t.TgZ(0,"div",22),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Field is required.")," "))}function w(a,n){1&a&&(t.TgZ(0,"div",22),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Field is required.")," "))}let z=(()=>{class a{constructor(e,o){this.assetsService=e,this.translate=o,this.form={layout:null,level:null,section:null},this.submitText="Submit",this.submitted=new t.vpe,this.canceled=new t.vpe}ngOnInit(){}cancel(){this.canceled.emit()}submit(){this.submitted.emit(this.form)}onImageChanged(e){this.assetsService.uploadImage(e).subscribe(o=>this.form.layout=o)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(_.z),t.Y36(c.sK))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-layout-form"]],inputs:{carParkId:"carParkId",form:"form",submitText:"submitText",cancelText:"cancelText"},outputs:{submitted:"submitted",canceled:"canceled"},decls:37,vars:21,consts:[[1,"m-form","m-form--fit","m-form--label-align-right"],[1,"m-portlet","m-portlet--bordered-semi"],[1,"m-portlet__head"],[1,"m-portlet__head-caption"],[1,"m-portlet__head-title"],[1,"m-portlet__head-text"],[1,"m-portlet__body"],[1,"form-group","m-form__group","row"],[1,"col-form-label","col-lg-2","col-sm-12"],[1,"col-md-10","col-sm-12"],[3,"image","imageChanged"],[1,"row","form-group","m-form__group"],[1,"col-lg-4","col-sm-12"],["type","text","nz-input","","name","level","required","",3,"ngModel","ngModelChange"],["level","ngModel"],["class","form-control-feedback",4,"ngIf"],["type","text","nz-input","","name","section","required","",3,"ngModel","ngModelChange"],["section","ngModel"],[1,"m-form__actions","m-form__actions--right"],["nz-button","","nzType","primary","nzSize","large","nzGhost","","type","button",1,"btn-form-ops",3,"click"],[1,"la","la-arrow-left"],["nz-button","","nzType","primary","nzSize","large",1,"btn-form-ops","m--margin-left-30",3,"click"],[1,"form-control-feedback"]],template:function(e,o){if(1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),t._uU(6),t.ALo(7,"translate"),t.qZA()()()(),t.TgZ(8,"div",6)(9,"div",7)(10,"label",8),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",9)(14,"app-image-input",10),t.NdJ("imageChanged",function(l){return o.onImageChanged(l)}),t.qZA()()(),t.TgZ(15,"div",11)(16,"label",8),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",12)(20,"input",13,14),t.NdJ("ngModelChange",function(l){return o.form.level=l}),t.qZA(),t.YNc(22,Q,3,3,"div",15),t.qZA(),t.TgZ(23,"label",8),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"div",12)(27,"input",16,17),t.NdJ("ngModelChange",function(l){return o.form.section=l}),t.qZA(),t.YNc(29,w,3,3,"div",15),t.qZA()()()(),t.TgZ(30,"div",18)(31,"button",19),t.NdJ("click",function(){return o.cancel()}),t._UZ(32,"i",20),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"button",21),t.NdJ("click",function(){return o.submit()}),t._uU(36),t.qZA()()()),2&e){const r=t.MAs(21),l=t.MAs(28);t.xp6(6),t.hij(" ",t.lcZ(7,11,"Car Park Layout")," "),t.xp6(5),t.hij(" ",t.lcZ(12,13,"Picture")," "),t.xp6(3),t.Q6J("image",o.form.layout),t.xp6(3),t.hij(" ",t.lcZ(18,15,"Level")," "),t.xp6(3),t.Q6J("ngModel",o.form.level),t.xp6(2),t.Q6J("ngIf",r.invalid&&(r.dirty||r.touched)),t.xp6(2),t.hij(" ",t.lcZ(25,17,"Section")," "),t.xp6(3),t.Q6J("ngModel",o.form.section),t.xp6(2),t.Q6J("ngIf",l.invalid&&(l.dirty||l.touched)),t.xp6(4),t.hij(" ",t.lcZ(34,19,"Cancel")," "),t.xp6(3),t.Oqu(o.submitText)}},dependencies:[g.O5,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.On,u.F,I.F,N.Zp,L.ix,P.w,k.dQ,c.X$],encapsulation:2}),a})(),j=(()=>{class a{constructor(e,o,r){this.router=e,this.route=o,this.layoutService=r}get carPark(){return this.route.parent.parent.snapshot.data.item}ngOnInit(){}onCanceled(){if(this.router.url.includes("/create")){const e=this.router.url.slice(0,this.router.url.indexOf("/create"));this.router.navigate([e])}else this.router.navigate(["carparks",this.carPark.id,"layouts"])}onSubmitted(e){this.layoutService.createModel({...e,carParkId:this.carPark.id}).subscribe(()=>{this.onCanceled()})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(s.F0),t.Y36(s.gz),t.Y36(p.P))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-layout-create"]],decls:4,vars:0,consts:[[1,"body-wrapper"],[1,"m-content"],[3,"canceled","submitted"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-title-bar"),t.TgZ(2,"div",1)(3,"app-layout-form",2),t.NdJ("canceled",function(){return o.onCanceled()})("submitted",function(l){return o.onSubmitted(l)}),t.qZA()()())},dependencies:[h.G,z],encapsulation:2}),a})();var q=i(26245),D=i(79118),H=i(52746),G=i(20388),R=i(11917),m=i(40269);function X(a,n){if(1&a&&t._uU(0),2&a){const e=n.range;t.lnq(" ",e[0],"-",e[1]," of ",n.$implicit," items\n")}}function $(a,n){if(1&a&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.Oqu(e.text)}}const B=function(a){return[a,"update"]};function K(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._UZ(8,"img",11),t.qZA(),t.TgZ(9,"td")(10,"a",12),t._UZ(11,"i",13),t.qZA(),t.TgZ(12,"button",14),t.NdJ("click",function(){const l=t.CHM(e).$implicit,C=t.oxw(),f=t.MAs(18);return t.KtG(C.openModal(f,l.id))}),t._UZ(13,"i",15),t.qZA()()()}if(2&a){const e=n.$implicit;t.ekj("ant-table-row-odd",n.index%2==1),t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Oqu(e.level),t.xp6(2),t.Oqu(e.section),t.xp6(2),t.Q6J("src",e.layout,t.LSH),t.xp6(2),t.Q6J("routerLink",t.VKq(7,B,e.id))}}function E(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"confirm-modal",16),t.NdJ("cancel",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.hideModal())})("submit",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.deleteLayout())}),t.qZA()}if(2&a){const e=t.oxw();t.Q6J("options",e.deleteModalOptions)}}const W=function(){return["create"]},V=[{text:"ID",width:"80px",align:D.iW.Center},{text:"Level",width:"80px"},{text:"Section",width:"80px"},{text:"Layout",width:"200px"},{text:"Actions",width:"100px"}];let tt=(()=>{class a extends H.t{constructor(e,o,r,l,C){super(),this.modalService=e,this.layoutService=o,this.router=r,this.route=l,this.translate=C,this.tableHeaders=V,this.deleteModalOptions={title:"Do you want to delete this layout?",message:"This can not be reverted"};const f=this.tableHeaders.map(d=>d.text);this.translate.get(f).subscribe(d=>{this.tableHeaders.forEach(x=>{for(let v in d)d.hasOwnProperty(v)&&x.text===v&&(x.text=d[v])})})}get filterParams(){return{carPark:this.carPark.id}}get carPark(){return this.route.parent.parent.snapshot.data.item}ngOnInit(){this.reloadData()}reloadData(){this.reloadDataService(this.layoutService,"filterModelByCarPark")}openModal(e,o){this.selectedLayoutId=o,this.modalRef=this.modalService.show(e,{class:"modal-dialog-centered"})}hideModal(){this.modalRef.hide()}deleteLayout(){this.layoutService.deleteModel(this.selectedLayoutId).subscribe(()=>{this.modalRef.hide(),this.reloadData()})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(G.tT),t.Y36(p.P),t.Y36(s.F0),t.Y36(s.gz),t.Y36(c.sK))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-layouts-table"]],features:[t.qOj],decls:19,vars:15,consts:[[1,"row","form-group","m-form__group","m--margin-bottom-30"],[1,"col-12","m--align-right"],["nz-button","","nzType","primary","nzSize","large","nzShape","round",3,"routerLink"],[1,"la","la-plus"],[1,"m-separator","m-separator--dashed","d-xl-none"],["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowSizeChanger","nzShowTotal","nzQueryParams"],["basicTable",""],[4,"ngFor","ngForOf"],[3,"ant-table-row-odd",4,"ngFor","ngForOf"],["deleteConfirm",""],["width","100%",3,"src"],[1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","no-border",3,"routerLink"],[1,"la","la-edit"],[1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","no-border",3,"click"],[1,"la","la-close"],[3,"options","cancel","submit"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t._UZ(3,"i",3),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t._UZ(7,"div",4),t.qZA()(),t.YNc(8,X,1,3,"ng-template",null,5,t.W1O),t.TgZ(10,"nz-table",6,7),t.NdJ("nzQueryParams",function(l){return o.onQueryParamsChange(l)}),t.TgZ(12,"thead")(13,"tr"),t.YNc(14,$,2,1,"th",8),t.qZA()(),t.TgZ(15,"tbody"),t.YNc(16,K,14,9,"tr",9),t.qZA()(),t.YNc(17,E,1,1,"ng-template",null,10,t.W1O)),2&e){const r=t.MAs(9),l=t.MAs(11);t.xp6(2),t.Q6J("routerLink",t.DdM(14,W)),t.xp6(3),t.hij(" ",t.lcZ(6,12,"Add New Layout")," "),t.xp6(5),t.Q6J("nzData",o.listData)("nzFrontPagination",!1)("nzLoading",o.loading)("nzTotal",o.pagination.totalCount)("nzPageSize",o.pagination.rowsPerPage)("nzPageIndex",o.pagination.page)("nzShowSizeChanger",!0)("nzShowTotal",r),t.xp6(4),t.Q6J("ngForOf",o.tableHeaders),t.xp6(2),t.Q6J("ngForOf",l.data)}},dependencies:[g.sg,s.rH,s.yS,R.X,m.N8,m.Uo,m._C,m.Om,m.p0,m.$Z,L.ix,P.w,k.dQ,c.X$],encapsulation:2}),a})(),et=(()=>{class a{constructor(e,o,r){this.router=e,this.route=o,this.carparkService=r,this.item=null,this.breadcrumbs=[]}onSubmitted(e){this.carparkService.updateModel(this.item.id,e).subscribe(()=>this.onCanceled())}onCanceled(){const[e,o,...r]=this.router.url.split("/");this.router.navigate([`/${(0,q.pO)()}/`,this.item.id])}ngOnInit(){this.route.parent.parent.data.subscribe(({item:e})=>{this.item=e})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(s.F0),t.Y36(s.gz),t.Y36(T.x))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-layouts"]],decls:8,vars:0,consts:[[1,"body-wrapper"],[1,"m-portlet__nav-link","btn","btn-lg","btn-outline-main","m-btn","m-btn--outline-2x","m-btn--air","m-btn--icon","m-btn--icon-only","m-btn--pill",3,"click"],[1,"la","la-reply"],[1,"m-content"],[1,"m-portlet","m-portlet--bordered-semi","m--padding-top-30"],[1,"m-portlet__body"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"app-title-bar")(2,"a",1),t.NdJ("click",function(){return o.onCanceled()}),t._UZ(3,"i",2),t.qZA()(),t.TgZ(4,"div",3)(5,"div",4)(6,"div",5),t._UZ(7,"app-layouts-table"),t.qZA()()()())},dependencies:[h.G,tt],encapsulation:2}),a})(),at=(()=>{class a{constructor(e,o,r){this.router=e,this.route=o,this.layoutService=r}get carpark(){return this.route.parent.parent.snapshot.data.item}ngOnInit(){this.layout=this.route.snapshot.data.layout}onCanceled(){this.router.navigate(["carparks",this.carpark.id,"layouts"])}onSubmitted(e){this.layoutService.updateModel(e).subscribe(()=>{this.router.navigate(["carparks",this.carpark.id,"layouts"])})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(s.F0),t.Y36(s.gz),t.Y36(p.P))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-layout-update"]],decls:4,vars:1,consts:[[1,"body-wrapper"],[1,"m-content"],[3,"form","canceled","submitted"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-title-bar"),t.TgZ(2,"div",1)(3,"app-layout-form",2),t.NdJ("canceled",function(){return o.onCanceled()})("submitted",function(l){return o.onSubmitted(l)}),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("form",o.layout))},dependencies:[h.G,z],encapsulation:2}),a})(),y=(()=>{class a{constructor(e){this.layoutService=e}resolve(e){return this.layoutService.getModel(e.params.layoutId).pipe((0,F.q)(1))}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(p.P))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac}),a})();const ot=[{path:"",component:et},{path:"create",component:j,data:{breadcrumb:{label:"Create"}}},{path:":layoutId/update",component:at,resolve:{layout:y},data:{breadcrumb:{label:"Update"}}}];let nt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[A.k,S.e,T.x,p.P,_.z,y],imports:[g.ez,s.Bz.forChild(ot),M.x,Z.D,Y,s.Bz]}),a})()}}]);