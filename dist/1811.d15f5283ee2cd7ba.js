"use strict";(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[1811],{53033:(N,x,a)=>{a.d(x,{Z:()=>c,e:()=>m});var p=a(36895),_=a(94650);let c=(()=>{class l extends p.H9{transform(g,u,y,O,A){if(!u)return"";switch(u.toUpperCase()){case"MMK":return`MMK ${g}`;case"SGD":return`$${g}`;default:return super.transform(g,u,y,O,A)}}}return l.\u0275fac=function(){let h;return function(u){return(h||(h=_.n5z(l)))(u||l)}}(),l.\u0275pipe=_.Yjl({name:"excurrency",type:l,pure:!0}),l})(),m=(()=>{class l{transform(g){return g/100}}return l.\u0275fac=function(g){return new(g||l)},l.\u0275pipe=_.Yjl({name:"cent2Dollar",type:l,pure:!0}),l})()},61811:(N,x,a)=>{a.r(x),a.d(x,{PageEvownerSelectModule:()=>Ft,createTranslateLoader:()=>E,routes:()=>k});var p=a(36895),_=a(80529),c=a(24006),m=a(34793),l=a(60097),h=a(67527),g=a(67556),u=a(91599),y=a(42684),O=a(51766),A=a(31289),U=a(4666),H=a(73071),J=a(30329),V=a(51013),I=a(24277),Z=a(89383),Q=a(19832),S=a(372),q=a(97640),C=a(59245),B=a(20388),z=a(21532),R=a(59501),K=a(77530),f=a(15439),t=a(94650),v=a(40269),W=a(71198),G=a(87501),M=a(34984);function X(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",50),t.NdJ("click",function(){const r=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.expression(r))}),t._uU(1),t.qZA()}if(2&i){const e=s.$implicit;t.xp6(1),t.Oqu(e.name)}}function tt(i,s){if(1&i&&(t.TgZ(0,"th",51),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.xp6(1),t.hij(" ",e," ")}}function et(i,s){if(1&i&&(t.ynx(0),t.TgZ(1,"tr",52)(2,"td",53),t._uU(3),t.qZA(),t.TgZ(4,"td",54),t._uU(5),t.qZA(),t.TgZ(6,"td",54),t._uU(7),t.qZA(),t.TgZ(8,"td",54),t._uU(9),t.qZA(),t.TgZ(10,"td",54),t._uU(11),t.qZA(),t.TgZ(12,"td",54),t._uU(13),t.qZA(),t.TgZ(14,"td",54),t._uU(15),t.qZA(),t.TgZ(16,"td",54),t._uU(17),t.qZA(),t.TgZ(18,"td",54),t._uU(19),t.qZA(),t.TgZ(20,"td",54),t._uU(21),t.qZA()(),t.BQk()),2&i){const e=s.$implicit;t.xp6(3),t.hij(" ",e.batch," "),t.xp6(2),t.hij(" ",e.description," "),t.xp6(2),t.hij(" ",e.capacity," "),t.xp6(2),t.hij(" ",e.vehicles," "),t.xp6(2),t.hij(" ",e.average_consumption," "),t.xp6(2),t.hij(" ",e.average_regenerated," "),t.xp6(2),t.hij(" ",e.average_consume," "),t.xp6(2),t.hij(" ",e.average_duration," "),t.xp6(2),t.hij(" ",e.average_temp," "),t.xp6(2),t.hij(" ",e.average_temp_charging," ")}}let nt=(()=>{class i{constructor(e){this.carParkService=e,this.carparkArr=[],this.timeRange=[],this.visitDate="",this.totalCount=343,this.allGuns=652,this.obj={},this.obj2={},this.obj3={},this.obj4={},this.hours=[],this.energyConsumptioSourceOption={},this.xAsixData=[],this.energyConsumptionHeaders=["Batch","Model","Capacity(kWh)","Number of Vehicles","Average Energy Consumption(kWh/100km)","Average Energy Regenerated(kWh)","Average Energy Consumer per Charge(kWh)","Average duration per charge(mins)","Average Temperature During Operations(\u2103)","Average Temperature During Charging(\u2103)"],this.energyReport=[{batch:"2019",capacity:310,vehicles:100,identification:"504",description:"BYD K9 2019",total_consumption:8171,average_consumption:135.6,average_regenerated:23,average_consume:186,average_duration:63,average_temp:35.6,average_temp_charging:35.8},{batch:"2021",capacity:310,vehicles:110,identification:"503",description:"BYD K9 2019",total_consumption:8171,average_consumption:135.6,average_regenerated:17,average_consume:130,average_duration:50,average_temp:36.6,average_temp_charging:35.8},{batch:"2019",capacity:310,vehicles:90,identification:"504",description:"BYD K9 2019",total_consumption:8171,average_consumption:135.6,average_regenerated:57,average_consume:186,average_duration:56,average_temp:35.9,average_temp_charging:35.8},{batch:"2021",capacity:310,vehicles:120,identification:"504",description:"BYD K9 2019",total_consumption:8171,average_consumption:135.6,average_regenerated:31,average_consume:253,average_duration:87,average_temp:34.6,average_temp_charging:35.8},{batch:"2019",capacity:310,vehicles:96,identification:"504",description:"BYD K9 2019",total_consumption:8171,average_consumption:135.6,average_regenerated:53,average_consume:253,average_duration:70,average_temp:37.6,average_temp_charging:35.8},{batch:"2021",capacity:422,vehicles:50,identification:"504",description:"Yutong E12DD",total_consumption:8171,average_consumption:135.6,average_regenerated:53,average_consume:186,average_duration:75,average_temp:35.2,average_temp_charging:35.8},{batch:"2019",capacity:422,vehicles:70,identification:"504",description:"Yutong E12DD",total_consumption:8171,average_consumption:135.6,average_regenerated:53,average_consume:253,average_duration:80,average_temp:36.5,average_temp_charging:35.8},{batch:"2021",capacity:422,vehicles:60,identification:"504",description:"Yutong E12DD",total_consumption:8171,average_consumption:135.6,average_regenerated:53,average_consume:200,average_duration:54,average_temp:35.9,average_temp_charging:35.8},{batch:"2019",capacity:422,vehicles:90,identification:"504",description:"Yutong E12DD",total_consumption:8171,average_consumption:135.6,average_regenerated:53,average_consume:300,average_duration:83,average_temp:37,average_temp_charging:35.8},{batch:"2021",capacity:422,vehicles:80,identification:"504",description:"Yutong E12DD",total_consumption:8171,average_consumption:135.6,average_regenerated:53,average_consume:320,average_duration:90,average_temp:36.6,average_temp_charging:35.8}]}ngOnInit(){this.carParkService.getSimpleList().subscribe(e=>{this.carparkArr=e});for(let e=0;e<23;e++)this.hours.push(`${e+1}:00`);this.hours.push("00:00"),this.energyConsumptioSourceOption={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{data:["Grid","BSS"],bottom:0},xAxis:[{type:"category",data:this.hours,axisPointer:{type:"shadow"}}],yAxis:[{type:"value"}],series:[{name:"Grid",type:"bar",stack:"analyze",data:[200,200,150,100,150,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,200],itemStyle:{color:"#5c98d0"}},{name:"BSS",type:"bar",stack:"analyze",data:[400,400,500,400,300,0,0,0,0,0,200,240,0,0,0,0,0,0,0,0,0,0,0,500],itemStyle:{color:"#e27830"}}],grid:{top:"20px",left:"30px"}};for(let e=0;e<10;e++)this.xAsixData.push(f().subtract(e,"day").format("DD-MMM-YY"));this.xAsixData.reverse(),this.leakageOption={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["Operation","Charging"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:this.xAsixData,axisTick:{alignWithLabel:!0},axisLabel:{interval:0,rotate:30}}],yAxis:[{type:"value"}],series:[{name:"Operation",type:"bar",data:[28,29,30,35,36,38,40,40,40,45],itemStyle:{color:"#02c876"}},{name:"Charging",type:"bar",data:[30,32,36,30,32,28,30,36,37,36],itemStyle:{color:"#00b0f0"}}]}}getVisitDate(e){this.visitDate=f(e[0]).format("YYYY-MM-DD")+" - "+f(e[1]).format("YYYY-MM-DD")}expression(e){console.log(e,"\u70b9\u51fb\u4e8b\u4ef6"),this.clickCarpark=e.name}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.x))},i.\u0275cmp=t.Xpm({type:i,selectors:[["first-dashboard"]],decls:239,vars:10,consts:[[1,"main-box"],[1,"filter"],[1,"dropdown"],["type","button","id","dropdownMenu2","data-toggle","dropdown","aria-expanded","false",1,"btn","btn-secondary","dropdown-toggle"],["aria-labelledby","dropdownMenu2",1,"dropdown-menu"],["class","dropdown-item","type","button",3,"click",4,"ngFor","ngForOf"],[1,"m-input-icon","m-input-icon--left"],["bsDaterangepicker","",1,"form-control",3,"ngModel","ngModelChange"],["drp","bsDaterangepicker"],[1,"m-input-icon__icon","m-input-icon__icon--left"],[1,"la","la-search"],[1,"first-box"],[1,"total-show"],[1,"total-title"],[2,"color","#2fc888"],[1,"total-bottom"],[1,"total-bottom-left","half"],[1,"allguns"],[1,"linear-gradient"],[1,"guns-desc"],[1,"middle-line"],[1,"total-bottom-right","half"],[1,"right-options","gray-color"],[1,"right-options","red-color"],[2,"color","#00c5ca"],[2,"height","6px"],[2,"display","inline-block","width","60px","height","5px","background-color","#2fc888"],[2,"display","inline-block","width","50px","height","5px","background-color","#00b0f0"],[2,"display","inline-block","width","20px","height","5px","background-color","#680dad"],[2,"display","inline-block","width","10px","height","5px","background-color","#bf0001"],[2,"color","#00b0f0"],[2,"color","#680dad"],[2,"color","#04bdb5"],[1,"total-bottom-left","half65"],[1,"total-bottom-right","half30"],[1,"echarts-areas"],[1,"echarts-areas-first-line"],["type","button",1,"btn","echarts-btns"],[1,"total-bottom-left","half30"],[1,"total-bottom-right","half65"],[1,"col-12"],["echarts","",1,"demo-chart",3,"options"],[1,"data-table"],[1,"table","table-striped",2,"border-collapse","separate","border-spacing","0px 10px"],[1,"",2,"color","#b6b9bd"],[1,"text-center"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"temperature-Overview"],[2,"padding-left","16px"],["type","button",1,"dropdown-item",3,"click"],["scope","col"],[1,"text-center","bg-white"],["scope","row",1,"py-4"],[1,"py-4"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"header")(2,"div",1)(3,"span"),t._uU(4," Car Park\uff1a "),t.qZA(),t.TgZ(5,"div",2)(6,"button",3),t._uU(7),t.qZA(),t.TgZ(8,"div",4),t.YNc(9,X,2,1,"button",5),t.qZA()()(),t.TgZ(10,"div",1)(11,"span"),t._uU(12),t.qZA(),t.TgZ(13,"div",6)(14,"input",7,8),t.NdJ("ngModelChange",function(r){return n.timeRange=r})("ngModelChange",function(r){return n.getVisitDate(r)}),t.qZA(),t.TgZ(16,"span",9)(17,"span"),t._UZ(18,"i",10),t.qZA()()()()(),t.TgZ(19,"article",11)(20,"div",12)(21,"div",13),t._uU(22," Chargers | "),t.TgZ(23,"span",14),t._uU(24,"LIVE"),t.qZA()(),t.TgZ(25,"div",15)(26,"div",16)(27,"h4"),t._uU(28,"TOTAL "),t.qZA(),t.TgZ(29,"div",17),t._uU(30," 99.2% "),t.qZA(),t._UZ(31,"div",18),t.TgZ(32,"div",19),t._uU(33," chargers online "),t.qZA()(),t._UZ(34,"div",20),t.TgZ(35,"div",21)(36,"div",22)(37,"span"),t._uU(38," Chargers up "),t.qZA(),t.TgZ(39,"span"),t._uU(40,"342"),t.qZA()(),t.TgZ(41,"div",23)(42,"span"),t._uU(43,"Charger down"),t.qZA(),t.TgZ(44,"span"),t._uU(45,"1"),t.qZA()(),t.TgZ(46,"div",22)(47,"span"),t._uU(48,"Total Chargers"),t.qZA(),t.TgZ(49,"span"),t._uU(50,"343"),t.qZA()()()()(),t.TgZ(51,"div",12)(52,"div",13),t._uU(53," Ports | "),t.TgZ(54,"span",24),t._uU(55,"LIVE"),t.qZA()(),t.TgZ(56,"div",15)(57,"div",16)(58,"h4"),t._uU(59,"TOTAL "),t.qZA(),t.TgZ(60,"div",17),t._uU(61," 21.3% "),t.qZA(),t.TgZ(62,"div",25),t._UZ(63,"span",26)(64,"span",27)(65,"span",28)(66,"span",29),t.qZA(),t.TgZ(67,"div",19),t._uU(68," ports utilised "),t.qZA()(),t._UZ(69,"div",20),t.TgZ(70,"div",21)(71,"div",22)(72,"span"),t._uU(73,"Ports available"),t.qZA(),t.TgZ(74,"span",24),t._uU(75,"260"),t.qZA()(),t.TgZ(76,"div",22)(77,"span"),t._uU(78,"Ports in-use"),t.qZA(),t.TgZ(79,"span",30),t._uU(80,"195"),t.qZA()(),t.TgZ(81,"div",22)(82,"span"),t._uU(83,"Ports reserved"),t.qZA(),t.TgZ(84,"span",31),t._uU(85,"36"),t.qZA()(),t.TgZ(86,"div",23)(87,"span"),t._uU(88,"Ports down"),t.qZA(),t.TgZ(89,"span"),t._uU(90,"2"),t.qZA()()()()(),t.TgZ(91,"div",12)(92,"div",13),t._uU(93," Transactions | "),t.TgZ(94,"span",32),t._uU(95,"LIVE"),t.qZA()(),t.TgZ(96,"div",15)(97,"div",33)(98,"h4"),t._uU(99,"TOTAL "),t.qZA(),t.TgZ(100,"div",17),t._uU(101," 179 "),t.qZA(),t._UZ(102,"div",18),t.TgZ(103,"div",19),t._uU(104," transactions on-going "),t.qZA()(),t._UZ(105,"div",20),t.TgZ(106,"div",34)(107,"div",22)(108,"span"),t._uU(109," Idling "),t.qZA(),t.TgZ(110,"span"),t._uU(111,"298"),t.qZA()(),t.TgZ(112,"div",23)(113,"span"),t._uU(114,"In-queue"),t.qZA(),t.TgZ(115,"span"),t._uU(116,"16"),t.qZA()()()()()(),t.TgZ(117,"article",35)(118,"div",36)(119,"button",37),t._uU(120,"1 WEEK"),t.qZA(),t.TgZ(121,"button",37),t._uU(122,"1 MONTH"),t.qZA(),t.TgZ(123,"button",37),t._uU(124,"3 MONTH"),t.qZA(),t.TgZ(125,"button",37),t._uU(126,"6 MONTH"),t.qZA(),t.TgZ(127,"button",37),t._uU(128,"1 YEAR"),t.qZA()(),t.TgZ(129,"div",1)(130,"span"),t._uU(131),t.qZA(),t.TgZ(132,"div",6)(133,"input",7,8),t.NdJ("ngModelChange",function(r){return n.timeRange=r})("ngModelChange",function(r){return n.getVisitDate(r)}),t.qZA(),t.TgZ(135,"span",9)(136,"span"),t._UZ(137,"i",10),t.qZA()()()()(),t.TgZ(138,"article",11)(139,"div",12)(140,"div",13),t._uU(141," Consumption | Overview "),t.qZA(),t.TgZ(142,"div",15)(143,"div",38)(144,"h4"),t._uU(145,"TOTAL "),t.qZA(),t.TgZ(146,"div",17),t._uU(147," 342 "),t.qZA(),t.TgZ(148,"div",19),t._uU(149," transactions "),t.qZA()(),t._UZ(150,"div",20),t.TgZ(151,"div",39)(152,"div",22)(153,"span"),t._uU(154," Energy (kWh) "),t.qZA(),t.TgZ(155,"span"),t._uU(156,"1680"),t.qZA()(),t.TgZ(157,"div",22)(158,"span"),t._uU(159,"Highest delivered (kWh)"),t.qZA(),t.TgZ(160,"span"),t._uU(161,"197.2"),t.qZA()(),t.TgZ(162,"div",22)(163,"span"),t._uU(164,"Lowest delivered (kWh)"),t.qZA(),t.TgZ(165,"span"),t._uU(166,"52.5"),t.qZA()()()()(),t.TgZ(167,"div",12)(168,"div",13),t._uU(169," Operations | Overview "),t.qZA(),t.TgZ(170,"div",15)(171,"div",16)(172,"h4"),t._uU(173,"UTILISATION "),t.qZA(),t.TgZ(174,"div",17),t._uU(175," 15.2% "),t.qZA()(),t._UZ(176,"div",20),t.TgZ(177,"div",21)(178,"div",22)(179,"span"),t._uU(180,"Averge charge (mins)"),t.qZA(),t.TgZ(181,"span"),t._uU(182,"352"),t.qZA()(),t.TgZ(183,"div",22)(184,"span"),t._uU(185,"Averge idle time (mins)"),t.qZA(),t.TgZ(186,"span"),t._uU(187,"103"),t.qZA()(),t.TgZ(188,"div",22)(189,"span"),t._uU(190,"Peak arrival time"),t.qZA(),t.TgZ(191,"span"),t._uU(192,"19:30"),t.qZA()(),t.TgZ(193,"div",22)(194,"span"),t._uU(195,"Peak departure time"),t.qZA(),t.TgZ(196,"span"),t._uU(197,"08:13"),t.qZA()()()()(),t.TgZ(198,"div",12)(199,"div",13),t._uU(200," Serviceability | Overview "),t.qZA(),t.TgZ(201,"div",15)(202,"div",16)(203,"h4"),t._uU(204,"SERVICEABILITY "),t.qZA(),t.TgZ(205,"div",17),t._uU(206," 98% "),t.qZA(),t._UZ(207,"div",18),t.TgZ(208,"div",19),t._uU(209," ratio "),t.qZA()(),t._UZ(210,"div",20),t.TgZ(211,"div",21)(212,"div",22)(213,"span"),t._uU(214," Chargers affected "),t.qZA(),t.TgZ(215,"span"),t._uU(216,"14"),t.qZA()(),t.TgZ(217,"div",23)(218,"span"),t._uU(219,"Average downtime (mins/charger)"),t.qZA(),t.TgZ(220,"span"),t._uU(221,"254"),t.qZA()()()()()(),t.TgZ(222,"div",40)(223,"h3"),t._uU(224,"Temperature | Overview "),t.qZA(),t._UZ(225,"div",41),t.qZA(),t.TgZ(226,"article",42)(227,"h3"),t._uU(228,"Energy Consumption by Model"),t.qZA(),t.TgZ(229,"table",43)(230,"thead",44)(231,"tr",45),t.YNc(232,tt,2,1,"th",46),t.qZA()(),t.TgZ(233,"tbody"),t.YNc(234,et,22,10,"ng-container",47),t.qZA()()(),t.TgZ(235,"article",48)(236,"H3",49),t._uU(237,"Energy Consumption by Source (kWh)"),t.qZA(),t._UZ(238,"div",41),t.qZA()()),2&e&&(t.xp6(7),t.hij(" ",n.clickCarpark||"carpark"," "),t.xp6(2),t.Q6J("ngForOf",n.carparkArr),t.xp6(3),t.hij(" ","Entry Time",":"),t.xp6(2),t.Q6J("ngModel",n.timeRange),t.xp6(117),t.hij(" ","From",":"),t.xp6(2),t.Q6J("ngModel",n.timeRange),t.xp6(92),t.Q6J("options",n.leakageOption),t.xp6(7),t.Q6J("ngForOf",n.energyConsumptionHeaders),t.xp6(2),t.Q6J("ngForOf",n.energyReport),t.xp6(4),t.Q6J("options",n.energyConsumptioSourceOption))},dependencies:[p.sg,v.Uo,v._C,v.Om,v.p0,v.$Z,W.T,G.F,c.Fj,c.JJ,c.On,M._w],styles:[".main-box[_ngcontent-%COMP%]{box-sizing:border-box;min-height:100vh;height:auto;margin:40px;background-color:#fff;padding:16px}.dropdown-toggle[_ngcontent-%COMP%]{min-width:250px;width:auto}header[_ngcontent-%COMP%]{display:flex}.dropdown-menu.show[_ngcontent-%COMP%]{height:200px;width:250px;overflow-y:scroll}.filter[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:100px;font-size:16px;font-weight:400}.filter[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:inline-block;width:100px!important;text-align:start}.filter[_ngcontent-%COMP%]:nth-of-type(2) > span[_ngcontent-%COMP%]{display:inline-block;width:130px!important;text-align:start}.filter[_ngcontent-%COMP%]:nth-of-type(3) > span[_ngcontent-%COMP%]{display:inline-block;width:130px!important;text-align:start}.form-control[_ngcontent-%COMP%]{width:270px}.first-box[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:16px}.total-show[_ngcontent-%COMP%]{border-radius:5px;width:30%;height:200px;border:5px solid #e4e4e4}.total-show-46[_ngcontent-%COMP%]{border-radius:5px;width:48%;height:200px;border:5px solid #e4e4e4}.total-title[_ngcontent-%COMP%]{font-size:16px;font-weight:500;background-color:#f6f6f6;height:40px;line-height:40px;box-sizing:border-box;padding-left:16px}.total-bottom[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;padding:16px;justify-content:space-between}.half[_ngcontent-%COMP%]{width:48%}.half30[_ngcontent-%COMP%]{width:30%}.half65[_ngcontent-%COMP%]{width:65%}.middle-line[_ngcontent-%COMP%]{border:1px solid gray;height:120px}.bg-guns[_ngcontent-%COMP%]{display:inline-block;width:30px;height:30px;background-image:url(guns.0cbc2333f32df95a.webp);background-size:30px 30px;background-repeat:no-repeat;background-position:center}.allguns[_ngcontent-%COMP%]{display:flex;font-size:30px}.allguns[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:inline-block;width:50%;font-size:30px;display:flex;justify-content:center;align-items:center;height:40px}.progress-groups[_ngcontent-%COMP%]{display:flex}.progress1[_ngcontent-%COMP%]{width:30%}.progress2[_ngcontent-%COMP%]{width:60%}.progress3[_ngcontent-%COMP%]{width:10%}.guns-desc[_ngcontent-%COMP%]{margin-top:12px;font-size:16px}.right-options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:14px}.right-options[_ngcontent-%COMP%]:nth-last-of-type(1){border:none}.total-bottom-right[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-evenly}.gray-color[_ngcontent-%COMP%]{color:gray}.red-color[_ngcontent-%COMP%]{color:#cb2f2f}.green-color[_ngcontent-%COMP%]{color:#00b050}.blue-color[_ngcontent-%COMP%]{color:#00b0f0}.needGreens[_ngcontent-%COMP%]{color:#36ca81}.linear-gradient[_ngcontent-%COMP%]{width:150px;height:5px;background-image:linear-gradient(to right,#36ca81,white)}.echarts-areas[_ngcontent-%COMP%]{margin-top:16px;display:flex}.echarts-btns[_ngcontent-%COMP%]{background-color:#e4e4e4;margin-right:16px}.echarts-areas-first-line[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]:hover{background-color:#48cf8c;border:1px solid #e4e4e4}.echarts-areas-first-line[_ngcontent-%COMP%]{margin-right:40px}.show-echarts[_ngcontent-%COMP%]{margin-top:16px;display:flex;justify-content:space-between}.echarts-options-params[_ngcontent-%COMP%]{width:32%;font-size:24px}.echarts-options-params-title[_ngcontent-%COMP%]{font-size:24px;border-bottom:3px solid #00bdb5}.hourly-utilisation[_ngcontent-%COMP%]{height:400px}.font24[_ngcontent-%COMP%]{font-size:24px}.temperature-Overview[_ngcontent-%COMP%]{padding-top:16px;width:70vw;height:500px}.data-table[_ngcontent-%COMP%]{background-color:#f2f3f8;box-sizing:border-box;padding:16px}"]}),i})();var D=a(79118),P=a(8929),w=a(38014),it=a(26245),F=a(15035),at=a(1059),ot=a(80013),rt=a(75778),Y=a(2994),st=a(87545),lt=a(72986),ct=a(94327),j=a(36511),b=a(71942),L=a(88796),gt=a(53033);function pt(i,s){if(1&i&&(t.TgZ(0,"option",29),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",t.lcZ(2,2,e.value)," ")}}function dt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"span",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.download(o))}),t.TgZ(1,"span"),t._UZ(2,"i",42),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&i&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"Download Receipt")))}function ht(i,s){if(1&i&&(t.TgZ(0,"ul",36)(1,"li",37)(2,"span",38)(3,"span"),t._UZ(4,"i",39),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.YNc(8,dt,6,3,"span",40),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(6),t.Oqu(t.lcZ(7,2,"Edit Transaction")),t.xp6(2),t.Q6J("ngIf",e.downloadRole())}}function ut(i,s){if(1&i&&(t.TgZ(0,"td",30)(1,"span"),t._uU(2),t.qZA()(),t.TgZ(3,"td",30)(4,"span"),t._uU(5),t.qZA()(),t.TgZ(6,"td",30)(7,"span"),t._uU(8),t.qZA()(),t.TgZ(9,"td",30)(10,"span"),t._uU(11),t.qZA()(),t.TgZ(12,"td",30)(13,"span"),t._uU(14),t.qZA()(),t.TgZ(15,"td",30)(16,"span"),t._uU(17),t.qZA()(),t.TgZ(18,"td",30)(19,"span"),t._uU(20),t.qZA()(),t.TgZ(21,"td",30)(22,"span"),t._uU(23),t.qZA()(),t.TgZ(24,"td",30)(25,"span"),t._uU(26),t.qZA()(),t.TgZ(27,"td",30)(28,"span"),t._uU(29),t.qZA()(),t.TgZ(30,"td",30)(31,"span"),t._uU(32),t.qZA()(),t.TgZ(33,"td",30)(34,"span"),t._uU(35),t.qZA()(),t.TgZ(36,"td",30)(37,"span"),t._uU(38),t.qZA()(),t.TgZ(39,"td",30)(40,"span"),t._uU(41),t.qZA()(),t.TgZ(42,"td",30)(43,"span"),t._uU(44),t.qZA()(),t.TgZ(45,"td",31)(46,"span")(47,"div",32)(48,"button",33),t._UZ(49,"i",34),t.qZA(),t.YNc(50,ht,9,4,"ul",35),t.qZA()()()),2&i){const e=s.$implicit,n=t.oxw();t.xp6(1),t.Udp("width",n.tableHeaders[0].width),t.xp6(1),t.hij(" ",(null==e?null:e.station)||"Kranji"," "),t.xp6(2),t.Udp("width",n.tableHeaders[1].width),t.xp6(1),t.hij(" ",null==e?null:e.lot," "),t.xp6(2),t.Udp("width",n.tableHeaders[2].width),t.xp6(1),t.hij(" ",(null==e?null:e.chargerId)||"-"," "),t.xp6(2),t.Udp("width",n.tableHeaders[3].width),t.xp6(1),t.hij(" ",(null==e?null:e.connector)||"-"," "),t.xp6(2),t.Udp("width",n.tableHeaders[4].width),t.xp6(1),t.hij(" ",(null==e?null:e.carPlateNo)||"-"," "),t.xp6(2),t.Udp("width",n.tableHeaders[5].width),t.xp6(1),t.hij(" ",(null==e?null:e.model)||"BYD K9"," "),t.xp6(2),t.Udp("width",n.tableHeaders[6].width),t.xp6(1),t.hij(" ",null==e?null:e.status," "),t.xp6(2),t.Udp("width",n.tableHeaders[7].width),t.xp6(1),t.hij(" ",null==e?null:e.soc," "),t.xp6(2),t.Udp("width",n.tableHeaders[8].width),t.xp6(1),t.hij(" ",null==e?null:e.startTime," "),t.xp6(2),t.Udp("width",n.tableHeaders[9].width),t.xp6(1),t.hij(" ",(null==e?null:e.startSoc)||"-"," "),t.xp6(2),t.Udp("width",n.tableHeaders[10].width),t.xp6(1),t.hij(" ",e.endTime," "),t.xp6(2),t.Udp("width",n.tableHeaders[11].width),t.xp6(1),t.hij(" ",e.duration||0," "),t.xp6(2),t.Udp("width",n.tableHeaders[12].width),t.xp6(1),t.hij(" ",e.timeLeft," "),t.xp6(2),t.Udp("width",n.tableHeaders[13].width),t.xp6(1),t.hij(" ","0.07"," KWH "),t.xp6(2),t.Udp("width",n.tableHeaders[14].width),t.xp6(1),t.hij(" ",(null==e?null:e.maxTemp)||"-"," "),t.xp6(2),t.Udp("width",n.tableHeaders[15].width)}}function mt(i,s){if(1&i&&(t._UZ(0,"td",30),t.TgZ(1,"td",30)(2,"div",43)(3,"div",44),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",45),t._uU(7),t.ALo(8,"excurrency"),t.qZA()(),t.TgZ(9,"div",43)(10,"div",44),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",45),t._uU(14),t.ALo(15,"excurrency"),t.qZA()(),t.TgZ(16,"div",43)(17,"div",44),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"div",45),t._uU(21),t.ALo(22,"excurrency"),t.qZA()()()),2&i){const e=s.$implicit;t.xp6(4),t.hij(" ",t.lcZ(5,6,"Calculation Cost")," "),t.xp6(3),t.hij(" ",t.xi3(8,8,(null==e.chargeSummary||null==e.chargeSummary.calculation?null:e.chargeSummary.calculation.amount)||0,null==e.chargeSummary||null==e.chargeSummary.calculation?null:e.chargeSummary.calculation.currency)," "),t.xp6(4),t.hij(" ",t.lcZ(12,11,"Promotions")," "),t.xp6(3),t.hij(" ",t.xi3(15,13,(null==e.chargeSummary||null==e.chargeSummary.promotion?null:e.chargeSummary.promotion.amount)||0,null==e.chargeSummary||null==e.chargeSummary.promotion?null:e.chargeSummary.promotion.currency)," "),t.xp6(4),t.hij(" ",t.lcZ(19,16,"Amount to Pay")," "),t.xp6(3),t.hij(" ",t.xi3(22,18,(null==e.chargeSummary||null==e.chargeSummary.total?null:e.chargeSummary.total.amount)||0,null==e.chargeSummary||null==e.chargeSummary.total?null:e.chargeSummary.total.currency)," ")}}let vt=(()=>{class i extends D.Gw{constructor(e,n,o,r,d){super(),this.carParkService=e,this.carparkService=n,this.transactionService=o,this.codeTablesService=r,this.vehicleService=d,this.vehiclePlateNo="",this.loading=!1,this.vehicleType="",this.status="",this.type="",this.timeRange=[],this.vehicle$=new P.xQ,this.iuNumber$=new P.xQ,this.carParkInput$=new P.xQ,this.pagination=(0,it.f$)(),this.data=[],this.tableHeaders=[{text:"Station",column:"station",width:"120px"},{text:"Lot",column:"lot",width:"80px"},{text:"Charger ID",column:"chargerId",width:"100px"},{text:"Port",column:"port",width:"100px"},{text:"Vehicle No.",column:"busPlateNo",width:"120px"},{text:"Model",column:"model",width:"120px"},{text:"Status",column:"status",width:"180px"},{text:"SOC%",column:"soc",width:"80px"},{text:"Start Time",column:"starttime",width:"240px"},{text:"Start SOC%",column:"startSoc",width:"100px"},{text:"End Time",column:"endTime",width:"240px"},{text:"Duration (mins)",column:"duration",width:"140px"},{text:"Time Left (mins)",column:"timeLeft",width:"140px"},{text:"Power (kWh)",column:"power",width:"140px"},{text:"Max Temp (\u2103)",column:"maxTemp",width:"100px"},{text:"Action",column:"action",width:"100px"}]}get filterParams(){return{vehicle:this.vehicle,iuNumber:this.iuNumber,carPark:this.carParkId,vehicleType:this.vehicleType,status:this.status,type:this.type,from:this.timeRange[0]&&(0,F.W8)(this.timeRange[0]),to:this.timeRange[1]&&(0,F.W8)(this.timeRange[1]),sort:"entryDateTime,desc"}}reloadData(){this.reloadDataService(this.transactionService)}pageChanged(e){this.pagination=e,this.reloadData()}ngOnInit(){this.getEnergyCostChargedOption(),this.getEnergyCostOption(),this.vehicle$.debounceTime(500).subscribe(()=>{this.reloadData()}),this.iuNumber$.debounceTime(500).subscribe(()=>{this.reloadData()}),this.reloadData(),this.carParks$=this.carParkInput$.pipe((0,at.O)(""),(0,ot.b)(200),(0,rt.x)(),(0,Y.b)(()=>this.carParkLoading=!0),(0,st.w)(e=>this.carParkService.getSimpleList(e).pipe((0,Y.b)(()=>this.carParkLoading=!1)))),this.vehicleTypes$=this.codeTablesService.filterModelByType(w.BcL.VehicleType).pipe((0,lt.q)(1)),this.statuses$=this.codeTablesService.filterModelByType(w.BcL.ParkingStatus),this.types$=this.codeTablesService.filterModelByType(w.BcL.ParkingType)}getEnergyCostChargedOption(){const e=["Normal","Emergency Stop","Stopped Vehicle","Reboot","Charging Station Stopped"];this.energyCostChargedOption={title:{text:"Type of charges"},legend:{orient:"vertical",right:10,top:10},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c}$ ({d}%)",textStyle:{fontFamily:"Poppins"}},series:[{name:"Sources of Charging",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:30,name:e[0]},{value:21,name:e[1]},{value:22,name:e[2]},{value:25,name:e[3]},{value:20,name:e[4]}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},normal:{label:{textStyle:{fontFamily:"Poppins"}}}},label:{normal:{show:!1,position:"inside",formatter:"{b} : {c}$ ({d}%)"}}}]}}getEnergyCostOption(){const e=[];for(let n=0;n<23;n++)e.push(`${n+1}:00`);e.push("00:00"),this.energyCostOption={title:{text:"Energy Consumption by Source (kWh)"},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{data:["Grid","BSS"],bottom:0},xAxis:[{type:"category",data:e,axisPointer:{type:"shadow"}}],yAxis:[{type:"value"}],series:[{name:"Grid",type:"bar",stack:"analyze",data:[200,200,150,100,150,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,200],itemStyle:{color:"#5c98d0"}},{name:"BSS",type:"bar",stack:"analyze",data:[400,400,500,400,300,0,0,0,0,0,200,240,0,0,0,0,0,0,0,0,0,0,0,500],itemStyle:{color:"#e27830"}}]}}get isMotorist(){return this.carparkService.isMotorist()}get isAdmin(){return this.carparkService.isAdmin()}get isOperator(){return this.vehicleService.isOperator()}downloadRole(){return this.isMotorist||this.isAdmin||this.isOperator}download(e){const n=`${e.vehicle.vehicleNumber}_${f(e.endTime).format("YYYYMMDD_HH_mm")}`;this.transactionService.getFile(e.id).subscribe(o=>{(0,ct.saveAs)(o,`${n}`)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.x),t.Y36(l.x),t.Y36(U.p),t.Y36(j.I),t.Y36(b.f))},i.\u0275cmp=t.Xpm({type:i,selectors:[["third-charging-transactions"]],features:[t.qOj],decls:70,vars:32,consts:[[2,"padding","16px","color","#00bdb5","margin","0"],[2,"color","#898b96","font-size","22px","margin","0 16px"],[1,"m-nav__link-icon","la","la-home",2,"color","#898b96","margin-right","10px"],[2,"color","#898b96","font-size","16px"],[1,"row","general-statistics",2,"padding","20px","display","none"],[1,"col-lg-6","m--padding-right-10"],[1,"m-portlet"],[1,"m-portlet__body"],[1,"stats-chart-container"],["echarts","",1,"demo-chart",3,"options"],[1,"col-10"],[1,"form-group","m-form__group","m-portlet__filters","row",2,"padding-left","20px"],[1,"m-portlet__filter","col-3"],[1,"col-form-label"],["placeholder","","bindLabel","name","bindValue","id",3,"items","ngModel","typeahead","loading","ngModelChange","change"],[1,"col-form-label","col-form-label-nowrap"],[1,"m-input-icon","m-input-icon--left"],["type","text","placeholder","",1,"form-control","m-input",3,"ngModel","ngModelChange"],[1,"m-input-icon__icon","m-input-icon__icon--left"],[1,"la","la-search"],[1,"m-portlet__filter"],["name","vehicleType",1,"form-control","m-input",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[2,"padding","16px"],[3,"headers","items","pagination","pageChanged"],["driverTable",""],["rowTemplate",""],["expandTemplate",""],[3,"value"],[1,"m-datatable__cell"],[1,"m-datatable__cell","action-cell"],["dropdown","","placement","bottom right"],["dropdownToggle","",1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--outline-2x","m-btn--pill","no-border"],[1,"la","la-ellipsis-h"],["class","dropdown-menu dropdown-menu-right","role","menu",4,"dropdownMenu"],["role","menu",1,"dropdown-menu","dropdown-menu-right"],["role","menuitem"],[1,"dropdown-item","m--font-metal"],[1,"la","la-edit"],["class","dropdown-item","style","cursor: pointer;",3,"click",4,"ngIf"],[1,"dropdown-item",2,"cursor","pointer",3,"click"],[1,"la","la-cloud-download"],[1,"row"],[1,"col-3","col-md-2","m-font-weight-500"],[1,"col"]],template:function(e,n){1&e&&(t.TgZ(0,"h3",0),t._uU(1," Charging Transactions "),t.TgZ(2,"span",1),t._uU(3,"|"),t.qZA(),t._UZ(4,"i",2),t.TgZ(5,"span",3),t._uU(6,">"),t.qZA(),t.TgZ(7,"span",3),t._uU(8,"Fleet Management"),t.qZA(),t.TgZ(9,"span",3),t._uU(10,">"),t.qZA(),t.TgZ(11,"span",3),t._uU(12,"Charging Transactions"),t.qZA()(),t.TgZ(13,"div",4)(14,"div",5)(15,"div",6)(16,"div",7)(17,"div",8),t._UZ(18,"div",9),t.qZA()()()(),t.TgZ(19,"div",5)(20,"div",6)(21,"div",7)(22,"div",8)(23,"div",10),t._UZ(24,"div",9),t.qZA()()()()()(),t.TgZ(25,"div")(26,"div",11)(27,"div",12)(28,"label",13),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"div")(32,"ng-select",14),t.NdJ("ngModelChange",function(r){return n.carParkId=r})("change",function(){return n.reloadData()}),t.ALo(33,"async"),t.qZA()()(),t.TgZ(34,"div",12)(35,"label",15),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"div",16)(39,"input",17),t.NdJ("ngModelChange",function(r){return n.vehicle=r})("ngModelChange",function(r){return n.vehicle$.next(r)}),t.qZA(),t.TgZ(40,"span",18)(41,"span"),t._UZ(42,"i",19),t.qZA()()()(),t.TgZ(43,"div",12)(44,"label",15),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"div",16)(48,"input",17),t.NdJ("ngModelChange",function(r){return n.iuNumber=r})("ngModelChange",function(r){return n.iuNumber$.next(r)}),t.qZA(),t.TgZ(49,"span",18)(50,"span"),t._UZ(51,"i",19),t.qZA()()()(),t.TgZ(52,"div",20)(53,"label",13),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"div")(57,"select",21),t.NdJ("ngModelChange",function(r){return n.vehicleType=r})("ngModelChange",function(){return n.reloadData()}),t.TgZ(58,"option",22),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.YNc(61,pt,3,4,"option",23),t.ALo(62,"async"),t.qZA()()()()(),t.TgZ(63,"div",24)(64,"app-datatable",25,26),t.NdJ("pageChanged",function(r){return n.pageChanged(r)}),t.YNc(66,ut,51,47,"ng-template",null,27,t.W1O),t.YNc(68,mt,23,21,"ng-template",null,28,t.W1O),t.qZA()()),2&e&&(t.xp6(18),t.Q6J("options",n.energyCostChargedOption),t.xp6(6),t.Q6J("options",n.energyCostOption),t.xp6(5),t.hij(" ",t.lcZ(30,18,"Station"),": "),t.xp6(3),t.Q6J("items",t.lcZ(33,20,n.carParks$))("ngModel",n.carParkId)("typeahead",n.carParkInput$)("loading",n.carParkLoading),t.xp6(4),t.hij(" ",t.lcZ(37,22,"Vehicle No."),": "),t.xp6(3),t.Q6J("ngModel",n.vehicle),t.xp6(6),t.hij(" ",t.lcZ(46,24,"Model"),": "),t.xp6(3),t.Q6J("ngModel",n.iuNumber),t.xp6(6),t.hij(" ",t.lcZ(55,26,"Status"),": "),t.xp6(3),t.Q6J("ngModel",n.vehicleType),t.xp6(2),t.Oqu(t.lcZ(60,28,"All")),t.xp6(2),t.Q6J("ngForOf",t.lcZ(62,30,n.vehicleTypes$)),t.xp6(3),t.Q6J("headers",n.tableHeaders)("items",n.data)("pagination",n.pagination))},dependencies:[p.sg,p.O5,v.Uo,D.nE,C.Hz,C.Mq,C.TO,L.w9,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.On,M._w,p.Ov,p.rS,gt.Z,Z.X$]}),i})();var T=a(28555);let _t=(()=>{class i{constructor(e,n,o,r,d){this.router=e,this.translate=n,this.store=o,this.vehicleService=r,this.carparkService=d,this.alive=!0,this.currentTab="list",this.user$=o.pipe((0,T.Ys)("global"))}changeTab(e){this.currentTab=e}gotoCreate(){this.router.navigate(["/bus-depots/create"])}tabClass(e){return e===this.currentTab?"active":""}ngOnInit(){this.router.navigate(["/bus-management"])}get isOperator(){return this.vehicleService.isOperator()}get isOwner(){return this.carparkService.isOwner()}get createOrNot(){return!(this.isOperator||this.isOwner)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.F0),t.Y36(Z.sK),t.Y36(T.yh),t.Y36(b.f),t.Y36(l.x))},i.\u0275cmp=t.Xpm({type:i,selectors:[["fourth-vehicle-overview"]],decls:2,vars:0,template:function(e,n){1&e&&(t.TgZ(0,"div"),t._uU(1," loading...\n"),t.qZA())}}),i})();var Zt=a(59857),ft=a(61715),xt=a(70853),Ct=a(76916);const bt=["scollRight"];function Tt(i,s){if(1&i&&(t.ynx(0),t.TgZ(1,"div"),t._uU(2),t.qZA(),t.BQk()),2&i){const e=s.$implicit;t.xp6(2),t.Oqu(e)}}function yt(i,s){if(1&i&&(t.TgZ(0,"div",17)(1,"div"),t._uU(2),t.qZA(),t.TgZ(3,"div",18),t._uU(4),t.qZA(),t.TgZ(5,"div"),t._uU(6),t.qZA()()),2&i){const e=s.$implicit,n=t.oxw();t.xp6(2),t.Oqu(e.name),t.xp6(1),t.Q6J("ngStyle",n.showStatus(e)),t.xp6(1),t.Oqu(e.busStatus),t.xp6(2),t.Oqu(e.mode)}}const $=function(i){return{left:i}};function Ot(i,s){if(1&i&&(t.TgZ(0,"div",19),t._uU(1),t._UZ(2,"div",20),t.qZA()),2&i){const e=s.$implicit,n=t.oxw();t.xp6(1),t.hij("",e.text," "),t.xp6(1),t.Q6J("ngStyle",t.VKq(2,$,n.getHourAndTime(e.text)+"px"))}}function At(i,s){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.value)}}function Mt(i,s){}function Pt(i,s){if(1&i&&(t.TgZ(0,"div",18),t.YNc(1,At,2,1,"span",23),t.YNc(2,Mt,0,0,"ng-template",null,24,t.W1O),t.qZA()),2&i){const e=s.$implicit,n=t.MAs(3),o=t.oxw(2);t.Q6J("ngStyle",o.showBusStatus(e)),t.xp6(1),t.Q6J("ngIf","Heating"!==e.value)("ngIfElse",n)}}function wt(i,s){if(1&i&&(t.TgZ(0,"div",21),t.YNc(1,Pt,4,3,"div",22),t.qZA()),2&i){const e=s.$implicit;t.xp6(1),t.Q6J("ngForOf",e.timeArr)}}let Ut=(()=>{class i{constructor(e){this.busService=e,this.tableHeader=[],this.tableData=[],this.timeList=[],this.subscription$=[],this.colorList=Zt.Q}ngOnInit(){this.init()}init(){this.now=new Date;for(let e=0;e<24;e++)this.timeList.push({text:`${e<10?"0"+e:e}:00`,current:!1});this.subscription$.push((0,ft.F)(1e3).subscribe(e=>{this.now=new Date,0===e&&(this.scollRight.nativeElement.scrollLeft=this.getHourAndTime(null,!0))},()=>{this.subscription$.forEach(e=>{e.unsubscribe()})},()=>{this.subscription$.forEach(e=>{e.unsubscribe()})})),this.busService.isBusAdmin()?(this.tableHeader=["Bus","Status","Mode"],this.subscription$.push(this.busService.getVehicleSessionData().subscribe(e=>{this.tableData=e.list,this.getCurrentStatus()}))):(this.tableHeader=["Charger","Status","Mode"],this.subscription$.push(this.busService.getEVownerVehicleSessionData().subscribe(e=>{this.tableData=e.list,this.getCurrentStatus()})))}getCurrentStatus(){const e=f().format("HH:mm");for(let n=0;n<this.tableData.length;n++){const o=this.tableData[n].timeArr;this.tableData[n].busStatus="Idle";for(let r=0;r<o.length;r++)if(o[r].start<=e&&e<=o[r].end){this.tableData[n].busStatus=o[r].status;break}}}showStatus(e){let n={background:"#fff",color:"#fff"};if(e.busStatus){const o=e.busStatus.toLowerCase();n={background:this.colorList[o],color:"idle"===e.busStatus.toLowerCase()?"#fff":"#000"}}return n}showBusStatus(e){if(e.status){const n=e.status.toLowerCase(),o=e.value.toLowerCase();let r=+(""+(this.getHourAndTime(e.end)-this.getHourAndTime(e.start)));if(r<0&&(r=+(""+(this.getHourAndTime("24:00")-this.getHourAndTime(e.start)))),"heating"!==o)return{background:"heating"===o?this.colorList[o]:this.colorList[n],left:`${this.getHourAndTime(e.start)}px`,width:`${r}px`}}return{background:"#fff"}}getHourAndTime(e,n){let o=0,r=0;return n||([o,r]=e.split(":").map(d=>+d)),n&&this.now&&(o=this.now.getHours(),r=this.now.getMinutes()),Number(60*o+ +r/60*60)+30}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(xt.Z))},i.\u0275cmp=t.Xpm({type:i,selectors:[["five-vehicle-charging-schedule"]],viewQuery:function(e,n){if(1&e&&t.Gf(bt,5),2&e){let o;t.iGM(o=t.CRH())&&(n.scollRight=o.first)}},decls:19,vars:7,consts:[[1,"body-wrapper"],[1,"m-content"],[1,"m-portlet","m-portlet--bordered-semi","m--padding-top-40"],[1,"m-portlet__body"],[1,"session-container"],[1,"main"],[1,"left-fixed"],[1,"name",2,"margin-bottom","20px"],[4,"ngFor","ngForOf"],["class","label",4,"ngFor","ngForOf"],[1,"right-time-main"],["scollRight",""],[1,"time-container",2,"margin-bottom","20px"],["class","time-item",4,"ngFor","ngForOf"],["class","status-container",4,"ngFor","ngForOf"],[1,"now-line",3,"ngStyle"],[1,"now"],[1,"label"],[1,"status",3,"ngStyle"],[1,"time-item"],[1,"time-line",3,"ngStyle"],[1,"status-container"],["class","status",3,"ngStyle",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["heating",""]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-title-bar"),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7),t.YNc(9,Tt,3,1,"ng-container",8),t.qZA(),t.YNc(10,yt,7,4,"div",9),t.qZA(),t.TgZ(11,"div",10,11)(13,"div",12),t.YNc(14,Ot,3,4,"div",13),t.qZA(),t.YNc(15,wt,2,1,"div",14),t.TgZ(16,"div",15)(17,"div",16),t._uU(18,"Now"),t.qZA()()()()()()()()()),2&e&&(t.xp6(9),t.Q6J("ngForOf",n.tableHeader),t.xp6(1),t.Q6J("ngForOf",n.tableData),t.xp6(4),t.Q6J("ngForOf",n.timeList),t.xp6(1),t.Q6J("ngForOf",n.tableData),t.xp6(1),t.Q6J("ngStyle",t.VKq(5,$,n.getHourAndTime("",!0)+"px")))},dependencies:[p.sg,p.O5,p.PC,Ct.G],styles:[".session-container[_ngcontent-%COMP%]{position:relative;width:100%}.session-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{display:flex;flex-flow:row;width:100%;align-items:center}.session-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .left-fixed[_ngcontent-%COMP%]{width:240px;display:flex;flex-wrap:wrap;margin-right:10px}.session-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .left-fixed[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .session-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .left-fixed[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:100%;display:flex}.session-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .left-fixed[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .session-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .left-fixed[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:33.3%;flex:auto;text-align:center;padding:5px}.session-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .left-fixed[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%], .session-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .left-fixed[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{font-weight:bolder;margin-bottom:20px;border-radius:10px}.session-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .right-time-main[_ngcontent-%COMP%]{flex:1;height:100%;overflow-x:auto;overflow-y:hidden;display:flex;position:relative;flex-direction:column;border-left:1px solid rgba(161,161,161,.75)}.session-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .right-time-main[_ngcontent-%COMP%]   .time-container[_ngcontent-%COMP%]{display:flex;height:32px;margin-bottom:4px}.session-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .right-time-main[_ngcontent-%COMP%]   .time-container[_ngcontent-%COMP%]   .time-item[_ngcontent-%COMP%]{width:60px;text-align:center;flex-shrink:0;padding:5px 0;border-right:0}.session-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .right-time-main[_ngcontent-%COMP%]   .time-container[_ngcontent-%COMP%]   .time-item[_ngcontent-%COMP%]   .time-line[_ngcontent-%COMP%]{position:absolute;height:100%;border-left:1px solid rgba(161,161,161,.75);top:42px}.session-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .right-time-main[_ngcontent-%COMP%]   .status-container[_ngcontent-%COMP%]{display:flex;position:relative;height:32px;margin-bottom:20px}.session-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .right-time-main[_ngcontent-%COMP%]   .status-container[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{height:32px;position:absolute;padding:5px 0;font-weight:bolder;text-align:center;border-radius:10px}.session-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .right-time-main[_ngcontent-%COMP%]   .now-line[_ngcontent-%COMP%]{position:absolute;height:100%;border-left:2px dashed rgba(161,161,161,.75);top:42px}.session-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .right-time-main[_ngcontent-%COMP%]   .now-line[_ngcontent-%COMP%]   .now[_ngcontent-%COMP%]{position:absolute;top:-20px;left:-15px}"]}),i})(),St=(()=>{class i{constructor(e,n,o,r,d){this.router=e,this.translate=n,this.store=o,this.vehicleService=r,this.carparkService=d,this.alive=!0,this.currentTab="list",this.user$=o.pipe((0,T.Ys)("global"))}changeTab(e){this.currentTab=e}gotoCreate(){this.router.navigate(["/bus-depots/create"])}tabClass(e){return e===this.currentTab?"active":""}ngOnInit(){this.router.navigate(["/bus-depots"])}get isOperator(){return this.vehicleService.isOperator()}get isOwner(){return this.carparkService.isOwner()}get createOrNot(){return!(this.isOperator||this.isOwner)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.F0),t.Y36(Z.sK),t.Y36(T.yh),t.Y36(b.f),t.Y36(l.x))},i.\u0275cmp=t.Xpm({type:i,selectors:[["station-overview"]],decls:2,vars:0,template:function(e,n){1&e&&(t.TgZ(0,"div"),t._uU(1,"\nloading...\n"),t.qZA())}}),i})();var qt=a(25698),Dt=a(33105);function E(i){return new Q.w(i,"../assets/i18n/",".json")}const k=[{path:"",component:R.f,children:[{path:"",redirectTo:"first-dashboard",pathMatch:"full"},{path:"first-dashboard",component:nt,data:{breadcrumb:{label:"First Dashboard"}}},{path:"station-overview",component:St,data:{breadcrumb:{label:"Station Overview"}}},{path:"third-charging-transactions",component:vt,data:{breadcrumb:{label:"Charging Transactions"}}},{path:"fourth-vehicle-overview",component:_t,data:{breadcrumb:{label:"Vehicle Overview"}}},{path:"five-vehicle-charging-schedule",component:Ut,data:{breadcrumb:{label:"Vehicle Charging Schedule"}}},{path:"ev-load-management",component:qt.S,data:{breadcrumb:{label:"EV Load Management"}}}]}];let Ft=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[u.k,y.e,l.x,U.p,O.C,A.K,H.K,g.z$,g.LS,g.Rq,h.Z,b.f,j.I],imports:[p.ez,m.Bz.forChild(k),B.zk,z.x,J.D,q.a4,C.mr,S.kn,S.kn,V.P,L.A0,c.u5,I.p,c.u5,q.a4,M.Ns.forRoot({echarts:()=>a.e(4734).then(a.bind(a,14734))}),Dt.EvcModule,K.v,Z.aw.forChild({loader:{provide:Z.Zw,useFactory:E,deps:[_.eN]}}),m.Bz]}),i})()}}]);