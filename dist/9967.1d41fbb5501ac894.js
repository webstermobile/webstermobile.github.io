"use strict";(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[9967],{51013:(H,B,r)=>{r.d(B,{P:()=>N});var t=r(82174),y=r(61643),z=r(36895),K=r(24006),a=r(76284),b=r(64870),x=r(30329),q=r(34793),e=r(372),Z=r(36511),W=r(24277),O=r(3108),U=r(88796),I=r(80529),A=r(89383),h=r(19832),E=r(22630),S=r(67556),M=r(61396),w=r(37096),Q=r(44466),J=r(94650);function R(_){return new h.w(_,"../assets/i18n/",".json")}let N=(()=>{class _{}return _.\u0275fac=function(i){return new(i||_)},_.\u0275mod=J.oAB({type:_}),_.\u0275inj=J.cJS({providers:[Z.I,a.z,b.P,S.z$],imports:[z.ez,K.u5,x.D,e.kn,M.b,t.su,y.r,O._,q.Bz,U.A0,W.p,E.z,A.aw.forChild({loader:{provide:A.Zw,useFactory:R,deps:[I.eN]}}),w.Zf,Q.m]}),_})()},52615:(H,B,r)=>{r.d(B,{a:()=>P});var t=r(94650),y=r(19690),z=r(72986),K=r(23753),a=r(80013),b=r(60097),x=r(36895),q=r(66616),e=r(47044),Z=r(21811),W=r(61396),O=r(82174),U=r(34793),I=r(42686),A=r(8454),h=r(23175),E=r(60086);let S=(()=>{class o{constructor(){this.iconSize="size-md",this.avatarColumn=4,this.thumbnail=!1}get availableStatus(){return(0,y.TR)(this.item)}ngOnInit(){}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-carpark-card"]],inputs:{item:"item",flat:"flat",iconSize:"iconSize",avatarColumn:"avatarColumn",thumbnail:"thumbnail"},decls:16,vars:10,consts:[[1,"right-top-conner"],[1,"fa","fa-exclamation"],[1,"row"],[1,"col-4","image"],[1,"text","flex-column","col-8"],[1,"title","m--marginless"],[1,"m--marginless","name"],[1,"m--marginless","status"],[1,"status-button"]],template:function(n,s){1&n&&(t.TgZ(0,"div")(1,"div",0),t._UZ(2,"i",1),t.qZA(),t.TgZ(3,"div",2),t._UZ(4,"div",3),t.TgZ(5,"div",4)(6,"h5",5),t._uU(7),t.qZA(),t.TgZ(8,"div")(9,"p",6),t._uU(10),t.qZA(),t.TgZ(11,"p",7),t._uU(12),t.qZA()(),t.TgZ(13,"div",8)(14,"span"),t._uU(15),t.qZA()()()()()),2&n&&(t.Gre("car-park-info-wrapper ",s.availableStatus.trim().toLowerCase(),""),t.xp6(4),t.Udp("background-image","url("+((null==s.item.images[0]?null:s.item.images[0].carParkImage)||"assets/app/media/img/icons/park-placeholder.png")+")"),t.xp6(3),t.Oqu(s.item.carParkCode),t.xp6(3),t.Oqu(s.item.name),t.xp6(2),t.AsE("",(null==s.item.live?null:s.item.live.availableLots)||"-"," / ",s.item.totalLots,""),t.xp6(3),t.Oqu(s.availableStatus))},styles:[".car-park-info-wrapper[_ngcontent-%COMP%]{position:relative;height:150px;width:265px;border-radius:8px;box-shadow:0 1px 15px #45414e14;background-color:#fff;overflow:hidden}.car-park-info-wrapper[_ngcontent-%COMP%]   .right-top-conner[_ngcontent-%COMP%]{position:absolute;right:0;top:0;border-color:transparent #32CD32 transparent transparent;border-width:0 30px 30px 0;border-style:solid;width:0;height:0}.car-park-info-wrapper[_ngcontent-%COMP%]   .right-top-conner[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;font-size:14px;transform:translate(18px)}.car-park-info-wrapper[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%]{height:150px}.car-park-info-wrapper[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{padding-right:0;background-position:center;background-repeat:no-repeat;background-size:cover}.car-park-info-wrapper[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px;font-family:Montserrat}.car-park-info-wrapper[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:17px;font-weight:600}.car-park-info-wrapper[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p.name[_ngcontent-%COMP%]{color:#9195a9}.car-park-info-wrapper[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p.status[_ngcontent-%COMP%]{color:#32cd32;font-weight:600}.car-park-info-wrapper[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .status-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:3px 20px;border-radius:12px;background-color:#ebedf2;color:#32cd32;font-weight:600}.car-park-info-wrapper.full[_ngcontent-%COMP%]   .right-top-conner[_ngcontent-%COMP%]{border-color:transparent #f4516c transparent transparent}.car-park-info-wrapper.full[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p.status[_ngcontent-%COMP%], .car-park-info-wrapper.full[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .status-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f4516c}.car-park-info-wrapper.almost[_ngcontent-%COMP%]   .right-top-conner[_ngcontent-%COMP%]{border-color:transparent #ffb822 transparent transparent}.car-park-info-wrapper.almost[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p.status[_ngcontent-%COMP%], .car-park-info-wrapper.almost[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .status-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ffb822}.car-park-info-wrapper.unavailable[_ngcontent-%COMP%]   .right-top-conner[_ngcontent-%COMP%]{border-color:transparent #868aa8 transparent transparent}.car-park-info-wrapper.unavailable[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p.status[_ngcontent-%COMP%], .car-park-info-wrapper.unavailable[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .status-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#868aa8}"]}),o})();var M=r(89383);function w(o,m){if(1&o&&(t.TgZ(0,"div",15),t._UZ(1,"img",16),t.TgZ(2,"span",17),t._uU(3),t.qZA()()),2&o){const n=t.oxw().$implicit;t.xp6(3),t.AsE("",n.evFreeLots||1," / ",n.evTotalLots,"")}}const Q=function(o){return{"background-color":o}},J=function(o){return{"marker-park-right":o}};function R(o,m){if(1&o){const n=t.EpF();t.TgZ(0,"agm-overlay",7)(1,"div",8),t.NdJ("click",function(){const D=t.CHM(n).$implicit,L=t.oxw(2);return t.KtG(L.clickedInfoWindow(D))}),t.TgZ(2,"div",9)(3,"div",10),t._uU(4,"P"),t.qZA()(),t.YNc(5,w,4,2,"div",11),t.qZA(),t.TgZ(6,"agm-info-window",12,13),t._UZ(8,"app-carpark-card",14),t.qZA()()}if(2&o){const n=m.$implicit,s=t.oxw(2);t.Q6J("latitude",n.geopoint.lat)("longitude",n.geopoint.lng),t.xp6(2),t.Q6J("ngStyle",t.VKq(14,Q,s.getCarParkAndPileStatus(n).parkBg))("ngClass",t.VKq(16,J,!n.evTotalLots)),t.xp6(3),t.Q6J("ngIf",n.evTotalLots),t.xp6(1),t.Q6J("closeOnMapClick",!0)("showCloseButton",!1)("longitude",n.geopoint.lng)("closeWhenOthersOpen",!0)("latitude",n.geopoint.lat)("isOpen",s.isInfoWindowOpen(n.id)),t.xp6(2),t.Q6J("thumbnail",!1)("item",n)("flat",!0)}}function N(o,m){if(1&o&&(t.TgZ(0,"div",59),t._uU(1),t.qZA()),2&o){const n=m.$implicit;t.xp6(1),t.hij("",n.name," ")}}function _(o,m){if(1&o&&(t.TgZ(0,"div",36)(1,"div",37)(2,"div",38)(3,"div",39)(4,"div",40),t._UZ(5,"img",41),t.qZA(),t.TgZ(6,"button",42),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"div",43)(10,"h5",44),t._uU(11),t.qZA(),t.TgZ(12,"div",45),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"div",46)(16,"div"),t._UZ(17,"i",47),t._uU(18),t.qZA(),t.TgZ(19,"div"),t._UZ(20,"i",48),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"div"),t._UZ(24,"i",49),t._uU(25),t.ALo(26,"translate"),t.qZA()()()()(),t.TgZ(27,"div",50)(28,"div",38)(29,"div",51),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"div",52)(33,"div",38)(34,"div",53)(35,"div",45),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"h6",54),t._uU(39),t.qZA()(),t.TgZ(40,"div",55)(41,"div",45),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"h6",45),t._uU(45),t.qZA()(),t.TgZ(46,"div",55)(47,"div",45),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"h6",45),t._uU(51),t.qZA()(),t.TgZ(52,"div",55)(53,"div",45),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"h6",45),t._uU(57),t.qZA()()()()(),t.TgZ(58,"div",56)(59,"div",51),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.TgZ(62,"div",57),t.YNc(63,N,2,1,"div",58),t.qZA()()()()),2&o){const n=t.oxw(4);t.xp6(5),t.Q6J("src",n.carparkDetails.images[0].carParkImage,t.LSH),t.xp6(1),t.Q6J("routerLink","./"+n.carparkDetails.id+"/transactions"),t.xp6(1),t.Oqu(t.lcZ(8,19,"View Detail")),t.xp6(4),t.Oqu(n.carparkDetails.name),t.xp6(2),t.Oqu(t.lcZ(14,21,"Manually Payment")),t.xp6(5),t.hij(" ",n.carparkDetails.address.address," "),t.xp6(3),t.hij(" ",t.lcZ(22,23,"Open Now")," "),t.xp6(4),t.hij(" ",t.lcZ(26,25,"No Fault")," "),t.xp6(5),t.Oqu(t.lcZ(31,27,"Carpark Lots")),t.xp6(6),t.Oqu(t.lcZ(37,29,"Total")),t.xp6(3),t.Oqu(n.carparkDetails.totalLots),t.xp6(3),t.Oqu(t.lcZ(43,31,"Available")),t.xp6(3),t.Oqu(null==n.carparkDetails.live?null:n.carparkDetails.live.availableLots),t.xp6(3),t.Oqu(t.lcZ(49,33,"In")),t.xp6(3),t.Oqu(n.carparkDetails.seasonLots||0),t.xp6(3),t.Oqu(t.lcZ(55,35,"Out")),t.xp6(3),t.Oqu(n.getNormalLots(n.carparkDetails)),t.xp6(3),t.Oqu(t.lcZ(61,37,"Stations")),t.xp6(3),t.Q6J("ngForOf",n.carparkDetails.stations)}}function v(o,m){if(1&o&&t._UZ(0,"app-carpark-transactions",60),2&o){const n=t.oxw(4);t.Q6J("parkId",n.carparkDetails.id)}}function i(o,m){if(1&o&&t._UZ(0,"app-carpark-season",60),2&o){const n=t.oxw(4);t.Q6J("parkId",n.carparkDetails.id)}}function d(o,m){if(1&o&&t._UZ(0,"app-carpark-vpgs",60),2&o){const n=t.oxw(4);t.Q6J("parkId",n.carparkDetails.id)}}function f(o,m){1&o&&t._UZ(0,"app-carpark-ev-status")}function C(o,m){if(1&o&&(t.TgZ(0,"div",31)(1,"div",32),t.YNc(2,_,64,39,"div",33),t.YNc(3,v,1,1,"app-carpark-transactions",34),t.YNc(4,i,1,1,"app-carpark-season",34),t.YNc(5,d,1,1,"app-carpark-vpgs",34),t.YNc(6,f,1,0,"app-carpark-ev-status",35),t.qZA()()),2&o){const n=t.oxw(3);t.xp6(2),t.Q6J("ngIf","default"===n.selectedTab),t.xp6(1),t.Q6J("ngIf","transaction"===n.selectedTab||"ev"===n.selectedTab),t.xp6(1),t.Q6J("ngIf","season"===n.selectedTab),t.xp6(1),t.Q6J("ngIf","vpgs"===n.selectedTab),t.xp6(1),t.Q6J("ngIf","evStatus"===n.selectedTab)}}const k=function(o){return{active:o}};function F(o,m){if(1&o){const n=t.EpF();t.TgZ(0,"div",18)(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"span",23),t._UZ(6,"i",24),t.qZA(),t.TgZ(7,"span",25),t.NdJ("click",function(){t.CHM(n);const g=t.oxw(2);return t.KtG(g.togglePanel=!g.togglePanel)}),t._UZ(8,"i",26),t.qZA()(),t.TgZ(9,"ul",27)(10,"li",28)(11,"a",29),t.NdJ("click",function(){t.CHM(n);const g=t.oxw(2);return t.KtG(g.handleTabChange("default"))}),t._uU(12),t.qZA()(),t.TgZ(13,"li",28)(14,"a",29),t.NdJ("click",function(){t.CHM(n);const g=t.oxw(2);return t.KtG(g.handleTabChange("transaction"))}),t._uU(15),t.ALo(16,"translate"),t.qZA()(),t.TgZ(17,"li",28)(18,"a",29),t.NdJ("click",function(){t.CHM(n);const g=t.oxw(2);return t.KtG(g.handleTabChange("season"))}),t._uU(19),t.ALo(20,"translate"),t.qZA()(),t.TgZ(21,"li",28)(22,"a",29),t.NdJ("click",function(){t.CHM(n);const g=t.oxw(2);return t.KtG(g.handleTabChange("vpgs"))}),t._uU(23),t.ALo(24,"translate"),t.qZA()(),t.TgZ(25,"li",28)(26,"a",29),t.NdJ("click",function(){t.CHM(n);const g=t.oxw(2);return t.KtG(g.handleTabChange("ev"))}),t._uU(27),t.ALo(28,"translate"),t.qZA()(),t.TgZ(29,"li",28)(30,"a",29),t.NdJ("click",function(){t.CHM(n);const g=t.oxw(2);return t.KtG(g.handleTabChange("evStatus"))}),t._uU(31),t.ALo(32,"translate"),t.qZA()()()()(),t.YNc(33,C,7,5,"div",30),t.qZA()()}if(2&o){const n=t.oxw(2);t.xp6(5),t.Q6J("routerLink","./"+n.carparkDetails.id+"/transactions"),t.xp6(6),t.Q6J("ngClass",t.VKq(24,k,"default"===n.selectedTab)),t.xp6(1),t.hij(" ",n.carparkDetails.name," "),t.xp6(2),t.Q6J("ngClass",t.VKq(26,k,"transaction"===n.selectedTab)),t.xp6(1),t.hij(" ",t.lcZ(16,14,"Transactions")," "),t.xp6(3),t.Q6J("ngClass",t.VKq(28,k,"season"===n.selectedTab)),t.xp6(1),t.hij(" ",t.lcZ(20,16,"Season Parking")," "),t.xp6(3),t.Q6J("ngClass",t.VKq(30,k,"vpgs"===n.selectedTab)),t.xp6(1),t.hij(" ",t.lcZ(24,18,"VPGS")," "),t.xp6(3),t.Q6J("ngClass",t.VKq(32,k,"ev"===n.selectedTab)),t.xp6(1),t.hij(" ",t.lcZ(28,20,"EV Transactions")," "),t.xp6(3),t.Q6J("ngClass",t.VKq(34,k,"evStatus"===n.selectedTab)),t.xp6(1),t.hij(" ",t.lcZ(32,22,"EV Status")," "),t.xp6(2),t.Q6J("ngIf",!n.togglePanel)}}function p(o,m){if(1&o){const n=t.EpF();t.TgZ(0,"div",3)(1,"agm-map",4),t.NdJ("zoomChange",function(g){t.CHM(n);const D=t.oxw();return t.KtG(D.zoomChange(g))})("mapClick",function(){t.CHM(n);const g=t.oxw();return t.KtG(g.openedWindow=null)}),t.YNc(2,R,9,18,"agm-overlay",5),t.qZA(),t.YNc(3,F,34,36,"div",6),t.qZA()}if(2&o){const n=t.oxw();t.xp6(1),t.Q6J("longitude",n.longitude)("latitude",n.latitude)("zoom",15)("disableDefaultUI",!1)("zoomControl",!0),t.xp6(1),t.Q6J("ngForOf",n.items),t.xp6(1),t.Q6J("ngIf",!!n.carparkDetails)}}function u(o,m){if(1&o){const n=t.EpF();t.TgZ(0,"a",68),t.NdJ("click",function(){const D=t.CHM(n).$implicit,L=t.oxw(3);return t.KtG(L.clickedScrollbar(D.id))}),t._UZ(1,"img",69),t.TgZ(2,"div",70)(3,"div",71),t._uU(4),t.ALo(5,"titlecase"),t.qZA(),t.TgZ(6,"span")(7,"span",72),t._uU(8,"\u2022"),t.qZA(),t._uU(9),t.qZA()()()}if(2&o){const n=m.$implicit,s=t.oxw(3);t.xp6(1),t.Q6J("src",(null==n.images[0]?null:n.images[0].carParkImage)||"assets/app/media/img/icons/park-placeholder.png",t.LSH),t.xp6(3),t.Oqu(t.lcZ(5,6,n.name)),t.xp6(2),t.Gre("status ",s.getStatus(n).trim().toLowerCase(),""),t.xp6(3),t.hij(" ",s.getStatus(n),"")}}function l(o,m){if(1&o&&(t.TgZ(0,"div",65)(1,"div",66),t.YNc(2,u,10,8,"a",67),t.qZA()()),2&o){const n=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",n.items)}}function c(o,m){if(1&o&&(t.TgZ(0,"div",61)(1,"div",62)(2,"h3",63),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.YNc(5,l,3,1,"div",64),t.qZA()),2&o){const n=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,2,"Car Parks")," "),t.xp6(2),t.Q6J("ngIf",n.items&&n.items.length>0)}}function T(o,m){1&o&&(t.TgZ(0,"div",73)(1,"div",74)(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"span"),t._UZ(6,"div",75),t.qZA()()()),2&o&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"Please wait...")," "))}let P=(()=>{class o{constructor(n,s){this.carparkService=n,this.changeDetectorRef=s,this.items=[],this.zoom=1,this.latitude=1.3329002,this.longitude=103.7413114,this.previous=null,this.carparkDetails=null,this.selectedTab="default",this.togglePanel=!1,this.openedWindow=null,this.getCarParkDetailInterval=null,this.isSnazzyInfoWindowOpened=!1,this.scrollHook=null,this.$eventContainer=null,this.startIndex=1,this.dataStatus=!1,this.loading=!0}ngOnInit(){window.navigator.geolocation?window.navigator.geolocation.getCurrentPosition(({coords:n})=>{this.carparkService.getCarparkAll(n).subscribe(s=>{this.items=s.content,this.loading=!1},s=>{this.loading=!1})},()=>{this.handleLocationError()}):this.carparkService.getCarparkAll({longitude:103.7413114,latitude:1.3329002}).subscribe(s=>{this.items=s.content,this.loading=!1},s=>{this.loading=!1})}filterModel(n){this.loading=!0,this.carparkService.filterModel({lat:n.latitude,lng:n.longitude}).subscribe(s=>{this.items=s.data,this.loading=!1,setTimeout(()=>{this.latitude=n.latitude,this.longitude=n.longitude,this.zoom=12,this.$eventContainer=document.getElementById("scrollBOx"),this.scrollHook=(0,K.R)(this.$eventContainer,"scroll").pipe((0,a.b)(200)).subscribe(g=>{this.handleScroll(this.$eventContainer)})},200)},s=>{this.loading=!1})}handleLocationError(){this.loading=!0,this.carparkService.getCarparkAll({longitude:103.7413114,latitude:1.3329002}).subscribe(s=>{this.items=s.content,this.loading=!1},s=>{this.loading=!1})}zoomChange(n){console.log(n),this.isSnazzyInfoWindowOpened=17===n||16===n}getNormalLots(n){return n.live?n.totalLots-n.live.availableLots-n.seasonLots:"-"}clickedMarker(n){this.getCarParkById(n.id)}clickedScrollbar(n){this.openedWindow=n,this.getCarParkById(n),this.getCarParkDetailInterval&&clearInterval(this.getCarParkDetailInterval),this.getCarParkDetailInterval=setInterval(()=>this.getCarParkById(n),5e3)}getCarParkById(n){this.carparkService.getModel(n||this.carparkDetails.id).pipe((0,z.q)(1)).subscribe(s=>{this.carparkDetails=s})}isInfoWindowOpen(n){return this.openedWindow===n}getStatus(n){return(0,y.TR)(n)}getCarParkAndPileStatus(n){return(0,y.Y4)(n)}handleTabChange(n){this.selectedTab=n,this.carparkDetails&&"default"===n?this.getCarParkDetailInterval=setInterval(()=>this.getCarParkById(this.carparkDetails.id),5e3):clearInterval(this.getCarParkDetailInterval)}ngOnDestroy(){clearInterval(this.getCarParkDetailInterval),this.scrollHook&&this.scrollHook.unsubscribe()}clickedInfoWindow(n){console.log(n),this.clickedMarker(n),this.openedWindow=n.id}handleScroll(n){let s=this;if(console.log(s.dataStatus,"\u6570\u636e\u72b6\u6001"),n.scrollHeight-n.scrollTop-n.offsetHeight<50){s.startIndex+=1;let j={size:20,page:s.startIndex};window.navigator.geolocation.getCurrentPosition(({coords:$})=>{this.loading=!0,s.carparkService.filterModel({lat:$.latitude,lng:$.longitude},j).subscribe(Y=>{Y&&(this.loading=!1,s.items=[...s.items,...Y.data])},Y=>{this.loading=!1})},()=>{s.handleLocationError()})}}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(b.x),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-carpark-map"]],decls:3,vars:3,consts:[["class","st-carpark__map col-10",4,"ngIf"],["class","st-carpark__scrollbar m--padding-0 col-2","fxFlex","1 1 100%",4,"ngIf"],["class","m-blockui-loading",4,"ngIf"],[1,"st-carpark__map","col-10"],[3,"longitude","latitude","zoom","disableDefaultUI","zoomControl","zoomChange","mapClick"],[3,"latitude","longitude",4,"ngFor","ngForOf"],["class","m--margin-top-15",4,"ngIf"],[3,"latitude","longitude"],[1,"marker-container","d-flex","justify-content-center",3,"click"],[1,"marker-park","text-center",3,"ngStyle","ngClass"],[1,"marker-text"],["class","marker-charge",4,"ngIf"],[3,"closeOnMapClick","showCloseButton","longitude","closeWhenOthersOpen","latitude","isOpen"],["infoWindow",""],[3,"thumbnail","item","flat"],[1,"marker-charge"],["src","./assets/app/media/img/icons/evWhite.png","alt",""],[1,"marker-text","ml-1"],[1,"m--margin-top-15"],[1,"m-portlet","m-portlet--tabs"],[1,"m-portlet__head"],[1,"m-portlet__head-tools","position-relative"],[1,"action-group"],[3,"routerLink"],[1,"fa","fa-eye"],[3,"click"],[1,"fa","fa-times-circle"],["role","tablist",1,"nav","nav-tabs","m-tabs-line","m-tabs-line--primary","m-tabs-line--2x","custom-tabs"],[1,"nav-item","m-tabs__item"],[1,"nav-link","m-tabs__link",2,"padding","10px 0",3,"ngClass","click"],["class","m-portlet__body",4,"ngIf"],[1,"m-portlet__body"],[1,"m-portlet__frame"],["class","row container-fluid m-row--col-separator-sm",4,"ngIf"],[3,"parkId",4,"ngIf"],[4,"ngIf"],[1,"row","container-fluid","m-row--col-separator-sm"],[1,"col-md-5"],[1,"row"],[1,"col-4"],[1,"m-rounded",2,"width","110px","margin","0 auto 10px"],["alt","","width","110","height","110",3,"src"],["nz-button","","nzType","primary","nzBlock","",3,"routerLink"],[1,"col","m--padding-left-20","m--padding-right-0","m--padding-left-40"],[1,"m--font-boldest","m--margin-bottom-5","text-main"],[1,"text-muted"],[1,"text-muted","m--margin-top-10"],[1,"la","la-map-marker","m--margin-right-10"],[1,"la","la-clock-o","m--margin-right-10"],[1,"la","la-exclamation-circle","m--margin-right-10"],[1,"col-md-7","m-section"],[1,"col-3","m--font-boldest"],[1,"col-9"],[1,"m--align-center"],[1,"m--font-boldest"],[1,"m--align-center","m--margin-left-20"],[1,"row","m--margin-top-10"],[1,"row","header--stations"],["class","border rounded-circle",4,"ngFor","ngForOf"],[1,"border","rounded-circle"],[3,"parkId"],["fxFlex","1 1 100%",1,"st-carpark__scrollbar","m--padding-0","col-2"],[1,"st-carpark__scrollbar-header","m--padding-top-15","m--padding-bottom-15"],[1,"m-subheader__title","m-subheader__title--separator","m--padding-left-15","m--padding-right-15","text-main"],["class","st-carpark__scrollbar-content","id","scrollBOx",4,"ngIf"],["id","scrollBOx",1,"st-carpark__scrollbar-content"],[1,"list-group"],["class","m--padding-left-15 m--padding-right-15 list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"m--padding-left-15","m--padding-right-15","list-group-item","list-group-item-action",3,"click"],["width","40px","height","40px","alt","",1,"m--img-rounded","m--img-centered",3,"src"],[1,"info-wrapper","flex-column"],[1,"name"],[2,"font-size","16px"],[1,"m-blockui-loading"],[1,"m-blockui"],[1,"m-loader","m-loader--brand"]],template:function(n,s){1&n&&(t.YNc(0,p,4,7,"div",0),t.YNc(1,c,6,4,"div",1),t.YNc(2,T,7,3,"div",2)),2&n&&(t.Q6J("ngIf",s.items&&s.items.length>0),t.xp6(1),t.Q6J("ngIf",s.items&&s.items.length>0),t.xp6(1),t.Q6J("ngIf",s.loading))},dependencies:[x.mk,x.sg,x.O5,x.PC,q.ix,e.w,Z.dQ,W.c,O.d,O.SA,U.rH,I.w,A.x,h.w,E.G,S,x.rS,M.X$],styles:["agm-map{height:700px}.st-carpark__map .st-carpark__map-list{height:300px;overflow-y:scroll}.st-carpark__map .m-portlet__head{height:3rem}.st-carpark__map .custom-tabs{bottom:0}.st-carpark__map .action-group{position:absolute;right:0;top:50%;transform:translateY(-50%);z-index:99}.st-carpark__map .action-group span:hover{cursor:pointer}.st-carpark__map .action-group span:first-child{margin-right:20px}.si-content{max-width:unset!important;min-width:150px;max-height:unset!important;overflow:visible}.st-carpark__scrollbar{background:#fff;margin-bottom:2.5em}.st-carpark__scrollbar-header{border-bottom:1px solid #f4f5f8}.st-carpark__scrollbar-header h3{font-family:Poppins;font-size:20px;font-weight:600;font-style:normal;font-stretch:normal;letter-spacing:normal;color:#575962}.st-carpark__scrollbar-content{overflow-y:scroll;height:635px}.st-carpark__scrollbar-content .list-group .list-group-item{display:flex;align-items:center;border:unset}.st-carpark__scrollbar-content .list-group .list-group-item>img{margin-right:10px}.list-group-item .name,.st-carpark__status-left-information .name{font-family:Montserrat;font-size:14px;font-weight:600;font-style:normal;font-stretch:normal;letter-spacing:normal;color:#575962}.st-carpark__status-left-information .name{font-weight:400}.list-group-item .status{font-family:LucidaGrande;font-size:12px;font-weight:300;font-style:normal;font-stretch:normal;letter-spacing:normal;color:#34bfa3;text-transform:capitalize}.list-group-item .status.full{color:#f4516c}.list-group-item .status.almost{color:#ffb822}.list-group-item .status.unavailable{color:#868aa8}.st-carpark__status{background:#fff;display:flex;padding:30px}.st-carpark__status-left{display:flex;border-right:solid 1px #f4f5f8}.detail-image,.st-carpark__status-left-detail{text-align:center}.gm-ui-hover-effect{display:none}.marker-park{border-top-left-radius:6px;border-bottom-left-radius:6px;padding:5px;border-right:1px solid #fff;min-width:30px}.marker-text{color:#fff;line-height:18px}.marker-park-right{border-top-right-radius:6px;border-bottom-right-radius:6px;border:0}.marker-charge{padding:5px;background-color:#e6ae3b;border-top-right-radius:6px;border-bottom-right-radius:6px}\n"],encapsulation:2}),o})()},42686:(H,B,r)=>{r.d(B,{w:()=>N});var t=r(38014),y=r(79118),z=r(72986),K=r(52746),a=r(94650),b=r(34793),x=r(60097),q=r(36511),e=r(89383),Z=r(36895),W=r(35635),O=r(73325),U=r(29562),I=r(47044),A=r(38231),h=r(40269),E=r(24006);function S(_,v){if(1&_&&(a._UZ(0,"nz-option",12),a.ALo(1,"titlecase")),2&_){const i=v.$implicit;a.Q6J("nzValue",i.value)("nzLabel",a.lcZ(1,2,i.value))}}function M(_,v){if(1&_&&(a._UZ(0,"nz-option",12),a.ALo(1,"titlecase")),2&_){const i=v.$implicit;a.Q6J("nzValue",i.value)("nzLabel",a.lcZ(1,2,i.value))}}function w(_,v){if(1&_&&a._uU(0),2&_){const i=v.range;a.lnq(" ",i[0],"-",i[1]," of ",v.$implicit," items\n")}}function Q(_,v){if(1&_&&(a.TgZ(0,"th"),a._uU(1),a.qZA()),2&_){const i=v.$implicit;a.xp6(1),a.Oqu(i.text)}}const J=function(_){return["../edit",_]};function R(_,v){if(1&_){const i=a.EpF();a.ynx(0),a.TgZ(1,"tr")(2,"td",13),a.NdJ("nzExpandChange",function(f){const k=a.CHM(i).$implicit,F=a.oxw();return a.KtG(F.onExpandChange(k.id,f))}),a.qZA(),a.TgZ(3,"td"),a._uU(4),a.qZA(),a.TgZ(5,"td"),a._UZ(6,"i",14),a._uU(7),a.qZA(),a.TgZ(8,"td"),a._uU(9),a.ALo(10,"date"),a.qZA(),a.TgZ(11,"td"),a._uU(12),a.ALo(13,"date"),a.qZA(),a.TgZ(14,"td"),a._uU(15),a.qZA(),a.TgZ(16,"td"),a._uU(17),a.qZA(),a.TgZ(18,"td"),a._uU(19),a.qZA(),a.TgZ(20,"td"),a._uU(21),a.qZA(),a.TgZ(22,"td")(23,"button",15),a._UZ(24,"i",16),a.qZA(),a.TgZ(25,"nz-dropdown-menu",null,17)(27,"ul",18)(28,"li",19),a._UZ(29,"i",20),a.TgZ(30,"span"),a._uU(31),a.ALo(32,"translate"),a.qZA()(),a.TgZ(33,"li",21),a._UZ(34,"i",22),a.TgZ(35,"span"),a._uU(36),a.ALo(37,"translate"),a.qZA()()()()()(),a.TgZ(38,"tr",23)(39,"nz-table",24)(40,"thead")(41,"tr")(42,"th"),a._uU(43),a.ALo(44,"translate"),a.qZA(),a.TgZ(45,"th"),a._uU(46),a.ALo(47,"translate"),a.qZA(),a.TgZ(48,"th"),a._uU(49),a.ALo(50,"translate"),a.qZA()()(),a.TgZ(51,"tbody")(52,"tr")(53,"td"),a._uU(54),a.qZA(),a.TgZ(55,"td"),a._uU(56),a.qZA(),a.TgZ(57,"td"),a._uU(58),a.qZA()()()()(),a.BQk()}if(2&_){const i=v.$implicit,d=v.index,f=a.MAs(26),C=a.oxw();a.xp6(1),a.ekj("ant-table-row-odd",d%2==1),a.xp6(1),a.Q6J("nzExpand",C.expandSet.has(i.id)),a.xp6(2),a.Oqu(i.code),a.xp6(3),a.hij(" ",null==i.vehicle?null:i.vehicle.vehicleNumber," "),a.xp6(2),a.Oqu(a.xi3(10,25,null==i.startDate?null:i.startDate.split("[")[0],"d LLL yyyy")),a.xp6(3),a.Oqu(a.xi3(13,28,null==i.endDate?null:i.endDate.split("[")[0],"d LLL yyyy")),a.xp6(3),a.AsE("",null==i.driver?null:i.driver.firstName," ",null==i.driver?null:i.driver.lastName,""),a.xp6(2),a.AsE("",null==i.driver||null==i.driver.mobile?null:i.driver.mobile.countryCode,"",null==i.driver||null==i.driver.mobile?null:i.driver.mobile.number,""),a.xp6(2),a.Oqu(null==i.driver?null:i.driver.email),a.xp6(2),a.Oqu(null==i.carpark?null:i.carpark.name),a.xp6(2),a.Q6J("nzDropdownMenu",f)("nzPlacement","topCenter"),a.xp6(5),a.Q6J("routerLink",a.VKq(41,J,i.id)),a.xp6(3),a.Oqu(a.lcZ(32,31,"Edit Season Parking")),a.xp6(5),a.Oqu(a.lcZ(37,33,"Renew")),a.xp6(2),a.Q6J("nzExpand",C.expandSet.has(i.id)),a.xp6(5),a.Oqu(a.lcZ(44,35,"Identity Type")),a.xp6(3),a.Oqu(a.lcZ(47,37,"Identity No.")),a.xp6(3),a.Oqu(a.lcZ(50,39,"Address")),a.xp6(5),a.Oqu(null==i.vehicle?null:i.vehicle.vehicleType),a.xp6(2),a.Oqu(null==i.vehicle?null:i.vehicle.vehicleNumber),a.xp6(2),a.Oqu(null==i.driver?null:i.driver.email)}}let N=(()=>{class _ extends K.t{constructor(i,d,f,C,k){super(),this.router=i,this.route=d,this.carParkService=f,this.codeTablesService=C,this.translate=k,this.tableHeaders=[{text:"",width:"30px",align:y.iW.Center},{text:"ID",column:"id",width:"80px"},{text:"Vehicle",column:"vehicle",width:"120px"},{text:"Start Date",column:"startDate",width:"120px"},{text:"End Date",column:"endDate",width:"120px"},{text:"User Name",column:"userName",width:"120px"},{text:"Mobile",column:"mobile",width:"120px"},{text:"Email",column:"email",width:"140px"},{text:"Car Park",column:"carPark",width:"140px"},{text:"Actions",width:"80px"}],this.vehicleType="",this.carParkType="",this.expandSet=new Set;const F=this.tableHeaders.map(p=>p.text);this.translate.get(F).subscribe(p=>{this.tableHeaders.forEach(u=>{for(let l in p)p.hasOwnProperty(l)&&u.text===l&&(u.text=p[l])})})}get filterParams(){return{keyword:this.keyword,vehicleType:this.vehicleType}}reloadData(){this.loading=!0,this.carParkService.filterSeasons(this.parkId?this.parkId:this.route.parent.snapshot.paramMap.get("id"),this.filterParams,this.pagination).subscribe(i=>{this.loading=!1,this.pagination={...this.pagination,totalCount:i.pagination.totalCount},this.listData=i.data})}pageChanged(i){this.pagination=i,this.reloadData()}ngOnInit(){this.vehicleTypes$=this.codeTablesService.filterModelByType(t.BcL.VehicleType).pipe((0,z.q)(1)),this.carParkTypes$=this.codeTablesService.filterModelByType(t.BcL.ParkingType).pipe((0,z.q)(1)),this.reloadData()}onExpandChange(i,d){d?this.expandSet.add(i):this.expandSet.delete(i)}}return _.\u0275fac=function(i){return new(i||_)(a.Y36(b.F0),a.Y36(b.gz),a.Y36(x.x),a.Y36(q.I),a.Y36(e.sK))},_.\u0275cmp=a.Xpm({type:_,selectors:[["app-carpark-season"]],inputs:{parkId:"parkId"},features:[a.qOj],decls:31,vars:25,consts:[[1,"form-group","m-form__group","m-portlet__filters"],[1,"m-portlet__filter"],[1,"col-form-label"],["name","vehicle","nzPlaceHolder","Please Select",2,"width","100%",3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["name","carParkType","nzPlaceHolder","Please Select",2,"width","100%",3,"ngModel","ngModelChange"],[1,"m-input-icon","m-input-icon--left"],["type","text","nz-input","","placeholder","",3,"ngModel","ngModelChange"],["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowSizeChanger","nzShowTotal","nzQueryParams"],["basicTable",""],[4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],[3,"nzExpand","nzExpandChange"],[1,"la","la-automobile"],["nz-dropdown","","nzTrigger","click",1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--outline-2x","m-btn--pill","no-border",3,"nzDropdownMenu","nzPlacement"],[1,"la","la-ellipsis-h"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"routerLink"],[1,"la","la-edit",2,"margin-right","4px"],["nz-menu-item",""],[1,"la","la-refresh",2,"margin-right","4px"],[3,"nzExpand"],["nzTemplateMode",""]],template:function(i,d){if(1&i&&(a.TgZ(0,"div",0)(1,"div",1)(2,"label",2),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.TgZ(5,"div")(6,"nz-select",3),a.NdJ("ngModelChange",function(C){return d.vehicleType=C})("ngModelChange",function(){return d.reloadData()}),a.YNc(7,S,2,4,"nz-option",4),a.ALo(8,"async"),a.qZA()()(),a.TgZ(9,"div",1)(10,"label",2),a._uU(11),a.ALo(12,"translate"),a.qZA(),a.TgZ(13,"div")(14,"nz-select",5),a.NdJ("ngModelChange",function(C){return d.carParkType=C})("ngModelChange",function(){return d.reloadData()}),a.YNc(15,M,2,4,"nz-option",4),a.ALo(16,"async"),a.qZA()()(),a.TgZ(17,"div",1)(18,"label",2),a._uU(19," Car Park No. / Name "),a.qZA(),a.TgZ(20,"div",6)(21,"input",7),a.NdJ("ngModelChange",function(C){return d.keyword=C})("ngModelChange",function(){return d.reloadData()}),a.qZA()()()(),a.YNc(22,w,1,3,"ng-template",null,8,a.W1O),a.TgZ(24,"nz-table",9,10),a.NdJ("nzQueryParams",function(C){return d.onQueryParamsChange(C)}),a.TgZ(26,"thead")(27,"tr"),a.YNc(28,Q,2,1,"th",11),a.qZA()(),a.TgZ(29,"tbody"),a.YNc(30,R,59,43,"ng-container",11),a.qZA()()),2&i){const f=a.MAs(23),C=a.MAs(25);a.xp6(3),a.hij(" ",a.lcZ(4,17,"Vehicle Type"),": "),a.xp6(3),a.Q6J("ngModel",d.vehicleType),a.xp6(1),a.Q6J("ngForOf",a.lcZ(8,19,d.vehicleTypes$)),a.xp6(4),a.hij(" ",a.lcZ(12,21,"Car Park"),": "),a.xp6(3),a.Q6J("ngModel",d.carParkType),a.xp6(1),a.Q6J("ngForOf",a.lcZ(16,23,d.carParkTypes$)),a.xp6(6),a.Q6J("ngModel",d.keyword),a.xp6(3),a.Q6J("nzData",d.listData)("nzFrontPagination",!1)("nzLoading",d.loading)("nzTotal",d.pagination.totalCount)("nzPageSize",d.pagination.rowsPerPage)("nzPageIndex",d.pagination.page)("nzShowSizeChanger",!0)("nzShowTotal",f),a.xp6(4),a.Q6J("ngForOf",d.tableHeaders),a.xp6(2),a.Q6J("ngForOf",C.data)}},dependencies:[Z.sg,W.Zp,O.wO,O.r9,U.cm,U.RR,I.w,A.Ip,A.Vq,h.N8,h.Uo,h._C,h.h7,h.Om,h.p0,h.$Z,h.d3,h.Vk,b.rH,E.Fj,E.JJ,E.On,Z.Ov,Z.rS,Z.uU,e.X$],encapsulation:2}),_})()},8454:(H,B,r)=>{r.d(B,{x:()=>F});var t=r(38014),z=(r(79118),r(15035)),K=r(8929),a=r(36053),b=r(21086),x=r(72986),q=r(52746),e=r(94650),Z=r(76284),W=r(4666),O=r(60097),U=r(36511),I=r(34793),A=r(89383),h=r(36895),E=r(38231),S=r(834),M=r(40269),w=r(24006);function Q(p,u){if(1&p&&(e._UZ(0,"nz-option",13),e.ALo(1,"titlecase")),2&p){const l=u.$implicit;e.Q6J("nzValue",l.value)("nzLabel",e.lcZ(1,2,l.value))}}function J(p,u){if(1&p&&(e._UZ(0,"nz-option",13),e.ALo(1,"titlecase")),2&p){const l=u.$implicit;e.Q6J("nzValue",l.code)("nzLabel",e.lcZ(1,2,l.name))}}function R(p,u){if(1&p&&(e._UZ(0,"nz-option",13),e.ALo(1,"titlecase")),2&p){const l=u.$implicit;e.Q6J("nzValue",l.code)("nzLabel",e.lcZ(1,2,l.name))}}function N(p,u){if(1&p&&e._uU(0),2&p){const l=u.range;e.lnq(" ",l[0],"-",l[1]," of ",u.$implicit," items\n")}}function _(p,u){if(1&p&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&p){const l=u.$implicit;e.xp6(1),e.Oqu(l.text)}}const v=function(p){return["/vehicle-management",p]};function i(p,u){if(1&p&&(e.TgZ(0,"a",15)(1,"span"),e._UZ(2,"img",16),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA()()),2&p){const l=e.oxw().$implicit,c=e.oxw();e.Q6J("routerLink",e.VKq(3,v,l.vehicle.id)),e.xp6(2),e.Q6J("src",c.vehicleTypeLogo(l),e.LSH),e.xp6(2),e.Oqu(null==l.vehicle?null:l.vehicle.vehicleNumber)}}const d=function(p){return["/carparks",p]};function f(p,u){if(1&p&&(e.TgZ(0,"a",15),e._uU(1),e.qZA()),2&p){const l=e.oxw().$implicit;e.Q6J("routerLink",e.VKq(2,d,l.carPark.id)),e.xp6(1),e.hij(" ",null==l.carPark?null:l.carPark.name," ")}}function C(p,u){if(1&p&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e.YNc(4,i,5,5,"a",14),e.qZA(),e.TgZ(5,"td"),e.YNc(6,f,2,4,"a",14),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"date"),e._UZ(10,"br"),e._uU(11),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"date"),e._UZ(16,"br"),e._uU(17),e.ALo(18,"date"),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.ALo(23,"currency"),e.qZA(),e.TgZ(24,"td"),e._UZ(25,"span"),e._uU(26," \xa0 "),e.TgZ(27,"span"),e._uU(28),e.ALo(29,"titlecase"),e.qZA()()()),2&p){const l=u.$implicit,c=u.index,T=e.oxw();let P,o;e.ekj("ant-table-row-odd",c%2==1),e.xp6(2),e.Oqu(l.id),e.xp6(2),e.Q6J("ngIf",l.vehicle),e.xp6(2),e.Q6J("ngIf",l.carPark),e.xp6(2),e.hij(" ",e.xi3(9,18,l.startTime,"d LLL yyyy")," "),e.xp6(3),e.hij(" ",e.xi3(12,21,l.startTime,"h:mm:ss a")," "),e.xp6(3),e.hij(" ",e.xi3(15,24,l.endTime,"d LLL yyyy")," "),e.xp6(3),e.hij(" ",e.xi3(18,27,l.endTime,"h:mm:ss a")," "),e.xp6(3),e.Oqu(l.duration||0),e.xp6(2),e.Oqu(e.lcZ(23,30,(null==l.chargeSummary||null==l.chargeSummary.total?null:l.chargeSummary.total.amount)/100)),e.xp6(3),e.Gre("m-badge m-badge--",(null==(P=T.getTransactionType(l.type))?null:P.color)||"info"," m-badge--dot"),e.xp6(2),e.Gre("m--font-bold m--font-",(null==(o=T.getTransactionType(l.type))?null:o.color)||"info",""),e.xp6(1),e.hij(" ",e.lcZ(29,32,T.getTransactionTypeString(l.type))," ")}}const k=[{text:"ID",column:"id",width:"100px"},{text:"Vehicle No.",column:"vehiclePlateNo",width:"120px"},{text:"Car Park",column:"carParkId",width:"160px"},{text:"Entry Time",column:"entryDateTime",width:"120px"},{text:"Exit Time",column:"exitDateTime",width:"120px"},{text:"Duration(min)",column:"duration",width:"80px"},{text:"Amount",column:"paymentAmount",width:"100px"},{text:"Type",column:"type",width:"80px"}];let F=(()=>{class p extends q.t{constructor(l,c,T,P,o,m,n){super(),this.assetsService=l,this.transactionService=c,this.carParkService=T,this.codeTablesService=P,this.route=o,this.translate=m,this.carparkService=n,this.tableHeaders=k,this.originalHeaders=this.tableHeaders,this.vehicleIcon=t.mts,this.vehiclePlateNo="",this.statusOptions=t.EKt,this.loading=!1,this.vehicleType="",this.status="",this.type="",this.timeRange=[],this.vehicle$=new K.xQ;const s=this.tableHeaders.map(g=>g.text);this.translate.get(s).subscribe(g=>{this.tableHeaders.forEach(D=>{for(const L in g)g.hasOwnProperty(L)&&D.text===L&&(D.text=g[L])})})}ngOnInit(){this.vehicle$.debounceTime(400).subscribe(()=>{this.reloadData()}),this.reloadData(),this.vehicleTypes$=this.codeTablesService.filterModelByType(t.BcL.VehicleType).pipe((0,x.q)(1)),this.statuses$=this.codeTablesService.filterModelByType(t.BcL.ParkingStatus).pipe((0,x.q)(1)),this.types$=this.codeTablesService.filterModelByType(t.BcL.ParkingType).pipe((0,x.q)(1))}get filterParams(){return{carPark:this.parkId?this.parkId:this.route.parent.snapshot.paramMap.get("id"),keyword:this.vehicle,vehicleType:this.vehicleType,status:this.status,type:this.type,from:this.timeRange[0]&&(0,z.W8)(this.timeRange[0]),to:this.timeRange[1]&&(0,z.W8)(this.timeRange[1]),sort:"entryDateTime,desc"}}reloadData(){this.reloadDataService(this.transactionService)}pageChanged(l){this.pagination=l,this.reloadData()}getTransactionType(l){return t.L0I.find(c=>c.value===l)}getTransactionTypeString(l){return"openParking"===l||"Open Parking"===l?"Hourly Parking":l}getAttachments(l){return l.length?(0,a.aj)(l.map(c=>this.assetsService.getImageByUuid(c.assetUuid))):(0,b.of)(null)}vehicleTypeLogo(l){return t.php.filter(c=>c.value===l.vehicle.vehicleType).map(c=>c.icon)[0]}get isMotorist(){return this.carparkService.isMotorist()}}return p.\u0275fac=function(l){return new(l||p)(e.Y36(Z.z),e.Y36(W.p),e.Y36(O.x),e.Y36(U.I),e.Y36(I.gz),e.Y36(A.sK),e.Y36(O.x))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-carpark-transactions"]],inputs:{parkId:"parkId"},features:[e.qOj],decls:40,vars:35,consts:[[1,"form-group","m-form__group","m-portlet__filters"],[1,"m-portlet__filter"],[1,"col-form-label"],["name","vehicle","nzPlaceHolder","Please Select",2,"width","100%",3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["name","carPark","nzPlaceHolder","Please Select",2,"width","100%",3,"ngModel","ngModelChange"],["name","type","nzPlaceHolder","Please Select",2,"width","100%",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowSizeChanger","nzShowTotal","nzQueryParams"],["basicTable",""],[4,"ngFor","ngForOf"],[3,"ant-table-row-odd",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],[3,"routerLink",4,"ngIf"],[3,"routerLink"],["alt","",3,"src"]],template:function(l,c){if(1&l&&(e.TgZ(0,"div",0)(1,"div",1)(2,"label",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div")(6,"nz-select",3),e.NdJ("ngModelChange",function(P){return c.vehicleType=P})("ngModelChange",function(){return c.reloadData()}),e.YNc(7,Q,2,4,"nz-option",4),e.ALo(8,"async"),e.qZA()()(),e.TgZ(9,"div",1)(10,"label",2),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div")(14,"nz-select",5),e.NdJ("ngModelChange",function(P){return c.status=P})("ngModelChange",function(){return c.reloadData()}),e.YNc(15,J,2,4,"nz-option",4),e.ALo(16,"async"),e.qZA()()(),e.TgZ(17,"div",1)(18,"label",2),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"div")(22,"nz-select",6),e.NdJ("ngModelChange",function(P){return c.type=P})("ngModelChange",function(){return c.reloadData()}),e.YNc(23,R,2,4,"nz-option",4),e.ALo(24,"async"),e.qZA()()(),e.TgZ(25,"div",1)(26,"label",2),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"div")(30,"nz-range-picker",7),e.NdJ("ngModelChange",function(P){return c.timeRange=P})("ngModelChange",function(){return c.reloadData()}),e.qZA()()()(),e.YNc(31,N,1,3,"ng-template",null,8,e.W1O),e.TgZ(33,"nz-table",9,10),e.NdJ("nzQueryParams",function(P){return c.onQueryParamsChange(P)}),e.TgZ(35,"thead")(36,"tr"),e.YNc(37,_,2,1,"th",11),e.qZA()(),e.TgZ(38,"tbody"),e.YNc(39,C,30,34,"tr",12),e.qZA()()),2&l){const T=e.MAs(32),P=e.MAs(34);e.xp6(3),e.hij(" ",e.lcZ(4,21,"Vehicle Type"),": "),e.xp6(3),e.Q6J("ngModel",c.vehicleType),e.xp6(1),e.Q6J("ngForOf",e.lcZ(8,23,c.vehicleTypes$)),e.xp6(4),e.hij(" ",e.lcZ(12,25,"Status"),": "),e.xp6(3),e.Q6J("ngModel",c.status),e.xp6(1),e.Q6J("ngForOf",e.lcZ(16,27,c.statuses$)),e.xp6(4),e.hij(" ",e.lcZ(20,29,"Type"),": "),e.xp6(3),e.Q6J("ngModel",c.type),e.xp6(1),e.Q6J("ngForOf",e.lcZ(24,31,c.types$)),e.xp6(4),e.hij(" ",e.lcZ(28,33,"Time Range"),": "),e.xp6(3),e.Q6J("ngModel",c.timeRange),e.xp6(3),e.Q6J("nzData",c.listData)("nzFrontPagination",!1)("nzLoading",c.loading)("nzTotal",c.pagination.totalCount)("nzPageSize",c.pagination.rowsPerPage)("nzPageIndex",c.pagination.page)("nzShowSizeChanger",!0)("nzShowTotal",T),e.xp6(4),e.Q6J("ngForOf",c.tableHeaders),e.xp6(2),e.Q6J("ngForOf",P.data)}},dependencies:[h.sg,h.O5,E.Ip,E.Vq,S.uw,S.wS,M.N8,M.Uo,M._C,M.Om,M.p0,M.$Z,I.yS,w.JJ,w.On,h.Ov,h.rS,h.H9,h.uU,A.X$],encapsulation:2}),p})()}}]);