"use strict";(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[232],{76284:(Y,U,a)=>{a.d(U,{z:()=>f});var r=a(3927),e=a(94650),T=a(80529),i=a(28555),A=a(11481),b=a(91599);let f=(()=>{class h extends r.su{constructor(d,_,u,Z){super(d,_),this.http=d,this.store=_,this.sanitizer=u,this.modelName="User",this.baseUrl="",this.handleError=Z.createHandleError(`${this.modelName}Service`)}uploadImage(d){const _=this.getUrl("carpark/api/assets/img"),u=new FormData;return u.append("file",d,d.name),this.post(_,u).map(({uuid:Z})=>this.getImage(Z))}getImage(d){return this.getUrl(`carpark/api/resources/${d}`)}getImageByUuid(d,_){return this.get(this.getUrl(`carpark/api/resources/${d}`),{responseType:"blob"}).map(u=>_?this._getSafeFileUrl(u):this.getSafeFileUrl(u))}getSafeFileUrl(d){return this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(d))}_getSafeFileUrl(d){return{imgUrl:this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(d)),type:d.type}}requestSessionImage(d,_){const u=this.getUrl(`carpark/api/anpr/request/${d}/${_}`);return this.get(u,{responseType:"text"})}getSessionImage(d){return this.get(this.getUrl(`carpark/api/anpr/assets/${d}/1`),{responseType:"blob"}).map(_=>this.getSafeFileUrl(_))}}return h.\u0275fac=function(d){return new(d||h)(e.LFG(T.eN),e.LFG(i.yh),e.LFG(A.H7),e.LFG(b.k))},h.\u0275prov=e.Yz7({token:h,factory:h.\u0275fac}),h})()},52746:(Y,U,a)=>{a.d(U,{t:()=>i});var r=a(72986),e=a(591),T=a(94650);let i=(()=>{class A{constructor(){this.loading=!1,this.pagination={totalCount:0,rowsPerPage:20,page:1,sortBy:null,descending:!0,totalPages:1},this.listData=[],this.hadGetData$=new e.X(!1)}get hadGetData(){return this.hadGetData$.getValue()}get filterParams(){return this._filterParams}set filterParams(f){this._filterParams=f}reloadDataService(f,h="filterModel"){this.loading=!0,this.hadGetData$.next(!1),f[h](this.filterParams,this.pagination).pipe((0,r.q)(1)).subscribe(v=>{if(v.pagination.page>v.pagination.totalPages)return this.pagination={...this.pagination,page:v.pagination.totalPages},this.reloadDataService(f);this.loading=!1,this.pagination={...this.pagination,totalCount:v.pagination.totalCount||v.pagination.totalElements},this.listData=v.data,this.hadGetData$.next(!0)},()=>{this.loading=!1,this.listData=[],this.pagination={...this.pagination,totalCount:0}})}onQueryParamsChange(f){const{pageSize:h,pageIndex:v}=f;this.pagination={...this.pagination,rowsPerPage:h,page:v},this.reloadData()}reloadData(){}ngOnInit(){}}return A.\u0275fac=function(f){return new(f||A)},A.\u0275cmp=T.Xpm({type:A,selectors:[["ng-component"]],decls:0,vars:0,template:function(f,h){},encapsulation:2}),A})()},67869:(Y,U,a)=>{a.d(U,{F:()=>v});var r=a(94650),e=a(8929),T=a(11481),i=a(76284),A=a(36895),b=a(89383);function f(d,_){if(1&d&&(r.TgZ(0,"div",5)(1,"h3",6),r._uU(2),r.ALo(3,"translate"),r.qZA(),r.TgZ(4,"span",7),r._uU(5),r.ALo(6,"translate"),r.qZA()()),2&d){const u=r.oxw();r.xp6(2),r.hij("",r.lcZ(3,2,u.textWaysUploading),"."),r.xp6(3),r.hij(" ",r.lcZ(6,4,u.textImageAllowed)," ")}}function h(d,_){if(1&d&&(r.TgZ(0,"div"),r._UZ(1,"img",8),r.qZA()),2&d){const u=r.oxw();r.xp6(1),r.Q6J("src",u.fileToUploadUrl,r.LSH)}}let v=(()=>{class d{constructor(u,Z){this.sanitizer=u,this.assetsService=Z,this.disableTextDefault=!1,this.checkImage=!1,this.imageChanged=new r.vpe,this.errorMsg=new r.vpe,this.fileToUpload=null,this.dragEvent$=new e.xQ,this.textWaysUploading="Drop files here or click to upload.",this.textImageAllowed="Only image files are allowed for upload",this.limitImage={minWidth:465,maxWidth:480,minHeight:310,maxHeight:320}}ngOnInit(){this.fileToUploadUrl=this.image,this.disableTextDefault&&(this.textWaysUploading="",this.textImageAllowed="")}handleFileInput(u){if(this.fileToUpload=u.item(0),!this.checkImage)return this.fileToUploadUrl=this.fileToUpload?this.assetsService.getSafeFileUrl(this.fileToUpload):this.fileToUpload,void this.imageChanged.emit(this.fileToUpload);this.checkImageDimensions()}onDrop(u){if(u.preventDefault(),this.fileToUpload=u.dataTransfer.files.item(0),!this.checkImage)return this.fileToUploadUrl=this.fileToUpload?this.assetsService.getSafeFileUrl(this.fileToUpload):this.fileToUpload,void this.imageChanged.emit(this.fileToUpload);this.checkImageDimensions()}onDragOver(u){u.stopPropagation(),u.preventDefault()}checkImageDimensions(){if(this.fileToUpload){let u=new FileReader;u.readAsDataURL(this.fileToUpload),u.onload=Z=>{const g=new Image;g.src=u.result,g.onload=()=>{const y=g.naturalHeight,l=g.naturalWidth;l>=this.limitImage.minWidth&&l<=this.limitImage.maxWidth&&y>=this.limitImage.minHeight&&y<=this.limitImage.maxHeight?(this.fileToUploadUrl=this.fileToUpload?this.assetsService.getSafeFileUrl(this.fileToUpload):this.fileToUpload,this.imageChanged.emit(this.fileToUpload)):this.errorMsg.emit(!0)}}}}}return d.\u0275fac=function(u){return new(u||d)(r.Y36(T.H7),r.Y36(i.z))},d.\u0275cmp=r.Xpm({type:d,selectors:[["app-image-input"]],inputs:{image:"image",disableTextDefault:"disableTextDefault",checkImage:"checkImage"},outputs:{imageChanged:"imageChanged",errorMsg:"errorMsg"},decls:6,vars:2,consts:[[1,"m-dropzone","m-dropzone--success","dz-clickable","m--padding-0",3,"click","drop","dragover"],["class","m-dropzone__msg dz-message m--margin-50",4,"ngIf","ngIfElse"],["imageTpl",""],["type","file","accept","image/*",3,"change"],["file",""],[1,"m-dropzone__msg","dz-message","m--margin-50"],[1,"m-dropzone__msg-title"],[1,"m-dropzone__msg-desc"],[2,"height","140px","width","auto",3,"src"]],template:function(u,Z){if(1&u){const g=r.EpF();r.TgZ(0,"div",0),r.NdJ("click",function(){r.CHM(g);const l=r.MAs(5);return r.KtG(l.click())})("drop",function(l){return Z.onDrop(l)})("dragover",function(l){return Z.onDragOver(l)}),r.YNc(1,f,7,6,"div",1),r.YNc(2,h,2,1,"ng-template",null,2,r.W1O),r.TgZ(4,"input",3,4),r.NdJ("change",function(l){return Z.handleFileInput(l.target.files)}),r.qZA()()}if(2&u){const g=r.MAs(3);r.xp6(1),r.Q6J("ngIf",!Z.fileToUploadUrl)("ngIfElse",g)}},dependencies:[A.O5,b.X$],styles:["input[_ngcontent-%COMP%]{display:none}img[_ngcontent-%COMP%]{width:100%}"]}),d})()},76916:(Y,U,a)=>{a.d(U,{G:()=>Z});var r=a(34793),e=a(92198),T=a(38014),i=a(94650),A=a(89383),b=a(60097),f=a(36895);function h(g,y){if(1&g&&(i.TgZ(0,"a",14)(1,"span",15),i._uU(2),i.ALo(3,"translate"),i.qZA()()),2&g){const l=i.oxw().$implicit;i.xp6(2),i.hij(" ",i.lcZ(3,1,l.label)," ")}}function v(g,y){if(1&g&&(i.TgZ(0,"a",16)(1,"span",15),i._uU(2),i.ALo(3,"translate"),i.qZA()()),2&g){const l=i.oxw(),C=l.$implicit,M=l.last,x=i.oxw(2);i.Q6J("routerLink",C.url)("queryParams",M&&x.route.snapshot.queryParams),i.xp6(2),i.hij(" ",i.lcZ(3,3,C.label)," ")}}function d(g,y){if(1&g&&(i.ynx(0),i.TgZ(1,"li",10)(2,"span"),i._uU(3," > "),i.qZA()(),i.TgZ(4,"li",11),i.YNc(5,h,4,3,"a",12),i.YNc(6,v,4,5,"a",13),i.qZA(),i.BQk()),2&g){const l=y.first;i.xp6(5),i.Q6J("ngIf",l),i.xp6(1),i.Q6J("ngIf",!l)}}function _(g,y){if(1&g){const l=i.EpF();i.TgZ(0,"div",1)(1,"div",2)(2,"div",3),i._UZ(3,"h3",4),i.TgZ(4,"ul",5)(5,"li",6)(6,"a",7),i.NdJ("click",function(){i.CHM(l);const M=i.oxw();return i.KtG(M.jumpHome())}),i._UZ(7,"i",8),i.qZA()(),i.YNc(8,d,7,2,"ng-container",9),i.qZA()(),i.TgZ(9,"div"),i.Hsn(10),i.qZA()()()}if(2&g){const l=i.oxw();i.xp6(3),i.Q6J("innerHTML",l.title,i.oJD),i.xp6(5),i.Q6J("ngForOf",l.breads)}}const u=["*"];let Z=(()=>{class g{constructor(l,C,M,x){this.router=l,this.route=C,this.translate=M,this._carparkService=x,this.breads=[],this.loginUser=""}ngOnInit(){let l=JSON.parse(localStorage.getItem("user-roles"))[0];this.loginUser=l,console.log(this.loginUser,"\u4fe1\u606f"),this.breads=this.buildBreadCrumb(this.route.root),this.translate.get(this.breads[0].label).subscribe(M=>{this.label=M}),this.router.events.pipe((0,e.h)(M=>M instanceof r.m2)).subscribe(()=>{this.breads=this.buildBreadCrumb(this.route.root)})}buildBreadCrumb(l,C=[""],M=[]){const x=l.snapshot.url[0]&&l.snapshot.url[0].path,D=[...C,x],z={...this.extractBreadcrumb(l),url:D},O=x&&z.label?[...M,z]:M;return this.title=z.title||this.title||"",this.isMotorist&&"My Vehicle(s)"===z.label&&(this.title="My Vehicle(s)"),l.firstChild?x?this.buildBreadCrumb(l.firstChild,D,O):this.buildBreadCrumb(l.firstChild,C,M):(this.translate.get(this.title).subscribe(P=>{this.title=P}),O)}get isMotorist(){return this._carparkService.isMotorist()}extractBreadcrumb(l){return l.snapshot.data.breadcrumb instanceof Function?l.snapshot.data.breadcrumb(l):l.snapshot.data.breadcrumb}jumpHome(){let l=JSON.parse(localStorage.getItem("user-roles"))[0]??"";this.router.navigate(l.length?[T.gpL[l]]:["/"])}}return g.\u0275fac=function(l){return new(l||g)(i.Y36(r.F0),i.Y36(r.gz),i.Y36(A.sK),i.Y36(b.x))},g.\u0275cmp=i.Xpm({type:g,selectors:[["app-title-bar"]],ngContentSelectors:u,decls:1,vars:1,consts:[["class","m-subheader",4,"ngIf"],[1,"m-subheader"],[1,"d-flex","align-items-center"],[1,"mr-auto"],[1,"m-subheader__title","m-subheader__title--separator","text-main",3,"innerHTML"],[1,"m-subheader__breadcrumbs","m-nav","m-nav--inline"],[1,"m-nav__item","m-nav__item--home"],[1,"m-nav__link","m-nav__link--icon",3,"click"],[1,"m-nav__link-icon","la","la-home"],[4,"ngFor","ngForOf"],[1,"m-nav__separator"],[1,"m-nav__item"],["class","m-nav__link",4,"ngIf"],["class","m-nav__link",3,"routerLink","queryParams",4,"ngIf"],[1,"m-nav__link"],[1,"m-nav__link-text"],[1,"m-nav__link",3,"routerLink","queryParams"]],template:function(l,C){1&l&&(i.F$t(),i.YNc(0,_,11,2,"div",0)),2&l&&i.Q6J("ngIf","ROLE_TPO_PARTNER"!==C.loginUser)},dependencies:[f.sg,f.O5,r.yS,A.X$],encapsulation:2}),g})()},60232:(Y,U,a)=>{a.r(U),a.d(U,{LifestyleManagementModule:()=>Se,createTranslateLoader:()=>V});var r=a(36895),e=a(94650),T=a(34793),i=a(76916);const A=function(){return["create"]},b=function(){return["overview"]};let f=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-lifestyle"]],decls:16,vars:6,consts:[[1,"body-wrapper"],[1,"m-content"],[1,"m-portlet","m-portlet--tabs"],[1,"m-portlet__head"],[1,"m-portlet__head-tools"],["role","tablist",1,"nav","nav-tabs","m-tabs-line","m-tabs-line--primary","m-tabs-line--2x"],[1,"nav-item","m-tabs__item"],[1,"nav-link","m-tabs__link",3,"routerLink","routerLinkActive"],[1,"m-portlet__body","m-portlet__body--scrollable"],[1,"m-portlet__frame"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-title-bar"),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"ul",5)(7,"li",6)(8,"a",7),e._uU(9," Create Lifestyle "),e.qZA()(),e.TgZ(10,"li",6)(11,"a",7),e._uU(12," Lifestyle List "),e.qZA()()()()(),e.TgZ(13,"div",8)(14,"div",9),e._UZ(15,"router-outlet"),e.qZA()()()()()),2&n&&(e.xp6(8),e.Q6J("routerLink",e.DdM(4,A))("routerLinkActive","active"),e.xp6(3),e.Q6J("routerLink",e.DdM(5,b))("routerLinkActive","active"))},dependencies:[T.lC,T.yS,T.Od,i.G]}),t})();var h=a(59501),v=a(21532),d=a(30329),_=a(79118),u=a(86181),Z=a(8929),g=a(38014),y=a(52746),l=a(3927),C=a(80529),M=a(28555),x=a(91599);let D=(()=>{class t extends l.su{constructor(n,o,c){super(n,o),this.http=n,this.store=o,this.modelName="Lifestyle",this.baseUrl="carpark/api/web/coupons",this.handleError=c.createHandleError(`${this.modelName}Service`)}createModel(n){const o=this.getUrl("carpark/api/web/coupon");return this.post(o,n)}updateModel(n){const o=this.getUrl("carpark/api/web/coupon");return this.put(o,n)}getCoupon(n){const o=this.getUrl(`carpark/api/getCoupon?id=${n}`);return this.get(o)}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(C.eN),e.LFG(M.yh),e.LFG(x.k))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var z=a(35635),O=a(38231),P=a(40269),L=a(24006);let ne=(()=>{class t{transform(n){const o=g.cRD.filter(c=>c.id===n);return o.length?o[0].name:""}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=e.Yjl({name:"couponCategoryPipe",type:t,pure:!0}),t})(),oe=(()=>{class t{transform(n){const o=g.zY3.filter(c=>c.id===n);return o.length?o[0].name:""}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=e.Yjl({name:"couponStatusPipe",type:t,pure:!0}),t})();var B=a(89383);function ie(t,s){if(1&t&&(e._UZ(0,"nz-option",13),e.ALo(1,"titlecase")),2&t){const n=s.$implicit;e.Q6J("nzValue",n.id)("nzLabel",e.lcZ(1,2,n.name))}}function ae(t,s){if(1&t&&(e._UZ(0,"nz-option",13),e.ALo(1,"titlecase")),2&t){const n=s.$implicit;e.Q6J("nzValue",n.id)("nzLabel",e.lcZ(1,2,n.name))}}function re(t,s){if(1&t&&e._uU(0),2&t){const n=s.range;e.lnq(" ",n[0],"-",n[1]," of ",s.$implicit," items\n")}}function le(t,s){if(1&t&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&t){const n=s.$implicit;e.xp6(1),e.Oqu(n.text)}}const se=function(t){return["../edit",t]};function pe(t,s){if(1&t&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"couponCategoryPipe"),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"couponStatusPipe"),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"date"),e.qZA(),e.TgZ(16,"td")(17,"a",14),e._UZ(18,"i",15),e.qZA()()()),2&t){const n=s.$implicit,o=s.index;e.ekj("ant-table-row-odd",o%2==1),e.xp6(2),e.Oqu(o+1),e.xp6(2),e.Oqu(n.id),e.xp6(2),e.Oqu(n.couponName),e.xp6(2),e.Oqu(e.lcZ(9,9,n.couponCategory)),e.xp6(3),e.Oqu(e.lcZ(12,11,n.status)),e.xp6(3),e.Oqu(e.xi3(15,13,n.expiryDate,"dd MMM yyyy")),e.xp6(3),e.Q6J("routerLink",e.VKq(16,se,n.id))}}const me=[{text:"#",width:"30px",align:_.iW.Center},{text:"Coupon ID",column:"id",width:"120px"},{text:"Coupon Name",column:"name",width:"140px"},{text:"Coupon Type",column:"type",width:"120px"},{text:"Status",column:"status",width:"120px"},{text:"Expiry Date",column:"date",width:"120px"},{text:"Actions",column:"",width:"120px"}];let k=(()=>{class t extends y.t{constructor(n){super(),this.lifestyleService=n,this.couponCategory="",this.status="",this.couponName="",this.pagination=(0,u.f$)(),this.tableHeaders=me,this.couponCategoryList=g.cRD,this.statusList=g.zY3,this.data=[],this.couponName$=new Z.xQ}ngOnInit(){this.couponName$.debounceTime(500).subscribe(()=>{this.reloadData()}),this.reloadData()}get filterParams(){return{status:this.status,couponCategory:this.couponCategory,couponName:this.couponName}}reloadData(){this.reloadDataService(this.lifestyleService)}pageChanged(n){this.pagination=n,this.reloadData()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-lifestyle-overview"]],features:[e.qOj],decls:31,vars:20,consts:[[1,"form-group","m-form__group","m-portlet__filters"],[1,"filter-wrap"],[1,"filter-item"],[1,"filter-label"],["nzPlaceHolder","Please Select",2,"width","160px",3,"ngModel","ngModelChange"],["nzValue","",3,"nzLabel"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["type","text","nz-input","","placeholder","","placeholder","Please Enter Coupon Name",2,"width","220px",3,"ngModel","ngModelChange"],["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowTotal","nzQueryParams"],["basicTable",""],[4,"ngFor","ngForOf"],[3,"ant-table-row-odd",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],[1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","no-border",3,"routerLink"],[1,"la","la-edit"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4,"Coupon Type:"),e.qZA(),e.TgZ(5,"nz-select",4),e.NdJ("ngModelChange",function(p){return o.couponCategory=p})("ngModelChange",function(){return o.reloadData()}),e._UZ(6,"nz-option",5),e.ALo(7,"translate"),e.YNc(8,ie,2,4,"nz-option",6),e.qZA()()(),e.TgZ(9,"div",1)(10,"div",2)(11,"span",3),e._uU(12,"Status:"),e.qZA(),e.TgZ(13,"nz-select",4),e.NdJ("ngModelChange",function(p){return o.status=p})("ngModelChange",function(){return o.reloadData()}),e._UZ(14,"nz-option",5),e.ALo(15,"translate"),e.YNc(16,ae,2,4,"nz-option",6),e.qZA()()(),e.TgZ(17,"div",1)(18,"div",2)(19,"span",3),e._uU(20,"Coupon Name:"),e.qZA(),e.TgZ(21,"input",7),e.NdJ("ngModelChange",function(p){return o.couponName=p})("ngModelChange",function(p){return o.couponName$.next(p)}),e.qZA()()()(),e.YNc(22,re,1,3,"ng-template",null,8,e.W1O),e.TgZ(24,"nz-table",9,10),e.NdJ("nzQueryParams",function(p){return o.onQueryParamsChange(p)}),e.TgZ(26,"thead")(27,"tr"),e.YNc(28,le,2,1,"th",11),e.qZA()(),e.TgZ(29,"tbody"),e.YNc(30,pe,19,18,"tr",12),e.qZA()()),2&n){const c=e.MAs(23),p=e.MAs(25);e.xp6(5),e.Q6J("ngModel",o.couponCategory),e.xp6(1),e.s9C("nzLabel",e.lcZ(7,16,"All")),e.xp6(2),e.Q6J("ngForOf",o.couponCategoryList),e.xp6(5),e.Q6J("ngModel",o.status),e.xp6(1),e.s9C("nzLabel",e.lcZ(15,18,"All")),e.xp6(2),e.Q6J("ngForOf",o.statusList),e.xp6(5),e.Q6J("ngModel",o.couponName),e.xp6(3),e.Q6J("nzData",o.listData)("nzFrontPagination",!1)("nzLoading",o.loading)("nzTotal",o.pagination.totalCount)("nzPageSize",o.pagination.rowsPerPage)("nzPageIndex",o.pagination.page)("nzShowTotal",c),e.xp6(4),e.Q6J("ngForOf",o.tableHeaders),e.xp6(2),e.Q6J("ngForOf",p.data)}},dependencies:[r.sg,T.yS,z.Zp,O.Ip,O.Vq,P.N8,P.Uo,P._C,P.Om,P.p0,P.$Z,L.Fj,L.JJ,L.On,r.rS,r.uU,ne,oe,B.X$]}),t})();var de=a(15439),W=a(76284),ue=a(49651),ge=a(66616),ce=a(47044),_e=a(21811),fe=a(834),he=a(67869),K=a(29252);function ve(t,s){1&t&&(e.TgZ(0,"div",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function ye(t,s){1&t&&(e.TgZ(0,"div",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function Ce(t,s){1&t&&(e.TgZ(0,"div",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function Te(t,s){1&t&&(e.TgZ(0,"div",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function Ze(t,s){if(1&t&&e._UZ(0,"nz-option",48),2&t){const n=s.$implicit;e.Q6J("nzValue",n.id)("nzLabel",n.name)}}function Me(t,s){1&t&&(e.TgZ(0,"div",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function Ae(t,s){if(1&t&&e._UZ(0,"nz-option",48),2&t){const n=s.$implicit;e.Q6J("nzValue",n.id)("nzLabel",n.name)}}function Le(t,s){1&t&&(e.TgZ(0,"div",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function Ue(t,s){1&t&&(e.TgZ(0,"div",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function be(t,s){1&t&&(e.TgZ(0,"div",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function xe(t,s){1&t&&(e.TgZ(0,"div",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function Pe(t,s){1&t&&(e.TgZ(0,"div",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function De(t,s){1&t&&(e.TgZ(0,"div",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function ze(t,s){1&t&&(e.TgZ(0,"div",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function Oe(t,s){1&t&&(e.TgZ(0,"div",49)(1,"div",50)(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"span"),e._UZ(6,"div",51),e.qZA()()()),2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"Please wait...")," "))}let $=(()=>{class t{constructor(n,o,c,p){this.assetsService=n,this.lifeStyleService=o,this.router=c,this.messageService=p,this.form=(0,g.y9C)(),this.couponCategoryList=g.cRD,this.statusList=g.zY3,this.loading=!1,this.msg=""}ngOnInit(){this.statusList=this.statusList.filter(n=>n.name!==g.Fwb.Expired)}submit(n){const o=-1!==this.router.url.indexOf("create");if(n.valid){const{id:c,couponCode:p,couponDetail:m,couponName:E,couponAmount:I,couponCategory:q,status:J,totalQty:S,couponPercentage:F,expiryDate:N,actionDisplay:Q,tncUrl:R,tncDisplay:w,images:X,carParkGroupId:Ne,carParkOperatorId:Qe,carParkOwnerId:Re,couponUuid:we,leftQty:Ye,type:Be,usedQty:je,message:We}=this.form,ee={id:c,couponCode:p,couponDetail:m,couponName:E,couponAmount:0!=+I?+I:null,couponCategory:q,status:J,totalQty:+S,couponPercentage:0!=+F?+F:null,expiryDate:de(N).endOf("day").format(),actionDisplay:Q,tncUrl:R,tncDisplay:w,picUrl:X.length>0?X[0].lifestyleImage.split("/").pop():null,message:We};if(this.loading=!0,o)this.lifeStyleService.createModel(ee).subscribe(j=>{this.cancel(),this.loading=!1},j=>{this.loading=!1,this.msg=j.error.message,this.openMdModal()});else{const j={...ee,carParkGroupId:Ne,carParkOperatorId:Qe,carParkOwnerId:Re,couponUuid:we,leftQty:Ye,type:Be,usedQty:je};this.lifeStyleService.updateModel(j).subscribe(te=>{this.loading=!1,this.cancel()},te=>{this.loading=!1,this.msg=te.error.message,this.openMdModal()})}}}getErrorMsg(n){n&&(this.msg="The dimension of image is too large! Recommended upload image size 473 * 315. Allow pictures with a width of 465 to 480 and a height of 310 to 320",this.openMdModal())}formatTime(n){return n?new Date(n).getTime():null}openMdModal(){this.messageService.warning(this.msg)}onImageChanged(n){this.assetsService.uploadImage(n).subscribe(o=>this.form.images[0]?this.form.images[0].lifestyleImage=o:this.form.images=[{lifestyleImage:o}])}cancel(){this.router.navigate(["/lifestyle/overview"])}onDateChange(n){this.form.expiryDate=n}getCouponAmountOrPercentage(n){"couponAmount"===n&&(this.form.couponPercentage=0),"couponPercentage"===n&&(this.form.couponAmount=0)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(W.z),e.Y36(D),e.Y36(T.F0),e.Y36(ue.dD))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-lifestyle-form"]],inputs:{form:"form"},decls:127,vars:36,consts:[[1,"m-portlet","m-portlet--bordered-semi",2,"margin-bottom","0"],[1,"m-portlet__body"],[1,"m-form","m-form--fit","m-form--label-align-right",3,"ngSubmit"],["formRef","ngForm"],[1,"m-portlet__head"],[1,"m-portlet__head-caption"],[1,"m-portlet__head-title"],[1,"m-portlet__head-text"],[1,"form-group","m-form__group","row"],[1,"col-form-label","col-lg-2","col-sm-12"],[1,"col-md-10","col-sm-12"],[3,"image","checkImage","imageChanged","errorMsg"],[1,"m--font-danger"],[1,"col-lg-4","col-sm-12"],["type","text","nz-input","","name","couponCode","required","","placeholder","Please Enter Coupon Code",3,"ngModel","ngModelChange"],["couponCodeRef","ngModel"],["class","form-control-feedback",4,"ngIf"],["type","text","nz-input","","name","couponDetail","required","","placeholder","Please Enter Coupon Detail",3,"ngModel","ngModelChange"],["couponDetailRef","ngModel"],["type","text","nz-input","","name","couponName","required","","placeholder","Please Enter Coupon Name",3,"ngModel","ngModelChange"],["couponNameRef","ngModel"],["type","text","nz-input","","digitOnly","","name","couponAmount","required","","placeholder","Please Enter Coupon Amount",3,"ngModel","ngModelChange","blur"],["couponAmountRef","ngModel"],["name","type","nzPlaceHolder","Select Type",2,"width","100%",3,"ngModel","ngModelChange"],["couponCategoryRef","ngModel"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["name","status","nzPlaceHolder","Select Status",2,"width","100%",3,"ngModel","ngModelChange"],["statusRef","ngModel"],["type","text","nz-input","","digitOnly","","name","totalQty","required","","placeholder","Please Enter Total Quantity",3,"ngModel","ngModelChange"],["totalQtyRef","ngModel"],["type","text","nz-input","","digitOnly","","name","couponPercentage","required","","placeholder","Please Enter Coupon Percentage",3,"ngModel","ngModelChange","blur"],["couponPercentageRef","ngModel"],[1,"m-input-icon","m-input-icon--right","m--padding-0"],["name","expiryDate","nzFormat","dd/MM/yyyy",2,"width","100%",3,"ngModel","ngModelChange"],["type","text","nz-input","","name","actionDisplay","required","","placeholder","Please Enter Action Display",3,"ngModel","ngModelChange"],["actionDisplayRef","ngModel"],["type","text","nz-input","","name","tncUrl","required","","placeholder","Please Enter Tnc Url",3,"ngModel","ngModelChange"],["tncUrlRef","ngModel"],["type","text","nz-input","","name","tncDisplay","required","","placeholder","Please Enter Tnc Display",3,"ngModel","ngModelChange"],["tncDisplayRef","ngModel"],["type","text","nz-input","","name","message","required","","placeholder","Please Enter Message",3,"ngModel","ngModelChange"],["couponMessageRef","ngModel"],[1,"m-portlet__foot","bg-light-gray","d-flex","justify-content-end"],[1,"m-form__actions","m-form__actions--right"],["nz-button","","nzType","primary","nzGhost","","nzSize","large",1,"mr-3","btn-form-ops",3,"click"],["nz-button","","nzType","primary","nzSize","large","type","submit",1,"btn-form-ops"],["class","m-blockui-loading",4,"ngIf"],[1,"form-control-feedback"],[3,"nzValue","nzLabel"],[1,"m-blockui-loading"],[1,"m-blockui"],[1,"m-loader","m-loader--brand"]],template:function(n,o){if(1&n){const c=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"form",2,3),e.NdJ("ngSubmit",function(){e.CHM(c);const m=e.MAs(3);return e.KtG(o.submit(m))}),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"h3",7),e._uU(8," Lifestyle Setup "),e.qZA()()()(),e.TgZ(9,"div",1)(10,"div",8)(11,"label",9),e._uU(12," Coupon Picture: "),e.qZA(),e.TgZ(13,"div",10)(14,"app-image-input",11),e.NdJ("imageChanged",function(m){return o.onImageChanged(m)})("errorMsg",function(m){return o.getErrorMsg(m)}),e.qZA()(),e.TgZ(15,"label",9)(16,"span",12),e._uU(17,"*"),e.qZA(),e._uU(18," Coupon Code: "),e.qZA(),e.TgZ(19,"div",13)(20,"input",14,15),e.NdJ("ngModelChange",function(m){return o.form.couponCode=m}),e.qZA(),e.YNc(22,ve,3,3,"div",16),e.qZA(),e.TgZ(23,"label",9)(24,"span",12),e._uU(25,"*"),e.qZA(),e._uU(26," Coupon Detail: "),e.qZA(),e.TgZ(27,"div",13)(28,"input",17,18),e.NdJ("ngModelChange",function(m){return o.form.couponDetail=m}),e.qZA(),e.YNc(30,ye,3,3,"div",16),e.qZA(),e.TgZ(31,"label",9)(32,"span",12),e._uU(33,"*"),e.qZA(),e._uU(34," Coupon Name: "),e.qZA(),e.TgZ(35,"div",13)(36,"input",19,20),e.NdJ("ngModelChange",function(m){return o.form.couponName=m}),e.qZA(),e.YNc(38,Ce,3,3,"div",16),e.qZA(),e.TgZ(39,"label",9)(40,"span",12),e._uU(41,"*"),e.qZA(),e._uU(42," Coupon Amount: "),e.qZA(),e.TgZ(43,"div",13)(44,"input",21,22),e.NdJ("ngModelChange",function(m){return o.form.couponAmount=m})("blur",function(){return o.getCouponAmountOrPercentage("couponAmount")}),e.qZA(),e.YNc(46,Te,3,3,"div",16),e.qZA(),e.TgZ(47,"label",9),e._UZ(48,"span",12),e._uU(49," Type: "),e.qZA(),e.TgZ(50,"div",13)(51,"nz-select",23,24),e.NdJ("ngModelChange",function(m){return o.form.couponCategory=m}),e.YNc(53,Ze,1,2,"nz-option",25),e.qZA(),e.YNc(54,Me,3,3,"div",16),e.qZA(),e.TgZ(55,"label",9),e._UZ(56,"span",12),e._uU(57," Status: "),e.qZA(),e.TgZ(58,"div",13)(59,"nz-select",26,27),e.NdJ("ngModelChange",function(m){return o.form.status=m}),e.YNc(61,Ae,1,2,"nz-option",25),e.qZA(),e.YNc(62,Le,3,3,"div",16),e.qZA(),e.TgZ(63,"label",9)(64,"span",12),e._uU(65,"*"),e.qZA(),e._uU(66," Total Quantity: "),e.qZA(),e.TgZ(67,"div",13)(68,"input",28,29),e.NdJ("ngModelChange",function(m){return o.form.totalQty=m}),e.qZA(),e.YNc(70,Ue,3,3,"div",16),e.qZA(),e.TgZ(71,"label",9)(72,"span",12),e._uU(73,"*"),e.qZA(),e._uU(74," Coupon Percentage: "),e.qZA(),e.TgZ(75,"div",13)(76,"input",30,31),e.NdJ("ngModelChange",function(m){return o.form.couponPercentage=m})("blur",function(){return o.getCouponAmountOrPercentage("couponPercentage")}),e.qZA(),e.YNc(78,be,3,3,"div",16),e.qZA(),e.TgZ(79,"label",9)(80,"span",12),e._uU(81,"*"),e.qZA(),e._uU(82," Expiry Date: "),e.qZA(),e.TgZ(83,"div",13)(84,"div",32)(85,"nz-date-picker",33),e.NdJ("ngModelChange",function(m){return o.form.expiryDate=m})("ngModelChange",function(m){return o.onDateChange(m)}),e.qZA()()(),e.TgZ(86,"label",9)(87,"span",12),e._uU(88,"*"),e.qZA(),e._uU(89," Action Display: "),e.qZA(),e.TgZ(90,"div",13)(91,"input",34,35),e.NdJ("ngModelChange",function(m){return o.form.actionDisplay=m}),e.qZA(),e.YNc(93,xe,3,3,"div",16),e.qZA(),e.TgZ(94,"label",9)(95,"span",12),e._uU(96,"*"),e.qZA(),e._uU(97," Tnc url: "),e.qZA(),e.TgZ(98,"div",13)(99,"input",36,37),e.NdJ("ngModelChange",function(m){return o.form.tncUrl=m}),e.qZA(),e.YNc(101,Pe,3,3,"div",16),e.qZA(),e.TgZ(102,"label",9)(103,"span",12),e._uU(104,"*"),e.qZA(),e._uU(105," Tnc Display: "),e.qZA(),e.TgZ(106,"div",13)(107,"input",38,39),e.NdJ("ngModelChange",function(m){return o.form.tncDisplay=m}),e.qZA(),e.YNc(109,De,3,3,"div",16),e.qZA(),e.TgZ(110,"label",9)(111,"span",12),e._uU(112,"*"),e.qZA(),e._uU(113," Message: "),e.qZA(),e.TgZ(114,"div",13)(115,"input",40,41),e.NdJ("ngModelChange",function(m){return o.form.message=m}),e.qZA(),e.YNc(117,ze,3,3,"div",16),e.qZA()()(),e.TgZ(118,"div",42)(119,"div",43)(120,"button",44),e.NdJ("click",function(){return o.cancel()}),e._uU(121),e.ALo(122,"translate"),e.qZA(),e.TgZ(123,"button",45),e._uU(124),e.ALo(125,"translate"),e.qZA()()()(),e.YNc(126,Oe,7,3,"div",46),e.qZA()()}if(2&n){const c=e.MAs(3),p=e.MAs(21),m=e.MAs(29),E=e.MAs(37),I=e.MAs(45),q=e.MAs(52),J=e.MAs(60),S=e.MAs(69),F=e.MAs(77),N=e.MAs(92),Q=e.MAs(100),R=e.MAs(108),w=e.MAs(116);e.xp6(14),e.Q6J("image",null==o.form.images[0]?null:o.form.images[0].lifestyleImage)("checkImage",!0),e.xp6(6),e.Q6J("ngModel",o.form.couponCode),e.xp6(2),e.Q6J("ngIf",p.invalid&&(p.dirty||p.touched||c.submitted)),e.xp6(6),e.Q6J("ngModel",o.form.couponDetail),e.xp6(2),e.Q6J("ngIf",m.invalid&&(m.dirty||m.touched||c.submitted)),e.xp6(6),e.Q6J("ngModel",o.form.couponName),e.xp6(2),e.Q6J("ngIf",E.invalid&&(E.dirty||E.touched||c.submitted)),e.xp6(6),e.Q6J("ngModel",o.form.couponAmount),e.xp6(2),e.Q6J("ngIf",I.invalid&&(I.dirty||I.touched||c.submitted)),e.xp6(5),e.Q6J("ngModel",o.form.couponCategory),e.xp6(2),e.Q6J("ngForOf",o.couponCategoryList),e.xp6(1),e.Q6J("ngIf",q.invalid&&(q.dirty||q.touched||c.submitted)),e.xp6(5),e.Q6J("ngModel",o.form.status),e.xp6(2),e.Q6J("ngForOf",o.statusList),e.xp6(1),e.Q6J("ngIf",J.invalid&&(J.dirty||J.touched||c.submitted)),e.xp6(6),e.Q6J("ngModel",o.form.totalQty),e.xp6(2),e.Q6J("ngIf",S.invalid&&(S.dirty||S.touched||c.submitted)),e.xp6(6),e.Q6J("ngModel",o.form.couponPercentage),e.xp6(2),e.Q6J("ngIf",F.invalid&&(F.dirty||F.touched||c.submitted)),e.xp6(7),e.Q6J("ngModel",o.form.expiryDate),e.xp6(6),e.Q6J("ngModel",o.form.actionDisplay),e.xp6(2),e.Q6J("ngIf",N.invalid&&(N.dirty||N.touched||c.submitted)),e.xp6(6),e.Q6J("ngModel",o.form.tncUrl),e.xp6(2),e.Q6J("ngIf",Q.invalid&&(Q.dirty||Q.touched||c.submitted)),e.xp6(6),e.Q6J("ngModel",o.form.tncDisplay),e.xp6(2),e.Q6J("ngIf",R.invalid&&(R.dirty||R.touched||c.submitted)),e.xp6(6),e.Q6J("ngModel",o.form.message),e.xp6(2),e.Q6J("ngIf",w.invalid&&(w.dirty||w.touched||c.submitted)),e.xp6(4),e.hij(" ",e.lcZ(122,32,"Cancel")," "),e.xp6(3),e.hij(" ",e.lcZ(125,34,"Submit")," "),e.xp6(2),e.Q6J("ngIf",o.loading)}},dependencies:[r.sg,r.O5,z.Zp,ge.ix,ce.w,_e.dQ,O.Ip,O.Vq,fe.uw,he.F,L._Y,L.Fj,L.JJ,L.JL,L.Q7,L.On,L.F,K.L,B.X$],styles:[".m-form.m-form--fit[_ngcontent-%COMP%]   .m-form__group[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding-top:15px}.m-form.m-form--fit[_ngcontent-%COMP%]   .m-form__group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:50px}"]}),t})();var Ie=a(19832);let H=(()=>{class t{constructor(n,o){this.route=n,this.assetsService=o,this.form=(0,g.y9C)()}ngOnInit(){const{detail:n}=this.route.snapshot.data,{couponPercentage:o,couponAmount:c,picUrl:p}=n;this.form={...n,couponPercentage:o||0,couponAmount:c||0,images:[{id:null,lifestyleImage:this.assetsService.getImage(p)}]}}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(T.gz),e.Y36(W.z))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-lifestyle-update"]],decls:3,vars:1,consts:[[1,"body-wrapper"],[3,"form"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-title-bar")(2,"app-lifestyle-form",1),e.qZA()),2&n&&(e.xp6(2),e.Q6J("form",o.form))},dependencies:[i.G,$]}),t})();var Fe=a(88796),Ee=a(372),qe=a(72986);let G=(()=>{class t{constructor(n){this.lifestyleService=n}resolve(n){return this.lifestyleService.getCoupon(n.paramMap.get("id")).pipe((0,qe.q)(1))}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(D))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();function V(t){return new Ie.w(t,"../assets/i18n/",".json")}const Je=[{path:"",component:h.f,children:[{path:"",component:f,children:[{path:"",redirectTo:"create",pathMatch:"full"},{path:"overview",component:k,data:{breadcrumb:{label:"Lifestyle Overview"}}},{path:"create",component:$,data:{breadcrumb:{label:"Create Lifestyle"}}}]},{path:"edit/:id",component:H,resolve:{detail:G},data:{breadcrumb:{label:"Edit Lifestyle"}}}]}];let Se=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[D,W.z,G],imports:[r.ez,T.Bz.forChild(Je),v.x,d.D,L.u5,Fe.A0,Ee.kn,K.E7,B.aw.forChild({loader:{provide:B.Zw,useFactory:V,deps:[C.eN]}})]}),t})()}}]);