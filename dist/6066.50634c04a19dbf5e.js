"use strict";(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[6066],{76916:(F,A,i)=>{i.d(A,{G:()=>v});var d=i(34793),U=i(92198),f=i(38014),l=i(94650),y=i(89383),w=i(60097),O=i(36895);function D(u,T){if(1&u&&(l.TgZ(0,"a",14)(1,"span",15),l._uU(2),l.ALo(3,"translate"),l.qZA()()),2&u){const c=l.oxw().$implicit;l.xp6(2),l.hij(" ",l.lcZ(3,1,c.label)," ")}}function P(u,T){if(1&u&&(l.TgZ(0,"a",16)(1,"span",15),l._uU(2),l.ALo(3,"translate"),l.qZA()()),2&u){const c=l.oxw(),g=c.$implicit,_=c.last,C=l.oxw(2);l.Q6J("routerLink",g.url)("queryParams",_&&C.route.snapshot.queryParams),l.xp6(2),l.hij(" ",l.lcZ(3,3,g.label)," ")}}function k(u,T){if(1&u&&(l.ynx(0),l.TgZ(1,"li",10)(2,"span"),l._uU(3," > "),l.qZA()(),l.TgZ(4,"li",11),l.YNc(5,D,4,3,"a",12),l.YNc(6,P,4,5,"a",13),l.qZA(),l.BQk()),2&u){const c=T.first;l.xp6(5),l.Q6J("ngIf",c),l.xp6(1),l.Q6J("ngIf",!c)}}function Z(u,T){if(1&u){const c=l.EpF();l.TgZ(0,"div",1)(1,"div",2)(2,"div",3),l._UZ(3,"h3",4),l.TgZ(4,"ul",5)(5,"li",6)(6,"a",7),l.NdJ("click",function(){l.CHM(c);const _=l.oxw();return l.KtG(_.jumpHome())}),l._UZ(7,"i",8),l.qZA()(),l.YNc(8,k,7,2,"ng-container",9),l.qZA()(),l.TgZ(9,"div"),l.Hsn(10),l.qZA()()()}if(2&u){const c=l.oxw();l.xp6(3),l.Q6J("innerHTML",c.title,l.oJD),l.xp6(5),l.Q6J("ngForOf",c.breads)}}const N=["*"];let v=(()=>{class u{constructor(c,g,_,C){this.router=c,this.route=g,this.translate=_,this._carparkService=C,this.breads=[],this.loginUser=""}ngOnInit(){let c=JSON.parse(localStorage.getItem("user-roles"))[0];this.loginUser=c,console.log(this.loginUser,"\u4fe1\u606f"),this.breads=this.buildBreadCrumb(this.route.root),this.translate.get(this.breads[0].label).subscribe(_=>{this.label=_}),this.router.events.pipe((0,U.h)(_=>_ instanceof d.m2)).subscribe(()=>{this.breads=this.buildBreadCrumb(this.route.root)})}buildBreadCrumb(c,g=[""],_=[]){const C=c.snapshot.url[0]&&c.snapshot.url[0].path,t=[...g,C],M={...this.extractBreadcrumb(c),url:t},B=C&&M.label?[..._,M]:_;return this.title=M.title||this.title||"",this.isMotorist&&"My Vehicle(s)"===M.label&&(this.title="My Vehicle(s)"),c.firstChild?C?this.buildBreadCrumb(c.firstChild,t,B):this.buildBreadCrumb(c.firstChild,g,_):(this.translate.get(this.title).subscribe(b=>{this.title=b}),B)}get isMotorist(){return this._carparkService.isMotorist()}extractBreadcrumb(c){return c.snapshot.data.breadcrumb instanceof Function?c.snapshot.data.breadcrumb(c):c.snapshot.data.breadcrumb}jumpHome(){let c=JSON.parse(localStorage.getItem("user-roles"))[0]??"";this.router.navigate(c.length?[f.gpL[c]]:["/"])}}return u.\u0275fac=function(c){return new(c||u)(l.Y36(d.F0),l.Y36(d.gz),l.Y36(y.sK),l.Y36(w.x))},u.\u0275cmp=l.Xpm({type:u,selectors:[["app-title-bar"]],ngContentSelectors:N,decls:1,vars:1,consts:[["class","m-subheader",4,"ngIf"],[1,"m-subheader"],[1,"d-flex","align-items-center"],[1,"mr-auto"],[1,"m-subheader__title","m-subheader__title--separator","text-main",3,"innerHTML"],[1,"m-subheader__breadcrumbs","m-nav","m-nav--inline"],[1,"m-nav__item","m-nav__item--home"],[1,"m-nav__link","m-nav__link--icon",3,"click"],[1,"m-nav__link-icon","la","la-home"],[4,"ngFor","ngForOf"],[1,"m-nav__separator"],[1,"m-nav__item"],["class","m-nav__link",4,"ngIf"],["class","m-nav__link",3,"routerLink","queryParams",4,"ngIf"],[1,"m-nav__link"],[1,"m-nav__link-text"],[1,"m-nav__link",3,"routerLink","queryParams"]],template:function(c,g){1&c&&(l.F$t(),l.YNc(0,Z,11,2,"div",0)),2&c&&l.Q6J("ngIf","ROLE_TPO_PARTNER"!==g.loginUser)},dependencies:[O.sg,O.O5,d.yS,y.X$],encapsulation:2}),u})()},70362:(F,A,i)=>{i.d(A,{X:()=>B});var d=i(36895),U=i(24006),f=i(34793),l=i(372),y=i(60097),w=i(4666),O=i(30329),D=i(21532),P=i(88796),k=i(59245),Z=i(89518),N=i(36511),v=i(80529),u=i(89383),T=i(19832),c=i(34984),g=i(32521),_=i(29252),C=i(67556),t=i(94650);function M(b){return new T.w(b,"../assets/i18n/",".json")}let B=(()=>{class b{}return b.\u0275fac=function(m){return new(m||b)},b.\u0275mod=t.oAB({type:b}),b.\u0275inj=t.cJS({providers:[w.p,y.x,N.I,C.z$],imports:[d.ez,U.u5,f.Bz,D.x,O.D,l.kn,k.mr,P.A0,Z.H3,c.Ns.forRoot({echarts:()=>i.e(4734).then(i.bind(i,14734))}),g.u3,_.E7,u.aw.forChild({loader:{provide:u.Zw,useFactory:M,deps:[v.eN]}})]}),b})()},76066:(F,A,i)=>{i.r(A),i.d(A,{BusesModule:()=>be,VehicleDetailResolver:()=>S,createTranslateLoader:()=>W,routes:()=>G});var d=i(36895),U=i(80529),f=i(34793),l=i(60097),y=i(91599),w=i(42684),O=i(51766),D=i(31289),P=i(4666),k=i(73071),Z=i(71942),N=i(30329),v=i(89383),u=i(19832),T=i(97640),c=i(59245),g=i(72986),_=i(21532),C=i(59501),t=i(94650),M=i(1649);let B=(()=>{class a{constructor(){}ngOnInit(){}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-bus-analysis"]],decls:9,vars:0,consts:[[1,"body-wrapper"],[1,"m-subheader"],[1,"d-flex","align-items-center"],[1,"mr-auto"],[1,"m-subheader__title","m-subheader__title--separator","text-main"],[1,"m-content"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5,"Bus Analysis"),t.qZA()(),t._UZ(6,"div"),t.qZA()(),t.TgZ(7,"div",5),t._UZ(8,"app-bus-transaction-overview"),t.qZA()())},dependencies:[M.d]}),a})();var b=i(82174),I=i(61643),m=i(24006),V=i(76284),X=i(64870),tt=i(372),et=i(36511),nt=i(24277),at=i(3108),ot=i(88796),it=i(22630),rt=i(67556),q=i(64050),st=i(70362),lt=i(37096),ct=i(44466);function pt(a){return new u.w(a,"../assets/i18n/",".json")}let mt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[et.I,V.z,X.P,rt.z$,q.F],imports:[d.ez,m.u5,N.D,tt.kn,b.su,I.r,at._,f.Bz,ot.A0,nt.p,c.mr,it.z,st.X,_.x,v.aw.forChild({loader:{provide:v.Zw,useFactory:pt,deps:[U.eN]}}),lt.Zf,ct.m]}),a})();var J=i(76916);function ut(a,s){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"label",8)(2,"span",9),t._uU(3,"*"),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"div",15)(6,"input",16),t.NdJ("ngModelChange",function(o){const p=t.CHM(e).$implicit,x=t.oxw();return t.KtG(x.item[p.value]=o)}),t.qZA()(),t.BQk()}if(2&a){const e=s.$implicit,n=t.oxw();t.xp6(4),t.hij(" ",e.text,": "),t.xp6(2),t.Q6J("name",e.value)("ngModel",n.item[e.value])}}let dt=(()=>{class a{constructor(e,n){this.route=e,this._locationService=n,this.formLabel=[]}ngOnInit(){this.item=this.route.snapshot.data.item,this.setFormLabel()}submit(e){console.log(e)}setFormLabel(){this.formLabel=[{text:"Vehicle No.",value:"vehicleNumber"},{text:"Model",value:"model"},{text:"Driver",value:"driver"},{text:"Status",value:"status"},{text:"Real time SOC",value:"realTimeSoc"},{text:"Run time",value:"runTime"},{text:"Remaining journey",value:"remainJourney"},{text:"Duration left",value:"dutationLeft"},{text:"Able to return",value:"ableToReturn"},{text:"live positioning of vehicle",value:"livePosition"},{text:"vehicle health status",value:"vehicleHealthStatus"},{text:"Defects",value:"defect"},{text:"Alerting",value:"alerting"}]}cancel(){this._locationService.back()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(f.gz),t.Y36(d.Ye))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-buses-detail"]],decls:23,vars:7,consts:[[1,"body-wrapper"],[1,"m-content"],[1,"m-form","m-form--fit","m-form--label-align-right",3,"ngSubmit"],["formRef","ngForm"],[1,"m-portlet"],[1,"m-portlet__body"],[1,"row","form-group","m-form__group"],[4,"ngFor","ngForOf"],[1,"col-form-label","col-lg-2","col-sm-12"],[1,"m--font-danger"],[1,"col-lg-4","col-sm-12"],[1,"m-portlet__foot","bg-light-gray"],[1,"m-form__actions","m-form__actions--right"],[1,"btn","btn-outline-main",3,"click"],["type","submit",1,"btn","btn-main","m--margin-left-30"],[1,"col-lg-4","col-sm-12","mb-2"],["type","text",1,"form-control","m-input",3,"name","ngModel","ngModelChange"]],template:function(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",0),t._UZ(1,"app-title-bar"),t.TgZ(2,"div",1)(3,"form",2,3),t.NdJ("ngSubmit",function(){t.CHM(o);const p=t.MAs(4);return t.KtG(n.submit(p))}),t.TgZ(5,"div",4)(6,"div",5)(7,"div",6),t.YNc(8,ut,7,3,"ng-container",7),t.qZA(),t.TgZ(9,"div",6)(10,"label",8)(11,"span",9),t._uU(12,"*"),t.qZA(),t._uU(13," Required field(s) "),t.qZA(),t._UZ(14,"div",10),t.qZA()(),t.TgZ(15,"div",11)(16,"div",12)(17,"button",13),t.NdJ("click",function(){return n.cancel()}),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"button",14),t._uU(21),t.ALo(22,"translate"),t.qZA()()()()()()()}2&e&&(t.xp6(8),t.Q6J("ngForOf",n.formLabel),t.xp6(10),t.hij(" ",t.lcZ(19,3,"Cancel")," "),t.xp6(3),t.hij(" ",t.lcZ(22,5,"Submit")," "))},dependencies:[d.sg,m._Y,m.Fj,m.JJ,m.JL,m.On,m.F,J.G,v.X$]}),a})();var Y=i(20388),h=i(38014),L=i(8929),gt=i(1059),_t=i(80013),ht=i(75778),Q=i(2994),ft=i(87545),vt=i(88117),bt=i(66708);function Ct(a,s){if(1&a&&(t.TgZ(0,"div",29)(1,"div",30)(2,"div",31)(3,"h3",32),t._uU(4),t.qZA()()()()),2&a){const e=t.oxw();t.xp6(4),t.hij(" ",e.item.vehicleNumber," ")}}function Tt(a,s){if(1&a&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.s9C("value",e.areaCode),t.xp6(1),t.Oqu(e.name)}}function Zt(a,s){if(1&a&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.text," ")}}function xt(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"label",6)(1,"span",7),t._uU(2,"*"),t.qZA(),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",8)(6,"select",34),t.NdJ("ngModelChange",function(o){t.CHM(e);const r=t.oxw();return t.KtG(r.form.vehicleType=o)}),t.YNc(7,Zt,2,2,"option",10),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,3,"Vehicle Type"),": "),t.xp6(3),t.Q6J("ngModel",e.form.vehicleType),t.xp6(1),t.Q6J("ngForOf",e.vehicleTypes)}}function Mt(a,s){if(1&a&&(t.TgZ(0,"div",5)(1,"label",6)(2,"span",7),t._uU(3,"*"),t.qZA(),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",8),t._UZ(7,"input",35),t.qZA(),t.TgZ(8,"label",6)(9,"span",7),t._uU(10,"*"),t.qZA(),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",8),t._UZ(14,"input",36),t.qZA()()),2&a){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,4,"Contact No."),": "),t.xp6(3),t.Q6J("value",e.form.mobile),t.xp6(4),t.hij(" ",t.lcZ(12,6,"First Name"),": "),t.xp6(3),t.Q6J("value",e.seasonData.firstName)}}function At(a,s){if(1&a&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.text," ")}}function Ut(a,s){1&a&&(t.TgZ(0,"div",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Please select vehicle Type")," "))}function yt(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",5)(1,"label",6)(2,"span",7),t._uU(3,"*"),t.qZA(),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",8),t._UZ(7,"input",37),t.qZA(),t.TgZ(8,"label",6)(9,"span",7),t._uU(10,"*"),t.qZA(),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",8)(14,"select",34,38),t.NdJ("ngModelChange",function(o){t.CHM(e);const r=t.oxw();return t.KtG(r.form.vehicleType=o)}),t.YNc(16,At,2,2,"option",10),t.qZA()(),t.YNc(17,Ut,3,3,"div",15),t.qZA()}if(2&a){const e=t.MAs(15),n=t.oxw(),o=t.MAs(1);t.xp6(4),t.hij(" ",t.lcZ(5,6,"Email"),": "),t.xp6(3),t.Q6J("value",n.seasonData.email),t.xp6(4),t.hij(" ",t.lcZ(12,8,"Vehicle Type"),": "),t.xp6(3),t.Q6J("ngModel",n.form.vehicleType),t.xp6(2),t.Q6J("ngForOf",n.vehicleTypes),t.xp6(1),t.Q6J("ngIf",e.invalid&&(e.dirty||e.touched||o.submitted))}}function Ot(a,s){if(1&a&&(t.TgZ(0,"div",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,e.vehicleNoMessage)," At least 3 characters. ")}}function Nt(a,s){1&a&&(t.TgZ(0,"span",7),t._uU(1,"*"),t.qZA())}function Bt(a,s){1&a&&(t.TgZ(0,"div",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Please enter numbers only")," "))}function wt(a,s){1&a&&(t.TgZ(0,"span",41),t._uU(1,"Invalid IU Number"),t.qZA())}function Dt(a,s){if(1&a&&t.YNc(0,wt,2,0,"span",40),2&a){const e=t.oxw();t.Q6J("ngIf",e.InvalidIUNumber)}}function Pt(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(o){t.CHM(e);const r=t.oxw();return t.KtG(r.delete(o))}),t._UZ(1,"i",42),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&a&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Delete")," "))}let R=(()=>{class a{constructor(e,n,o,r,p){this.router=e,this._route=n,this.driverService=o,this.translate=r,this.carparkService=p,this.deleted=new t.vpe,this.canceled=new t.vpe,this.submitted=new t.vpe,this.vehicleNoMessage=h.vwt.VehicleNo,this.vehicleTypes=h.php.filter(x=>x.value!==h.F0T.Motorcycle),this.driverInput$=new L.xQ,this.InvalidIUNumber=!1,this.isSingapore=65,this.listAreaCode=[{areaCode:65,value:65,name:"Singapore"},{areaCode:60,value:60,name:"Malaysia"}]}ngOnInit(){bt.Z.isUndefinedOrNull(this.areaCode)&&(this.areaCode=65),this.form=this.item||(0,h.wky)(),console.log(this.form),this.isMotorist?this.driver=JSON.parse(localStorage.getItem("user")).hpNumber:(this.driver$=this.driverInput$.pipe((0,gt.O)(""),(0,_t.b)(200),(0,ht.x)(),(0,Q.b)(()=>this.driverLoading=!0),(0,ft.w)(e=>this.driverService.searchModel(e).pipe((0,Q.b)(()=>{this.driverLoading=!1}))),(0,vt.B)()),this.driver$.pipe((0,g.q)(1)).subscribe(e=>{this.driver=this.form.driver?this.form.driver:e[0]}),this._route.queryParams.subscribe(e=>{this.seasonData={firstName:"",email:"",macAddress:""},e.mobile&&(this.seasonData={...e,macAddress:""},this.form.mobile=e.mobile)}))}get isMotorist(){return this.carparkService.isMotorist()}delete(e){e.preventDefault(),this.deleted.emit()}cancel(e){e.preventDefault(),this.canceled.emit()}submit(e){if((65!=this.areaCode||this.form.iuNumber)&&!this.InvalidIUNumber)return this.isMotorist?e.valid&&this.submitted.emit({...this.form,driverCode:this.driver.userName,driver:this.driver,countryCode:this.areaCode}):e.valid&&this.submitted.emit({...this.form})}verifyIUNumber(){this.InvalidIUNumber=this.form.iuNumber.length<10&&this.form.iuNumber.length>0}displayDriverOption(e){return[[e.firstName,e.lastName].filter(o=>o).join(" "),e.mobile,e.email].filter(o=>o&&o.length).join(", ")}onChangeAreaCode(e){this.areaCode=parseInt(e.target.value,10)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(f.F0),t.Y36(f.gz),t.Y36(q.F),t.Y36(v.sK),t.Y36(l.x))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-bus-form"]],inputs:{item:"item"},outputs:{deleted:"deleted",canceled:"canceled",submitted:"submitted"},decls:61,vars:30,consts:[[1,"m-form","m-form--fit","m-form--label-align-right",3,"ngSubmit"],["formRef","ngForm"],[1,"m-portlet"],["class","m-portlet__head",4,"ngIf"],[1,"m-portlet__body"],[1,"row","form-group","m-form__group"],[1,"col-form-label","col-lg-2","col-sm-12"],[1,"m--font-danger"],[1,"col-lg-4","col-sm-12"],["id","countryCode","name","countryCode",1,"form-control","m-input",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"ngIf"],["class","row form-group m-form__group",4,"ngIf"],["type","text","name","vehicleNumber","maxlength","8","minlength","3","pattern","^[a-zA-Z0-9]+$","oninput","this.value = this.value.toUpperCase()","placeholder","","required","",1,"form-control","m-input",3,"ngModel","ngModelChange"],["vehicleNumber","ngModel"],["class","form-control-feedback",4,"ngIf"],["class","m--font-danger",4,"ngIf"],["type","text","name","iuNumber","maxlength","10","pattern","^[0-9]+$","digitOnly","","inputmode","numeric","placeholder","",1,"form-control","m-input",3,"ngModel","required","ngModelChange"],["iuNumber","ngModel"],["class","form-control-feedback",4,"ngIf","ngIfElse"],["hasIuNumber",""],["type","text","name","macAddress",1,"form-control","m-input",3,"value"],[1,"m-portlet__foot","bg-light-gray"],[1,"row"],[1,"m-form__actions","col"],["class","btn btn-outline-main",3,"click",4,"ngIf"],[1,"m-form__actions","m-form__actions--right","row"],[1,"btn","btn-outline-main",3,"click"],["type","submit",1,"btn","btn-main","m--margin-left-30"],[1,"m-portlet__head"],[1,"m-portlet__head-caption"],[1,"m-portlet__head-title"],[1,"m-portlet__head-text"],[3,"value"],["name","vehicleType",1,"form-control","m-input",3,"ngModel","ngModelChange"],["type","text","name","mobile","maxlength","8","pattern","^[0-9]+$","placeholder","",1,"form-control","m-input",3,"value"],["type","text","name","FristName",1,"form-control","m-input",3,"value"],["type","text","name","Email",1,"form-control","m-input",3,"value"],["vehicleType","ngModel"],[1,"form-control-feedback"],["style","color: #f00;",4,"ngIf"],[2,"color","#f00"],[1,"la","la-trash"]],template:function(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"form",0,1),t.NdJ("ngSubmit",function(){t.CHM(o);const p=t.MAs(1);return t.KtG(n.submit(p))}),t.TgZ(2,"div",2),t.YNc(3,Ct,5,1,"div",3),t.TgZ(4,"div",4)(5,"div",5)(6,"label",6)(7,"span",7),t._uU(8,"*"),t.qZA(),t._uU(9," Country of Registration: "),t.qZA(),t.TgZ(10,"div",8)(11,"select",9),t.NdJ("ngModelChange",function(p){return n.areaCode=p})("change",function(p){return n.onChangeAreaCode(p)}),t.YNc(12,Tt,2,2,"option",10),t.qZA()(),t.YNc(13,xt,8,5,"ng-template",11),t.qZA(),t.YNc(14,Mt,15,8,"div",12),t.YNc(15,yt,18,10,"div",12),t.TgZ(16,"div",5)(17,"label",6)(18,"span",7),t._uU(19,"*"),t.qZA(),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"div",8)(23,"input",13,14),t.NdJ("ngModelChange",function(p){return n.form.vehicleNumber=p}),t.qZA(),t.YNc(25,Ot,3,3,"div",15),t.qZA(),t.TgZ(26,"label",6),t.YNc(27,Nt,2,0,"span",16),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"div",8)(31,"input",17,18),t.NdJ("ngModelChange",function(p){return n.form.iuNumber=p})("ngModelChange",function(){return n.verifyIUNumber()}),t.qZA(),t.YNc(33,Bt,3,3,"div",19),t.YNc(34,Dt,1,1,"ng-template",null,20,t.W1O),t.qZA()(),t.TgZ(36,"div",5)(37,"label",6)(38,"span",7),t._uU(39,"*"),t.qZA(),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"div",8),t._UZ(43,"input",21),t.qZA()(),t.TgZ(44,"div",5)(45,"label",6)(46,"span",7),t._uU(47,"*"),t.qZA(),t._uU(48," Required field(s) "),t.qZA(),t._UZ(49,"div",8),t.qZA()(),t.TgZ(50,"div",22)(51,"div",23)(52,"div",24),t.YNc(53,Pt,4,3,"button",25),t.qZA(),t.TgZ(54,"div",26)(55,"button",27),t.NdJ("click",function(p){return n.cancel(p)}),t._uU(56),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"button",28),t._uU(59),t.ALo(60,"translate"),t.qZA()()()()()()}if(2&e){const o=t.MAs(1),r=t.MAs(24),p=t.MAs(32),x=t.MAs(35);t.xp6(3),t.Q6J("ngIf",n.item),t.xp6(8),t.Q6J("ngModel",n.areaCode),t.xp6(1),t.Q6J("ngForOf",n.listAreaCode),t.xp6(1),t.Q6J("ngIf",n.areaCode!==n.isSingapore&&n.isMotorist),t.xp6(1),t.Q6J("ngIf",!n.isMotorist),t.xp6(1),t.Q6J("ngIf",!n.isMotorist),t.xp6(5),t.hij(" ",t.lcZ(21,20,"Vehicle No."),": "),t.xp6(3),t.Q6J("ngModel",n.form.vehicleNumber),t.xp6(2),t.Q6J("ngIf",r.invalid&&(r.dirty||r.touched||o.submitted)),t.xp6(2),t.Q6J("ngIf",n.areaCode===n.isSingapore),t.xp6(1),t.hij(" ",t.lcZ(29,22,"IU No."),": "),t.xp6(3),t.Q6J("ngModel",n.form.iuNumber)("required",n.areaCode===n.isSingapore),t.xp6(2),t.Q6J("ngIf",p.invalid&&(p.dirty||p.touched||o.submitted))("ngIfElse",x),t.xp6(7),t.hij(" ",t.lcZ(41,24,"MAC Address"),": "),t.xp6(3),t.Q6J("value",n.seasonData.macAddress),t.xp6(10),t.Q6J("ngIf",n.item),t.xp6(3),t.hij(" ",t.lcZ(57,26,"Cancel")," "),t.xp6(3),t.hij(" ",t.lcZ(60,28,"Submit")," ")}},dependencies:[d.sg,d.O5,m._Y,m.YN,m.Kr,m.Fj,m.EJ,m.JJ,m.JL,m.Q7,m.wO,m.nD,m.c5,m.On,m.F,v.X$],encapsulation:2}),a})();const kt=["alertErrMsg"];function It(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",5)(1,"p"),t._uU(2,"Are you sure to delete your vehicle?"),t.qZA(),t.TgZ(3,"button",6),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onDecline())}),t._uU(4," No "),t.qZA(),t.TgZ(5,"button",7),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onConfirm())}),t._uU(6," Yes "),t.qZA()()}}function Lt(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",5)(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"button",7),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onDecline())}),t._uU(4,"Close"),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(2),t.Oqu(e.errMsg)}}let Jt=(()=>{class a{constructor(e,n,o,r,p,x){this.router=e,this.route=n,this.vehicleService=o,this._locationService=r,this._carparkService=p,this._modalService=x}ngOnInit(){this.item=this.route.parent.snapshot.data.item}onDeleted(e){this.modalRef=this._modalService.show(e,{class:"modal-sm"})}onDecline(){this.message="Declined!",this.modalRef.hide()}onConfirm(){this.message="Confirmed!",this.vehicleService.deleteAdminModel(this.item.id).subscribe(()=>{this.router.navigate(["/bus-management"])},e=>{this.modalRef.hide(),this.errMsg=e.error.message,this.modalRef=this._modalService.show(this.alertErrMsg,{class:"modal-md"})})}onCanceled(){this._locationService.back()}get isMotorist(){return this._carparkService.isMotorist()}onSubmitted(e){if(this.isMotorist){const n=JSON.parse(localStorage.getItem("user")).login;console.log(e);const o={vehicle:{...e,country:65===e.countryCode?"Singapore":"Malaysia"},vehicleId:e.id};this.vehicleService.putUpdateVehicle(n,o.vehicle).subscribe(()=>{this.onCanceled()},r=>{this.errMsg=r.error.message,this.modalRef=this._modalService.show(this.alertErrMsg,{class:"modal-md"})})}else this.vehicleService.updateModel({id:e.id,vehicleNumber:e.vehicleNumber,iuNumber:e.iuNumber,mobile:e.mobile,vehicleType:e.vehicleType}).subscribe(()=>{this.router.navigate(["/bus-management"])},o=>{this.errMsg=o.error.message||o.error.detail,this.modalRef=this._modalService.show(this.alertErrMsg,{class:"modal-md"})})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(f.F0),t.Y36(f.gz),t.Y36(Z.f),t.Y36(d.Ye),t.Y36(l.x),t.Y36(Y.tT))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-bus-update"]],viewQuery:function(e,n){if(1&e&&t.Gf(kt,5),2&e){let o;t.iGM(o=t.CRH())&&(n.alertErrMsg=o.first)}},decls:8,vars:1,consts:[[1,"body-wrapper"],[1,"m-content"],[3,"item","deleted","canceled","submitted"],["templateConfirmDelete",""],["alertErrMsg",""],[1,"modal-body","text-center"],["type","button",1,"btn","btn-default","mr-3",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",0),t._UZ(1,"app-title-bar"),t.TgZ(2,"div",1)(3,"app-bus-form",2),t.NdJ("deleted",function(){t.CHM(o);const p=t.MAs(5);return t.KtG(n.onDeleted(p))})("canceled",function(){return n.onCanceled()})("submitted",function(p){return n.onSubmitted(p)}),t.qZA()(),t.YNc(4,It,7,0,"ng-template",null,3,t.W1O),t.YNc(6,Lt,5,1,"ng-template",null,4,t.W1O),t.qZA()}2&e&&(t.xp6(3),t.Q6J("item",n.item))},dependencies:[J.G,R],encapsulation:2}),a})();var Et=i(86181);const St=["alertErrMsg"];function Ft(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",4)(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"button",5),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onDecline())}),t._uU(4,"Close"),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(2),t.Oqu(e.errMsg)}}let qt=(()=>{class a{constructor(e,n,o,r){this.router=e,this.translate=n,this.vehicleService=o,this._modalService=r}ngOnInit(){}cancel(){this.router.navigate([`/${(0,Et.pO)()}/`])}submit(e){let n;n={mobile:e.mobile,vehicleNumber:e.vehicleNumber,iuNumber:e.iuNumber,vehicleType:e.vehicleType},this.vehicleService.createVehicleAdmin(n).subscribe(()=>{this.cancel()},o=>{this.errMsg=o.error.message,this.modalRef=this._modalService.show(this.alertErrMsg,{class:"modal-md"})})}onDecline(){this.message="Declined!",this.modalRef.hide()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(f.F0),t.Y36(v.sK),t.Y36(Z.f),t.Y36(Y.tT))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-buses-create"]],viewQuery:function(e,n){if(1&e&&t.Gf(St,5),2&e){let o;t.iGM(o=t.CRH())&&(n.alertErrMsg=o.first)}},decls:6,vars:0,consts:[[1,"body-wrapper"],[1,"m-content"],[3,"canceled","submitted"],["alertErrMsg",""],[1,"modal-body","text-center"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-title-bar"),t.TgZ(2,"div",1)(3,"app-bus-form",2),t.NdJ("canceled",function(){return n.cancel()})("submitted",function(r){return n.submit(r)}),t.qZA()(),t.YNc(4,Ft,5,1,"ng-template",null,3,t.W1O),t.qZA())},dependencies:[J.G,R],encapsulation:2}),a})();var j=i(28555),Yt=i(17489),Qt=(i(19612),i(24850)),Rt=i(23175),jt=i(60086),Kt=i(85222),Ht=i(90650);const K=function(a){return{warning:a}};function zt(a,s){if(1&a&&(t.ynx(0),t.TgZ(1,"div",6)(2,"p",7),t._uU(3),t.qZA(),t.TgZ(4,"p",8),t._uU(5),t.qZA()(),t.BQk()),2&a){const e=s.$implicit,n=t.oxw();t.xp6(3),t.hij("",e,":"),t.xp6(1),t.Q6J("ngClass",t.VKq(3,K,n.ableToReturn(n.item,e))),t.xp6(1),t.hij(" ",n.item[e]," ")}}let $t=(()=>{class a{constructor(){this.iconSize="size-md",this.avatarColumn=4,this.thumbnail=!1,this.displayKeys=["vehicleNo","model","driver","driverStatus","realTime","runTime","remain","durationLeft","ableToReturn"]}get availableStatus(){return this.getCarParkStatus(this.item)}ngOnInit(){}getStatus(e){return this.getCarParkStatus(e)}getCarParkStatus(e){return e.busNo?e.busNo+"":161==e.busNo||168==e.busNo?"0":void 0}ableToReturn(e,n){const o="No"===e.ableToReturn;return n?o&&"ableToReturn"===n:o}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-depot-card"]],inputs:{item:"item",flat:"flat",iconSize:"iconSize",avatarColumn:"avatarColumn",thumbnail:"thumbnail"},decls:7,vars:7,consts:[[1,"right-top-conner",3,"ngClass"],[1,"fa","fa-exclamation"],[1,"row"],[1,"col-4","image",2,"background-color","#32cd32"],[1,"text","flex-column","col-8"],[4,"ngFor","ngForOf"],[1,"d-flex"],[1,"m--marginless","name"],[1,"m--marginless","status",3,"ngClass"]],template:function(e,n){1&e&&(t.TgZ(0,"div")(1,"div",0),t._UZ(2,"i",1),t.qZA(),t.TgZ(3,"div",2),t._UZ(4,"div",3),t.TgZ(5,"div",4),t.YNc(6,zt,6,5,"ng-container",5),t.qZA()()()),2&e&&(t.Gre("car-park-info-wrapper ",n.availableStatus.trim().toLowerCase(),""),t.xp6(1),t.Q6J("ngClass",t.VKq(5,K,n.ableToReturn(n.item))),t.xp6(5),t.Q6J("ngForOf",n.displayKeys))},dependencies:[d.mk,d.sg],styles:[".car-park-info-wrapper[_ngcontent-%COMP%]{position:relative;height:210px;width:280px;border-radius:8px;box-shadow:0 1px 15px #45414e14;background-color:#fff;overflow:hidden}.car-park-info-wrapper[_ngcontent-%COMP%]   .right-top-conner[_ngcontent-%COMP%]{position:absolute;right:0;top:0;border-color:transparent #32CD32 transparent transparent;border-width:0 30px 30px 0;border-style:solid;width:0;height:0}.car-park-info-wrapper[_ngcontent-%COMP%]   .right-top-conner[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;font-size:14px;transform:translate(18px)}.car-park-info-wrapper[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{border-color:transparent #f4516c transparent transparent}.car-park-info-wrapper[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%]{height:150px}.car-park-info-wrapper[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{padding-right:0;background-position:center;background-repeat:no-repeat;background-size:cover}.car-park-info-wrapper[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px;font-family:Montserrat}.car-park-info-wrapper[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:17px;font-weight:600}.car-park-info-wrapper[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p.name[_ngcontent-%COMP%]{color:#9195a9;margin-right:5px!important}.car-park-info-wrapper[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p.status[_ngcontent-%COMP%]{color:#32cd32;font-weight:600}.car-park-info-wrapper[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p.warning[_ngcontent-%COMP%]{color:#f4516c}.car-park-info-wrapper[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .status-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:3px 20px;border-radius:12px;background-color:#ebedf2;color:#32cd32;font-weight:600}.car-park-info-wrapper.full[_ngcontent-%COMP%]   .right-top-conner[_ngcontent-%COMP%]{border-color:transparent #f4516c transparent transparent}.car-park-info-wrapper.full[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p.status[_ngcontent-%COMP%], .car-park-info-wrapper.full[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .status-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f4516c}.car-park-info-wrapper.almost[_ngcontent-%COMP%]   .right-top-conner[_ngcontent-%COMP%]{border-color:transparent #ffb822 transparent transparent}.car-park-info-wrapper.almost[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p.status[_ngcontent-%COMP%], .car-park-info-wrapper.almost[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .status-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ffb822}.car-park-info-wrapper.unavailable[_ngcontent-%COMP%]   .right-top-conner[_ngcontent-%COMP%]{border-color:transparent #868aa8 transparent transparent}.car-park-info-wrapper.unavailable[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p.status[_ngcontent-%COMP%], .car-park-info-wrapper.unavailable[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .status-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#868aa8}"]}),a})();function Wt(a,s){if(1&a&&t._UZ(0,"app-depot-card",22),2&a){const e=t.oxw().$implicit;t.Q6J("thumbnail",!1)("item",e)("flat",!0)}}const Gt=function(a){return{url:a}};function Vt(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"agm-marker",19),t.NdJ("markerClick",function(){const r=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.clickedMarker(r))}),t.TgZ(1,"agm-snazzy-info-window",20,21),t.YNc(3,Wt,1,3,"ng-template"),t.qZA()()}if(2&a){const e=s.$implicit,n=t.oxw(2);t.Q6J("latitude",e.geopoint.lat)("longitude",e.geopoint.lng)("iconUrl",t.VKq(9,Gt,"./assets/app/media/img/icons/p-"+n.getStatus(e).replace(" ","").toLowerCase()+".png")),t.xp6(1),t.Q6J("closeOnMapClick",!0)("showCloseButton",!1)("longitude",e.geopoint.lng)("closeWhenOthersOpen",!0)("latitude",e.geopoint.lat)("isOpen",n.isInfoWindowOpen(e.id))}}function Xt(a,s){if(1&a&&(t.TgZ(0,"div",41)(1,"div",42)(2,"div",43)(3,"div",44)(4,"div",45),t._UZ(5,"img",46),t.qZA(),t.TgZ(6,"button",47),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"div",48)(10,"h5",49),t._uU(11),t.qZA(),t.TgZ(12,"h5",49),t._uU(13),t.qZA(),t.TgZ(14,"div",50)(15,"div")(16,"span",51),t._uU(17," Real Time SOC: "),t.qZA(),t.TgZ(18,"span"),t._uU(19),t.qZA()(),t.TgZ(20,"div")(21,"span",51),t._uU(22," Remaining: "),t.qZA(),t.TgZ(23,"span"),t._uU(24),t.qZA()()()()()(),t.TgZ(25,"div",52)(26,"div",43)(27,"div",44)(28,"div")(29,"span",51),t._uU(30," Model: "),t.qZA(),t.TgZ(31,"span"),t._uU(32),t.qZA()(),t.TgZ(33,"div")(34,"span",51),t._uU(35," Run Time: "),t.qZA(),t.TgZ(36,"span"),t._uU(37),t.qZA()(),t.TgZ(38,"div")(39,"span",51),t._uU(40," Able To Return:"),t.qZA(),t.TgZ(41,"span"),t._uU(42),t.qZA()()(),t.TgZ(43,"div",44)(44,"div")(45,"span",51),t._uU(46," Driver: "),t.qZA(),t.TgZ(47,"span"),t._uU(48),t.qZA()(),t.TgZ(49,"div")(50,"span",51),t._uU(51," Remaining: "),t.qZA(),t.TgZ(52,"span"),t._uU(53),t.qZA()()(),t.TgZ(54,"div",44)(55,"div")(56,"span",51),t._uU(57," Status: "),t.qZA(),t.TgZ(58,"span"),t._uU(59),t.qZA()(),t.TgZ(60,"div")(61,"span",51),t._uU(62," Duration Left: "),t.qZA(),t.TgZ(63,"span"),t._uU(64),t.qZA()()()()()()),2&a){const e=t.oxw(4);t.xp6(5),t.Q6J("src",(null==e.carparkDetails.images[0]?null:e.carparkDetails.images[0].carParkImage)||"assets/app/media/img/icons/park-placeholder.png",t.LSH),t.xp6(1),t.Q6J("routerLink","./"+e.carparkDetails.id+"/transactions"),t.xp6(1),t.Oqu(t.lcZ(8,14,"View Detail")),t.xp6(4),t.hij("Bus No.:",e.carparkDetails.busNo,""),t.xp6(2),t.hij("Driver:",e.carparkDetails.driver,""),t.xp6(6),t.hij(" ",e.carparkDetails.realTime," "),t.xp6(5),t.hij(" ",e.carparkDetails.remain,"(km) "),t.xp6(8),t.Oqu(e.carparkDetails.model),t.xp6(5),t.hij("",e.carparkDetails.runTime,"(mins)"),t.xp6(5),t.Oqu(e.carparkDetails.ableToReturn),t.xp6(6),t.Oqu(e.carparkDetails.driver),t.xp6(5),t.hij("",e.carparkDetails.remain,"(km)"),t.xp6(6),t.hij("",e.carparkDetails.busStatus,"(mins)"),t.xp6(5),t.hij("",e.carparkDetails.durationLeft,"(mins)")}}function te(a,s){if(1&a&&t._UZ(0,"app-bus-transactions",53),2&a){const e=t.oxw(4);t.Q6J("parkId",e.carparkDetails.id)}}function ee(a,s){if(1&a&&t._UZ(0,"app-bus-season",53),2&a){const e=t.oxw(4);t.Q6J("parkId",e.carparkDetails.id)}}function ne(a,s){if(1&a&&t._UZ(0,"app-carpark-vpgs",53),2&a){const e=t.oxw(4);t.Q6J("parkId",e.carparkDetails.id)}}function ae(a,s){1&a&&t._UZ(0,"app-carpark-ev-status")}function oe(a,s){if(1&a&&(t.TgZ(0,"div",36)(1,"div",37),t.YNc(2,Xt,65,16,"div",38),t.YNc(3,te,1,1,"app-bus-transactions",39),t.YNc(4,ee,1,1,"app-bus-season",39),t.YNc(5,ne,1,1,"app-carpark-vpgs",39),t.YNc(6,ae,1,0,"app-carpark-ev-status",40),t.qZA()()),2&a){const e=t.oxw(3);t.xp6(2),t.Q6J("ngIf","default"===e.selectedTab),t.xp6(1),t.Q6J("ngIf","transaction"===e.selectedTab||"ev"===e.selectedTab),t.xp6(1),t.Q6J("ngIf","season"===e.selectedTab),t.xp6(1),t.Q6J("ngIf","vpgs"===e.selectedTab),t.xp6(1),t.Q6J("ngIf","evStatus"===e.selectedTab)}}const H=function(a){return{active:a}};function ie(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",23)(1,"div",24)(2,"div",25)(3,"div",26)(4,"div",27)(5,"span",28),t._UZ(6,"i",29),t.qZA(),t.TgZ(7,"span",30),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.togglePanel=!o.togglePanel)}),t._UZ(8,"i",31),t.qZA()(),t.TgZ(9,"ul",32)(10,"li",33)(11,"a",34),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.handleTabChange("default"))}),t._uU(12," Bus Status "),t.qZA()(),t.TgZ(13,"li",33)(14,"a",34),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.handleTabChange("ev"))}),t._uU(15),t.ALo(16,"translate"),t.qZA()()()()(),t.YNc(17,oe,7,5,"div",35),t.qZA()()}if(2&a){const e=t.oxw(2);t.xp6(5),t.Q6J("routerLink","./"+e.carparkDetails.id+"/transactions"),t.xp6(6),t.Q6J("ngClass",t.VKq(7,H,"default"===e.selectedTab)),t.xp6(3),t.Q6J("ngClass",t.VKq(9,H,"ev"===e.selectedTab)),t.xp6(1),t.hij(" ",t.lcZ(16,5,"EV Transactions")," "),t.xp6(2),t.Q6J("ngIf",!e.togglePanel)}}function re(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",15)(1,"agm-map",16),t.NdJ("zoomChange",function(o){t.CHM(e);const r=t.oxw();return t.KtG(r.zoomChange(o))}),t.YNc(2,Vt,4,11,"agm-marker",17),t.qZA(),t.YNc(3,ie,18,11,"div",18),t.qZA()}if(2&a){const e=t.oxw();t.xp6(1),t.Q6J("longitude",e.longitude)("latitude",e.latitude)("zoom",15)("disableDefaultUI",!1)("zoomControl",!0),t.xp6(1),t.Q6J("ngForOf",e.items),t.xp6(1),t.Q6J("ngIf",!!e.carparkDetails)}}function se(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"a",57),t.NdJ("click",function(){const r=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.clickedScrollbar(r.id,r))}),t._UZ(1,"img",58),t.TgZ(2,"div",59)(3,"div",60),t._uU(4),t.ALo(5,"titlecase"),t.qZA(),t.TgZ(6,"span"),t._uU(7),t.qZA(),t.TgZ(8,"span"),t._uU(9),t.qZA()()()}if(2&a){const e=s.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("src",(null==e.images[0]?null:e.images[0].carParkImage)||"assets/app/media/img/icons/park-placeholder.png",t.LSH),t.xp6(3),t.lnq("",t.lcZ(5,9,e.name)," ",e.busNo," (",e.vehicleNo,")"),t.xp6(2),t.Gre("status ",n.getStatus(e).trim().toLowerCase(),""),t.xp6(1),t.hij("",e.soc," | "),t.xp6(2),t.Oqu(e.distance)}}function le(a,s){if(1&a&&(t.TgZ(0,"div",54)(1,"div",55),t.YNc(2,se,10,11,"a",56),t.qZA()()),2&a){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.items)}}let ce=(()=>{class a{constructor(e,n){this.carparkService=e,this.changeDetectorRef=n,this.items=[],this.zoom=1,this.previous=null,this.carparkDetails=null,this.selectedTab="default",this.togglePanel=!1,this.openedWindow=null,this.getCarParkDetailInterval=null,this.isSnazzyInfoWindowOpened=!1,this.soc="",this.keyword="",this.keyword$=new L.xQ}ngOnInit(){this.carparkService.filterModel({lat:1.3329002,lng:103.7413114}).pipe((0,Qt.U)(n=>(n.data=n.data.map((o,r)=>({...o,name:"Bus",busNo:100+100%(r+13)+(50+r),vehicleNo:`SBS6${200+200%(r+13)+(80+r)}G`,realTime:~~(100*Math.random()),remain:~~(200*Math.random()),busStatus:Math.random()>.5?"Driving":"Charging",runTime:~~(100*Math.random()),durationLeft:~~(100*Math.random()),ableToReturn:Math.random()>.5?"Yes":"No",distance:`${(500*Math.random()).toFixed(2)}km`,soc:~~(100*Math.random())+"%",model:"Mercedes",driver:"Janny"})),n))).subscribe(n=>{this.items=n.data,setTimeout(()=>{this.latitude=1.3329002,this.longitude=103.7413114,this.zoom=12},200)})}zoomChange(e){console.log(e),this.isSnazzyInfoWindowOpened=17===e||16===e}getNormalLots(e){return e.live?e.totalLots-e.live.availableLots-e.seasonLots:"-"}clickedMarker(e){this.getCarParkById(e.id,e)}clickedScrollbar(e,n){this.openedWindow=e,this.getCarParkById(e,n),this.getCarParkDetailInterval&&clearInterval(this.getCarParkDetailInterval),this.getCarParkDetailInterval=setInterval(()=>this.getCarParkById(e,n),5e3)}getCarParkById(e,n){this.carparkService.getModel(e||this.carparkDetails.id).pipe((0,g.q)(1)).subscribe(o=>{this.carparkDetails={...o,driver:"Jannv",realTime:85,remain:150,busStatus:"Driving",runTime:100,durationLeft:120,ableToReturn:"No",model:"Mercedes",...n}})}isInfoWindowOpen(e){return this.openedWindow===e}getStatus(e){return this.getCarParkStatus(e)}getCarParkStatus(e){return e.busNo?e.busNo+"":161==e.busNo||168==e.busNo||165==e.busNo?"0":void 0}handleTabChange(e){this.selectedTab=e,this.carparkDetails&&"default"===e?this.getCarParkDetailInterval=setInterval(()=>this.getCarParkById(this.carparkDetails.id),5e3):clearInterval(this.getCarParkDetailInterval)}ngOnDestroy(){clearInterval(this.getCarParkDetailInterval)}getSocValue(e){return e.live&&"closed"!==e.live.availability?`${(100*e.live.availableLots/e.totalLots).toString(2)}%`:"0%"}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(l.x),t.Y36(t.sBO))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-buses-map"]],decls:24,vars:13,consts:[["class","st-carpark__map col-10",4,"ngIf"],["fxFlex","1 1 100%",1,"st-carpark__scrollbar","m--padding-0","col-2"],[1,"st-carpark__scrollbar-header","m--padding-top-15","m--padding-bottom-15"],[1,"m-subheader__title","m-subheader__title--separator","m--padding-left-15","m--padding-right-15","text-main"],[1,"m-portlet__filter"],[1,"col-form-label","m--padding-left-15","m--padding-right-15"],[1,"m--padding-left-15","m--padding-right-15"],["name","soc",1,"form-control","m-input",3,"ngModel","ngModelChange"],["value",""],[1,"col-form-label","col-form-label-nowrap","m--padding-left-15","m--padding-right-15"],[1,"m-input-icon","m-input-icon--left","m--padding-left-15","m--padding-right-15"],["type","text","placeholder","",1,"form-control","m-input",3,"ngModel","ngModelChange"],[1,"m-input-icon__icon","m-input-icon__icon--left"],[1,"la","la-search"],["class","st-carpark__scrollbar-content",4,"ngIf"],[1,"st-carpark__map","col-10"],[3,"longitude","latitude","zoom","disableDefaultUI","zoomControl","zoomChange"],[3,"latitude","longitude","iconUrl","markerClick",4,"ngFor","ngForOf"],["class","m--margin-top-15",4,"ngIf"],[3,"latitude","longitude","iconUrl","markerClick"],[3,"closeOnMapClick","showCloseButton","longitude","closeWhenOthersOpen","latitude","isOpen"],["infoWindow",""],[3,"thumbnail","item","flat"],[1,"m--margin-top-15"],[1,"m-portlet","m-portlet--tabs"],[1,"m-portlet__head"],[1,"m-portlet__head-tools","position-relative"],[1,"action-group"],[3,"routerLink"],[1,"fa","fa-eye"],[3,"click"],[1,"fa","fa-times-circle"],["role","tablist",1,"nav","nav-tabs","m-tabs-line","m-tabs-line--primary","m-tabs-line--2x","custom-tabs"],[1,"nav-item","m-tabs__item"],[1,"nav-link","m-tabs__link",2,"padding","10px 0",3,"ngClass","click"],["class","m-portlet__body",4,"ngIf"],[1,"m-portlet__body"],[1,"m-portlet__frame"],["class","row container-fluid m-row--col-separator-sm",4,"ngIf"],[3,"parkId",4,"ngIf"],[4,"ngIf"],[1,"row","container-fluid","m-row--col-separator-sm"],[1,"col-md-5"],[1,"row"],[1,"col-4"],[1,"m-rounded",2,"width","110px","margin","0 auto 10px"],["alt","","width","110","height","110",3,"src"],[1,"btn","btn-main","btn-block",2,"min-width","120px",3,"routerLink"],[1,"col","m--padding-left-20","m--padding-right-0","m--padding-left-40"],[1,"m--font-boldest","m--margin-bottom-5","text-main"],[1,"text-muted","m--margin-top-10"],[1,"label"],[1,"col-md-7","m-section"],[3,"parkId"],[1,"st-carpark__scrollbar-content"],[1,"list-group"],["class","m--padding-left-15 m--padding-right-15 list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"m--padding-left-15","m--padding-right-15","list-group-item","list-group-item-action",3,"click"],["width","40px","height","40px","alt","",1,"m--img-rounded","m--img-centered",3,"src"],[1,"info-wrapper","flex-column"],[1,"name"]],template:function(e,n){1&e&&(t.YNc(0,re,4,7,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"div",4)(7,"label",5),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",6)(11,"select",7),t.NdJ("ngModelChange",function(r){return n.soc=r}),t.TgZ(12,"option",8),t._uU(13,"All"),t.qZA()()()(),t.TgZ(14,"div",4)(15,"label",9),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"div",10)(19,"input",11),t.NdJ("ngModelChange",function(r){return n.keyword=r})("ngModelChange",function(r){return n.keyword$.next(r)}),t.qZA(),t.TgZ(20,"span",12)(21,"span"),t._UZ(22,"i",13),t.qZA()()()(),t.YNc(23,le,3,1,"div",14),t.qZA()),2&e&&(t.Q6J("ngIf",n.items&&n.items.length>0),t.xp6(4),t.hij(" ",t.lcZ(5,7,"Vehicles")," "),t.xp6(4),t.hij(" ",t.lcZ(9,9,"SOC%"),": "),t.xp6(3),t.Q6J("ngModel",n.soc),t.xp6(5),t.hij(" ",t.lcZ(17,11,"Vehicle No."),": "),t.xp6(3),t.Q6J("ngModel",n.keyword),t.xp6(4),t.Q6J("ngIf",n.items&&n.items.length>0))},dependencies:[d.mk,d.sg,d.O5,m.YN,m.Kr,m.Fj,m.EJ,m.JJ,m.On,b.SA,b.pt,I.Q,f.rH,Rt.w,jt.G,Kt.x,Ht.R,$t,d.rS,v.X$],styles:["agm-map{height:600px}.st-carpark__map .st-carpark__map-list{height:300px;overflow-y:scroll}.st-carpark__map .m-portlet__head{height:3rem}.st-carpark__map .custom-tabs{bottom:0}.st-carpark__map .action-group{position:absolute;right:0;top:50%;transform:translateY(-50%);z-index:99}.st-carpark__map .action-group span:hover{cursor:pointer}.st-carpark__map .action-group span:first-child{margin-right:20px}.si-content{max-width:unset!important;min-width:150px;max-height:unset!important;overflow:visible}.st-carpark__scrollbar{background:#fff;margin-bottom:2.5em}.st-carpark__scrollbar-header{border-bottom:1px solid #f4f5f8}.st-carpark__scrollbar-header h3{font-family:Poppins;font-size:20px;font-weight:600;font-style:normal;font-stretch:normal;letter-spacing:normal;color:#575962}.st-carpark__scrollbar-content{overflow-y:scroll;height:670px}.st-carpark__scrollbar-content .list-group .list-group-item{display:flex;align-items:center;border:unset}.st-carpark__scrollbar-content .list-group .list-group-item>img{margin-right:10px}.list-group-item .name,.st-carpark__status-left-information .name{font-family:Montserrat;font-size:14px;font-weight:600;font-style:normal;font-stretch:normal;letter-spacing:normal;color:#575962}.st-carpark__status-left-information .name{font-weight:400}.list-group-item .status{font-family:LucidaGrande;font-size:12px;font-weight:300;font-style:normal;font-stretch:normal;letter-spacing:normal;color:#34bfa3;text-transform:capitalize}.list-group-item .status.full{color:#f4516c}.list-group-item .status.almost{color:#ffb822}.list-group-item .status.unavailable{color:#868aa8}.st-carpark__status{background:#fff;display:flex;padding:30px}.st-carpark__status-left{display:flex;border-right:solid 1px #f4f5f8}.detail-image,.st-carpark__status-left-detail{text-align:center}.label{font-weight:400}\n"],encapsulation:2}),a})();var z=i(79118),$=i(70853),pe=i(40269);function me(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"ul",33)(1,"li",34)(2,"span",35),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,r=t.oxw();return t.KtG(r.goToEdit(o.id,o))}),t.TgZ(3,"span"),t._UZ(4,"i",36),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"translate"),t.qZA()()(),t.TgZ(8,"li",34)(9,"span",35),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,r=t.oxw();return t.KtG(r.goToDetail(o.id,o))}),t.TgZ(10,"span"),t._UZ(11,"i",37),t.qZA(),t.TgZ(12,"span"),t._uU(13),t.ALo(14,"translate"),t.qZA()()(),t.TgZ(15,"li",34)(16,"span",35),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.goToAnalysis())}),t.TgZ(17,"span"),t._UZ(18,"i",38),t.qZA(),t.TgZ(19,"span"),t._uU(20),t.ALo(21,"translate"),t.qZA()()()()}2&a&&(t.xp6(6),t.Oqu(t.lcZ(7,3,"Edit")),t.xp6(7),t.Oqu(t.lcZ(14,5,"Detail")),t.xp6(7),t.Oqu(t.lcZ(21,7,"Analysis")))}const ue=function(a){return{color:a}};function de(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"td",21)(1,"span")(2,"span"),t._UZ(3,"img",22),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA()()(),t.TgZ(6,"td",21)(7,"span"),t._uU(8),t.qZA()(),t.TgZ(9,"td",21)(10,"span"),t._uU(11),t.qZA()(),t.TgZ(12,"td",21)(13,"span"),t._uU(14),t.qZA()(),t.TgZ(15,"td",21)(16,"span"),t._uU(17),t.qZA()(),t.TgZ(18,"td",21)(19,"span",23),t._uU(20),t.qZA()(),t.TgZ(21,"td",21)(22,"span"),t._uU(23),t.qZA()(),t.TgZ(24,"td",21)(25,"span"),t._uU(26),t.qZA()(),t.TgZ(27,"td",21)(28,"span"),t._uU(29),t.qZA()(),t.TgZ(30,"td",21)(31,"span"),t._uU(32),t.qZA()(),t.TgZ(33,"td",21)(34,"span"),t._uU(35),t.qZA()(),t.TgZ(36,"td",21)(37,"span")(38,"span",24)(39,"i",25),t.NdJ("click",function(){const r=t.CHM(e).$implicit,p=t.oxw();return t.KtG(p.goToDetail(r.id,r))}),t.qZA()(),t.TgZ(40,"span",24),t._UZ(41,"i",26),t.qZA(),t.TgZ(42,"span",24),t._UZ(43,"i",27),t.qZA()()(),t.TgZ(44,"td",28)(45,"span")(46,"div",29)(47,"button",30),t._UZ(48,"i",31),t.qZA(),t.YNc(49,me,22,9,"ul",32),t.qZA()()()}if(2&a){const e=s.$implicit,n=t.oxw();t.xp6(1),t.Udp("width",n.tableHeaders[0].width),t.xp6(2),t.Q6J("src",n.vehicleTypeLogo(e.vehicleType,"icon"),t.LSH),t.xp6(2),t.Oqu(e.vehicleNumber),t.xp6(2),t.Udp("width",n.tableHeaders[1].width),t.xp6(1),t.hij(" ",e.serviceNo," "),t.xp6(2),t.Udp("width",n.tableHeaders[2].width),t.xp6(1),t.hij(" ",e.depot," "),t.xp6(2),t.Udp("width",n.tableHeaders[3].width),t.xp6(1),t.hij(" ",e.model," "),t.xp6(2),t.Udp("width",n.tableHeaders[4].width),t.xp6(1),t.hij(" ",e.status," "),t.xp6(2),t.Udp("width",n.tableHeaders[5].width),t.Q6J("ngStyle",t.VKq(39,ue,n.setSocColor(e))),t.xp6(1),t.hij(" ",e.soc," "),t.xp6(2),t.Udp("width",n.tableHeaders[6].width),t.xp6(1),t.hij(" ",e.runTime," "),t.xp6(2),t.Udp("width",n.tableHeaders[7].width),t.xp6(1),t.hij(" ",e.remainJourney," "),t.xp6(2),t.Udp("width",n.tableHeaders[8].width),t.xp6(1),t.hij(" ",e.range," "),t.xp6(2),t.Udp("width",n.tableHeaders[9].width),t.xp6(1),t.hij(" ",e.dutation," "),t.xp6(2),t.Udp("width",n.tableHeaders[10].width),t.xp6(1),t.hij(" ",e.able," "),t.xp6(2),t.Udp("width",n.tableHeaders[11].width),t.xp6(8),t.Udp("width",n.tableHeaders[12].width)}}let ge=(()=>{class a extends z.Gw{constructor(e,n,o,r,p,x){super(),this.router=e,this.carParkService=n,this.translate=o,this.vehicleService=r,this.route=p,this.busService=x,this.tableHeaders=[{text:"Vehicle No.",column:"vehiclePlateNo",width:"150px"},{text:"Service No.",column:"serviceNo",width:"120px"},{text:"Depot",column:"depot",width:"80px"},{text:"Model",column:"model",width:"80px"},{text:"Status",column:"status",width:"80px"},{text:"SOC%",column:"soc",width:"100px"},{text:"Run Time(mins)",column:"runTime",width:"120px"},{text:"Remaining journey(km)",column:"remain",width:"180px"},{text:"Range(km)",column:"range",width:"120px"},{text:"Duration to return(mins)",column:"duration",width:"200px"},{text:"Able to return",column:"able",width:"160px"},{text:"More",column:"more",width:"160px"},{text:"Actions",column:"",width:"150px"}],this.statuses=h.$Id,this.status="",this.paymentMethods=h.Hl7,this.paymentMethod="",this.faults=h.cPJ,this.fault="",this.groups=[],this.group="",this.vacancies=[],this.vacancyColor=h.M8c,this.keyword="",this.vehicleTypes=h.php,this.vehicleNo="",this.vehicleType="",this.depot="",this.soc="",this.ableToReturn="",this.keyword$=new L.xQ,this.telKeyword$=new L.xQ}get data(){return this._data}set data(e){this._data=e,this.vacancies=e&&e.map(n=>n.type!==h.D63.Closed?[{value:n.availableLots,color:h.M8c.Available},{value:n.seasonLots,color:h.M8c.Season},{value:n.usedNormalLots,color:h.M8c.Normal}]:[])}get filterParams(){return{type:this.status,paymentMethod:this.paymentMethod,fault:this.fault,group:this.group,keyword:this.keyword}}ngOnInit(){this.keyword$.debounceTime(500).subscribe(()=>{this.reloadData()}),this.telKeyword$.debounceTime(400).subscribe(()=>this.reloadData()),this.reloadData();const e=this.tableHeaders.map(n=>n.text);this.translate.get(e).subscribe(n=>{this.tableHeaders.forEach(o=>{for(const r in n)n.hasOwnProperty(r)&&o.text===r&&(o.text=n[r])})})}reloadData(){this.busService.getBusListData().subscribe(e=>{this.data=e.overview})}pageChanged(e){this.pagination=e,this.reloadData()}onAddVehicle(){this.router.navigate(["/bus-management/create"])}vehicleTypeLogo(e,n){return(0,h.e9Z)(h.php,e,n)}setSocColor(e){let n="";const o=Number(e.soc);return o>=60?n="high":o>=40&&o<80?n="medium":o>=20&&o<40?n="low":o>=0&&o<20&&(n="alert"),"charging"===e.status.toLowerCase()&&(n="charging"),{others:"#7030a0",lost:"#8c8c8c",charging:"#00b0f0",alert:"#ff0000",low:"#ff0000",medium:"#ffc000",high:"#00b050"}[n.toLowerCase()]}goToDetail(e,n){this.router.navigate([`/bus-management/${e}/detail`])}goToEdit(e,n){this.router.navigate([`/bus-management/${e}/update`],{queryParams:{firstName:n.firstName||"",mobile:n.mobile,email:n.email||""}})}goToAnalysis(){this.router.navigate(["/bus-management/analysis"])}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(f.F0),t.Y36(l.x),t.Y36(v.sK),t.Y36(Z.f),t.Y36(f.gz),t.Y36($.Z))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-buses-list"]],features:[t.qOj],decls:48,vars:24,consts:[[1,"m-portlet"],[1,"m-portlet__body","m-portlet__body--scrollable"],[1,"m-portlet__frame"],[1,"form-group","m-form__group","m-portlet__filters"],[1,"m-portlet__filter"],[1,"col-form-label"],["name","depot",1,"form-control","m-input",3,"ngModel","ngModelChange"],["value",""],["name","soc",1,"form-control","m-input",3,"ngModel","ngModelChange"],["name","ableToReturn",1,"form-control","m-input",3,"ngModel","ngModelChange"],[1,"col-form-label","col-form-label-nowrap"],[1,"m-input-icon","m-input-icon--left"],["type","text","placeholder","",1,"form-control","m-input",3,"ngModel","ngModelChange"],[1,"m-input-icon__icon","m-input-icon__icon--left"],[1,"la","la-search"],[1,"m-portlet__filter","btn-create"],[1,"btn","btn-main","m-btn","m-btn--custom","m-btn--icon","m-btn--air","m-btn--pill",3,"click"],[1,"la","la-plus"],[3,"headers","items","loading","pagination","scrollingDisabled","pageChanged"],["listTable",""],["rowTemplate",""],[1,"m-datatable__cell"],["alt","",3,"src"],[1,"d-flex","align-items-center",3,"ngStyle"],[1,"mr-1"],[1,"la","la-eye",3,"click"],[1,"la","la-battery-three-quarters"],[1,"la","la-bell"],[1,"m-datatable__cell","action-cell"],["dropdown","","placement","bottom right"],["dropdownToggle","",1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--outline-2x","m-btn--pill","no-border"],[1,"la","la-ellipsis-h"],["class","dropdown-menu dropdown-menu-right","role","menu",4,"dropdownMenu"],["role","menu",1,"dropdown-menu","dropdown-menu-right"],["role","menuitem"],[1,"dropdown-item",3,"click"],[1,"la","la-edit"],[1,"la","la-eye"],[1,"la","la-bus"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"div")(9,"select",6),t.NdJ("ngModelChange",function(r){return n.depot=r})("ngModelChange",function(){return n.reloadData()}),t.TgZ(10,"option",7),t._uU(11,"All"),t.qZA()()()(),t.TgZ(12,"div",4)(13,"label",5),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"div")(17,"select",8),t.NdJ("ngModelChange",function(r){return n.soc=r})("ngModelChange",function(){return n.reloadData()}),t.TgZ(18,"option",7),t._uU(19,"All"),t.qZA()()()(),t.TgZ(20,"div",4)(21,"label",5),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"div")(25,"select",9),t.NdJ("ngModelChange",function(r){return n.ableToReturn=r})("ngModelChange",function(){return n.reloadData()}),t.TgZ(26,"option",7),t._uU(27,"All"),t.qZA()()()(),t.TgZ(28,"div",4)(29,"label",10),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"div",11)(33,"input",12),t.NdJ("ngModelChange",function(r){return n.keyword=r})("ngModelChange",function(r){return n.keyword$.next(r)}),t.qZA(),t.TgZ(34,"span",13)(35,"span"),t._UZ(36,"i",14),t.qZA()()()(),t.TgZ(37,"div",15)(38,"button",16),t.NdJ("click",function(){return n.onAddVehicle()}),t.TgZ(39,"span"),t._UZ(40,"i",17),t.TgZ(41,"span"),t._uU(42),t.ALo(43,"translate"),t.qZA()()()()(),t.TgZ(44,"app-datatable",18,19),t.NdJ("pageChanged",function(r){return n.pageChanged(r)}),t.YNc(46,de,50,41,"ng-template",null,20,t.W1O),t.qZA()()()()),2&e&&(t.xp6(6),t.hij(" ",t.lcZ(7,14,"Depot"),": "),t.xp6(3),t.Q6J("ngModel",n.depot),t.xp6(5),t.hij(" ",t.lcZ(15,16,"SOC%"),": "),t.xp6(3),t.Q6J("ngModel",n.soc),t.xp6(5),t.hij(" ",t.lcZ(23,18,"Able To Return"),": "),t.xp6(3),t.Q6J("ngModel",n.ableToReturn),t.xp6(5),t.hij(" ",t.lcZ(31,20,"Vehicle No."),": "),t.xp6(3),t.Q6J("ngModel",n.keyword),t.xp6(9),t.hij(" ",t.lcZ(43,22,"Add Vehicle")," "),t.xp6(2),t.Q6J("headers",n.tableHeaders)("items",n.data)("loading",n.loading)("pagination",n.pagination)("scrollingDisabled",!0))},dependencies:[d.PC,m.YN,m.Kr,m.Fj,m.EJ,m.JJ,m.On,z.nE,pe.Uo,c.Hz,c.Mq,c.TO,v.X$],styles:[".circle-soc[_ngcontent-%COMP%]{border-radius:50%;width:15px;height:15px;background-color:#000}"]}),a})();function _e(a,s){1&a&&t._UZ(0,"app-buses-list")}function he(a,s){1&a&&t._UZ(0,"app-buses-map",10)}let fe=(()=>{class a{constructor(e,n,o,r,p){this.router=e,this.translate=n,this.store=o,this.vehicleService=r,this.carparkService=p,this.alive=!0,this.currentTab="list",this.user$=o.pipe((0,j.Ys)("global"))}changeTab(e){this.currentTab=e}gotoCreate(){this.router.navigate(["/bus-depots/create"])}tabClass(e){return e===this.currentTab?"active":""}ngOnInit(){this.user$.takeWhile(()=>this.alive).subscribe(({user:e})=>{this.viewOnly=(0,Yt.intersection)([h.i44.ThirdParty,h.i44.Tester,h.i44.Auditor],e.authorities).length>0})}get isOperator(){return this.vehicleService.isOperator()}get isOwner(){return this.carparkService.isOwner()}get createOrNot(){return!(this.isOperator||this.isOwner)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(f.F0),t.Y36(v.sK),t.Y36(j.yh),t.Y36(Z.f),t.Y36(l.x))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-buses-home"]],decls:10,vars:8,consts:[[1,"body-wrapper"],[2,"display","flex","justify-content","flex-end","padding-right","16px","margin-top","16px"],["role","group","aria-label","...",1,"m-btn-group","m-btn-group--pill","btn-group","mr-2",2,"height","40px"],["type","button",3,"click"],[1,"la","la-th-list"],["type","button",2,"height","40px","display","flex","align-items","center",3,"click"],[1,"la","la-map"],[1,"m-content"],[4,"ngIf"],["style","display:flex;",4,"ngIf"],[2,"display","flex"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),t.NdJ("click",function(){return n.changeTab("list")}),t._UZ(4,"i",4),t.qZA(),t.TgZ(5,"button",5),t.NdJ("click",function(){return n.changeTab("map")}),t._UZ(6,"i",6),t.qZA()()(),t.TgZ(7,"div",7),t.YNc(8,_e,1,0,"app-buses-list",8),t.YNc(9,he,1,0,"app-buses-map",9),t.qZA()()),2&e&&(t.xp6(3),t.Gre("m-btn m-btn--air btn btn-outline-main ","list"===n.currentTab&&"focus",""),t.xp6(2),t.Gre("m-btn m-btn--air btn btn-outline-main ","map"===n.currentTab&&"focus",""),t.xp6(3),t.Q6J("ngIf","list"===n.currentTab),t.xp6(1),t.Q6J("ngIf","map"===n.currentTab))},dependencies:[d.O5,ce,ge]}),a})();function W(a){return new u.w(a,"../assets/i18n/",".json")}let S=(()=>{class a{constructor(e){this.busService=e}resolve(e){return this.busService.getVehicleDetail(e.paramMap.get("id")).pipe((0,g.q)(1))}}return a.\u0275fac=function(e){return new(e||a)(t.LFG($.Z))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac}),a})();const G=[{path:"",component:C.f,children:[{path:"",component:fe},{path:"create",component:qt,data:{breadcrumb:{label:"Create"}}},{path:":id/update",component:Jt,data:{breadcrumb:{label:"Update"}}},{path:":id/detail",resolve:{item:S},component:dt,data:{breadcrumb:{label:"Vehicle Detail"}}},{path:"analysis",component:B,data:{breadcrumb:{label:"Over Line"}}},{path:":id",loadChildren:()=>Promise.all([i.e(7530),i.e(9967),i.e(2179),i.e(3420),i.e(3809),i.e(5312),i.e(2662)]).then(i.bind(i,91004)).then(a=>a.CarParkModule),data:{breadcrumb:a=>({label:`Bus ${a.snapshot.params.id}`,title:`Bus ${a.snapshot.params.id}`})}}]}];let be=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[y.k,w.e,l.x,P.p,O.C,D.K,k.K,Z.f,S],imports:[d.ez,f.Bz.forChild(G),_.x,N.D,T.a4,c.mr,mt,v.aw.forChild({loader:{provide:v.Zw,useFactory:W,deps:[U.eN]}}),f.Bz]}),a})()}}]);