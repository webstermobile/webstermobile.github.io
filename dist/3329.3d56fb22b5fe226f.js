(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[3329,9226],{64050:(N,O,r)=>{"use strict";r.d(O,{F:()=>f}),r(38014);var u=r(3927),s=r(21086),y=r(27221),M=r(24850),Z=r(26245),_=r(94650),z=r(80529),b=r(28555),g=r(91599);let f=(()=>{class x extends u.su{constructor(d,o,p){super(d,o),this.http=d,this.store=o,this.modelName="Driver",this.baseUrl="api/drivers",this.handleError=p.createHandleError(`${this.modelName}Service`)}getDriversSimpleList(d,o){const p=(0,Z.U8)(`${this.baseUrl}`,{...d,...(0,Z.jq)(o)});return this.get(this.getUrl(p)).pipe((0,y.K)(()=>(0,s.of)([]))).map(h=>Array.isArray(h)?(0,u.eC)(h):(0,u.O7)(h))}getModel(d){const o=this.getUrl(`api/users/${d}`);return this.get(o).map(p=>({...p,mobile:p.mobile||{},address:p.address||{}}))}createModel(d){const o=this.getUrl("api/register");return this.post(o,d)}updateModel(d){const o=this.getUrl("api/users/");return this.put(o,d)}deleteModel(d){const o=this.getUrl(`api/users/${d}`);return this.delete(o)}searchModel(d){const o=this.getUrl(`carpark/api/drivers/filter/${d||""}`);return this.get(o).pipe((0,M.U)(p=>p.content),(0,y.K)(()=>(0,s.of)([])))}getByCode(d){const o=this.getUrl(`carpark/api/drivers/${d}`);return this.get(o).pipe((0,y.K)(()=>(0,s.of)({})))}createModelApplication(d){const o=this.getUrl(`carpark/api/drivers/${d.driverCode}/seasons/applications`);return this.post(o,d)}getSimpleList(){return this.get(this.getUrl("carpark/api/drivers/simple-drivers-list"))}getEnforcementList(){return this.get(this.getUrl("carpark/api/drivers/enforcement"))}createAccount(d,o){const p=this.getUrl("api/register");return this.post(p,{hpNumber:d,password:o})}activeAccount(d,o){const p=this.getUrl("api/account/SMS_activate");return this.post(p,{hpNumber:d,key:o})}getBatchUser(d){return this.get(this.getUrl(`carpark/api/batch/user/info?status=${d}&size=99999`))}putBatchUser(d,o,p){const h=this.getUrl("carpark/api/batch/user/info");return this.put(h,{id:d,status:o,remarks:p})}}return x.\u0275fac=function(d){return new(d||x)(_.LFG(z.eN),_.LFG(b.yh),_.LFG(g.k))},x.\u0275prov=_.Yz7({token:x,factory:x.\u0275fac}),x})()},51766:(N,O,r)=>{"use strict";r.d(O,{C:()=>f});var v=r(3927),u=r(26245),s=r(591),y=r(27221),M=r(66708),Z=r(94650),_=r(60097),z=r(28555),b=r(80529),g=r(91599);let f=(()=>{class x extends v.su{constructor(d,o,p,h){super(p,o),this.carparkService=d,this.store=o,this.http=p,this.$seasonData=new s.X({}),this.modelName="Carpark",this.handleError=h.createHandleError(`${this.modelName}Service`)}ngOnInit(){}handleDynamicUrl(){const d=JSON.parse(localStorage.getItem("user")).login;this.baseUrl=this.carparkService.isMotorist()&&M.Z.isNotNull(d)?`carpark/api/drivers/${d}/seasons`:"carpark/api/season-parkings"}filterModel(d,o){return this.handleDynamicUrl(),super.filterModel(d,o).map(p=>p.data?p:{data:[],pagination:(0,u.f$)()})}filterModelOfCarpark(d,o,p){const h=this.getUrl((0,u.U8)(`carpark/api/season-parking/${d}/getList`,{...o,...(0,u.jq)(p)}));return this.get(h).pipe((0,y.K)(this.handleError(`${this.modelName}Filter`,{}))).map(C=>Array.isArray(C)?(0,v.eC)(C.slice(0,p.rowsPerPage+1)):(0,v.O7)(C))}filterModelOfVehicle(d,o,p){const h=this.getUrl((0,u.U8)(`carpark/api/vehicles/${d}/seasons`,{...o,...(0,u.jq)(p)}));return this.get(h).pipe((0,y.K)(this.handleError(`${this.modelName}Filter`,{}))).map(C=>Array.isArray(C)?(0,v.eC)(C.slice(0,p.rowsPerPage+1)):(0,v.O7)(C))}getIdentity(d){const o=this.getUrl(`carpark/api/seasons/applications/${d}`);return this.get(o)}downloadSessonPdf(d){const o=this.getUrl(`carpark/api/printBilling/seasoncode/pdf/${d}`);return this.get(o,{responseType:"blob"}).pipe((0,y.K)(this.handleError(`${this.modelName}Get`,{})))}getGroupSeason(d){const o=this.getUrl(`carpark/api/season-group/query/${d}`);return this.get(o)}applyHandle(d){return this.post(this.getUrl("carpark/api/season-group"),d)}clearHandle(d){return this.delete(this.getUrl(`carpark/api/season-group/clear/${d}`))}}return x.\u0275fac=function(d){return new(d||x)(Z.LFG(_.x),Z.LFG(z.yh),Z.LFG(b.eN),Z.LFG(g.k))},x.\u0275prov=Z.Yz7({token:x,factory:x.\u0275fac}),x})()},4666:(N,O,r)=>{"use strict";r.d(O,{p:()=>x}),r(38014);var u=r(3927),s=r(26245),y=r(27221),M=r(66708),Z=r(94650),_=r(60097),z=r(93764),b=r(80529),g=r(28555),f=r(91599);let x=(()=>{class m extends u.su{constructor(o,p,h,C,A){super(h,C),this.carparkService=o,this.condoService=p,this.http=h,this.store=C,this.modelName="Transaction",this.handleError=A.createHandleError(`${this.modelName}Service`)}ngOnInit(){}handleDynamicUrl(){const o=JSON.parse(localStorage.getItem("user")).login;this.baseUrl=this.carparkService.isMotorist()&&M.Z.isNotNull(o)?`carpark/api/drivers/${o}/transactions`:this.condoService.isCondoOwner()?"carpark/api/working-sessions/transactions":"carpark/api/car-parks/transactions"}filterModel(o,p){return this.handleDynamicUrl(),super.filterModel(o,p).map(h=>h.data?h:{data:[],pagination:(0,s.f$)()})}fetchAbnormalTransactions(o,p){const h=(0,s.U8)("carpark/api/car-parks/transactions/abnormal",{...o,...(0,s.jq)(p)});return this.get(this.getUrl(h)).map(u.O7)}fetchAbnormalTransaction(o){return this.get(this.getUrl(`carpark/api/parking-transactions/${o}`))}verifyAbnormalTransaction(o){return this.post(this.getUrl(`carpark/api/parking-transactions/${o.id}/update`),o)}filterByVehicle(o,p){const h=this.getUrl((0,s.U8)(`carpark/api/parking-transactions/plateNo/${o}`,{...(0,s.jq)(p)}));return this.get(h).pipe((0,y.K)(this.handleError(`${this.modelName}Filter`,{}))).map(C=>Array.isArray(C)?(0,u.eC)(C):(0,u.O7)(C))}createModel(o){const p=this.getUrl("carpark/api/parking-transactions-entry");return this.post(p,o)}closeTransactions(o){const p=this.getUrl(`carpark/api/close/working-sessions/${o}`);return this.put(p,null)}getFile(o){const p=this.getUrl(`carpark/api/printTransactionReceipt/pdf/parking_transaction/${o}`);return this.get(p,{responseType:"blob"})}findIndentByPage(o,p){const h=this.getUrl(`scp-app-ordermanagement/chargepile/findIndentByPage/${p.rowsPerPage}/${p.page}`);return this.post(h,o)}exportExcellist(o,p){const h=this.getUrl("scp-app-ordermanagement/chargepile/exportFindIndent");return this.post(h,o,{responseType:"blob"})}exportExcelDetail(o,p){const h=this.getUrl("scp-app-ordermanagement/chargepile/export/detail");return this.post(h,o,{responseType:"blob"})}exportCondoOwnerExcel(o){const p=(0,s.U8)("carpark/api/working-sessions/exportParkingTransaction",{...o});return this.get(this.getUrl(p),{responseType:"blob"})}}return m.\u0275fac=function(o){return new(o||m)(Z.LFG(_.x),Z.LFG(z.p),Z.LFG(b.eN),Z.LFG(g.yh),Z.LFG(f.k))},m.\u0275prov=Z.Yz7({token:m,factory:m.\u0275fac}),m})()},71942:(N,O,r)=>{"use strict";r.d(O,{f:()=>x});var v=r(38014),u=r(3927),s=r(26245),y=r(21086),M=r(27221),Z=r(66708),_=r(94650),z=r(60097),b=r(80529),g=r(28555),f=r(91599);let x=(()=>{class m extends u.su{constructor(o,p,h,C){super(p,h),this.carparkService=o,this.http=p,this.store=h,this.modelName="Vehicle",this.handleError=C.createHandleError(`${this.modelName}Service`),this.handleDynamicUrl()}ngOnInit(){}handleDynamicUrl(){const o=JSON.parse(localStorage.getItem("user")).login;this.baseUrl=this.carparkService.isMotorist()&&Z.Z.isNotNull(o)?`carpark/api/drivers/${o}/vehicles`:"carpark/api/vehicle/get-vehicles"}getTelList(o,p){console.log(o);const h=this.getUrl((0,s.U8)("carpark/api/vehicle/vehicles",{...o,...(0,s.jq)(p)}));return this.get(h)}filterModel(o,p){const h=this.getUrl((0,s.U8)(this.baseUrl,{...o,...(0,s.jq)(p)}));return this.get(h).pipe((0,M.K)(this.handleError(`${this.modelName}Filter`,{}))).map(C=>Array.isArray(C)?(0,u.eC)(C):(0,u.O7)(C))}updateVehicle(o){const p=this.getUrl(`carpark/api/drivers/${o.driverCode}/vehicles/${o.vehicleId}`);return this.patch(p,o.vehicle).pipe((0,M.K)(this.handleError(`${this.modelName}Update`,{})))}getModel(o){const p=this.getUrl(`carpark/api/vehicle/${o}`);return this.get(p).pipe((0,M.K)(this.handleError(`${this.modelName}Get`,{})))}deleteModel(o,p){const h=this.getUrl(`carpark/api/drivers/${o}/vehicles/${p}`);return this.delete(h).pipe((0,M.K)(this.handleError(`${this.modelName}Delete`)))}deleteAdminModel(o){const p=this.getUrl(`carpark/api/admin/vehicle/${o}`);return this.delete(p).pipe((0,M.K)(this.handleError(`${this.modelName}Delete`)))}createVehicle(o,p){const h=this.getUrl(`carpark/api/drivers/${o}/vehicles`);return this.post(h,p)}putUpdateVehicle(o,p){const h=this.getUrl(`carpark/api/drivers/${o}/vehicles/${p.id}`);return this.put(h,p)}getDriverCode(o){const p=this.getUrl(`carpark/api/drivers/${o}/driverCode`);return this.get(p)}createModel(o,p){const h=this.getUrl(`carpark/api/drivers/${o}/vehicles`);return this.post(h,p).pipe((0,M.K)(this.handleError(`${this.modelName}Create`,{})))}createVehicleAdmin(o){const p=this.getUrl(`carpark/api/admin/vehicles/${o.mobile}`);return this.post(p,o).pipe((0,M.K)(this.handleError(`${this.modelName}Create`,{})))}updateModel(o){const p=this.getUrl("carpark/api/admin/vehicle-changes");return this.post(p,o).pipe((0,M.K)(this.handleError(`${this.modelName}Update`,{})))}getSimpleList(){const o=this.getUrl("carpark/api/vehicle/simple-vehicles-list");return this.get(o).pipe((0,M.K)(this.handleError(`${this.modelName}SimpleList`,{})))}filterModelByDriver(o){const p=this.getUrl(`carpark/api/drivers/${o}/vehicles`);return this.get(p).pipe((0,M.K)(()=>(0,y.of)([])))}isOperator(){const o=JSON.parse(localStorage.getItem("user-roles"));return!(!Z.Z.isNotNull(o)||!o.includes(v.i44.Operator))}getUserVehicle(o,p){this.baseUrl=`carpark/api/drivers/${o}/vehicles`;const h=this.getUrl((0,s.U8)(this.baseUrl,{...(0,s.jq)(p)}));return this.get(h).pipe((0,M.K)(this.handleError(`${this.modelName}Filter`,{}))).map(C=>Array.isArray(C)?(0,u.eC)(C):(0,u.O7)(C))}}return m.\u0275fac=function(o){return new(o||m)(_.LFG(z.x),_.LFG(b.eN),_.LFG(g.yh),_.LFG(f.k))},m.\u0275prov=_.Yz7({token:m,factory:m.\u0275fac}),m})()},52746:(N,O,r)=>{"use strict";r.d(O,{t:()=>y});var v=r(72986),u=r(591),s=r(94650);let y=(()=>{class M{constructor(){this.loading=!1,this.pagination={totalCount:0,rowsPerPage:20,page:1,sortBy:null,descending:!0,totalPages:1},this.listData=[],this.hadGetData$=new u.X(!1)}get hadGetData(){return this.hadGetData$.getValue()}get filterParams(){return this._filterParams}set filterParams(_){this._filterParams=_}reloadDataService(_,z="filterModel"){this.loading=!0,this.hadGetData$.next(!1),_[z](this.filterParams,this.pagination).pipe((0,v.q)(1)).subscribe(b=>{if(b.pagination.page>b.pagination.totalPages)return this.pagination={...this.pagination,page:b.pagination.totalPages},this.reloadDataService(_);this.loading=!1,this.pagination={...this.pagination,totalCount:b.pagination.totalCount||b.pagination.totalElements},this.listData=b.data,this.hadGetData$.next(!0)},()=>{this.loading=!1,this.listData=[],this.pagination={...this.pagination,totalCount:0}})}onQueryParamsChange(_){const{pageSize:z,pageIndex:b}=_;this.pagination={...this.pagination,rowsPerPage:z,page:b},this.reloadData()}reloadData(){}ngOnInit(){}}return M.\u0275fac=function(_){return new(_||M)},M.\u0275cmp=s.Xpm({type:M,selectors:[["ng-component"]],decls:0,vars:0,template:function(_,z){},encapsulation:2}),M})()},76916:(N,O,r)=>{"use strict";r.d(O,{G:()=>x});var v=r(34793),u=r(92198),s=r(94650),y=r(89383),M=r(60097),Z=r(36895);function _(m,d){if(1&m&&(s.TgZ(0,"a",14)(1,"span",15),s._uU(2),s.ALo(3,"translate"),s.qZA()()),2&m){const o=s.oxw().$implicit;s.xp6(2),s.hij(" ",s.lcZ(3,1,o.label)," ")}}function z(m,d){if(1&m&&(s.TgZ(0,"a",16)(1,"span",15),s._uU(2),s.ALo(3,"translate"),s.qZA()()),2&m){const o=s.oxw(),p=o.$implicit,h=o.last,C=s.oxw(2);s.Q6J("routerLink",p.url)("queryParams",h&&C.route.snapshot.queryParams),s.xp6(2),s.hij(" ",s.lcZ(3,3,p.label)," ")}}function b(m,d){if(1&m&&(s.ynx(0),s.TgZ(1,"li",10)(2,"span"),s._uU(3," > "),s.qZA()(),s.TgZ(4,"li",11),s.YNc(5,_,4,3,"a",12),s.YNc(6,z,4,5,"a",13),s.qZA(),s.BQk()),2&m){const o=d.first;s.xp6(5),s.Q6J("ngIf",o),s.xp6(1),s.Q6J("ngIf",!o)}}function g(m,d){if(1&m&&(s.TgZ(0,"div",1)(1,"div",2)(2,"div",3),s._UZ(3,"h3",4),s.TgZ(4,"ul",5)(5,"li",6)(6,"a",7),s._UZ(7,"i",8),s.qZA()(),s.YNc(8,b,7,2,"ng-container",9),s.qZA()(),s.TgZ(9,"div"),s.Hsn(10),s.qZA()()()),2&m){const o=s.oxw();s.xp6(3),s.Q6J("innerHTML",o.title,s.oJD),s.xp6(5),s.Q6J("ngForOf",o.breads)}}const f=["*"];let x=(()=>{class m{constructor(o,p,h,C){this.router=o,this.route=p,this.translate=h,this._carparkService=C,this.breads=[],this.loginUser=""}ngOnInit(){let o=JSON.parse(localStorage.getItem("user-roles"))[0];this.loginUser=o,console.log(this.loginUser,"\u4fe1\u606f"),this.breads=this.buildBreadCrumb(this.route.root),this.translate.get(this.breads[0].label).subscribe(h=>{this.label=h}),this.router.events.pipe((0,u.h)(h=>h instanceof v.m2)).subscribe(()=>{this.breads=this.buildBreadCrumb(this.route.root)})}buildBreadCrumb(o,p=[""],h=[]){const C=o.snapshot.url[0]&&o.snapshot.url[0].path,A=[...p,C],D={...this.extractBreadcrumb(o),url:A},w=C&&D.label?[...h,D]:h;return this.title=D.title||this.title||"",this.isMotorist&&"My Vehicle(s)"===D.label&&(this.title="My Vehicle(s)"),o.firstChild?C?this.buildBreadCrumb(o.firstChild,A,w):this.buildBreadCrumb(o.firstChild,p,h):(this.translate.get(this.title).subscribe(S=>{this.title=S}),w)}get isMotorist(){return this._carparkService.isMotorist()}extractBreadcrumb(o){return o.snapshot.data.breadcrumb instanceof Function?o.snapshot.data.breadcrumb(o):o.snapshot.data.breadcrumb}}return m.\u0275fac=function(o){return new(o||m)(s.Y36(v.F0),s.Y36(v.gz),s.Y36(y.sK),s.Y36(M.x))},m.\u0275cmp=s.Xpm({type:m,selectors:[["app-title-bar"]],ngContentSelectors:f,decls:1,vars:1,consts:[["class","m-subheader",4,"ngIf"],[1,"m-subheader"],[1,"d-flex","align-items-center"],[1,"mr-auto"],[1,"m-subheader__title","m-subheader__title--separator","text-main",3,"innerHTML"],[1,"m-subheader__breadcrumbs","m-nav","m-nav--inline"],[1,"m-nav__item","m-nav__item--home"],["routerLink","/",1,"m-nav__link","m-nav__link--icon"],[1,"m-nav__link-icon","la","la-home"],[4,"ngFor","ngForOf"],[1,"m-nav__separator"],[1,"m-nav__item"],["class","m-nav__link",4,"ngIf"],["class","m-nav__link",3,"routerLink","queryParams",4,"ngIf"],[1,"m-nav__link"],[1,"m-nav__link-text"],[1,"m-nav__link",3,"routerLink","queryParams"]],template:function(o,p){1&o&&(s.F$t(),s.YNc(0,g,11,2,"div",0)),2&o&&s.Q6J("ngIf","ROLE_TPO_PARTNER"!==p.loginUser)},dependencies:[Z.sg,Z.O5,v.yS,y.X$],encapsulation:2}),m})()},13309:(N,O,r)=>{"use strict";r.d(O,{p:()=>A});var v=r(36895),u=r(24006),s=r(34793),y=r(372),M=r(60097),Z=r(4666),_=r(30329),z=r(21532),b=r(88796),g=r(59245),f=r(89518),x=r(36511),m=r(80529),d=r(89383),o=r(19832),p=r(29252),h=r(94650);function C(D){return new o.w(D,"../assets/i18n/",".json")}let A=(()=>{class D{}return D.\u0275fac=function(S){return new(S||D)},D.\u0275mod=h.oAB({type:D}),D.\u0275inj=h.cJS({providers:[Z.p,M.x,x.I],imports:[v.ez,u.u5,s.Bz,z.x,_.D,y.kn,g.mr,b.A0,f.H3,p.E7,d.aw.forChild({loader:{provide:d.Zw,useFactory:C,deps:[m.eN]}})]}),D})()},43329:(N,O,r)=>{"use strict";r.r(O),r.d(O,{VehicleManagementModule:()=>$t,createTranslateLoader:()=>de});var v=r(36895),u=r(24006),s=r(34793),y=r(372),M=r(15128),Z=r(87026),_=r(36511),z=r(64050),b=r(91599),g=r(42684),f=r(51766),x=r(4666),m=r(71942),d=r(457),o=r(30329),p=r(74564),h=r(59501),C=r(13309),A=r(38014),D=r(79118),w=r(15035),S=r(72986),Y=r(52746),e=r(94650),E=r(89383),V=r(73325),J=r(29562),F=r(47044),L=r(38231),Q=r(834),U=r(40269);function me(i,c){if(1&i&&(e._UZ(0,"nz-option",12),e.ALo(1,"titlecase")),2&i){const t=c.$implicit;e.Q6J("nzValue",t.value)("nzLabel",e.lcZ(1,2,t.value))}}function he(i,c){if(1&i&&(e._UZ(0,"nz-option",12),e.ALo(1,"titlecase")),2&i){const t=c.$implicit;e.Q6J("nzValue",t.value)("nzLabel",e.lcZ(1,2,t.value))}}function ue(i,c){if(1&i&&e._uU(0),2&i){const t=c.range;e.lnq(" ",t[0],"-",t[1]," of ",c.$implicit," items\n")}}function _e(i,c){if(1&i&&(e.TgZ(0,"th",13),e._uU(1),e.qZA()),2&i){const t=c.$implicit;e.Q6J("nzWidth",c.first?"60px":""),e.xp6(1),e.Oqu(t.text)}}const ge=function(i){return["../edit",i]};function ve(i,c){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr")(2,"td",14),e.NdJ("nzExpandChange",function(a){const T=e.CHM(t).$implicit,P=e.oxw();return e.KtG(P.onExpandChange(T.id,a))}),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"span"),e._UZ(7,"img",15),e.qZA(),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.ALo(14,"date"),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.TgZ(23,"td")(24,"button",16),e._UZ(25,"i",17),e.qZA(),e.TgZ(26,"nz-dropdown-menu",null,18)(28,"ul",19)(29,"li",20),e._UZ(30,"i",21),e.TgZ(31,"span"),e._uU(32,"Edit Season Parking"),e.qZA()(),e.TgZ(33,"li",22),e.NdJ("click",function(){const l=e.CHM(t).$implicit,T=e.oxw();return e.KtG(T.approve(l.id))}),e._UZ(34,"i",23),e.TgZ(35,"span"),e._uU(36,"Renew"),e.qZA()()()()()(),e.TgZ(37,"tr",24)(38,"nz-table",25)(39,"thead")(40,"tr")(41,"th"),e._uU(42,"Identity Type"),e.qZA(),e.TgZ(43,"th"),e._uU(44,"Identity No."),e.qZA(),e.TgZ(45,"th"),e._uU(46,"Address"),e.qZA()()(),e.TgZ(47,"tbody")(48,"tr")(49,"td"),e._uU(50),e.qZA(),e.TgZ(51,"td"),e._uU(52),e.qZA(),e.TgZ(53,"td"),e._uU(54),e.qZA()()()()(),e.BQk()}if(2&i){const t=c.$implicit,n=c.index,a=e.MAs(27),l=e.oxw();e.xp6(1),e.ekj("ant-table-row-odd",n%2==1),e.xp6(1),e.Q6J("nzExpand",l.expandSet.has(t.id)),e.xp6(2),e.Oqu(t.code),e.xp6(3),e.Q6J("src",l.vehicleIcon(null==t.vehicle?null:t.vehicle.vehicleType),e.LSH),e.xp6(1),e.hij(" ",null==t.vehicle?null:t.vehicle.vehicleNumber," "),e.xp6(2),e.Oqu(e.xi3(11,21,null==t.startDate?null:t.startDate.split("[")[0],"d LLL yyyy")),e.xp6(3),e.Oqu(e.xi3(14,24,null==t.endDate?null:t.endDate.split("[")[0],"d LLL yyyy")),e.xp6(3),e.AsE("",null==t.driver?null:t.driver.firstName," ",null==t.driver?null:t.driver.lastName,""),e.xp6(2),e.Oqu(l.getDriverNumber(t.driver)),e.xp6(2),e.Oqu(null==t.driver?null:t.driver.email),e.xp6(2),e.Oqu(null==t.carpark?null:t.carpark.code),e.xp6(2),e.Q6J("nzDropdownMenu",a)("nzPlacement","topCenter"),e.xp6(5),e.Q6J("routerLink",e.VKq(27,ge,t.id)),e.xp6(8),e.Q6J("nzExpand",l.expandSet.has(t.id)),e.xp6(1),e.Q6J("nzShowPagination",!1),e.xp6(12),e.Oqu(null==t.vehicle?null:t.vehicle.vehicleType),e.xp6(2),e.Oqu(null==t.vehicle?null:t.vehicle.vehicleNumber),e.xp6(2),e.Oqu(null==t.driver?null:t.driver.email)}}let fe=(()=>{class i extends Y.t{constructor(t,n,a,l,T,P){super(),this.router=t,this.route=n,this.vehicleService=a,this.seasonParkingService=l,this.codeTablesService=T,this.translate=P,this.tableHeaders=[{text:"",width:"30px",align:D.iW.Center},{text:"ID",column:"id",width:"80px"},{text:"Vehicle",column:"vehicle",width:"120px"},{text:"Start Date",column:"startDate",width:"120px"},{text:"End Date",column:"endDate",width:"120px"},{text:"User Name",column:"userName",width:"100px"},{text:"Mobile",column:"mobile",width:"120px"},{text:"Email",column:"email",width:"80px"},{text:"Car Park",column:"carPark",width:"80px"},{text:"Actions",width:"80px"}],this.transactionStatus="",this.transactionType="",this.status="",this.type="",this.timeRange=[],this.bsConfig={containerClass:"theme-light",showWeekNumbers:!1},this.vehicleIcon=A.mts,this.expandSet=new Set}get filterParams(){return{status:this.status,type:this.type,from:this.timeRange[0]&&(0,w.W8)(this.timeRange[0]),to:this.timeRange[1]&&(0,w.W8)(this.timeRange[1])}}ngOnInit(){this.statuses$=this.codeTablesService.filterModelByType(A.BcL.ParkingStatus).pipe((0,S.q)(1)),this.types$=this.codeTablesService.filterModelByType(A.BcL.ParkingType).pipe((0,S.q)(1)),this.reloadData();const t=this.tableHeaders.map(n=>n.text);this.translate.get(t).subscribe(n=>{this.tableHeaders.forEach(a=>{for(let l in n)n.hasOwnProperty(l)&&a.text===l&&(a.text=n[l])})})}displayName(t){return(0,A.ssW)(t)}getDriverNumber(t){return t?`${t.mobile.countryCode||""} ${t.mobile.number}`.trim():""}reloadData(){this.loading=!0,this.seasonParkingService.filterModelOfVehicle(this.route.parent.parent.snapshot.data.item.vehicleNumber,this.filterParams,this.pagination).subscribe(t=>{this.loading=!1,this.pagination={...this.pagination,totalCount:t.pagination.totalCount},this.listData=t.data},()=>{this.loading=!1,this.listData=[],this.pagination={...this.pagination,totalCount:0}})}pageChanged(t){this.pagination=t,this.reloadData()}filterTransaction(){}onExpandChange(t,n){n?this.expandSet.add(t):this.expandSet.delete(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.F0),e.Y36(s.gz),e.Y36(m.f),e.Y36(f.C),e.Y36(_.I),e.Y36(E.sK))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vehicle-detail-season"]],features:[e.qOj],decls:32,vars:30,consts:[[1,"form-group","m-form__group","m-portlet__filters"],[1,"filter-wrap"],[1,"filter-item"],[1,"filter-label"],["nzPlaceHolder","Please Select",2,"width","160px",3,"ngModel","nzDropdownMatchSelectWidth","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowSizeChanger","nzShowTotal","nzQueryParams"],["basicTable",""],[3,"nzWidth",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],[3,"nzWidth"],[3,"nzExpand","nzExpandChange"],["alt","",3,"src"],["nz-dropdown","","nzTrigger","click",1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--outline-2x","m-btn--pill","no-border",3,"nzDropdownMenu","nzPlacement"],[1,"la","la-ellipsis-h"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"routerLink"],[1,"la","la-edit",2,"margin-right","4px"],["nz-menu-item","",3,"click"],[1,"la","la-refresh",2,"margin-right","4px"],[3,"nzExpand"],["nzSize","small","nzTemplateMode","",3,"nzShowPagination"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"nz-select",4),e.NdJ("ngModelChange",function(l){return n.status=l})("ngModelChange",function(){return n.reloadData()}),e.YNc(7,me,2,4,"nz-option",5),e.ALo(8,"async"),e.qZA()()(),e.TgZ(9,"div",1)(10,"div",2)(11,"span",3),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"nz-select",4),e.NdJ("ngModelChange",function(l){return n.type=l})("ngModelChange",function(){return n.reloadData()}),e.YNc(15,he,2,4,"nz-option",5),e.ALo(16,"async"),e.qZA()()(),e.TgZ(17,"div",1)(18,"div",2)(19,"span",3),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"nz-range-picker",6),e.NdJ("ngModelChange",function(l){return n.timeRange=l})("ngModelChange",function(){return n.reloadData()}),e.qZA()()()(),e.YNc(23,ue,1,3,"ng-template",null,7,e.W1O),e.TgZ(25,"nz-table",8,9),e.NdJ("nzQueryParams",function(l){return n.onQueryParamsChange(l)}),e.TgZ(27,"thead")(28,"tr"),e.YNc(29,_e,2,2,"th",10),e.qZA()(),e.TgZ(30,"tbody"),e.YNc(31,ve,55,29,"ng-container",11),e.qZA()()),2&t){const a=e.MAs(24),l=e.MAs(26);e.xp6(4),e.hij("",e.lcZ(5,20,"Status"),":"),e.xp6(2),e.Q6J("ngModel",n.status)("nzDropdownMatchSelectWidth",!1),e.xp6(1),e.Q6J("ngForOf",e.lcZ(8,22,n.statuses$)),e.xp6(5),e.hij("",e.lcZ(13,24,"Type"),":"),e.xp6(2),e.Q6J("ngModel",n.type)("nzDropdownMatchSelectWidth",!1),e.xp6(1),e.Q6J("ngForOf",e.lcZ(16,26,n.types$)),e.xp6(5),e.hij("",e.lcZ(21,28,"Time Range"),":"),e.xp6(2),e.Q6J("ngModel",n.timeRange),e.xp6(3),e.Q6J("nzData",n.listData)("nzFrontPagination",!1)("nzLoading",n.loading)("nzTotal",n.pagination.totalCount)("nzPageSize",n.pagination.rowsPerPage)("nzPageIndex",n.pagination.page)("nzShowSizeChanger",!0)("nzShowTotal",a),e.xp6(4),e.Q6J("ngForOf",n.tableHeaders),e.xp6(2),e.Q6J("ngForOf",l.data)}},dependencies:[v.sg,u.JJ,u.On,s.rH,V.wO,V.r9,J.cm,J.RR,F.w,L.Ip,L.Vq,Q.uw,Q.wS,U.N8,U.Uo,U._C,U.h7,U.Om,U.p0,U.$Z,U.d3,U.Vk,v.Ov,v.rS,v.uU,E.X$],encapsulation:2}),i})();var Te=r(26245),Ce=r(17489),Me=r(94327),xe=r(15439),I=r(60097),Ze=r(93764),H=r(77364);function Ae(i,c){if(1&i&&e._uU(0),2&i){const t=c.range;e.lnq(" ",t[0],"-",t[1]," of ",c.$implicit," items\n")}}function ye(i,c){if(1&i&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&i){const t=c.$implicit;e.xp6(1),e.Oqu(t.text)}}const be=function(i){return["/vehicle-management",i]};function ze(i,c){if(1&i&&(e.TgZ(0,"a",7)(1,"span"),e._UZ(2,"img",8),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA()()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.Q6J("routerLink",e.VKq(3,be,t.vehicle.id)),e.xp6(2),e.Q6J("src",n.vehicleTypeLogo(t),e.LSH),e.xp6(2),e.Oqu(null==t.vehicle?null:t.vehicle.vehicleNumber)}}function De(i,c){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.iuNumber)}}const Ue=function(i){return["/carparks",i]};function Oe(i,c){if(1&i&&(e.TgZ(0,"a",7),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.Q6J("routerLink",e.VKq(2,Ue,t.carpark.id)),e.xp6(1),e.hij(" ",(null==t.carpark?null:t.carpark.name)||""," ")}}function Ee(i,c){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,(null==t.chargeSummary||null==t.chargeSummary.total?null:t.chargeSummary.total.amount)/100))}}function Ne(i,c){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"paymentMethodPipe"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.paymentMethod))}}function Pe(i,c){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"paymentStatusPipe"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.paymentStatus))}}function Se(i,c){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.refId)}}function Le(i,c){if(1&i&&(e.TgZ(0,"td"),e._UZ(1,"span"),e._uU(2," \xa0 "),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"titlecase"),e.qZA()()),2&i){const t=e.oxw().$implicit,n=e.oxw();let a,l;e.xp6(1),e.Gre("m-badge m-badge--",(null==(a=n.getTransactionType(t.type))?null:a.color)||"info"," m-badge--dot"),e.xp6(2),e.Gre("m--font-bold m--font-",(null==(l=n.getTransactionType(t.type))?null:l.color)||"info",""),e.xp6(1),e.hij(" ",e.lcZ(5,7,n.getTransactionTypeString(t.type))," ")}}function we(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"li",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,l=e.oxw();return e.KtG(l.download(a))}),e._UZ(1,"i",16),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()}2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"Download Receipt")))}function Ie(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"td")(1,"button",9),e._UZ(2,"i",10),e.qZA(),e.TgZ(3,"nz-dropdown-menu",null,11)(5,"ul",12)(6,"li",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw();return e.KtG(l.gotoUpdate(a.id))}),e._UZ(7,"i",14),e.TgZ(8,"span"),e._uU(9),e.ALo(10,"translate"),e.qZA()(),e.YNc(11,we,5,3,"li",15),e.qZA()()()}if(2&i){const t=e.MAs(4),n=e.oxw(2);e.xp6(1),e.Q6J("nzDropdownMenu",t)("nzPlacement","topCenter"),e.xp6(8),e.Oqu(e.lcZ(10,4,"Edit Transaction")),e.xp6(2),e.Q6J("ngIf",n.downloadRole())}}function Ve(i,c){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e.YNc(2,ze,5,5,"a",5),e.qZA(),e.YNc(3,De,2,1,"td",6),e.TgZ(4,"td"),e.YNc(5,Oe,2,4,"a",5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"date"),e._UZ(9,"br"),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.ALo(14,"date"),e._UZ(15,"br"),e._uU(16),e.ALo(17,"date"),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.qZA(),e.YNc(20,Ee,3,3,"td",6),e.YNc(21,Ne,3,3,"td",6),e.YNc(22,Pe,3,3,"td",6),e.YNc(23,Se,2,1,"td",6),e.YNc(24,Le,6,9,"td",6),e.YNc(25,Ie,12,6,"td",6),e.qZA()),2&i){const t=c.$implicit,n=c.index,a=e.oxw();e.ekj("ant-table-row-odd",n%2==1),e.xp6(2),e.Q6J("ngIf",t.vehicle),e.xp6(1),e.Q6J("ngIf",a.setTableContent("iuNumber").show),e.xp6(2),e.Q6J("ngIf",t.carpark),e.xp6(2),e.hij(" ",e.xi3(8,16,t.startTime,"d LLL yyyy")," "),e.xp6(3),e.hij(" ",e.xi3(11,19,t.startTime,"h:mm:ss a")," "),e.xp6(3),e.hij(" ",e.xi3(14,22,t.endTime,"d LLL yyyy")," "),e.xp6(3),e.hij(" ",e.xi3(17,25,t.endTime,"h:mm:ss a")," "),e.xp6(3),e.Oqu(t.duration||0),e.xp6(1),e.Q6J("ngIf",a.setTableContent("paymentAmount").show),e.xp6(1),e.Q6J("ngIf",a.setTableContent("paymentmethod").show),e.xp6(1),e.Q6J("ngIf",a.setTableContent("paymentstatus").show),e.xp6(1),e.Q6J("ngIf",a.setTableContent("Referenceid").show),e.xp6(1),e.Q6J("ngIf",a.setTableContent("type").show),e.xp6(1),e.Q6J("ngIf",a.notOwnerAndOperator)}}const q=[{text:"Vehicle No.",column:"vehiclePlateNo",width:"120px"},{text:"IU No.",column:"iuNumber",width:"120px"},{text:"Car Park",column:"carParkId",width:"160px"},{text:"Entry Time",column:"entryDateTime",width:"120px"},{text:"Exit Time",column:"exitDateTime",width:"120px"},{text:"Duration(min)",column:"duration",width:"80px"},{text:"Amount",column:"paymentAmount",width:"100px"},{text:"Type",column:"type",width:"80px"}],Je=[...q,{text:"Action",column:"action",width:"60px"}];let Fe=(()=>{class i{constructor(t,n,a,l,T,P){this.router=t,this.translate=n,this.carparkService=a,this.vehicleService=l,this.transactionService=T,this.condoService=P,this.loading=!1,this.pageChange=new e.vpe,this.pagination=(0,Te.f$)(),this.data=[],this.tableHeaders=Je,this.setTableHeaders()}vehicleTypeLogo(t){return A.php.filter(n=>n.value===t.vehicle.vehicleType).map(n=>n.icon)[0]}getStatusOption(t,n){const a=A.EKt.filter(l=>l.value===t.status).map(l=>l[n]);return a.length>0?a[0]:(0,Ce.capitalize)(t.status)}getTransactionType(t){return A.L0I.find(n=>n.value===t)}getTransactionTypeString(t){return"openParking"===t||"Open Parking"===t?"Hourly Parking":t}pageChanged(t){this.pagination=t,this.pageChange.emit(this.pagination)}onQueryParamsChange(t){const{pageSize:n,pageIndex:a}=t;this.pagination={...this.pagination,rowsPerPage:n,page:a},this.pageChange.emit(this.pagination)}ngOnInit(){const t=this.tableHeaders.map(n=>n.text);this.translate.get(t).subscribe(n=>{this.tableHeaders.forEach(a=>{for(let l in n)n.hasOwnProperty(l)&&a.text===l&&(a.text=n[l])})}),this.isExtended&&(this.tableHeaders=[{text:"",width:"30px"},...q])}get isOwner(){return this.carparkService.isOwner()}get isOperator(){return this.vehicleService.isOperator()}get isAdmin(){return this.carparkService.isAdmin()}get isCondoOwner(){return this.condoService.isCondoOwner()}get notOwnerAndOperator(){return!(this.isOwner||this.isCondoOwner)}get isMotorist(){return this.carparkService.isMotorist()}downloadRole(){return this.isMotorist||this.isAdmin||this.isOperator}download(t){const n=`${t.vehicle.vehicleNumber}_${xe(t.endTime).format("YYYYMMDD_HH_mm")}`;this.transactionService.getFile(t.id).subscribe(a=>{(0,Me.saveAs)(a,`${n}`)})}setTableHeaders(){if(this.isMotorist)this.tableHeaders=this.tableHeaders.filter(t=>"iuNumber"!==t.column);else if(this.isCondoOwner)this.tableHeaders=this.tableHeaders.filter(t=>!["paymentAmount","type","action"].includes(t.column));else if(this.isAdmin){const t=[{text:"Payment Method",column:"paymentmethod",width:"80px"},{text:"Payment Status",column:"paymentstatus",width:"80px"},{text:"Reference ID",column:"Referenceid",width:"80px"}];0===this.tableHeaders.filter(n=>n.text===t[0].text).length&&this.tableHeaders.splice(7,0,...t)}else this.notOwnerAndOperator||(this.tableHeaders=q)}setTableContent(t){let n={width:null,show:!1};const a=this.tableHeaders.filter(l=>l.column===t);return a.length&&(n={width:a[0].width,show:!0}),n}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.F0),e.Y36(E.sK),e.Y36(I.x),e.Y36(m.f),e.Y36(x.p),e.Y36(Ze.p))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-transactions-datatable"]],inputs:{isExtended:"isExtended",loading:"loading",pagination:"pagination",data:"data"},outputs:{pageChange:"pageChange"},decls:9,vars:10,consts:[["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowSizeChanger","nzShowTotal","nzQueryParams"],["basicTable",""],[4,"ngFor","ngForOf"],[3,"ant-table-row-odd",4,"ngFor","ngForOf"],[3,"routerLink",4,"ngIf"],[4,"ngIf"],[3,"routerLink"],["alt","",3,"src"],["nz-dropdown","","nzTrigger","click",1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--outline-2x","m-btn--pill","no-border",3,"nzDropdownMenu","nzPlacement"],[1,"la","la-ellipsis-h"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"click"],[1,"la","la-edit",2,"margin-right","4px"],["nz-menu-item","",3,"click",4,"ngIf"],[1,"la","la-cloud-download",2,"margin-right","4px"]],template:function(t,n){if(1&t&&(e.YNc(0,Ae,1,3,"ng-template",null,0,e.W1O),e.TgZ(2,"nz-table",1,2),e.NdJ("nzQueryParams",function(l){return n.onQueryParamsChange(l)}),e.TgZ(4,"thead")(5,"tr"),e.YNc(6,ye,2,1,"th",3),e.qZA()(),e.TgZ(7,"tbody"),e.YNc(8,Ve,26,28,"tr",4),e.qZA()()),2&t){const a=e.MAs(1),l=e.MAs(3);e.xp6(2),e.Q6J("nzData",n.data)("nzFrontPagination",!1)("nzLoading",n.loading)("nzTotal",n.pagination.totalCount)("nzPageSize",n.pagination.rowsPerPage)("nzPageIndex",n.pagination.page)("nzShowSizeChanger",!0)("nzShowTotal",a),e.xp6(4),e.Q6J("ngForOf",n.tableHeaders),e.xp6(2),e.Q6J("ngForOf",l.data)}},dependencies:[v.sg,v.O5,s.yS,V.wO,V.r9,J.cm,J.RR,F.w,U.N8,U.Uo,U._C,U.Om,U.p0,U.$Z,v.rS,v.H9,v.uU,E.X$,H.Dm,H.rZ],encapsulation:2}),i})();function ke(i,c){if(1&i&&(e._UZ(0,"nz-option",8),e.ALo(1,"titlecase")),2&i){const t=c.$implicit;e.Q6J("nzValue",t.value)("nzLabel",e.lcZ(1,2,t.value))}}function Re(i,c){if(1&i&&(e._UZ(0,"nz-option",8),e.ALo(1,"titlecase")),2&i){const t=c.$implicit;e.Q6J("nzValue",t.value)("nzLabel",e.lcZ(1,2,t.value))}}let $e=(()=>{class i extends Y.t{constructor(t,n,a,l,T){super(),this.router=t,this.route=n,this.vehicleService=a,this.transactionService=l,this.codeTablesService=T,this.transactionStatus="",this.transactionType="",this.status="",this.type="",this.timeRange=[],this.bsConfig={containerClass:"theme-light",showWeekNumbers:!1}}get filterParams(){return{status:this.status,type:this.type,from:this.timeRange[0]&&(0,w.W8)(this.timeRange[0]),to:this.timeRange[1]&&(0,w.W8)(this.timeRange[1]),sort:"lastModifiedDate,desc",vehicle:this.item.vehicleNumber}}ngOnInit(){this.route.parent.data.subscribe(({item:t})=>this.item=t),this.statuses$=this.codeTablesService.filterModelByType(A.BcL.ParkingStatus).pipe((0,S.q)(1)),this.types$=this.codeTablesService.filterModelByType(A.BcL.ParkingType).pipe((0,S.q)(1)),this.reloadData()}displayName(t){return(0,A.ssW)(t)}reloadData(){this.reloadDataService(this.transactionService)}pageChanged(t){this.pagination=t,this.reloadData()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.F0),e.Y36(s.gz),e.Y36(m.f),e.Y36(x.p),e.Y36(_.I))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vehicle-detail-transactions"]],features:[e.qOj],decls:24,vars:23,consts:[[1,"form-group","m-form__group","m-portlet__filters"],[1,"filter-wrap"],[1,"filter-item"],[1,"filter-label"],["nzPlaceHolder","Please Select",2,"width","160px",3,"ngModel","nzDropdownMatchSelectWidth","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],[3,"data","loading","pagination","pageChange"],[3,"nzValue","nzLabel"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"nz-select",4),e.NdJ("ngModelChange",function(l){return n.status=l})("ngModelChange",function(){return n.reloadData()}),e.YNc(7,ke,2,4,"nz-option",5),e.ALo(8,"async"),e.qZA()()(),e.TgZ(9,"div",1)(10,"div",2)(11,"span",3),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"nz-select",4),e.NdJ("ngModelChange",function(l){return n.type=l})("ngModelChange",function(){return n.reloadData()}),e.YNc(15,Re,2,4,"nz-option",5),e.ALo(16,"async"),e.qZA()()(),e.TgZ(17,"div",1)(18,"div",2)(19,"span",3),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"nz-range-picker",6),e.NdJ("ngModelChange",function(l){return n.timeRange=l})("ngModelChange",function(){return n.reloadData()}),e.qZA()()()(),e.TgZ(23,"app-transactions-datatable",7),e.NdJ("pageChange",function(l){return n.pageChanged(l)}),e.qZA()),2&t&&(e.xp6(4),e.hij("",e.lcZ(5,13,"Status"),":"),e.xp6(2),e.Q6J("ngModel",n.status)("nzDropdownMatchSelectWidth",!1),e.xp6(1),e.Q6J("ngForOf",e.lcZ(8,15,n.statuses$)),e.xp6(5),e.hij("",e.lcZ(13,17,"Type"),":"),e.xp6(2),e.Q6J("ngModel",n.type)("nzDropdownMatchSelectWidth",!1),e.xp6(1),e.Q6J("ngForOf",e.lcZ(16,19,n.types$)),e.xp6(5),e.hij("",e.lcZ(21,21,"Date Range"),":"),e.xp6(2),e.Q6J("ngModel",n.timeRange),e.xp6(1),e.Q6J("data",n.listData)("loading",n.loading)("pagination",n.pagination))},dependencies:[v.sg,u.JJ,u.On,L.Ip,L.Vq,Q.uw,Q.wS,Fe,v.Ov,v.rS,E.X$],encapsulation:2}),i})();var k=r(76916),R=r(47423),K=r(66616),B=r(21811);const Qe=function(){return["/vehicle-management"]};let Ke=(()=>{class i{constructor(t,n,a){this.router=t,this.route=n,this.vehicleService=a,this.transactionStatus="",this.transactionType="",this.statusOptions=A.EKt,this.typeOptions=A.L0I,this.timeRange=[],this.bsConfig={containerClass:"theme-light",showWeekNumbers:!1}}ngOnInit(){this.route.data.subscribe(({item:t})=>{this.item=Object.assign(t,{})})}ngOnDestroy(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.F0),e.Y36(s.gz),e.Y36(m.f))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vehicle-detail"]],decls:55,vars:34,consts:[[1,"body-wrapper"],[1,"m-dropdown","m-dropdown--inline"],["nz-dropdown","","nzTrigger","click",1,"m-portlet__nav-link","btn","btn-lg","btn-outline-main","m-btn","m-btn--outline-2x","m-btn--air","m-btn--icon","m-btn--icon-only","m-btn--pill",3,"nzDropdownMenu","nzPlacement"],[1,"la","la-ellipsis-h"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"routerLink"],[1,"la","la-edit",2,"margin-right","4px"],[1,"la","la-ban",2,"margin-right","4px"],["nz-button","","nzType","primary","nzShape","round",1,"ml-2",3,"routerLink"],["nz-icon","","nzType","arrow-left","nzTheme","outline"],[1,"m-content"],[1,"row","m--margin-bottom-30"],[1,"col-3"],[1,"m-font-weight-500"],[1,"m-portlet","m-portlet--tabs"],[1,"m-portlet__head"],[1,"m-portlet__head-tools"],["role","tablist",1,"nav","nav-tabs","m-tabs-line","m-tabs-line--primary","m-tabs-line--2x"],[1,"nav-item","m-tabs__item"],[1,"nav-link","m-tabs__link",3,"routerLink","routerLinkActive"],[1,"m-portlet__body","m-portlet__body--scrollable"],[1,"m-portlet__frame"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"app-title-bar")(2,"div",1)(3,"button",2),e._UZ(4,"i",3),e.qZA(),e.TgZ(5,"nz-dropdown-menu",null,4)(7,"ul",5)(8,"li",6),e._UZ(9,"i",7),e.TgZ(10,"span"),e._uU(11),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"li",6),e._UZ(14,"i",7),e.TgZ(15,"span"),e._uU(16),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"li",6),e._UZ(19,"i",8),e.TgZ(20,"span"),e._uU(21),e.ALo(22,"translate"),e.qZA()()()(),e.TgZ(23,"button",9),e._UZ(24,"span",10),e._uU(25," Back "),e.qZA()()(),e.TgZ(26,"div",11)(27,"div",12)(28,"div",13)(29,"span",14),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"span"),e._uU(33),e.qZA()(),e.TgZ(34,"div",13)(35,"span",14),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"span"),e._uU(39),e.qZA()()(),e.TgZ(40,"div",15)(41,"div",16)(42,"div",17)(43,"ul",18)(44,"li",19)(45,"a",20),e._uU(46),e.ALo(47,"translate"),e.qZA()(),e.TgZ(48,"li",19)(49,"a",20),e._uU(50),e.ALo(51,"translate"),e.qZA()()()()(),e.TgZ(52,"div",21)(53,"div",22),e._UZ(54,"router-outlet"),e.qZA()()()()()),2&t){const a=e.MAs(6);e.xp6(3),e.Q6J("nzDropdownMenu",a)("nzPlacement","topCenter"),e.xp6(5),e.Q6J("routerLink","view"),e.xp6(3),e.Oqu(e.lcZ(12,19,"View Vehicle")),e.xp6(2),e.Q6J("routerLink","edit"),e.xp6(3),e.Oqu(e.lcZ(17,21,"Edit Vehicle")),e.xp6(2),e.Q6J("routerLink","edit"),e.xp6(3),e.Oqu(e.lcZ(22,23,"Add to Blacklist")),e.xp6(2),e.Q6J("routerLink",e.DdM(33,Qe)),e.xp6(7),e.hij(" ",e.lcZ(31,25,"Vehicle"),": "),e.xp6(3),e.Oqu(n.item.vehicleNumber),e.xp6(3),e.hij(" ",e.lcZ(37,27,"Mobile No."),": "),e.xp6(3),e.Oqu(n.item.mobile),e.xp6(6),e.Q6J("routerLink","transactions")("routerLinkActive","active"),e.xp6(1),e.hij(" ",e.lcZ(47,29,"Transactions")," "),e.xp6(3),e.Q6J("routerLink","season-parking")("routerLinkActive","active"),e.xp6(1),e.hij(" ",e.lcZ(51,31,"Season Parking")," ")}},dependencies:[s.lC,s.rH,s.yS,s.Od,k.G,R.Ls,V.wO,V.r9,J.cm,J.RR,K.ix,F.w,B.dQ,E.X$],encapsulation:2}),i})();const Be=function(){return["overview"]};let Ye=(()=>{class i{constructor(t,n){this.router=t,this.translate=n}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.F0),e.Y36(E.sK))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-visitor-home"]],decls:14,vars:6,consts:[[1,"body-wrapper"],[1,"m-content"],[1,"m-portlet","m-portlet--tabs"],[1,"m-portlet__head"],[1,"m-portlet__head-tools"],["role","tablist",1,"nav","nav-tabs","m-tabs-line","m-tabs-line--primary","m-tabs-line--2x"],[1,"nav-item","m-tabs__item"],[1,"nav-link","m-tabs__link",3,"routerLink","routerLinkActive"],[1,"m-portlet__body","m-portlet__body--scrollable"],[1,"m-portlet__frame"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-title-bar"),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"ul",5)(7,"li",6)(8,"a",7),e._uU(9),e.ALo(10,"translate"),e.qZA()()()()(),e.TgZ(11,"div",8)(12,"div",9),e._UZ(13,"router-outlet"),e.qZA()()()()()),2&t&&(e.xp6(8),e.Q6J("routerLink",e.DdM(5,Be))("routerLinkActive","active"),e.xp6(1),e.hij(" ",e.lcZ(10,3,"Overview")," "))},dependencies:[s.lC,s.yS,s.Od,k.G,E.X$],encapsulation:2}),i})();var W=r(8929),qe=r(50007),G=r(49651),$=r(35635),X=r(37570),ee=r(2577);function We(i,c){if(1&i&&e._UZ(0,"nz-option",17),2&i){const t=c.$implicit;e.Q6J("nzValue",t.value)("nzLabel",t.text)}}function je(i,c){1&i&&e._UZ(0,"span",18)}function He(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"span",3),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"nz-input-group",7)(6,"input",19),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.telKeyword=a)})("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.telKeyword$.next(a))}),e.qZA()()()()}if(2&i){const t=e.oxw(),n=e.MAs(17);e.xp6(3),e.hij("",e.lcZ(4,3,"Contact No."),":"),e.xp6(2),e.Q6J("nzPrefix",n),e.xp6(1),e.Q6J("ngModel",t.telKeyword)}}function Ge(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onAddVehicle())}),e._UZ(1,"span",21),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Add Vehicle")))}function Xe(i,c){if(1&i&&e._uU(0),2&i){const t=c.range;e.lnq(" ",t[0],"-",t[1]," of ",c.$implicit," items\n")}}function et(i,c){if(1&i&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&i){const t=c.$implicit;e.xp6(1),e.Oqu(t.text)}}const tt=function(i){return["../",i]};function nt(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"span",29),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw();return e.KtG(l.setMobile(a))}),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.Q6J("routerLink",e.VKq(1,tt,t.id))}}function it(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"span"),e._UZ(3,"img",22),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA()(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td")(11,"div",23)(12,"span",24),e.NdJ("click",function(){const l=e.CHM(t).$implicit,T=e.oxw();return e.KtG(T.onNavigateToView(l.id))}),e.qZA(),e._UZ(13,"nz-divider",25),e.YNc(14,nt,1,3,"span",26),e._UZ(15,"nz-divider",25),e.TgZ(16,"span",27),e.NdJ("click",function(){const l=e.CHM(t).$implicit,T=e.oxw();return e.KtG(T.onNavigateToEdit(l.id,l))}),e.qZA(),e._UZ(17,"nz-divider",25),e.TgZ(18,"span",28),e.NdJ("click",function(){const l=e.CHM(t).$implicit,T=e.oxw();return e.KtG(T.onDeleteVehicle(l.id))}),e.qZA(),e._UZ(19,"nz-divider",25),e.qZA()()()}if(2&i){const t=c.$implicit,n=c.index,a=e.oxw();e.ekj("ant-table-row-odd",n%2==1),e.xp6(3),e.Q6J("src",a.vehicleTypeLogo(t.vehicleType,"icon"),e.LSH),e.xp6(2),e.Oqu(t.vehicleNumber),e.xp6(2),e.Oqu(t.iuNumber),e.xp6(2),e.Oqu(a.vehicleTypeLogo(t.vehicleType,"text")),e.xp6(5),e.Q6J("ngIf",!a.isMotorist)}}let at=(()=>{class i extends Y.t{constructor(t,n,a,l,T,P){super(),this.vehicleService=t,this.route=n,this.carparkService=a,this.modalService=l,this._routerService=T,this.messageService=P,this.tableHeaders=[{text:"Vehicle No.",column:"vehiclePlateNo",width:"150px"},{text:"IU No.",column:"iuNumber",width:"120px"},{text:"Vehicle Type",column:"vehicleType",width:"120px"},{text:"Actions",width:"100px"}],this.vehicleTypes=A.php,this.vehicleNo="",this.vehicleType="",this.keyword$=new W.xQ,this.telKeyword$=new W.xQ,this.data=[]}ngOnInit(){this.keyword$.debounceTime(500).subscribe(()=>{this.reloadData()}),this.telKeyword$.debounceTime(400).subscribe(()=>this.reloadData()),this.reloadData()}vehicleTypeLogo(t,n){return(0,A.e9Z)(A.php,t,n)}displayName(t){return t?(0,A.ssW)(t):""}get filterParams(){return{vehicleType:this.vehicleType,vehicleNumber:this.keyword,phoneNumber:this.telKeyword?`%2B65${this.telKeyword}`:""}}reloadData(){this.isMotorist?this.reloadDataService(this.vehicleService):this.reloadDataByTel()}pageChanged(t){this.pagination=t,this.reloadData()}reloadDataByTel(){this.loading=!0,this.vehicleService.getTelList(this.filterParams,this.pagination).pipe((0,S.q)(1)).subscribe(t=>{t.number>t.totalPages&&(this.pagination={...this.pagination,page:t.pagination.totalPages}),this.loading=!1,this.pagination={...this.pagination,totalCount:t.totalElements},this.listData=t.content,this.loading=!1},()=>{this.loading=!1,this.listData=[],this.pagination={...this.pagination,totalCount:0},this.loading=!1})}onNavigateToEdit(t,n){this.isMotorist?this._routerService.navigateByUrl(`vehicle-motorist/${t}/edit`):this._routerService.navigate([`vehicle-management/${t}/edit`],{queryParams:{firstName:n.firstName||"",mobile:n.mobile,email:n.email||""}})}onNavigateToView(t){this._routerService.navigate([`vehicle-management/${t}/view`])}onAddVehicle(){this._routerService.navigate(["../create/vehicle"],{relativeTo:this.route})}get isMotorist(){return this.carparkService.isMotorist()}onDeleteVehicle(t){this.vehicleId=t,this.modalService.confirm({nzTitle:"Permanently delete vehicle? Changes cannot be undone.",nzOnOk:()=>this.onConfirm(t),nzOkDanger:!0,nzOkText:"Delete",nzCancelText:"Cancel"})}onConfirm(t){const n=JSON.parse(localStorage.getItem("user")).login;this.vehicleService.deleteModel(n,t).subscribe(a=>{this.reloadData()},a=>{400==a.error.status&&this.messageService.error(a.error.message)})}get isOperator(){return this.vehicleService.isOperator()}setMobile(t){sessionStorage.setItem("vehicleInfo",JSON.stringify(t))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.f),e.Y36(s.gz),e.Y36(I.x),e.Y36(qe.Sf),e.Y36(s.F0),e.Y36(G.dD))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-visitor-overview"]],features:[e.qOj],decls:29,vars:21,consts:[[1,"form-group","m-form__group","m-portlet__filters"],[1,"filter-wrap"],[1,"filter-item"],[1,"filter-label"],["nzPlaceHolder","Please Select",2,"width","160px",3,"ngModel","ngModelChange"],["nzValue","","nzLabel","All"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[2,"width","210px",3,"nzPrefix"],["nz-input","","type","text","placeholder","Please Enter Vehicle No.",3,"ngModel","ngModelChange"],["suffixIconSearch",""],["class","filter-wrap",4,"ngIf"],["nz-button","","nzType","primary","nzShape","round","style","margin-left: auto;margin-right: 0;",3,"click",4,"ngIf"],["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowTotal","nzQueryParams"],["basicTable",""],[4,"ngFor","ngForOf"],[3,"ant-table-row-odd",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],["nz-icon","","nzType","search"],["nz-input","","type","text","placeholder","Please Enter Contact No.",3,"ngModel","ngModelChange"],["nz-button","","nzType","primary","nzShape","round",2,"margin-left","auto","margin-right","0",3,"click"],["nz-icon","","nzType","plus"],["alt","",3,"src"],[1,"act-icon-group"],["nz-tooltip","","nzTooltipTitle","View","nz-icon","","nzType","eye","nzTheme","outline",2,"cursor","pointer",3,"click"],["nzType","vertical",1,"nz-divider-style"],["nz-tooltip","","nzTooltipTitle","Transactions","nz-icon","","nzType","unordered-list","nzTheme","outline",3,"routerLink","click",4,"ngIf"],["nz-tooltip","","nzTooltipTitle","Edit","nz-icon","","nzType","edit","nzTheme","outline",3,"click"],["nz-tooltip","","nzTooltipTitle","Delete","nz-icon","","nzType","delete","nzTheme","outline",3,"click"],["nz-tooltip","","nzTooltipTitle","Transactions","nz-icon","","nzType","unordered-list","nzTheme","outline",3,"routerLink","click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"nz-select",4),e.NdJ("ngModelChange",function(l){return n.vehicleType=l})("ngModelChange",function(){return n.reloadData()}),e._UZ(7,"nz-option",5),e.YNc(8,We,1,2,"nz-option",6),e.qZA()()(),e.TgZ(9,"div",1)(10,"div",2)(11,"span",3),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"nz-input-group",7)(15,"input",8),e.NdJ("ngModelChange",function(l){return n.keyword=l})("ngModelChange",function(l){return n.keyword$.next(l)}),e.qZA()(),e.YNc(16,je,1,0,"ng-template",null,9,e.W1O),e.qZA()(),e.YNc(18,He,7,5,"div",10),e.YNc(19,Ge,4,3,"button",11),e.qZA(),e.YNc(20,Xe,1,3,"ng-template",null,12,e.W1O),e.TgZ(22,"nz-table",13,14),e.NdJ("nzQueryParams",function(l){return n.onQueryParamsChange(l)}),e.TgZ(24,"thead")(25,"tr"),e.YNc(26,et,2,1,"th",15),e.qZA()(),e.TgZ(27,"tbody"),e.YNc(28,it,20,7,"tr",16),e.qZA()()),2&t){const a=e.MAs(17),l=e.MAs(21),T=e.MAs(23);e.xp6(4),e.hij("",e.lcZ(5,17,"Vehicle Type"),":"),e.xp6(2),e.Q6J("ngModel",n.vehicleType),e.xp6(2),e.Q6J("ngForOf",n.vehicleTypes),e.xp6(4),e.hij("",e.lcZ(13,19,"Vehicle No."),":"),e.xp6(2),e.Q6J("nzPrefix",a),e.xp6(1),e.Q6J("ngModel",n.keyword),e.xp6(3),e.Q6J("ngIf",!n.isMotorist),e.xp6(1),e.Q6J("ngIf",!n.isOperator),e.xp6(3),e.Q6J("nzData",n.listData)("nzFrontPagination",!1)("nzLoading",n.loading)("nzTotal",n.pagination.totalCount)("nzPageSize",n.pagination.rowsPerPage)("nzPageIndex",n.pagination.page)("nzShowTotal",l),e.xp6(4),e.Q6J("ngForOf",n.tableHeaders),e.xp6(2),e.Q6J("ngForOf",T.data)}},dependencies:[v.sg,v.O5,u.Fj,u.JJ,u.On,s.rH,$.Zp,$.gB,$.ke,R.Ls,K.ix,F.w,B.dQ,L.Ip,L.Vq,X.SY,U.N8,U.Uo,U._C,U.Om,U.p0,U.$Z,ee.g,E.X$],styles:[".m-portlet__filter.btn-create[_ngcontent-%COMP%]{margin-left:auto;margin-right:0!important}"]}),i})();var ot=r(1059),rt=r(80013),lt=r(75778),te=r(2994),st=r(87545),ct=r(88117),ne=r(66708),ie=r(29252);function pt(i,c){if(1&i&&(e.TgZ(0,"div",28)(1,"div",29)(2,"div",30)(3,"h3",31),e._uU(4),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(4),e.hij(" ",t.item.vehicleNumber," ")}}function dt(i,c){if(1&i&&e._UZ(0,"nz-option",32),2&i){const t=c.$implicit;e.Q6J("nzValue",t.areaCode)("nzLabel",t.name)}}function mt(i,c){if(1&i&&e._UZ(0,"nz-option",32),2&i){const t=c.$implicit;e.Q6J("nzValue",t.value)("nzLabel",t.text)}}function ht(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"label",6)(1,"span",7),e._uU(2,"*"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",8)(6,"nz-select",33),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.form.vehicleType=a)}),e.YNc(7,mt,1,2,"nz-option",10),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,3,"Vehicle Type"),": "),e.xp6(3),e.Q6J("ngModel",t.form.vehicleType),e.xp6(1),e.Q6J("ngForOf",t.vehicleTypes)}}function ut(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",5)(1,"label",6)(2,"span",7),e._uU(3,"*"),e.qZA(),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",8)(7,"input",34),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.form.mobile=a)}),e.qZA()(),e.TgZ(8,"label",6)(9,"span",7),e._uU(10,"*"),e.qZA(),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div",8)(14,"input",35),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.seasonData.firstName=a)}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,4,"Contact No."),": "),e.xp6(3),e.Q6J("ngModel",t.form.mobile),e.xp6(4),e.hij(" ",e.lcZ(12,6,"First Name"),": "),e.xp6(3),e.Q6J("ngModel",t.seasonData.firstName)}}function _t(i,c){if(1&i&&e._UZ(0,"nz-option",32),2&i){const t=c.$implicit;e.Q6J("nzValue",t.value)("nzLabel",t.text)}}function gt(i,c){1&i&&(e.TgZ(0,"div",38),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Please select vehicle Type")," "))}function vt(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",5)(1,"label",6)(2,"span",7),e._uU(3,"*"),e.qZA(),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",8)(7,"input",36),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.seasonData.email=a)}),e.qZA()(),e.TgZ(8,"label",6)(9,"span",7),e._uU(10,"*"),e.qZA(),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div",8)(14,"nz-select",33,37),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.form.vehicleType=a)}),e.YNc(16,_t,1,2,"nz-option",10),e.qZA()(),e.YNc(17,gt,3,3,"div",15),e.qZA()}if(2&i){const t=e.MAs(15),n=e.oxw(),a=e.MAs(1);e.xp6(4),e.hij(" ",e.lcZ(5,6,"Email"),": "),e.xp6(3),e.Q6J("ngModel",n.seasonData.email),e.xp6(4),e.hij(" ",e.lcZ(12,8,"Vehicle Type"),": "),e.xp6(3),e.Q6J("ngModel",n.form.vehicleType),e.xp6(2),e.Q6J("ngForOf",n.vehicleTypes),e.xp6(1),e.Q6J("ngIf",t.invalid&&(t.dirty||t.touched||a.submitted))}}function ft(i,c){if(1&i&&(e.TgZ(0,"div",38),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,t.vehicleNoMessage)," At least 3 characters. ")}}function Tt(i,c){1&i&&(e.TgZ(0,"span",7),e._uU(1,"*"),e.qZA())}function Ct(i,c){1&i&&(e.TgZ(0,"div",38),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Please enter numbers only")," "))}function Mt(i,c){1&i&&(e.TgZ(0,"span",40),e._uU(1,"Invalid IU Number"),e.qZA())}function xt(i,c){if(1&i&&e.YNc(0,Mt,2,0,"span",39),2&i){const t=e.oxw();e.Q6J("ngIf",t.InvalidIUNumber)}}function Zt(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.delete(a))}),e._UZ(1,"span",41),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&i&&(e.xp6(2),e.hij("",e.lcZ(3,1,"Delete")," "))}let ae=(()=>{class i{constructor(t,n,a,l,T){this.router=t,this._route=n,this.driverService=a,this.translate=l,this.carparkService=T,this.deleted=new e.vpe,this.canceled=new e.vpe,this.submitted=new e.vpe,this.vehicleNoMessage=A.vwt.VehicleNo,this.vehicleTypes=A.php,this.driverInput$=new W.xQ,this.InvalidIUNumber=!1,this.isSingapore=65,this.listAreaCode=[{areaCode:65,value:65,name:"Singapore"},{areaCode:60,value:60,name:"Malaysia"}]}ngOnInit(){ne.Z.isUndefinedOrNull(this.areaCode)&&(this.areaCode=65),this.form=this.item||(0,A.wky)(),this.isMotorist?this.driver=JSON.parse(localStorage.getItem("user")).hpNumber:(this.driver$=this.driverInput$.pipe((0,ot.O)(""),(0,rt.b)(200),(0,lt.x)(),(0,te.b)(()=>this.driverLoading=!0),(0,st.w)(t=>this.driverService.searchModel(t).pipe((0,te.b)(()=>{this.driverLoading=!1}))),(0,ct.B)()),this.driver$.pipe((0,S.q)(1)).subscribe(t=>{this.driver=this.form.driver?this.form.driver:t[0]})),this._route.queryParams.subscribe(t=>{if(Reflect.has(t,"mobile")&&Reflect.has(t,"email")&&Reflect.has(t,"firstName"))this.seasonData=t,this.form.mobile=t.mobile;else{let n=JSON.parse(sessionStorage.getItem("vehicleInfo"));this.seasonData={email:n.email,firstName:n.firstName,mobile:n.mobile},this.form.mobile=n.mobile}})}get isMotorist(){return this.carparkService.isMotorist()}delete(t){t.preventDefault(),this.deleted.emit()}cancel(t){t.preventDefault(),this.canceled.emit()}submit(t){if((65!=this.areaCode||this.form.iuNumber)&&!this.InvalidIUNumber)return this.isMotorist?t.valid&&this.submitted.emit({...this.form,driverCode:this.driver.userName,driver:this.driver,countryCode:this.areaCode}):t.valid&&this.submitted.emit({...this.form})}verifyIUNumber(){this.InvalidIUNumber=this.form.iuNumber.length<10&&this.form.iuNumber.length>0}displayDriverOption(t){return[[t.firstName,t.lastName].filter(a=>a).join(" "),t.mobile,t.email].filter(a=>a&&a.length).join(", ")}onChangeAreaCode(t){this.areaCode=parseInt(t.target.value,10)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.F0),e.Y36(s.gz),e.Y36(z.F),e.Y36(E.sK),e.Y36(I.x))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vehicle-form"]],inputs:{item:"item"},outputs:{deleted:"deleted",canceled:"canceled",submitted:"submitted"},decls:53,vars:26,consts:[[1,"m-form","m-form--fit","m-form--label-align-right",3,"ngSubmit"],["formRef","ngForm"],[1,"m-portlet"],["class","m-portlet__head",4,"ngIf"],[1,"m-portlet__body"],[1,"row","form-group","m-form__group"],[1,"col-form-label","col-lg-2","col-sm-12"],[1,"m--font-danger"],[1,"col-lg-4","col-sm-12"],["id","countryCode","name","countryCode",2,"width","100%",3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"ngIf"],["class","row form-group m-form__group",4,"ngIf"],["nz-input","","type","text","maxlength","8","minlength","3","pattern","^[a-zA-Z0-9]+$","oninput","this.value = this.value.toUpperCase()","name","vehicleNumber","placeholder","Vehicle No.","required","",3,"ngModel","ngModelChange"],["vehicleNumber","ngModel"],["class","form-control-feedback",4,"ngIf"],["class","m--font-danger",4,"ngIf"],["nz-input","","type","text","name","iuNumber","maxlength","10","pattern","^[0-9]+$","digitOnly","","inputmode","numeric","placeholder","IU No.",3,"ngModel","required","ngModelChange"],["iuNumber","ngModel"],["class","form-control-feedback",4,"ngIf","ngIfElse"],["hasIuNumber",""],[1,"m-portlet__foot","bg-light-gray"],[1,"row"],[1,"m-form__actions","col"],["class","btn-form-ops","nz-button","","nzType","primary","nzSize","large","nzGhost","",3,"click",4,"ngIf"],[1,"m-form__actions","m-form__actions--right","row"],["nz-button","","nzType","primary","nzSize","large","nzGhost","",1,"btn-form-ops",3,"click"],["nz-button","","nzType","primary","nzSize","large","type","submit",1,"m--margin-left-30","btn-form-ops"],[1,"m-portlet__head"],[1,"m-portlet__head-caption"],[1,"m-portlet__head-title"],[1,"m-portlet__head-text"],[3,"nzValue","nzLabel"],["name","vehicleType",2,"width","100%",3,"ngModel","ngModelChange"],["nz-input","","type","text","name","mobile","maxlength","8","pattern","^[0-9]+$","placeholder","Contact No.","readonly","",3,"ngModel","ngModelChange"],["nz-input","","type","text","name","FristName","placeholder","First Name","readonly","",3,"ngModel","ngModelChange"],["nz-input","","type","text","name","Email","placeholder","Email","readonly","",3,"ngModel","ngModelChange"],["vehicleType","ngModel"],[1,"form-control-feedback"],["style","color: #f00;",4,"ngIf"],[2,"color","#f00"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){e.CHM(a);const T=e.MAs(1);return e.KtG(n.submit(T))}),e.TgZ(2,"div",2),e.YNc(3,pt,5,1,"div",3),e.TgZ(4,"div",4)(5,"div",5)(6,"label",6)(7,"span",7),e._uU(8,"*"),e.qZA(),e._uU(9," Country of Registration: "),e.qZA(),e.TgZ(10,"div",8)(11,"nz-select",9),e.NdJ("ngModelChange",function(T){return n.areaCode=T}),e.YNc(12,dt,1,2,"nz-option",10),e.qZA()(),e.YNc(13,ht,8,5,"ng-template",11),e.qZA(),e.YNc(14,ut,15,8,"div",12),e.YNc(15,vt,18,10,"div",12),e.TgZ(16,"div",5)(17,"label",6)(18,"span",7),e._uU(19,"*"),e.qZA(),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"div",8)(23,"input",13,14),e.NdJ("ngModelChange",function(T){return n.form.vehicleNumber=T}),e.qZA(),e.YNc(25,ft,3,3,"div",15),e.qZA(),e.TgZ(26,"label",6),e.YNc(27,Tt,2,0,"span",16),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"div",8)(31,"input",17,18),e.NdJ("ngModelChange",function(T){return n.form.iuNumber=T})("ngModelChange",function(){return n.verifyIUNumber()}),e.qZA(),e.YNc(33,Ct,3,3,"div",19),e.YNc(34,xt,1,1,"ng-template",null,20,e.W1O),e.qZA()(),e.TgZ(36,"div",5)(37,"label",6)(38,"span",7),e._uU(39,"*"),e.qZA(),e._uU(40," Required field(s) "),e.qZA(),e._UZ(41,"div",8),e.qZA()(),e.TgZ(42,"div",21)(43,"div",22)(44,"div",23),e.YNc(45,Zt,4,3,"button",24),e.qZA(),e.TgZ(46,"div",25)(47,"button",26),e.NdJ("click",function(T){return n.cancel(T)}),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.TgZ(50,"button",27),e._uU(51),e.ALo(52,"translate"),e.qZA()()()()()()}if(2&t){const a=e.MAs(1),l=e.MAs(24),T=e.MAs(32),P=e.MAs(35);e.xp6(3),e.Q6J("ngIf",n.item),e.xp6(8),e.Q6J("ngModel",n.areaCode),e.xp6(1),e.Q6J("ngForOf",n.listAreaCode),e.xp6(1),e.Q6J("ngIf",n.areaCode!==n.isSingapore&&n.isMotorist),e.xp6(1),e.Q6J("ngIf",!n.isMotorist),e.xp6(1),e.Q6J("ngIf",!n.isMotorist),e.xp6(5),e.hij(" ",e.lcZ(21,18,"Vehicle No."),": "),e.xp6(3),e.Q6J("ngModel",n.form.vehicleNumber),e.xp6(2),e.Q6J("ngIf",l.invalid&&(l.dirty||l.touched||a.submitted)),e.xp6(2),e.Q6J("ngIf",n.areaCode===n.isSingapore),e.xp6(1),e.hij(" ",e.lcZ(29,20,"IU No."),": "),e.xp6(3),e.Q6J("ngModel",n.form.iuNumber)("required",n.areaCode===n.isSingapore),e.xp6(2),e.Q6J("ngIf",T.invalid&&(T.dirty||T.touched||a.submitted))("ngIfElse",P),e.xp6(12),e.Q6J("ngIf",n.item),e.xp6(3),e.hij(" ",e.lcZ(49,22,"Cancel")," "),e.xp6(3),e.hij(" ",e.lcZ(52,24,"Submit")," ")}},dependencies:[v.sg,v.O5,$.Zp,R.Ls,K.ix,F.w,B.dQ,L.Ip,L.Vq,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.wO,u.nD,u.c5,u.On,u.F,ie.L,E.X$],encapsulation:2}),i})();const At=["alertErrMsg"];let yt=(()=>{class i{constructor(t,n,a,l){this.router=t,this.vehicleService=n,this.carparkService=a,this.nzMessageService=l}ngOnInit(){}get isMotorist(){return this.carparkService.isMotorist()}cancel(){this.router.navigate(this.isMotorist?["/vehicle-motorist"]:["/vehicle-management"])}submit(t){let n;if(this.isMotorist){n={...t,country:65===t.countryCode?"Singapore":"Malaysia"};const a=JSON.parse(localStorage.getItem("user")).login;this.vehicleService.createModel(a,n).subscribe(()=>{this.router.navigate(["/message-management/overview"])},l=>{this.errMsg=l.error.message,this.nzMessageService.error(this.errMsg)})}else n={mobile:t.mobile,vehicleNumber:t.vehicleNumber,iuNumber:t.iuNumber,vehicleType:t.vehicleType},this.vehicleService.createVehicleAdmin(n).subscribe(()=>{this.router.navigate(["/vehicle-management/overview"])},a=>{this.errMsg=a.error.message,this.nzMessageService.error(this.errMsg)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.F0),e.Y36(m.f),e.Y36(I.x),e.Y36(G.dD))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vehicle-create"]],viewQuery:function(t,n){if(1&t&&e.Gf(At,5),2&t){let a;e.iGM(a=e.CRH())&&(n.alertErrMsg=a.first)}},decls:4,vars:0,consts:[[1,"body-wrapper"],[1,"m-content"],[3,"canceled","submitted"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-title-bar"),e.TgZ(2,"div",1)(3,"app-vehicle-form",2),e.NdJ("canceled",function(){return n.cancel()})("submitted",function(l){return n.submit(l)}),e.qZA()()())},dependencies:[k.G,ae],encapsulation:2}),i})();var bt=r(20388);const zt=["alertErrMsg"];function Dt(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",5)(1,"p"),e._uU(2,"Permanently delete vehicle? Changes cannot be undone."),e.qZA(),e.TgZ(3,"button",6),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onDecline())}),e._uU(4," Cancel "),e.qZA(),e.TgZ(5,"button",7),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onConfirm())}),e._uU(6," Delete "),e.qZA()()}}function Ut(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",5)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"button",7),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onDecline())}),e._uU(4,"Close"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.errMsg)}}let Ot=(()=>{class i{constructor(t,n,a,l,T,P){this.router=t,this.route=n,this.vehicleService=a,this._locationService=l,this._carparkService=T,this._modalService=P}ngOnInit(){const t=this.route.parent.snapshot.data.item;this.item={...t,startTime:new Date(t.startTime),endTime:new Date(t.endTime)}}onDeleted(t){this.modalRef=this._modalService.show(t,{class:"modal-sm"})}onDecline(){this.message="Declined!",this.modalRef.hide()}onConfirm(){this.message="Confirmed!",this.isMotorist?this.vehicleService.deleteModel(this.item.driverCode,this.item.id).subscribe(()=>{this.onCanceled(),this.modalRef.hide()},t=>{this.modalRef.hide(),this.errMsg=t.error.message,this.modalRef=this._modalService.show(this.alertErrMsg,{class:"modal-md"})}):this.vehicleService.deleteAdminModel(this.item.id).subscribe(()=>{this.router.navigate(["/vehicle-management/overview"])},t=>{this.modalRef.hide(),this.errMsg=t.error.message,this.modalRef=this._modalService.show(this.alertErrMsg,{class:"modal-md"})})}onCanceled(){this._locationService.back()}get isMotorist(){return this._carparkService.isMotorist()}onSubmitted(t){if(this.isMotorist){const n=JSON.parse(localStorage.getItem("user")).login;console.log(t);const a={vehicle:{...t,country:65===t.countryCode?"Singapore":"Malaysia"},vehicleId:t.id};this.vehicleService.putUpdateVehicle(n,a.vehicle).subscribe(()=>{this.onCanceled()},l=>{this.errMsg=l.error.message,this.modalRef=this._modalService.show(this.alertErrMsg,{class:"modal-md"})})}else this.vehicleService.updateModel({id:t.id,vehicleNumber:t.vehicleNumber,iuNumber:t.iuNumber,mobile:t.mobile,vehicleType:t.vehicleType}).subscribe(()=>{this.router.navigate(["/vehicle-management/overview"])},a=>{this.errMsg=a.error.message||a.error.detail,this.modalRef=this._modalService.show(this.alertErrMsg,{class:"modal-md"})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.F0),e.Y36(s.gz),e.Y36(m.f),e.Y36(v.Ye),e.Y36(I.x),e.Y36(bt.tT))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vehicle-update"]],viewQuery:function(t,n){if(1&t&&e.Gf(zt,5),2&t){let a;e.iGM(a=e.CRH())&&(n.alertErrMsg=a.first)}},decls:8,vars:1,consts:[[1,"body-wrapper"],[1,"m-content"],[3,"item","deleted","canceled","submitted"],["templateConfirmDelete",""],["alertErrMsg",""],[1,"modal-body","text-center"],["type","button",1,"btn","btn-default","mr-3",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"div",0),e._UZ(1,"app-title-bar"),e.TgZ(2,"div",1)(3,"app-vehicle-form",2),e.NdJ("deleted",function(){e.CHM(a);const T=e.MAs(5);return e.KtG(n.onDeleted(T))})("canceled",function(){return n.onCanceled()})("submitted",function(T){return n.onSubmitted(T)}),e.qZA()(),e.YNc(4,Dt,7,0,"ng-template",null,3,e.W1O),e.YNc(6,Ut,5,1,"ng-template",null,4,e.W1O),e.qZA()}2&t&&(e.xp6(3),e.Q6J("item",n.item))},dependencies:[k.G,ae],encapsulation:2}),i})();var oe=r(88796),re=r(59245),le=r(21532),se=r(80529),ce=r(19832);function Et(i){return new ce.w(i,"../assets/i18n/",".json")}let Nt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[b.k,g.e,I.x],imports:[s.Bz,v.ez,le.x,u.u5,o.D,re.mr,y.kn,oe.A0,ie.E7,E.aw.forChild({loader:{provide:E.Zw,useFactory:Et,deps:[se.eN]}})]}),i})();function Pt(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",21)(1,"div",22)(2,"div",23)(3,"h3",24),e._uU(4),e.qZA(),e.TgZ(5,"span",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.backToHome())}),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(4),e.hij(" ",t.item.vehicleNumber," ")}}function St(i,c){if(1&i&&e._UZ(0,"nz-option",26),2&i){const t=c.$implicit;e.Q6J("nzValue",t.areaCode)("nzLabel",t.name)}}function Lt(i,c){if(1&i&&e._UZ(0,"nz-option",26),2&i){const t=c.$implicit;e.Q6J("nzValue",t.value)("nzLabel",t.text)}}function wt(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"label",7)(1,"span",8),e._uU(2,"*"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",9)(6,"nz-select",27),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.form.vehicleType=a)}),e.YNc(7,Lt,1,2,"nz-option",11),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,3,"Vehicle Type"),": "),e.xp6(3),e.Q6J("ngModel",t.form.vehicleType),e.xp6(1),e.Q6J("ngForOf",t.vehicleTypes)}}function It(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"label",7)(2,"span",8),e._uU(3,"*"),e.qZA(),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",9)(7,"input",28),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.form.mobile=a)}),e.qZA()(),e.TgZ(8,"label",7)(9,"span",8),e._uU(10,"*"),e.qZA(),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div",9)(14,"input",29),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.seasonData.firstName=a)}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,4,"Contact No."),": "),e.xp6(3),e.Q6J("ngModel",t.form.mobile),e.xp6(4),e.hij(" ",e.lcZ(12,6,"First Name"),": "),e.xp6(3),e.Q6J("ngModel",t.seasonData.firstName)}}function Vt(i,c){if(1&i&&e._UZ(0,"nz-option",26),2&i){const t=c.$implicit;e.Q6J("nzValue",t.value)("nzLabel",t.text)}}function Jt(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"label",7)(2,"span",8),e._uU(3,"*"),e.qZA(),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",9)(7,"input",30),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.seasonData.email=a)}),e.qZA()(),e.TgZ(8,"label",7)(9,"span",8),e._uU(10,"*"),e.qZA(),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div",9)(14,"nz-select",27),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.form.vehicleType=a)}),e.YNc(15,Vt,1,2,"nz-option",11),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,5,"Email"),": "),e.xp6(3),e.Q6J("ngModel",t.seasonData.email),e.xp6(4),e.hij(" ",e.lcZ(12,7,"Vehicle Type"),": "),e.xp6(3),e.Q6J("ngModel",t.form.vehicleType),e.xp6(1),e.Q6J("ngForOf",t.vehicleTypes)}}function Ft(i,c){1&i&&(e.TgZ(0,"span",8),e._uU(1,"*"),e.qZA())}function de(i){return new ce.w(i,"../assets/i18n/",".json")}const Rt=[{path:"",component:h.f,children:[{path:"",component:Ye,children:[{path:"",redirectTo:"overview",pathMatch:"full"},{path:"overview",component:at}]},{path:"create",component:p.O,children:[{path:"",redirectTo:"vehicle",pathMatch:"full"},{path:"vehicle",component:yt}]},{path:":id",component:p.O,resolve:{item:M.iO},children:[{path:"",component:Ke,children:[{path:"",redirectTo:"transactions",pathMatch:"full"},{path:"transactions",component:$e},{path:"season-parking",component:fe}]},{path:"edit",component:Ot},{path:"view",component:(()=>{class i{constructor(t,n,a,l,T){this.router=t,this._route=n,this.driverService=a,this.translate=l,this.carparkService=T,this.listAreaCode=[{areaCode:65,value:65,name:"Singapore"},{areaCode:60,value:60,name:"Malaysia"}],this.vehicleTypes=A.php,this.isSingapore=65,this.isFromTransaction=!1}ngOnInit(){this._route.queryParams.subscribe(n=>{n.isFromTransaction&&(this.isFromTransaction=!0)});const t=this._route.parent.snapshot.data.item;this.item={...t,startTime:new Date(t.startTime),endTime:new Date(t.endTime)},this.form=this.item||(0,A.wky)(),this.seasonData=this.item,this.form.mobile=this.item.mobile,ne.Z.isUndefinedOrNull(this.areaCode)&&(this.areaCode=65)}get isMotorist(){return this.carparkService.isMotorist()}backToHome(){this.router.navigate(this.isFromTransaction?["evc/ev-transactions"]:["vehicle-management/overview"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.F0),e.Y36(s.gz),e.Y36(z.F),e.Y36(E.sK),e.Y36(I.x))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vehicle-view"]],decls:38,vars:18,consts:[[1,"body-wrapper"],[1,"m-content"],[1,"m-form","m-form--fit","m-form--label-align-right"],[1,"m-portlet"],["class","m-portlet__head",4,"ngIf"],[1,"m-portlet__body"],[1,"row","form-group","m-form__group"],[1,"col-form-label","col-lg-2","col-sm-12"],[1,"m--font-danger"],[1,"col-lg-4","col-sm-12"],["id","areaCode","name","areaCode","nzDisabled","",2,"width","100%",3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"ngIf"],["class","row form-group m-form__group",4,"ngIf"],["readonly","","nz-input","","name","vehicleNumber","type","text",3,"ngModel","ngModelChange"],["class","m--font-danger",4,"ngIf"],["readonly","","nz-input","","type","text","name","iuNumber",3,"ngModel","ngModelChange"],[1,"m-portlet__foot","bg-light-gray"],[1,"footer-act"],[1,"m-form__actions","m-form__actions--right","row"],["nz-button","","nzType","primary","nzSize","large",1,"m--margin-left-30","btn-form-ops",3,"click"],[1,"m-portlet__head"],[1,"m-portlet__head-caption"],[1,"header-act"],[1,"m-portlet__head-text"],["nz-icon","","nzType","close","nzTheme","outline",3,"click"],[3,"nzValue","nzLabel"],["name","vehicleType","nzDisabled","",2,"width","100%",3,"ngModel","ngModelChange"],["nz-input","","type","text","name","mobile","maxlength","8","pattern","^[0-9]+$","placeholder","Contact No.","readonly","",3,"ngModel","ngModelChange"],["nz-input","","type","text","name","firstName","placeholder","First Name","readonly","",3,"ngModel","ngModelChange"],["nz-input","","type","text","name","Email","readonly","",3,"ngModel","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-title-bar"),e.TgZ(2,"div",1)(3,"form",2)(4,"div",3),e.YNc(5,Pt,6,1,"div",4),e.TgZ(6,"div",5)(7,"div",6)(8,"label",7)(9,"span",8),e._uU(10,"*"),e.qZA(),e._uU(11," Country of Registration: "),e.qZA(),e.TgZ(12,"div",9)(13,"nz-select",10),e.NdJ("ngModelChange",function(l){return n.areaCode=l}),e.YNc(14,St,1,2,"nz-option",11),e.qZA()(),e.YNc(15,wt,8,5,"ng-template",12),e.qZA(),e.YNc(16,It,15,8,"div",13),e.YNc(17,Jt,16,9,"div",13),e.TgZ(18,"div",6)(19,"label",7)(20,"span",8),e._uU(21,"*"),e.qZA(),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"div",9)(25,"input",14),e.NdJ("ngModelChange",function(l){return n.form.vehicleNumber=l}),e.qZA()(),e.TgZ(26,"label",7),e.YNc(27,Ft,2,0,"span",15),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"div",9)(31,"input",16),e.NdJ("ngModelChange",function(l){return n.form.iuNumber=l}),e.qZA()()()(),e.TgZ(32,"div",17)(33,"div",18)(34,"div",19)(35,"button",20),e.NdJ("click",function(){return n.backToHome()}),e._uU(36),e.ALo(37,"translate"),e.qZA()()()()()()()()),2&t&&(e.xp6(5),e.Q6J("ngIf",n.item),e.xp6(8),e.Q6J("ngModel",n.areaCode),e.xp6(1),e.Q6J("ngForOf",n.listAreaCode),e.xp6(1),e.Q6J("ngIf",n.areaCode!==n.isSingapore&&n.isMotorist),e.xp6(1),e.Q6J("ngIf",!n.isMotorist),e.xp6(1),e.Q6J("ngIf",!n.isMotorist),e.xp6(5),e.hij(" ",e.lcZ(23,12,"Vehicle No."),": "),e.xp6(3),e.Q6J("ngModel",n.form.vehicleNumber),e.xp6(2),e.Q6J("ngIf",n.areaCode===n.isSingapore),e.xp6(1),e.hij(" ",e.lcZ(29,14,"IU No."),": "),e.xp6(3),e.Q6J("ngModel",n.form.iuNumber),e.xp6(5),e.hij(" ",e.lcZ(37,16,"Back")," "))},dependencies:[v.sg,v.O5,u._Y,u.Fj,u.JJ,u.JL,u.nD,u.c5,u.On,u.F,k.G,$.Zp,R.Ls,K.ix,F.w,B.dQ,L.Ip,L.Vq,E.X$],styles:[".header-act[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.header-act[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.footer-act[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]}),i})()}]}]}];let $t=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[b.k,g.e,m.f,x.p,z.F,Z.R,d.Y,M.Nb,M.aE,M.iO,_.I,f.C],imports:[v.ez,u.u5,s.Bz.forChild(Rt),le.x,o.D,C.p,re.mr,y.kn,Nt,oe.A0,E.aw.forChild({loader:{provide:E.Zw,useFactory:de,deps:[se.eN]}}),ee.S,X.cg,R.PV,s.Bz]}),i})()},15035:(N,O,r)=>{"use strict";r.d(O,{W8:()=>Z});var v=r(21837),u=(()=>((u||(u={})).Med="yyyy-LL-dd",u))();function Z(_,z=u.Med){return _?v.ou.fromJSDate(_).toFormat(z):null}},94327:function(N,O){var u;void 0!==(u=function(){"use strict";function y(g,f,x){var m=new XMLHttpRequest;m.open("GET",g),m.responseType="blob",m.onload=function(){b(m.response,f,x)},m.onerror=function(){console.error("could not download file")},m.send()}function M(g){var f=new XMLHttpRequest;f.open("HEAD",g,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function Z(g){try{g.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),g.dispatchEvent(f)}}var _="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,z=_.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),b=_.saveAs||("object"!=typeof window||window!==_?function(){}:"download"in HTMLAnchorElement.prototype&&!z?function(g,f,x){var m=_.URL||_.webkitURL,d=document.createElement("a");d.download=f=f||g.name||"download",d.rel="noopener","string"==typeof g?(d.href=g,d.origin===location.origin?Z(d):M(d.href)?y(g,f,x):Z(d,d.target="_blank")):(d.href=m.createObjectURL(g),setTimeout(function(){m.revokeObjectURL(d.href)},4e4),setTimeout(function(){Z(d)},0))}:"msSaveOrOpenBlob"in navigator?function(g,f,x){if(f=f||g.name||"download","string"!=typeof g)navigator.msSaveOrOpenBlob(function s(g,f){return typeof f>"u"?f={autoBom:!1}:"object"!=typeof f&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(g.type)?new Blob(["\ufeff",g],{type:g.type}):g}(g,x),f);else if(M(g))y(g,f,x);else{var m=document.createElement("a");m.href=g,m.target="_blank",setTimeout(function(){Z(m)})}}:function(g,f,x,m){if((m=m||open("","_blank"))&&(m.document.title=m.document.body.innerText="downloading..."),"string"==typeof g)return y(g,f,x);var d="application/octet-stream"===g.type,o=/constructor/i.test(_.HTMLElement)||_.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||d&&o||z)&&typeof FileReader<"u"){var h=new FileReader;h.onloadend=function(){var D=h.result;D=p?D:D.replace(/^data:[^;]*;/,"data:attachment/file;"),m?m.location.href=D:location=D,m=null},h.readAsDataURL(g)}else{var C=_.URL||_.webkitURL,A=C.createObjectURL(g);m?m.location=A:location.href=A,m=null,setTimeout(function(){C.revokeObjectURL(A)},4e4)}});_.saveAs=b.saveAs=b,N.exports=b}.apply(O,[]))&&(N.exports=u)}}]);