(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[4566,9226],{71636:(x,T,a)=>{"use strict";a.d(T,{w:()=>M}),a(38014);var u=a(3927),C=a(27221),n=a(86181),v=a(94650),t=a(80529),g=a(28555),D=a(91599);let M=(()=>{class o extends u.su{constructor(s,r,i){super(s,r),this.http=s,this.store=r,this.modelName="newTransaction",this.baseUrl="maintenance/api/transaction",this.handleError=i.createHandleError(`${this.modelName}Service`)}filterModel(s,r){const i=(0,n.U8)(`${this.baseUrl}/queryByParam`,{...s,...(0,n.jq)(r)});return this.get(this.getUrl(i)).pipe((0,C.K)(this.handleError(`${this.modelName}Filter`,{}))).map(h=>Array.isArray(h)?(0,u.eC)(h):(0,u.O7)(h))}clearHandle(s){const r=this.getUrl(`maintenance/api/transaction?id=${s||""}`);return console.log(r,"\u8def\u5f84"),this.delete(r)}exportCondo(s,r){const i=(0,n.U8)(`${this.baseUrl}/export`,{...s,...(0,n.jq)(r)});return this.get(this.getUrl(i),{responseType:"blob"})}getCitySelect(){const s=this.getUrl("maintenance/api/station/city");return this.get(s)}getTrainLineSelect(s){const r=this.getUrl("maintenance/api/station/lineCode");return this.post(r,s)}getStationSelect(s){const r=this.getUrl("maintenance/api/station/stationName");return this.post(r,s)}instationLocationSelect(s){const r=this.getUrl("maintenance/api/station/inStationLocation");return this.post(r,s)}doorWaySelect(s){const r=this.getUrl("maintenance/api/station/doorwayNumber");return this.post(r,s)}systemSelect(){const s=this.getUrl("maintenance/api/asset/getByParamWithoutStation");return this.get(s)}subSystemSelect(s){const r=this.getUrl(`maintenance/api/asset/getByParamWithoutStation?${s}`);return this.get(r)}itemOptionsSelect(s){const r=this.getUrl(`maintenance/api/asset/getByParamWithoutStation?${s}`);return this.get(r)}}return o.\u0275fac=function(s){return new(s||o)(v.LFG(t.eN),v.LFG(g.yh),v.LFG(D.k))},o.\u0275prov=v.Yz7({token:o,factory:o.\u0275fac}),o})()},92935:(x,T,a)=>{"use strict";a.d(T,{$:()=>M}),a(38014);var u=a(3927),C=a(27221),n=a(86181),v=a(94650),t=a(80529),g=a(28555),D=a(91599);let M=(()=>{class o extends u.su{constructor(s,r,i){super(s,r),this.http=s,this.store=r,this.modelName="WalkInRecord",this.baseUrl="carpark/api/condo/queryVisitorWalkIn",this.handleError=i.createHandleError(`${this.modelName}Service`)}filterModel(s,r){const i=(0,n.U8)(`${this.baseUrl}`,{...s,...(0,n.jq)(r)});return this.get(this.getUrl(i)).pipe((0,C.K)(this.handleError(`${this.modelName}Filter`,{}))).map(h=>Array.isArray(h)?(0,u.eC)(h):(0,u.O7)(h))}clearHandle(s){const r=this.getUrl(`maintenance/api/transaction?id=${s||""}`);return console.log(r,"\u8def\u5f84"),this.delete(r)}exportEecel(s,r){const i=(0,n.U8)("carpark/api/condo/exportWalkIn",{...s,...(0,n.jq)(r)});return this.get(this.getUrl(i),{responseType:"blob"})}}return o.\u0275fac=function(s){return new(s||o)(v.LFG(t.eN),v.LFG(g.yh),v.LFG(D.k))},o.\u0275prov=v.Yz7({token:o,factory:o.\u0275fac}),o})()},76916:(x,T,a)=>{"use strict";a.d(T,{G:()=>r});var f=a(34793),u=a(92198),C=a(38014),n=a(94650),v=a(89383),t=a(60097),g=a(36895);function D(i,h){if(1&i&&(n.TgZ(0,"a",14)(1,"span",15),n._uU(2),n.ALo(3,"translate"),n.qZA()()),2&i){const e=n.oxw().$implicit;n.xp6(2),n.hij(" ",n.lcZ(3,1,e.label)," ")}}function M(i,h){if(1&i&&(n.TgZ(0,"a",16)(1,"span",15),n._uU(2),n.ALo(3,"translate"),n.qZA()()),2&i){const e=n.oxw(),c=e.$implicit,d=e.last,y=n.oxw(2);n.Q6J("routerLink",c.url)("queryParams",d&&y.route.snapshot.queryParams),n.xp6(2),n.hij(" ",n.lcZ(3,3,c.label)," ")}}function o(i,h){if(1&i&&(n.ynx(0),n.TgZ(1,"li",10)(2,"span"),n._uU(3," > "),n.qZA()(),n.TgZ(4,"li",11),n.YNc(5,D,4,3,"a",12),n.YNc(6,M,4,5,"a",13),n.qZA(),n.BQk()),2&i){const e=h.first;n.xp6(5),n.Q6J("ngIf",e),n.xp6(1),n.Q6J("ngIf",!e)}}function l(i,h){if(1&i){const e=n.EpF();n.TgZ(0,"div",1)(1,"div",2)(2,"div",3),n._UZ(3,"h3",4),n.TgZ(4,"ul",5)(5,"li",6)(6,"a",7),n.NdJ("click",function(){n.CHM(e);const d=n.oxw();return n.KtG(d.jumpHome())}),n._UZ(7,"i",8),n.qZA()(),n.YNc(8,o,7,2,"ng-container",9),n.qZA()(),n.TgZ(9,"div"),n.Hsn(10),n.qZA()()()}if(2&i){const e=n.oxw();n.xp6(3),n.Q6J("innerHTML",e.title,n.oJD),n.xp6(5),n.Q6J("ngForOf",e.breads)}}const s=["*"];let r=(()=>{class i{constructor(e,c,d,y){this.router=e,this.route=c,this.translate=d,this._carparkService=y,this.breads=[],this.loginUser=""}ngOnInit(){let e=JSON.parse(localStorage.getItem("user-roles"))[0];this.loginUser=e,console.log(this.loginUser,"\u4fe1\u606f"),this.breads=this.buildBreadCrumb(this.route.root),this.translate.get(this.breads[0].label).subscribe(d=>{this.label=d}),this.router.events.pipe((0,u.h)(d=>d instanceof f.m2)).subscribe(()=>{this.breads=this.buildBreadCrumb(this.route.root)})}buildBreadCrumb(e,c=[""],d=[]){const y=e.snapshot.url[0]&&e.snapshot.url[0].path,b=[...c,y],U={...this.extractBreadcrumb(e),url:b},L=y&&U.label?[...d,U]:d;return this.title=U.title||this.title||"",this.isMotorist&&"My Vehicle(s)"===U.label&&(this.title="My Vehicle(s)"),e.firstChild?y?this.buildBreadCrumb(e.firstChild,b,L):this.buildBreadCrumb(e.firstChild,c,d):(this.translate.get(this.title).subscribe(R=>{this.title=R}),L)}get isMotorist(){return this._carparkService.isMotorist()}extractBreadcrumb(e){return e.snapshot.data.breadcrumb instanceof Function?e.snapshot.data.breadcrumb(e):e.snapshot.data.breadcrumb}jumpHome(){let e=JSON.parse(localStorage.getItem("user-roles"))[0]??"";this.router.navigate(e.length?[C.gpL[e]]:["/"])}}return i.\u0275fac=function(e){return new(e||i)(n.Y36(f.F0),n.Y36(f.gz),n.Y36(v.sK),n.Y36(t.x))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-title-bar"]],ngContentSelectors:s,decls:1,vars:1,consts:[["class","m-subheader",4,"ngIf"],[1,"m-subheader"],[1,"d-flex","align-items-center"],[1,"mr-auto"],[1,"m-subheader__title","m-subheader__title--separator","text-main",3,"innerHTML"],[1,"m-subheader__breadcrumbs","m-nav","m-nav--inline"],[1,"m-nav__item","m-nav__item--home"],[1,"m-nav__link","m-nav__link--icon",3,"click"],[1,"m-nav__link-icon","la","la-home"],[4,"ngFor","ngForOf"],[1,"m-nav__separator"],[1,"m-nav__item"],["class","m-nav__link",4,"ngIf"],["class","m-nav__link",3,"routerLink","queryParams",4,"ngIf"],[1,"m-nav__link"],[1,"m-nav__link-text"],[1,"m-nav__link",3,"routerLink","queryParams"]],template:function(e,c){1&e&&(n.F$t(),n.YNc(0,l,11,2,"div",0)),2&e&&n.Q6J("ngIf","ROLE_TPO_PARTNER"!==c.loginUser)},dependencies:[g.sg,g.O5,f.yS,v.X$],encapsulation:2}),i})()},84566:(x,T,a)=>{"use strict";a.r(T),a.d(T,{WalkInRecordModule:()=>Z});var f=a(36895),u=a(79118),n=(a(86181),a(15439)),v=a(94327),t=a(94650),g=a(92935),D=a(76916),M=a(9215),o=a(40269),l=a(24006),s=a(71198),r=a(87501);const i=["confirmModal"],h=["inputfile"];function e(E,A){1&E&&(t.TgZ(0,"div",21),t._uU(1," success! "),t.qZA())}function c(E,A){if(1&E){const p=t.EpF();t.TgZ(0,"td",22),t.NdJ("click",function(){const O=t.CHM(p).index;t.oxw();const W=t.MAs(37);return t.KtG(W.toggleItem(O))}),t.TgZ(1,"span"),t._UZ(2,"i",23),t.qZA()(),t.TgZ(3,"td",24)(4,"span"),t._uU(5),t.qZA()(),t.TgZ(6,"td",24)(7,"span"),t._uU(8),t.qZA()(),t.TgZ(9,"td",24)(10,"span"),t._uU(11),t.qZA()(),t.TgZ(12,"td",24)(13,"span"),t._uU(14),t.qZA()(),t.TgZ(15,"td",24)(16,"span"),t._uU(17),t.qZA()(),t.TgZ(18,"td",24)(19,"span"),t._uU(20),t.qZA()()}if(2&E){const p=A.$implicit,m=A.expanded,_=t.oxw();t.xp6(1),t.Udp("width",_.tableHeaders[0].width),t.xp6(1),t.Q6J("ngClass",m?"fa-caret-down":"fa-caret-right"),t.xp6(2),t.Udp("width",_.tableHeaders[1].width),t.xp6(1),t.hij(" ",p.carPark.carParkCode," "),t.xp6(2),t.Udp("width",_.tableHeaders[2].width),t.xp6(1),t.lnq(" ",p.blk," - ",p.level," - ",p.unit," "),t.xp6(2),t.Udp("width",_.tableHeaders[3].width),t.xp6(1),t.hij(" ",p.entryType," "),t.xp6(2),t.Udp("width",_.tableHeaders[4].width),t.xp6(1),t.hij(" ",p.visitDate," "),t.xp6(2),t.Udp("width",_.tableHeaders[5].width),t.xp6(1),t.hij(" ",p.companyName," "),t.xp6(2),t.Udp("width",_.tableHeaders[6].width),t.xp6(1),t.hij(" ",p.hpNumber," ")}}let d=(()=>{class E extends u.Gw{constructor(p){super(),this.walkInRecordService=p,this.timeRange=[],this.entryType="",this.blkArr="",this.blk="",this.level="",this.unit="",this.visitDate="",this.successShow=!1,this.tableHeaders=[{text:"",width:"20px"},{text:"Carpark",column:"",width:"150px"},{text:"Blk/Unit#",column:"",width:"200px"},{text:"Entry Type",column:"",width:"200x"},{text:"Entry Time",column:"",width:"220px"},{text:"Company Name",column:"",width:"150px"},{text:"Phone Num",column:"",width:"200px"}],this.loading=!1,this.data=[]}get filterParams(){return{sort:"id,desc",entryType:this.entryType,blk:this.blk,level:this.level,unit:this.unit,visitDate:this.visitDate}}reloadData(){this.reloadDataService(this.walkInRecordService)}pageChanged(p){this.pagination=p,this.reloadData()}ngOnInit(){this.reloadData()}entryChange(){this.pagination.page=1,this.reloadData()}inputChange(){this.blk=this.blkArr.split("-")[0],this.level=this.blkArr.split("-")[1],this.unit=this.blkArr.split("-")[2],this.pagination.page=1,this.reloadData()}getVisitDate(p){this.pagination.page=1,this.visitDate=n(p[0]).format("YYYY-MM-DD")+" - "+n(p[1]).format("YYYY-MM-DD"),this.reloadData()}exportExcel(){this.walkInRecordService.exportEecel(this.filterParams,this.pagination).subscribe(p=>{(0,v.saveAs)(p,"walkInRecord.csv")})}importExcel(){this.inputfile.nativeElement.click()}}return E.\u0275fac=function(p){return new(p||E)(t.Y36(g.$))},E.\u0275cmp=t.Xpm({type:E,selectors:[["app-walk-in-record"]],viewQuery:function(p,m){if(1&p&&(t.Gf(i,5),t.Gf(h,5)),2&p){let _;t.iGM(_=t.CRH())&&(m.confirmModal=_.first),t.iGM(_=t.CRH())&&(m.inputfile=_.first)}},features:[t.qOj],decls:40,vars:12,consts:[[1,"body-wrapper"],["class","alert alert-success col-12","role","alert","style","display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 0 auto;",4,"ngIf"],[1,"m-content"],[1,"m-portlet","m-portlet--tabs"],[1,"m-portlet__body","m-portlet__body--scrollable"],[1,"form-group","m-form__group","m-portlet__filters","col-12"],[1,"m-portlet__filter","col-3"],[1,"col-form-label","col-form-label-nowrap"],[1,"m-input-icon","m-input-icon--left"],["type","text","placeholder","",1,"form-control","m-input",3,"ngModel","debounce","ngModelChange","onDebounce"],[1,"m-input-icon__icon","m-input-icon__icon--left"],[1,"la","la-search"],["type","text","placeholder","172-2-6",1,"form-control","m-input",3,"ngModel","debounce","ngModelChange","onDebounce"],["bsDaterangepicker","",1,"form-control",3,"ngModel","ngModelChange"],["drp","bsDaterangepicker"],[1,"m-portlet__filter","col-2"],[1,"right-btn"],["type","button",1,"btn","btn-default","exportBtn",3,"click"],[3,"headers","items","pagination","pageChanged"],["driverTable",""],["rowTemplate",""],["role","alert",1,"alert","alert-success","col-12",2,"display","flex","justify-content","center","align-items","center","margin","0 auto"],[1,"m-datatable__cell","text-center",3,"click"],[1,"fa","text-primary",3,"ngClass"],[1,"m-datatable__cell"]],template:function(p,m){1&p&&(t.TgZ(0,"div",0),t._UZ(1,"app-title-bar"),t.YNc(2,e,2,0,"div",1),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),t._uU(9),t.qZA(),t.TgZ(10,"div",8)(11,"input",9),t.NdJ("ngModelChange",function(O){return m.entryType=O})("onDebounce",function(){return m.entryChange()}),t.qZA(),t.TgZ(12,"span",10)(13,"span"),t._UZ(14,"i",11),t.qZA()()()(),t.TgZ(15,"div",6)(16,"label",7),t._uU(17),t.qZA(),t.TgZ(18,"div",8)(19,"input",12),t.NdJ("ngModelChange",function(O){return m.blkArr=O})("onDebounce",function(){return m.inputChange()}),t.qZA(),t.TgZ(20,"span",10)(21,"span"),t._UZ(22,"i",11),t.qZA()()()(),t.TgZ(23,"div",6)(24,"label",7),t._uU(25),t.qZA(),t.TgZ(26,"div",8)(27,"input",13,14),t.NdJ("ngModelChange",function(O){return m.timeRange=O})("ngModelChange",function(O){return m.getVisitDate(O)}),t.qZA(),t.TgZ(29,"span",10)(30,"span"),t._UZ(31,"i",11),t.qZA()()()(),t.TgZ(32,"div",15)(33,"div",16)(34,"button",17),t.NdJ("click",function(){return m.exportExcel()}),t._uU(35," export"),t.qZA()()()(),t.TgZ(36,"app-datatable",18,19),t.NdJ("pageChanged",function(O){return m.pageChanged(O)}),t.YNc(38,c,21,23,"ng-template",null,20,t.W1O),t.qZA()()()()()),2&p&&(t.xp6(2),t.Q6J("ngIf",m.successShow),t.xp6(7),t.hij(" ","Entry Type",": "),t.xp6(2),t.Q6J("ngModel",m.entryType)("debounce",500),t.xp6(6),t.hij(" ","Blk/Unit#",": "),t.xp6(2),t.Q6J("ngModel",m.blkArr)("debounce",2e3),t.xp6(6),t.hij(" ","Entry Time",": "),t.xp6(2),t.Q6J("ngModel",m.timeRange),t.xp6(9),t.Q6J("headers",m.tableHeaders)("items",m.data)("pagination",m.pagination))},dependencies:[f.mk,f.O5,D.G,M.q,o.Uo,l.Fj,l.JJ,l.On,u.nE,s.T,r.F]}),E})();var y=a(59501),b=a(34793),U=a(21532),L=a(88796),R=a(30329),P=a(372),I=a(59245),S=a(71636),w=a(34984);const B=[{path:"",component:y.f,children:[{path:"",component:d}]}];let Z=(()=>{class E{}return E.\u0275fac=function(p){return new(p||E)},E.\u0275mod=t.oAB({type:E}),E.\u0275inj=t.cJS({providers:[S.w,g.$],imports:[f.ez,U.x,b.Bz.forChild(B),L.A0,l.u5,l.UX,R.D,P.kn,I.mr,w.Ns.forRoot({echarts:()=>a.e(4734).then(a.bind(a,14734))})]}),E})()},94327:function(x,T){var u;void 0!==(u=function(){"use strict";function n(o,l,s){var r=new XMLHttpRequest;r.open("GET",o),r.responseType="blob",r.onload=function(){M(r.response,l,s)},r.onerror=function(){console.error("could not download file")},r.send()}function v(o){var l=new XMLHttpRequest;l.open("HEAD",o,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function t(o){try{o.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),o.dispatchEvent(l)}}var g="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,D=g.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),M=g.saveAs||("object"!=typeof window||window!==g?function(){}:"download"in HTMLAnchorElement.prototype&&!D?function(o,l,s){var r=g.URL||g.webkitURL,i=document.createElement("a");i.download=l=l||o.name||"download",i.rel="noopener","string"==typeof o?(i.href=o,i.origin===location.origin?t(i):v(i.href)?n(o,l,s):t(i,i.target="_blank")):(i.href=r.createObjectURL(o),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){t(i)},0))}:"msSaveOrOpenBlob"in navigator?function(o,l,s){if(l=l||o.name||"download","string"!=typeof o)navigator.msSaveOrOpenBlob(function C(o,l){return typeof l>"u"?l={autoBom:!1}:"object"!=typeof l&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\ufeff",o],{type:o.type}):o}(o,s),l);else if(v(o))n(o,l,s);else{var r=document.createElement("a");r.href=o,r.target="_blank",setTimeout(function(){t(r)})}}:function(o,l,s,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof o)return n(o,l,s);var i="application/octet-stream"===o.type,h=/constructor/i.test(g.HTMLElement)||g.safari,e=/CriOS\/[\d]+/.test(navigator.userAgent);if((e||i&&h||D)&&typeof FileReader<"u"){var c=new FileReader;c.onloadend=function(){var b=c.result;b=e?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=b:location=b,r=null},c.readAsDataURL(o)}else{var d=g.URL||g.webkitURL,y=d.createObjectURL(o);r?r.location=y:location.href=y,r=null,setTimeout(function(){d.revokeObjectURL(y)},4e4)}});g.saveAs=M.saveAs=M,x.exports=M}.apply(T,[]))&&(x.exports=u)},34984:(x,T,a)=>{"use strict";a.d(T,{Ns:()=>r,_w:()=>s});var f=a(15861),u=a(94650),C=a(21086),n=a(68896),v=a(8929),t=a(20353),g=a(34202),D=a(66753),M=a(87545);class o{constructor(h){this.changes=h}static of(h){return new o(h)}notEmpty(h){if(this.changes[h]){const e=this.changes[h].currentValue;if(null!=e)return(0,C.of)(e)}return n.E}has(h){return this.changes[h]?(0,C.of)(this.changes[h].currentValue):n.E}notFirst(h){return this.changes[h]&&!this.changes[h].isFirstChange()?(0,C.of)(this.changes[h].currentValue):n.E}notFirstAndEmpty(h){if(this.changes[h]&&!this.changes[h].isFirstChange()){const e=this.changes[h].currentValue;if(null!=e)return(0,C.of)(e)}return n.E}}const l=new u.OlP("NGX_ECHARTS_CONFIG");let s=(()=>{class i{constructor(e,c,d){this.el=c,this.ngZone=d,this.autoResize=!0,this.loadingType="default",this.chartInit=new u.vpe,this.optionsError=new u.vpe,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartPieSelectChanged=this.createLazyEvent("pieselectchanged"),this.chartPieSelected=this.createLazyEvent("pieselected"),this.chartPieUnselected=this.createLazyEvent("pieunselected"),this.chartMapSelectChanged=this.createLazyEvent("mapselectchanged"),this.chartMapSelected=this.createLazyEvent("mapselected"),this.chartMapUnselected=this.createLazyEvent("mapunselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartFocusNodeAdjacency=this.createLazyEvent("focusnodeadjacency"),this.chartUnfocusNodeAdjacency=this.createLazyEvent("unfocusnodeadjacency"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.resize$=new v.xQ,this.echarts=e.echarts}ngOnChanges(e){const c=o.of(e);c.notFirstAndEmpty("options").subscribe(d=>this.onOptionsChange(d)),c.notFirstAndEmpty("merge").subscribe(d=>this.setOption(d)),c.has("loading").subscribe(d=>this.toggleLoading(!!d)),c.notFirst("theme").subscribe(()=>this.refreshChart())}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe((0,D.p)(100,t.z,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(()=>{this.animationFrameID=window.requestAnimationFrame(()=>this.resize$.next())})),this.resizeOb.observe(this.el.nativeElement))}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(e){this.chart&&(e?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading())}setOption(e,c){if(this.chart)try{this.chart.setOption(e,c)}catch(d){console.error(d),this.optionsError.emit(d)}}refreshChart(){var e=this;return(0,f.Z)(function*(){e.dispose(),yield e.initChart()})()}createChart(){const e=this.el.nativeElement;if(window&&window.getComputedStyle){const c=window.getComputedStyle(e,null).getPropertyValue("height");(!c||"0px"===c)&&(!e.style.height||"0px"===e.style.height)&&(e.style.height="400px")}return this.ngZone.runOutsideAngular(()=>("function"==typeof this.echarts?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:d})=>d(e,this.theme,this.initOpts)))}initChart(){var e=this;return(0,f.Z)(function*(){yield e.onOptionsChange(e.options),e.merge&&e.chart&&e.setOption(e.merge)})()}onOptionsChange(e){var c=this;return(0,f.Z)(function*(){!e||(c.chart||(c.chart=yield c.createChart(),c.chartInit.emit(c.chart)),c.setOption(c.options,!0))})()}createLazyEvent(e){return this.chartInit.pipe((0,M.w)(c=>new g.y(d=>(c.on(e,y=>this.ngZone.run(()=>d.next(y))),()=>{this.chart&&(this.chart.isDisposed()||c.off(e))}))))}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(l),u.Y36(u.SBq),u.Y36(u.R0b))},i.\u0275dir=u.lG2({type:i,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",loading:"loading",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartPieSelectChanged:"chartPieSelectChanged",chartPieSelected:"chartPieSelected",chartPieUnselected:"chartPieUnselected",chartMapSelectChanged:"chartMapSelectChanged",chartMapSelected:"chartMapSelected",chartMapUnselected:"chartMapUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartFocusNodeAdjacency:"chartFocusNodeAdjacency",chartUnfocusNodeAdjacency:"chartUnfocusNodeAdjacency",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],features:[u.TTD]}),i})(),r=(()=>{class i{static forRoot(e){return{ngModule:i,providers:[{provide:l,useValue:e}]}}static forChild(){return{ngModule:i}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({}),i})()}}]);