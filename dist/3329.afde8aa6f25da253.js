(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[3329,9226],{64050:(N,U,o)=>{"use strict";o.d(U,{F:()=>C}),o(38014);var h=o(3927),_=o(21086),d=o(27221),Z=o(24850),y=o(86181),u=o(94650),z=o(80529),b=o(28555),v=o(91599);let C=(()=>{class A extends h.su{constructor(p,l,s){super(p,l),this.http=p,this.store=l,this.modelName="Driver",this.baseUrl="api/drivers",this.handleError=s.createHandleError(`${this.modelName}Service`)}getDriversSimpleList(p,l){const s=(0,y.U8)(`${this.baseUrl}`,{...p,...(0,y.jq)(l)});return this.get(this.getUrl(s)).pipe((0,d.K)(()=>(0,_.of)([]))).map(m=>Array.isArray(m)?(0,h.eC)(m):(0,h.O7)(m))}getModel(p){const l=this.getUrl(`api/users/${p}`);return this.get(l).map(s=>({...s,mobile:s.mobile||{},address:s.address||{}}))}createModel(p){const l=this.getUrl("api/register");return this.post(l,p)}updateModel(p){const l=this.getUrl("api/users/");return this.put(l,p)}deleteModel(p){const l=this.getUrl(`api/users/${p}`);return this.delete(l)}searchModel(p){const l=this.getUrl(`carpark/api/drivers/filter/${p||""}`);return this.get(l).pipe((0,Z.U)(s=>s.content),(0,d.K)(()=>(0,_.of)([])))}getByCode(p){const l=this.getUrl(`carpark/api/drivers/${p}`);return this.get(l).pipe((0,d.K)(()=>(0,_.of)({})))}createModelApplication(p){const l=this.getUrl(`carpark/api/drivers/${p.driverCode}/seasons/applications`);return this.post(l,p)}getSimpleList(){return this.get(this.getUrl("carpark/api/drivers/simple-drivers-list"))}getEnforcementList(){return this.get(this.getUrl("carpark/api/drivers/enforcement"))}createAccount(p,l){const s=this.getUrl("api/register");return this.post(s,{hpNumber:p,password:l})}activeAccount(p,l){const s=this.getUrl("api/account/SMS_activate");return this.post(s,{hpNumber:p,key:l})}getBatchUser(p){return this.get(this.getUrl(`carpark/api/batch/user/info?status=${p}&size=99999`))}putBatchUser(p,l,s){const m=this.getUrl("carpark/api/batch/user/info");return this.put(m,{id:p,status:l,remarks:s})}}return A.\u0275fac=function(p){return new(p||A)(u.LFG(z.eN),u.LFG(b.yh),u.LFG(v.k))},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac}),A})()},51766:(N,U,o)=>{"use strict";o.d(U,{C:()=>C});var f=o(3927),h=o(86181),_=o(591),d=o(27221),Z=o(66708),y=o(94650),u=o(60097),z=o(28555),b=o(80529),v=o(91599);let C=(()=>{class A extends f.su{constructor(p,l,s,m){super(s,l),this.carparkService=p,this.store=l,this.http=s,this.$seasonData=new _.X({}),this.modelName="Carpark",this.handleError=m.createHandleError(`${this.modelName}Service`)}ngOnInit(){}handleDynamicUrl(){const p=JSON.parse(localStorage.getItem("user")).login;this.baseUrl=this.carparkService.isMotorist()&&Z.Z.isNotNull(p)?`carpark/api/drivers/${p}/seasons`:"carpark/api/season-parkings"}filterModel(p,l){return this.handleDynamicUrl(),super.filterModel(p,l).map(s=>s.data?s:{data:[],pagination:(0,h.f$)()})}filterModelOfCarpark(p,l,s){const m=this.getUrl((0,h.U8)(`carpark/api/season-parking/${p}/getList`,{...l,...(0,h.jq)(s)}));return this.get(m).pipe((0,d.K)(this.handleError(`${this.modelName}Filter`,{}))).map(T=>Array.isArray(T)?(0,f.eC)(T.slice(0,s.rowsPerPage+1)):(0,f.O7)(T))}filterModelOfVehicle(p,l,s){const m=this.getUrl((0,h.U8)(`carpark/api/vehicles/${p}/seasons`,{...l,...(0,h.jq)(s)}));return this.get(m).pipe((0,d.K)(this.handleError(`${this.modelName}Filter`,{}))).map(T=>Array.isArray(T)?(0,f.eC)(T.slice(0,s.rowsPerPage+1)):(0,f.O7)(T))}getIdentity(p){const l=this.getUrl(`carpark/api/seasons/applications/${p}`);return this.get(l)}downloadSessonPdf(p){const l=this.getUrl(`carpark/api/printBilling/seasoncode/pdf/${p}`);return this.get(l,{responseType:"blob"}).pipe((0,d.K)(this.handleError(`${this.modelName}Get`,{})))}getGroupSeason(p){const l=this.getUrl(`carpark/api/season-group/query/${p}`);return this.get(l)}applyHandle(p){return this.post(this.getUrl("carpark/api/season-group"),p)}clearHandle(p){return this.delete(this.getUrl(`carpark/api/season-group/clear/${p}`))}}return A.\u0275fac=function(p){return new(p||A)(y.LFG(u.x),y.LFG(z.yh),y.LFG(b.eN),y.LFG(v.k))},A.\u0275prov=y.Yz7({token:A,factory:A.\u0275fac}),A})()},4666:(N,U,o)=>{"use strict";o.d(U,{p:()=>A}),o(38014);var h=o(3927),_=o(86181),d=o(27221),Z=o(66708),y=o(94650),u=o(60097),z=o(93764),b=o(80529),v=o(28555),C=o(91599);let A=(()=>{class g extends h.su{constructor(l,s,m,T,x){super(m,T),this.carparkService=l,this.condoService=s,this.http=m,this.store=T,this.modelName="Transaction",this.handleError=x.createHandleError(`${this.modelName}Service`)}ngOnInit(){}handleDynamicUrl(){const l=JSON.parse(localStorage.getItem("user")).login;this.baseUrl=this.carparkService.isMotorist()&&Z.Z.isNotNull(l)?`carpark/api/drivers/${l}/transactions`:this.condoService.isCondoOwner()?"carpark/api/working-sessions/transactions":"carpark/api/car-parks/transactions"}filterModel(l,s){return this.handleDynamicUrl(),super.filterModel(l,s).map(m=>m.data?m:{data:[],pagination:(0,_.f$)()})}fetchAbnormalTransactions(l,s){const m=(0,_.U8)("carpark/api/car-parks/transactions/abnormal",{...l,...(0,_.jq)(s)});return this.get(this.getUrl(m)).map(h.O7)}fetchAbnormalTransaction(l){return this.get(this.getUrl(`carpark/api/parking-transactions/${l}`))}verifyAbnormalTransaction(l){return this.post(this.getUrl(`carpark/api/parking-transactions/${l.id}/update`),l)}filterByVehicle(l,s){const m=this.getUrl((0,_.U8)(`carpark/api/parking-transactions/plateNo/${l}`,{...(0,_.jq)(s)}));return this.get(m).pipe((0,d.K)(this.handleError(`${this.modelName}Filter`,{}))).map(T=>Array.isArray(T)?(0,h.eC)(T):(0,h.O7)(T))}createModel(l){const s=this.getUrl("carpark/api/parking-transactions-entry");return this.post(s,l)}closeTransactions(l){const s=this.getUrl(`carpark/api/close/working-sessions/${l}`);return this.put(s,null)}getFile(l){const s=this.getUrl(`carpark/api/printTransactionReceipt/pdf/parking_transaction/${l}`);return this.get(s,{responseType:"blob"})}findIndentByPage(l,s){const m=this.getUrl(`scp-app-ordermanagement/chargepile/findIndentByPage/${s.rowsPerPage}/${s.page}`);return this.post(m,l)}exportExcellist(l,s){const m=this.getUrl("scp-app-ordermanagement/chargepile/exportFindIndent");return this.post(m,l,{responseType:"blob"})}exportExcelDetail(l,s){const m=this.getUrl("scp-app-ordermanagement/chargepile/export/detail");return this.post(m,l,{responseType:"blob"})}exportCondoOwnerExcel(l){const s=(0,_.U8)("carpark/api/working-sessions/exportParkingTransaction",{...l});return this.get(this.getUrl(s),{responseType:"blob"})}}return g.\u0275fac=function(l){return new(l||g)(y.LFG(u.x),y.LFG(z.p),y.LFG(b.eN),y.LFG(v.yh),y.LFG(C.k))},g.\u0275prov=y.Yz7({token:g,factory:g.\u0275fac}),g})()},71942:(N,U,o)=>{"use strict";o.d(U,{f:()=>A});var f=o(38014),h=o(3927),_=o(86181),d=o(21086),Z=o(27221),y=o(66708),u=o(94650),z=o(60097),b=o(80529),v=o(28555),C=o(91599);let A=(()=>{class g extends h.su{constructor(l,s,m,T){super(s,m),this.carparkService=l,this.http=s,this.store=m,this.modelName="Vehicle",this.handleError=T.createHandleError(`${this.modelName}Service`),this.handleDynamicUrl()}ngOnInit(){}handleDynamicUrl(){const l=JSON.parse(localStorage.getItem("user")).login;this.baseUrl=this.carparkService.isMotorist()&&y.Z.isNotNull(l)?`carpark/api/drivers/${l}/vehicles`:"carpark/api/vehicle/get-vehicles"}getTelList(l,s){console.log(l);const m=this.getUrl((0,_.U8)("carpark/api/vehicle/vehicles",{...l,...(0,_.jq)(s)}));return this.get(m)}filterModel(l,s){const m=this.getUrl((0,_.U8)(this.baseUrl,{...l,...(0,_.jq)(s)}));return this.get(m).pipe((0,Z.K)(this.handleError(`${this.modelName}Filter`,{}))).map(T=>Array.isArray(T)?(0,h.eC)(T):(0,h.O7)(T))}updateVehicle(l){const s=this.getUrl(`carpark/api/drivers/${l.driverCode}/vehicles/${l.vehicleId}`);return this.patch(s,l.vehicle).pipe((0,Z.K)(this.handleError(`${this.modelName}Update`,{})))}getModel(l){const s=this.getUrl(`carpark/api/vehicle/${l}`);return this.get(s).pipe((0,Z.K)(this.handleError(`${this.modelName}Get`,{})))}deleteModel(l,s){const m=this.getUrl(`carpark/api/drivers/${l}/vehicles/${s}`);return this.delete(m).pipe((0,Z.K)(this.handleError(`${this.modelName}Delete`)))}deleteAdminModel(l){const s=this.getUrl(`carpark/api/admin/vehicle/${l}`);return this.delete(s).pipe((0,Z.K)(this.handleError(`${this.modelName}Delete`)))}createVehicle(l,s){const m=this.getUrl(`carpark/api/drivers/${l}/vehicles`);return this.post(m,s)}putUpdateVehicle(l,s){const m=this.getUrl(`carpark/api/drivers/${l}/vehicles/${s.id}`);return this.put(m,s)}getDriverCode(l){const s=this.getUrl(`carpark/api/drivers/${l}/driverCode`);return this.get(s)}createModel(l,s){const m=this.getUrl(`carpark/api/drivers/${l}/vehicles`);return this.post(m,s).pipe((0,Z.K)(this.handleError(`${this.modelName}Create`,{})))}createVehicleAdmin(l){const s=this.getUrl(`carpark/api/admin/vehicles/${l.mobile}`);return this.post(s,l).pipe((0,Z.K)(this.handleError(`${this.modelName}Create`,{})))}updateModel(l){const s=this.getUrl("carpark/api/admin/vehicle-changes");return this.post(s,l).pipe((0,Z.K)(this.handleError(`${this.modelName}Update`,{})))}getSimpleList(){const l=this.getUrl("carpark/api/vehicle/simple-vehicles-list");return this.get(l).pipe((0,Z.K)(this.handleError(`${this.modelName}SimpleList`,{})))}filterModelByDriver(l){const s=this.getUrl(`carpark/api/drivers/${l}/vehicles`);return this.get(s).pipe((0,Z.K)(()=>(0,d.of)([])))}isOperator(){const l=JSON.parse(localStorage.getItem("user-roles"));return!(!y.Z.isNotNull(l)||!l.includes(f.i44.Operator))}getUserVehicle(l,s){this.baseUrl=`carpark/api/drivers/${l}/vehicles`;const m=this.getUrl((0,_.U8)(this.baseUrl,{...(0,_.jq)(s)}));return this.get(m).pipe((0,Z.K)(this.handleError(`${this.modelName}Filter`,{}))).map(T=>Array.isArray(T)?(0,h.eC)(T):(0,h.O7)(T))}}return g.\u0275fac=function(l){return new(l||g)(u.LFG(z.x),u.LFG(b.eN),u.LFG(v.yh),u.LFG(C.k))},g.\u0275prov=u.Yz7({token:g,factory:g.\u0275fac}),g})()},52746:(N,U,o)=>{"use strict";o.d(U,{t:()=>d});var f=o(72986),h=o(591),_=o(94650);let d=(()=>{class Z{constructor(){this.loading=!1,this.pagination={totalCount:0,rowsPerPage:20,page:1,sortBy:null,descending:!0,totalPages:1},this.listData=[],this.hadGetData$=new h.X(!1)}get hadGetData(){return this.hadGetData$.getValue()}get filterParams(){return this._filterParams}set filterParams(u){this._filterParams=u}reloadDataService(u,z="filterModel"){this.loading=!0,this.hadGetData$.next(!1),u[z](this.filterParams,this.pagination).pipe((0,f.q)(1)).subscribe(b=>{if(b.pagination.page>b.pagination.totalPages)return this.pagination={...this.pagination,page:b.pagination.totalPages},this.reloadDataService(u);this.loading=!1,this.pagination={...this.pagination,totalCount:b.pagination.totalCount||b.pagination.totalElements},this.listData=b.data,this.hadGetData$.next(!0)},()=>{this.loading=!1,this.listData=[],this.pagination={...this.pagination,totalCount:0}})}onQueryParamsChange(u){const{pageSize:z,pageIndex:b}=u;this.pagination={...this.pagination,rowsPerPage:z,page:b},this.reloadData()}reloadData(){}ngOnInit(){}}return Z.\u0275fac=function(u){return new(u||Z)},Z.\u0275cmp=_.Xpm({type:Z,selectors:[["ng-component"]],decls:0,vars:0,template:function(u,z){},encapsulation:2}),Z})()},76916:(N,U,o)=>{"use strict";o.d(U,{G:()=>g});var f=o(34793),h=o(92198),_=o(38014),d=o(94650),Z=o(89383),y=o(60097),u=o(36895);function z(p,l){if(1&p&&(d.TgZ(0,"a",14)(1,"span",15),d._uU(2),d.ALo(3,"translate"),d.qZA()()),2&p){const s=d.oxw().$implicit;d.xp6(2),d.hij(" ",d.lcZ(3,1,s.label)," ")}}function b(p,l){if(1&p&&(d.TgZ(0,"a",16)(1,"span",15),d._uU(2),d.ALo(3,"translate"),d.qZA()()),2&p){const s=d.oxw(),m=s.$implicit,T=s.last,x=d.oxw(2);d.Q6J("routerLink",m.url)("queryParams",T&&x.route.snapshot.queryParams),d.xp6(2),d.hij(" ",d.lcZ(3,3,m.label)," ")}}function v(p,l){if(1&p&&(d.ynx(0),d.TgZ(1,"li",10)(2,"span"),d._uU(3," > "),d.qZA()(),d.TgZ(4,"li",11),d.YNc(5,z,4,3,"a",12),d.YNc(6,b,4,5,"a",13),d.qZA(),d.BQk()),2&p){const s=l.first;d.xp6(5),d.Q6J("ngIf",s),d.xp6(1),d.Q6J("ngIf",!s)}}function C(p,l){if(1&p){const s=d.EpF();d.TgZ(0,"div",1)(1,"div",2)(2,"div",3),d._UZ(3,"h3",4),d.TgZ(4,"ul",5)(5,"li",6)(6,"a",7),d.NdJ("click",function(){d.CHM(s);const T=d.oxw();return d.KtG(T.jumpHome())}),d._UZ(7,"i",8),d.qZA()(),d.YNc(8,v,7,2,"ng-container",9),d.qZA()(),d.TgZ(9,"div"),d.Hsn(10),d.qZA()()()}if(2&p){const s=d.oxw();d.xp6(3),d.Q6J("innerHTML",s.title,d.oJD),d.xp6(5),d.Q6J("ngForOf",s.breads)}}const A=["*"];let g=(()=>{class p{constructor(s,m,T,x){this.router=s,this.route=m,this.translate=T,this._carparkService=x,this.breads=[],this.loginUser=""}ngOnInit(){let s=JSON.parse(localStorage.getItem("user-roles"))[0];this.loginUser=s,console.log(this.loginUser,"\u4fe1\u606f"),this.breads=this.buildBreadCrumb(this.route.root),this.translate.get(this.breads[0].label).subscribe(T=>{this.label=T}),this.router.events.pipe((0,h.h)(T=>T instanceof f.m2)).subscribe(()=>{this.breads=this.buildBreadCrumb(this.route.root)})}buildBreadCrumb(s,m=[""],T=[]){const x=s.snapshot.url[0]&&s.snapshot.url[0].path,O=[...m,x],P={...this.extractBreadcrumb(s),url:O},S=x&&P.label?[...T,P]:T;return this.title=P.title||this.title||"",this.isMotorist&&"My Vehicle(s)"===P.label&&(this.title="My Vehicle(s)"),s.firstChild?x?this.buildBreadCrumb(s.firstChild,O,S):this.buildBreadCrumb(s.firstChild,m,T):(this.translate.get(this.title).subscribe(k=>{this.title=k}),S)}get isMotorist(){return this._carparkService.isMotorist()}extractBreadcrumb(s){return s.snapshot.data.breadcrumb instanceof Function?s.snapshot.data.breadcrumb(s):s.snapshot.data.breadcrumb}jumpHome(){let s=JSON.parse(localStorage.getItem("user-roles"))[0]??"";this.router.navigate(s.length?[_.gpL[s]]:["/"])}}return p.\u0275fac=function(s){return new(s||p)(d.Y36(f.F0),d.Y36(f.gz),d.Y36(Z.sK),d.Y36(y.x))},p.\u0275cmp=d.Xpm({type:p,selectors:[["app-title-bar"]],ngContentSelectors:A,decls:1,vars:1,consts:[["class","m-subheader",4,"ngIf"],[1,"m-subheader"],[1,"d-flex","align-items-center"],[1,"mr-auto"],[1,"m-subheader__title","m-subheader__title--separator","text-main",3,"innerHTML"],[1,"m-subheader__breadcrumbs","m-nav","m-nav--inline"],[1,"m-nav__item","m-nav__item--home"],[1,"m-nav__link","m-nav__link--icon",3,"click"],[1,"m-nav__link-icon","la","la-home"],[4,"ngFor","ngForOf"],[1,"m-nav__separator"],[1,"m-nav__item"],["class","m-nav__link",4,"ngIf"],["class","m-nav__link",3,"routerLink","queryParams",4,"ngIf"],[1,"m-nav__link"],[1,"m-nav__link-text"],[1,"m-nav__link",3,"routerLink","queryParams"]],template:function(s,m){1&s&&(d.F$t(),d.YNc(0,C,11,2,"div",0)),2&s&&d.Q6J("ngIf","ROLE_TPO_PARTNER"!==m.loginUser)},dependencies:[u.sg,u.O5,f.yS,Z.X$],encapsulation:2}),p})()},13309:(N,U,o)=>{"use strict";o.d(U,{p:()=>x});var f=o(36895),h=o(24006),_=o(34793),d=o(372),Z=o(60097),y=o(4666),u=o(30329),z=o(21532),b=o(88796),v=o(59245),C=o(89518),A=o(36511),g=o(80529),p=o(89383),l=o(19832),s=o(29252),m=o(94650);function T(O){return new l.w(O,"../assets/i18n/",".json")}let x=(()=>{class O{}return O.\u0275fac=function(S){return new(S||O)},O.\u0275mod=m.oAB({type:O}),O.\u0275inj=m.cJS({providers:[y.p,Z.x,A.I],imports:[f.ez,h.u5,_.Bz,z.x,u.D,d.kn,v.mr,b.A0,C.H3,s.E7,p.aw.forChild({loader:{provide:p.Zw,useFactory:T,deps:[g.eN]}})]}),O})()},43329:(N,U,o)=>{"use strict";o.r(U),o.d(U,{VehicleManagementModule:()=>$t,createTranslateLoader:()=>de});var f=o(36895),h=o(24006),_=o(34793),d=o(372),Z=o(15128),y=o(87026),u=o(36511),z=o(64050),b=o(91599),v=o(42684),C=o(51766),A=o(4666),g=o(71942),p=o(457),l=o(30329),s=o(74564),m=o(59501),T=o(13309),x=o(38014),O=o(79118),P=o(15035),S=o(72986),k=o(52746),e=o(94650),E=o(89383),V=o(73325),J=o(29562),F=o(47044),w=o(38231),K=o(834),D=o(40269);function me(i,c){if(1&i&&(e._UZ(0,"nz-option",12),e.ALo(1,"titlecase")),2&i){const t=c.$implicit;e.Q6J("nzValue",t.value)("nzLabel",e.lcZ(1,2,t.value))}}function he(i,c){if(1&i&&(e._UZ(0,"nz-option",12),e.ALo(1,"titlecase")),2&i){const t=c.$implicit;e.Q6J("nzValue",t.value)("nzLabel",e.lcZ(1,2,t.value))}}function ue(i,c){if(1&i&&e._uU(0),2&i){const t=c.range;e.lnq(" ",t[0],"-",t[1]," of ",c.$implicit," items\n")}}function _e(i,c){if(1&i&&(e.TgZ(0,"th",13),e._uU(1),e.qZA()),2&i){const t=c.$implicit;e.Q6J("nzWidth",c.first?"60px":""),e.xp6(1),e.Oqu(t.text)}}const ge=function(i){return["../edit",i]};function ve(i,c){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr")(2,"td",14),e.NdJ("nzExpandChange",function(a){const M=e.CHM(t).$implicit,L=e.oxw();return e.KtG(L.onExpandChange(M.id,a))}),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"span"),e._UZ(7,"img",15),e.qZA(),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.ALo(14,"date"),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.TgZ(23,"td")(24,"button",16),e._UZ(25,"i",17),e.qZA(),e.TgZ(26,"nz-dropdown-menu",null,18)(28,"ul",19)(29,"li",20),e._UZ(30,"i",21),e.TgZ(31,"span"),e._uU(32,"Edit Season Parking"),e.qZA()(),e.TgZ(33,"li",22),e.NdJ("click",function(){const r=e.CHM(t).$implicit,M=e.oxw();return e.KtG(M.approve(r.id))}),e._UZ(34,"i",23),e.TgZ(35,"span"),e._uU(36,"Renew"),e.qZA()()()()()(),e.TgZ(37,"tr",24)(38,"nz-table",25)(39,"thead")(40,"tr")(41,"th"),e._uU(42,"Identity Type"),e.qZA(),e.TgZ(43,"th"),e._uU(44,"Identity No."),e.qZA(),e.TgZ(45,"th"),e._uU(46,"Address"),e.qZA()()(),e.TgZ(47,"tbody")(48,"tr")(49,"td"),e._uU(50),e.qZA(),e.TgZ(51,"td"),e._uU(52),e.qZA(),e.TgZ(53,"td"),e._uU(54),e.qZA()()()()(),e.BQk()}if(2&i){const t=c.$implicit,n=c.index,a=e.MAs(27),r=e.oxw();e.xp6(1),e.ekj("ant-table-row-odd",n%2==1),e.xp6(1),e.Q6J("nzExpand",r.expandSet.has(t.id)),e.xp6(2),e.Oqu(t.code),e.xp6(3),e.Q6J("src",r.vehicleIcon(null==t.vehicle?null:t.vehicle.vehicleType),e.LSH),e.xp6(1),e.hij(" ",null==t.vehicle?null:t.vehicle.vehicleNumber," "),e.xp6(2),e.Oqu(e.xi3(11,21,null==t.startDate?null:t.startDate.split("[")[0],"d LLL yyyy")),e.xp6(3),e.Oqu(e.xi3(14,24,null==t.endDate?null:t.endDate.split("[")[0],"d LLL yyyy")),e.xp6(3),e.AsE("",null==t.driver?null:t.driver.firstName," ",null==t.driver?null:t.driver.lastName,""),e.xp6(2),e.Oqu(r.getDriverNumber(t.driver)),e.xp6(2),e.Oqu(null==t.driver?null:t.driver.email),e.xp6(2),e.Oqu(null==t.carpark?null:t.carpark.code),e.xp6(2),e.Q6J("nzDropdownMenu",a)("nzPlacement","topCenter"),e.xp6(5),e.Q6J("routerLink",e.VKq(27,ge,t.id)),e.xp6(8),e.Q6J("nzExpand",r.expandSet.has(t.id)),e.xp6(1),e.Q6J("nzShowPagination",!1),e.xp6(12),e.Oqu(null==t.vehicle?null:t.vehicle.vehicleType),e.xp6(2),e.Oqu(null==t.vehicle?null:t.vehicle.vehicleNumber),e.xp6(2),e.Oqu(null==t.driver?null:t.driver.email)}}let fe=(()=>{class i extends k.t{constructor(t,n,a,r,M,L){super(),this.router=t,this.route=n,this.vehicleService=a,this.seasonParkingService=r,this.codeTablesService=M,this.translate=L,this.tableHeaders=[{text:"",width:"30px",align:O.iW.Center},{text:"ID",column:"id",width:"80px"},{text:"Vehicle",column:"vehicle",width:"120px"},{text:"Start Date",column:"startDate",width:"120px"},{text:"End Date",column:"endDate",width:"120px"},{text:"User Name",column:"userName",width:"100px"},{text:"Mobile",column:"mobile",width:"120px"},{text:"Email",column:"email",width:"80px"},{text:"Car Park",column:"carPark",width:"80px"},{text:"Actions",width:"80px"}],this.transactionStatus="",this.transactionType="",this.status="",this.type="",this.timeRange=[],this.bsConfig={containerClass:"theme-light",showWeekNumbers:!1},this.vehicleIcon=x.mts,this.expandSet=new Set}get filterParams(){return{status:this.status,type:this.type,from:this.timeRange[0]&&(0,P.W8)(this.timeRange[0]),to:this.timeRange[1]&&(0,P.W8)(this.timeRange[1])}}ngOnInit(){this.statuses$=this.codeTablesService.filterModelByType(x.BcL.ParkingStatus).pipe((0,S.q)(1)),this.types$=this.codeTablesService.filterModelByType(x.BcL.ParkingType).pipe((0,S.q)(1)),this.reloadData();const t=this.tableHeaders.map(n=>n.text);this.translate.get(t).subscribe(n=>{this.tableHeaders.forEach(a=>{for(let r in n)n.hasOwnProperty(r)&&a.text===r&&(a.text=n[r])})})}displayName(t){return(0,x.ssW)(t)}getDriverNumber(t){return t?`${t.mobile.countryCode||""} ${t.mobile.number}`.trim():""}reloadData(){this.loading=!0,this.seasonParkingService.filterModelOfVehicle(this.route.parent.parent.snapshot.data.item.vehicleNumber,this.filterParams,this.pagination).subscribe(t=>{this.loading=!1,this.pagination={...this.pagination,totalCount:t.pagination.totalCount},this.listData=t.data},()=>{this.loading=!1,this.listData=[],this.pagination={...this.pagination,totalCount:0}})}pageChanged(t){this.pagination=t,this.reloadData()}filterTransaction(){}onExpandChange(t,n){n?this.expandSet.add(t):this.expandSet.delete(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.F0),e.Y36(_.gz),e.Y36(g.f),e.Y36(C.C),e.Y36(u.I),e.Y36(E.sK))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vehicle-detail-season"]],features:[e.qOj],decls:32,vars:30,consts:[[1,"form-group","m-form__group","m-portlet__filters"],[1,"filter-wrap"],[1,"filter-item"],[1,"filter-label"],["nzPlaceHolder","Please Select",2,"width","160px",3,"ngModel","nzDropdownMatchSelectWidth","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowSizeChanger","nzShowTotal","nzQueryParams"],["basicTable",""],[3,"nzWidth",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],[3,"nzWidth"],[3,"nzExpand","nzExpandChange"],["alt","",3,"src"],["nz-dropdown","","nzTrigger","click",1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--outline-2x","m-btn--pill","no-border",3,"nzDropdownMenu","nzPlacement"],[1,"la","la-ellipsis-h"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"routerLink"],[1,"la","la-edit",2,"margin-right","4px"],["nz-menu-item","",3,"click"],[1,"la","la-refresh",2,"margin-right","4px"],[3,"nzExpand"],["nzSize","small","nzTemplateMode","",3,"nzShowPagination"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"nz-select",4),e.NdJ("ngModelChange",function(r){return n.status=r})("ngModelChange",function(){return n.reloadData()}),e.YNc(7,me,2,4,"nz-option",5),e.ALo(8,"async"),e.qZA()()(),e.TgZ(9,"div",1)(10,"div",2)(11,"span",3),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"nz-select",4),e.NdJ("ngModelChange",function(r){return n.type=r})("ngModelChange",function(){return n.reloadData()}),e.YNc(15,he,2,4,"nz-option",5),e.ALo(16,"async"),e.qZA()()(),e.TgZ(17,"div",1)(18,"div",2)(19,"span",3),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"nz-range-picker",6),e.NdJ("ngModelChange",function(r){return n.timeRange=r})("ngModelChange",function(){return n.reloadData()}),e.qZA()()()(),e.YNc(23,ue,1,3,"ng-template",null,7,e.W1O),e.TgZ(25,"nz-table",8,9),e.NdJ("nzQueryParams",function(r){return n.onQueryParamsChange(r)}),e.TgZ(27,"thead")(28,"tr"),e.YNc(29,_e,2,2,"th",10),e.qZA()(),e.TgZ(30,"tbody"),e.YNc(31,ve,55,29,"ng-container",11),e.qZA()()),2&t){const a=e.MAs(24),r=e.MAs(26);e.xp6(4),e.hij("",e.lcZ(5,20,"Status"),":"),e.xp6(2),e.Q6J("ngModel",n.status)("nzDropdownMatchSelectWidth",!1),e.xp6(1),e.Q6J("ngForOf",e.lcZ(8,22,n.statuses$)),e.xp6(5),e.hij("",e.lcZ(13,24,"Type"),":"),e.xp6(2),e.Q6J("ngModel",n.type)("nzDropdownMatchSelectWidth",!1),e.xp6(1),e.Q6J("ngForOf",e.lcZ(16,26,n.types$)),e.xp6(5),e.hij("",e.lcZ(21,28,"Time Range"),":"),e.xp6(2),e.Q6J("ngModel",n.timeRange),e.xp6(3),e.Q6J("nzData",n.listData)("nzFrontPagination",!1)("nzLoading",n.loading)("nzTotal",n.pagination.totalCount)("nzPageSize",n.pagination.rowsPerPage)("nzPageIndex",n.pagination.page)("nzShowSizeChanger",!0)("nzShowTotal",a),e.xp6(4),e.Q6J("ngForOf",n.tableHeaders),e.xp6(2),e.Q6J("ngForOf",r.data)}},dependencies:[f.sg,h.JJ,h.On,_.rH,V.wO,V.r9,J.cm,J.RR,F.w,w.Ip,w.Vq,K.uw,K.wS,D.N8,D.Uo,D._C,D.h7,D.Om,D.p0,D.$Z,D.d3,D.Vk,f.Ov,f.rS,f.uU,E.X$],encapsulation:2}),i})();var Te=o(86181),Ce=o(17489),Me=o(94327),xe=o(15439),I=o(60097),Ze=o(93764),H=o(77364);function Ae(i,c){if(1&i&&e._uU(0),2&i){const t=c.range;e.lnq(" ",t[0],"-",t[1]," of ",c.$implicit," items\n")}}function ye(i,c){if(1&i&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&i){const t=c.$implicit;e.xp6(1),e.Oqu(t.text)}}const be=function(i){return["/vehicle-management",i]};function ze(i,c){if(1&i&&(e.TgZ(0,"a",7)(1,"span"),e._UZ(2,"img",8),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA()()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.Q6J("routerLink",e.VKq(3,be,t.vehicle.id)),e.xp6(2),e.Q6J("src",n.vehicleTypeLogo(t),e.LSH),e.xp6(2),e.Oqu(null==t.vehicle?null:t.vehicle.vehicleNumber)}}function De(i,c){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.iuNumber)}}const Ue=function(i){return["/carparks",i]};function Oe(i,c){if(1&i&&(e.TgZ(0,"a",7),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.Q6J("routerLink",e.VKq(2,Ue,t.carpark.id)),e.xp6(1),e.hij(" ",(null==t.carpark?null:t.carpark.name)||""," ")}}function Ee(i,c){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,(null==t.chargeSummary||null==t.chargeSummary.total?null:t.chargeSummary.total.amount)/100))}}function Ne(i,c){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"paymentMethodPipe"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.paymentMethod))}}function Pe(i,c){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"paymentStatusPipe"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.paymentStatus))}}function Se(i,c){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.refId)}}function Le(i,c){if(1&i&&(e.TgZ(0,"td"),e._UZ(1,"span"),e._uU(2," \xa0 "),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"titlecase"),e.qZA()()),2&i){const t=e.oxw().$implicit,n=e.oxw();let a,r;e.xp6(1),e.Gre("m-badge m-badge--",(null==(a=n.getTransactionType(t.type))?null:a.color)||"info"," m-badge--dot"),e.xp6(2),e.Gre("m--font-bold m--font-",(null==(r=n.getTransactionType(t.type))?null:r.color)||"info",""),e.xp6(1),e.hij(" ",e.lcZ(5,7,n.getTransactionTypeString(t.type))," ")}}function we(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"li",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw();return e.KtG(r.download(a))}),e._UZ(1,"i",16),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()}2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"Download Receipt")))}function Ie(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"td")(1,"button",9),e._UZ(2,"i",10),e.qZA(),e.TgZ(3,"nz-dropdown-menu",null,11)(5,"ul",12)(6,"li",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw();return e.KtG(r.gotoUpdate(a.id))}),e._UZ(7,"i",14),e.TgZ(8,"span"),e._uU(9),e.ALo(10,"translate"),e.qZA()(),e.YNc(11,we,5,3,"li",15),e.qZA()()()}if(2&i){const t=e.MAs(4),n=e.oxw(2);e.xp6(1),e.Q6J("nzDropdownMenu",t)("nzPlacement","topCenter"),e.xp6(8),e.Oqu(e.lcZ(10,4,"Edit Transaction")),e.xp6(2),e.Q6J("ngIf",n.downloadRole())}}function Ve(i,c){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e.YNc(2,ze,5,5,"a",5),e.qZA(),e.YNc(3,De,2,1,"td",6),e.TgZ(4,"td"),e.YNc(5,Oe,2,4,"a",5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"date"),e._UZ(9,"br"),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.ALo(14,"date"),e._UZ(15,"br"),e._uU(16),e.ALo(17,"date"),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.qZA(),e.YNc(20,Ee,3,3,"td",6),e.YNc(21,Ne,3,3,"td",6),e.YNc(22,Pe,3,3,"td",6),e.YNc(23,Se,2,1,"td",6),e.YNc(24,Le,6,9,"td",6),e.YNc(25,Ie,12,6,"td",6),e.qZA()),2&i){const t=c.$implicit,n=c.index,a=e.oxw();e.ekj("ant-table-row-odd",n%2==1),e.xp6(2),e.Q6J("ngIf",t.vehicle),e.xp6(1),e.Q6J("ngIf",a.setTableContent("iuNumber").show),e.xp6(2),e.Q6J("ngIf",t.carpark),e.xp6(2),e.hij(" ",e.xi3(8,16,t.startTime,"d LLL yyyy")," "),e.xp6(3),e.hij(" ",e.xi3(11,19,t.startTime,"h:mm:ss a")," "),e.xp6(3),e.hij(" ",e.xi3(14,22,t.endTime,"d LLL yyyy")," "),e.xp6(3),e.hij(" ",e.xi3(17,25,t.endTime,"h:mm:ss a")," "),e.xp6(3),e.Oqu(t.duration||0),e.xp6(1),e.Q6J("ngIf",a.setTableContent("paymentAmount").show),e.xp6(1),e.Q6J("ngIf",a.setTableContent("paymentmethod").show),e.xp6(1),e.Q6J("ngIf",a.setTableContent("paymentstatus").show),e.xp6(1),e.Q6J("ngIf",a.setTableContent("Referenceid").show),e.xp6(1),e.Q6J("ngIf",a.setTableContent("type").show),e.xp6(1),e.Q6J("ngIf",a.notOwnerAndOperator)}}const q=[{text:"Vehicle No.",column:"vehiclePlateNo",width:"120px"},{text:"IU No.",column:"iuNumber",width:"120px"},{text:"Car Park",column:"carParkId",width:"160px"},{text:"Entry Time",column:"entryDateTime",width:"120px"},{text:"Exit Time",column:"exitDateTime",width:"120px"},{text:"Duration(min)",column:"duration",width:"80px"},{text:"Amount",column:"paymentAmount",width:"100px"},{text:"Type",column:"type",width:"80px"}],Je=[...q,{text:"Action",column:"action",width:"60px"}];let Fe=(()=>{class i{constructor(t,n,a,r,M,L){this.router=t,this.translate=n,this.carparkService=a,this.vehicleService=r,this.transactionService=M,this.condoService=L,this.loading=!1,this.pageChange=new e.vpe,this.pagination=(0,Te.f$)(),this.data=[],this.tableHeaders=Je,this.setTableHeaders()}vehicleTypeLogo(t){return x.php.filter(n=>n.value===t.vehicle.vehicleType).map(n=>n.icon)[0]}getStatusOption(t,n){const a=x.EKt.filter(r=>r.value===t.status).map(r=>r[n]);return a.length>0?a[0]:(0,Ce.capitalize)(t.status)}getTransactionType(t){return x.L0I.find(n=>n.value===t)}getTransactionTypeString(t){return"openParking"===t||"Open Parking"===t?"Hourly Parking":t}pageChanged(t){this.pagination=t,this.pageChange.emit(this.pagination)}onQueryParamsChange(t){const{pageSize:n,pageIndex:a}=t;this.pagination={...this.pagination,rowsPerPage:n,page:a},this.pageChange.emit(this.pagination)}ngOnInit(){const t=this.tableHeaders.map(n=>n.text);this.translate.get(t).subscribe(n=>{this.tableHeaders.forEach(a=>{for(let r in n)n.hasOwnProperty(r)&&a.text===r&&(a.text=n[r])})}),this.isExtended&&(this.tableHeaders=[{text:"",width:"30px"},...q])}get isOwner(){return this.carparkService.isOwner()}get isOperator(){return this.vehicleService.isOperator()}get isAdmin(){return this.carparkService.isAdmin()}get isCondoOwner(){return this.condoService.isCondoOwner()}get notOwnerAndOperator(){return!(this.isOwner||this.isCondoOwner)}get isMotorist(){return this.carparkService.isMotorist()}downloadRole(){return this.isMotorist||this.isAdmin||this.isOperator}download(t){const n=`${t.vehicle.vehicleNumber}_${xe(t.endTime).format("YYYYMMDD_HH_mm")}`;this.transactionService.getFile(t.id).subscribe(a=>{(0,Me.saveAs)(a,`${n}`)})}setTableHeaders(){if(this.isMotorist)this.tableHeaders=this.tableHeaders.filter(t=>"iuNumber"!==t.column);else if(this.isCondoOwner)this.tableHeaders=this.tableHeaders.filter(t=>!["paymentAmount","type","action"].includes(t.column));else if(this.isAdmin){const t=[{text:"Payment Method",column:"paymentmethod",width:"80px"},{text:"Payment Status",column:"paymentstatus",width:"80px"},{text:"Reference ID",column:"Referenceid",width:"80px"}];0===this.tableHeaders.filter(n=>n.text===t[0].text).length&&this.tableHeaders.splice(7,0,...t)}else this.notOwnerAndOperator||(this.tableHeaders=q)}setTableContent(t){let n={width:null,show:!1};const a=this.tableHeaders.filter(r=>r.column===t);return a.length&&(n={width:a[0].width,show:!0}),n}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.F0),e.Y36(E.sK),e.Y36(I.x),e.Y36(g.f),e.Y36(A.p),e.Y36(Ze.p))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-transactions-datatable"]],inputs:{isExtended:"isExtended",loading:"loading",pagination:"pagination",data:"data"},outputs:{pageChange:"pageChange"},decls:9,vars:10,consts:[["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowSizeChanger","nzShowTotal","nzQueryParams"],["basicTable",""],[4,"ngFor","ngForOf"],[3,"ant-table-row-odd",4,"ngFor","ngForOf"],[3,"routerLink",4,"ngIf"],[4,"ngIf"],[3,"routerLink"],["alt","",3,"src"],["nz-dropdown","","nzTrigger","click",1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--outline-2x","m-btn--pill","no-border",3,"nzDropdownMenu","nzPlacement"],[1,"la","la-ellipsis-h"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"click"],[1,"la","la-edit",2,"margin-right","4px"],["nz-menu-item","",3,"click",4,"ngIf"],[1,"la","la-cloud-download",2,"margin-right","4px"]],template:function(t,n){if(1&t&&(e.YNc(0,Ae,1,3,"ng-template",null,0,e.W1O),e.TgZ(2,"nz-table",1,2),e.NdJ("nzQueryParams",function(r){return n.onQueryParamsChange(r)}),e.TgZ(4,"thead")(5,"tr"),e.YNc(6,ye,2,1,"th",3),e.qZA()(),e.TgZ(7,"tbody"),e.YNc(8,Ve,26,28,"tr",4),e.qZA()()),2&t){const a=e.MAs(1),r=e.MAs(3);e.xp6(2),e.Q6J("nzData",n.data)("nzFrontPagination",!1)("nzLoading",n.loading)("nzTotal",n.pagination.totalCount)("nzPageSize",n.pagination.rowsPerPage)("nzPageIndex",n.pagination.page)("nzShowSizeChanger",!0)("nzShowTotal",a),e.xp6(4),e.Q6J("ngForOf",n.tableHeaders),e.xp6(2),e.Q6J("ngForOf",r.data)}},dependencies:[f.sg,f.O5,_.yS,V.wO,V.r9,J.cm,J.RR,F.w,D.N8,D.Uo,D._C,D.Om,D.p0,D.$Z,f.rS,f.H9,f.uU,E.X$,H.Dm,H.rZ],encapsulation:2}),i})();function ke(i,c){if(1&i&&(e._UZ(0,"nz-option",8),e.ALo(1,"titlecase")),2&i){const t=c.$implicit;e.Q6J("nzValue",t.value)("nzLabel",e.lcZ(1,2,t.value))}}function Re(i,c){if(1&i&&(e._UZ(0,"nz-option",8),e.ALo(1,"titlecase")),2&i){const t=c.$implicit;e.Q6J("nzValue",t.value)("nzLabel",e.lcZ(1,2,t.value))}}let $e=(()=>{class i extends k.t{constructor(t,n,a,r,M){super(),this.router=t,this.route=n,this.vehicleService=a,this.transactionService=r,this.codeTablesService=M,this.transactionStatus="",this.transactionType="",this.status="",this.type="",this.timeRange=[],this.bsConfig={containerClass:"theme-light",showWeekNumbers:!1}}get filterParams(){return{status:this.status,type:this.type,from:this.timeRange[0]&&(0,P.W8)(this.timeRange[0]),to:this.timeRange[1]&&(0,P.W8)(this.timeRange[1]),sort:"lastModifiedDate,desc",vehicle:this.item.vehicleNumber}}ngOnInit(){this.route.parent.data.subscribe(({item:t})=>this.item=t),this.statuses$=this.codeTablesService.filterModelByType(x.BcL.ParkingStatus).pipe((0,S.q)(1)),this.types$=this.codeTablesService.filterModelByType(x.BcL.ParkingType).pipe((0,S.q)(1)),this.reloadData()}displayName(t){return(0,x.ssW)(t)}reloadData(){this.reloadDataService(this.transactionService)}pageChanged(t){this.pagination=t,this.reloadData()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.F0),e.Y36(_.gz),e.Y36(g.f),e.Y36(A.p),e.Y36(u.I))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vehicle-detail-transactions"]],features:[e.qOj],decls:24,vars:23,consts:[[1,"form-group","m-form__group","m-portlet__filters"],[1,"filter-wrap"],[1,"filter-item"],[1,"filter-label"],["nzPlaceHolder","Please Select",2,"width","160px",3,"ngModel","nzDropdownMatchSelectWidth","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],[3,"data","loading","pagination","pageChange"],[3,"nzValue","nzLabel"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"nz-select",4),e.NdJ("ngModelChange",function(r){return n.status=r})("ngModelChange",function(){return n.reloadData()}),e.YNc(7,ke,2,4,"nz-option",5),e.ALo(8,"async"),e.qZA()()(),e.TgZ(9,"div",1)(10,"div",2)(11,"span",3),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"nz-select",4),e.NdJ("ngModelChange",function(r){return n.type=r})("ngModelChange",function(){return n.reloadData()}),e.YNc(15,Re,2,4,"nz-option",5),e.ALo(16,"async"),e.qZA()()(),e.TgZ(17,"div",1)(18,"div",2)(19,"span",3),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"nz-range-picker",6),e.NdJ("ngModelChange",function(r){return n.timeRange=r})("ngModelChange",function(){return n.reloadData()}),e.qZA()()()(),e.TgZ(23,"app-transactions-datatable",7),e.NdJ("pageChange",function(r){return n.pageChanged(r)}),e.qZA()),2&t&&(e.xp6(4),e.hij("",e.lcZ(5,13,"Status"),":"),e.xp6(2),e.Q6J("ngModel",n.status)("nzDropdownMatchSelectWidth",!1),e.xp6(1),e.Q6J("ngForOf",e.lcZ(8,15,n.statuses$)),e.xp6(5),e.hij("",e.lcZ(13,17,"Type"),":"),e.xp6(2),e.Q6J("ngModel",n.type)("nzDropdownMatchSelectWidth",!1),e.xp6(1),e.Q6J("ngForOf",e.lcZ(16,19,n.types$)),e.xp6(5),e.hij("",e.lcZ(21,21,"Date Range"),":"),e.xp6(2),e.Q6J("ngModel",n.timeRange),e.xp6(1),e.Q6J("data",n.listData)("loading",n.loading)("pagination",n.pagination))},dependencies:[f.sg,h.JJ,h.On,w.Ip,w.Vq,K.uw,K.wS,Fe,f.Ov,f.rS,E.X$],encapsulation:2}),i})();var R=o(76916),$=o(47423),B=o(66616),Y=o(21811);const Qe=function(){return["/vehicle-management"]};let Ke=(()=>{class i{constructor(t,n,a){this.router=t,this.route=n,this.vehicleService=a,this.transactionStatus="",this.transactionType="",this.statusOptions=x.EKt,this.typeOptions=x.L0I,this.timeRange=[],this.bsConfig={containerClass:"theme-light",showWeekNumbers:!1}}ngOnInit(){this.route.data.subscribe(({item:t})=>{this.item=Object.assign(t,{})})}ngOnDestroy(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.F0),e.Y36(_.gz),e.Y36(g.f))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vehicle-detail"]],decls:55,vars:34,consts:[[1,"body-wrapper"],[1,"m-dropdown","m-dropdown--inline"],["nz-dropdown","","nzTrigger","click",1,"m-portlet__nav-link","btn","btn-lg","btn-outline-main","m-btn","m-btn--outline-2x","m-btn--air","m-btn--icon","m-btn--icon-only","m-btn--pill",3,"nzDropdownMenu","nzPlacement"],[1,"la","la-ellipsis-h"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"routerLink"],[1,"la","la-edit",2,"margin-right","4px"],[1,"la","la-ban",2,"margin-right","4px"],["nz-button","","nzType","primary","nzShape","round",1,"ml-2",3,"routerLink"],["nz-icon","","nzType","arrow-left","nzTheme","outline"],[1,"m-content"],[1,"row","m--margin-bottom-30"],[1,"col-3"],[1,"m-font-weight-500"],[1,"m-portlet","m-portlet--tabs"],[1,"m-portlet__head"],[1,"m-portlet__head-tools"],["role","tablist",1,"nav","nav-tabs","m-tabs-line","m-tabs-line--primary","m-tabs-line--2x"],[1,"nav-item","m-tabs__item"],[1,"nav-link","m-tabs__link",3,"routerLink","routerLinkActive"],[1,"m-portlet__body","m-portlet__body--scrollable"],[1,"m-portlet__frame"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"app-title-bar")(2,"div",1)(3,"button",2),e._UZ(4,"i",3),e.qZA(),e.TgZ(5,"nz-dropdown-menu",null,4)(7,"ul",5)(8,"li",6),e._UZ(9,"i",7),e.TgZ(10,"span"),e._uU(11),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"li",6),e._UZ(14,"i",7),e.TgZ(15,"span"),e._uU(16),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"li",6),e._UZ(19,"i",8),e.TgZ(20,"span"),e._uU(21),e.ALo(22,"translate"),e.qZA()()()(),e.TgZ(23,"button",9),e._UZ(24,"span",10),e._uU(25," Back "),e.qZA()()(),e.TgZ(26,"div",11)(27,"div",12)(28,"div",13)(29,"span",14),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"span"),e._uU(33),e.qZA()(),e.TgZ(34,"div",13)(35,"span",14),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"span"),e._uU(39),e.qZA()()(),e.TgZ(40,"div",15)(41,"div",16)(42,"div",17)(43,"ul",18)(44,"li",19)(45,"a",20),e._uU(46),e.ALo(47,"translate"),e.qZA()(),e.TgZ(48,"li",19)(49,"a",20),e._uU(50),e.ALo(51,"translate"),e.qZA()()()()(),e.TgZ(52,"div",21)(53,"div",22),e._UZ(54,"router-outlet"),e.qZA()()()()()),2&t){const a=e.MAs(6);e.xp6(3),e.Q6J("nzDropdownMenu",a)("nzPlacement","topCenter"),e.xp6(5),e.Q6J("routerLink","view"),e.xp6(3),e.Oqu(e.lcZ(12,19,"View Vehicle")),e.xp6(2),e.Q6J("routerLink","edit"),e.xp6(3),e.Oqu(e.lcZ(17,21,"Edit Vehicle")),e.xp6(2),e.Q6J("routerLink","edit"),e.xp6(3),e.Oqu(e.lcZ(22,23,"Add to Blacklist")),e.xp6(2),e.Q6J("routerLink",e.DdM(33,Qe)),e.xp6(7),e.hij(" ",e.lcZ(31,25,"Vehicle"),": "),e.xp6(3),e.Oqu(n.item.vehicleNumber),e.xp6(3),e.hij(" ",e.lcZ(37,27,"Mobile No."),": "),e.xp6(3),e.Oqu(n.item.mobile),e.xp6(6),e.Q6J("routerLink","transactions")("routerLinkActive","active"),e.xp6(1),e.hij(" ",e.lcZ(47,29,"Transactions")," "),e.xp6(3),e.Q6J("routerLink","season-parking")("routerLinkActive","active"),e.xp6(1),e.hij(" ",e.lcZ(51,31,"Season Parking")," ")}},dependencies:[_.lC,_.rH,_.yS,_.Od,R.G,$.Ls,V.wO,V.r9,J.cm,J.RR,B.ix,F.w,Y.dQ,E.X$],encapsulation:2}),i})();const Be=function(){return["overview"]};let Ye=(()=>{class i{constructor(t,n){this.router=t,this.translate=n}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.F0),e.Y36(E.sK))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-visitor-home"]],decls:14,vars:6,consts:[[1,"body-wrapper"],[1,"m-content"],[1,"m-portlet","m-portlet--tabs"],[1,"m-portlet__head"],[1,"m-portlet__head-tools"],["role","tablist",1,"nav","nav-tabs","m-tabs-line","m-tabs-line--primary","m-tabs-line--2x"],[1,"nav-item","m-tabs__item"],[1,"nav-link","m-tabs__link",3,"routerLink","routerLinkActive"],[1,"m-portlet__body","m-portlet__body--scrollable"],[1,"m-portlet__frame"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-title-bar"),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"ul",5)(7,"li",6)(8,"a",7),e._uU(9),e.ALo(10,"translate"),e.qZA()()()()(),e.TgZ(11,"div",8)(12,"div",9),e._UZ(13,"router-outlet"),e.qZA()()()()()),2&t&&(e.xp6(8),e.Q6J("routerLink",e.DdM(5,Be))("routerLinkActive","active"),e.xp6(1),e.hij(" ",e.lcZ(10,3,"Overview")," "))},dependencies:[_.lC,_.yS,_.Od,R.G,E.X$],encapsulation:2}),i})();var W=o(8929),qe=o(50007),G=o(49651),Q=o(35635),X=o(37570),ee=o(2577);function We(i,c){if(1&i&&e._UZ(0,"nz-option",17),2&i){const t=c.$implicit;e.Q6J("nzValue",t.value)("nzLabel",t.text)}}function je(i,c){1&i&&e._UZ(0,"span",18)}function He(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"span",3),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"nz-input-group",7)(6,"input",19),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.telKeyword=a)})("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.telKeyword$.next(a))}),e.qZA()()()()}if(2&i){const t=e.oxw(),n=e.MAs(17);e.xp6(3),e.hij("",e.lcZ(4,3,"Contact No."),":"),e.xp6(2),e.Q6J("nzPrefix",n),e.xp6(1),e.Q6J("ngModel",t.telKeyword)}}function Ge(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onAddVehicle())}),e._UZ(1,"span",21),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Add Vehicle")))}function Xe(i,c){if(1&i&&e._uU(0),2&i){const t=c.range;e.lnq(" ",t[0],"-",t[1]," of ",c.$implicit," items\n")}}function et(i,c){if(1&i&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&i){const t=c.$implicit;e.xp6(1),e.Oqu(t.text)}}const tt=function(i){return["../",i]};function nt(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"span",29),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw();return e.KtG(r.setMobile(a))}),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.Q6J("routerLink",e.VKq(1,tt,t.id))}}function it(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"span"),e._UZ(3,"img",22),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA()(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td")(11,"div",23)(12,"span",24),e.NdJ("click",function(){const r=e.CHM(t).$implicit,M=e.oxw();return e.KtG(M.onNavigateToView(r.id))}),e.qZA(),e._UZ(13,"nz-divider",25),e.YNc(14,nt,1,3,"span",26),e._UZ(15,"nz-divider",25),e.TgZ(16,"span",27),e.NdJ("click",function(){const r=e.CHM(t).$implicit,M=e.oxw();return e.KtG(M.onNavigateToEdit(r.id,r))}),e.qZA(),e._UZ(17,"nz-divider",25),e.TgZ(18,"span",28),e.NdJ("click",function(){const r=e.CHM(t).$implicit,M=e.oxw();return e.KtG(M.onDeleteVehicle(r.id))}),e.qZA(),e._UZ(19,"nz-divider",25),e.qZA()()()}if(2&i){const t=c.$implicit,n=c.index,a=e.oxw();e.ekj("ant-table-row-odd",n%2==1),e.xp6(3),e.Q6J("src",a.vehicleTypeLogo(t.vehicleType,"icon"),e.LSH),e.xp6(2),e.Oqu(t.vehicleNumber),e.xp6(2),e.Oqu(t.iuNumber),e.xp6(2),e.Oqu(a.vehicleTypeLogo(t.vehicleType,"text")),e.xp6(5),e.Q6J("ngIf",!a.isMotorist)}}let at=(()=>{class i extends k.t{constructor(t,n,a,r,M,L){super(),this.vehicleService=t,this.route=n,this.carparkService=a,this.modalService=r,this._routerService=M,this.messageService=L,this.tableHeaders=[{text:"Vehicle No.",column:"vehiclePlateNo",width:"150px"},{text:"IU No.",column:"iuNumber",width:"120px"},{text:"Vehicle Type",column:"vehicleType",width:"120px"},{text:"Actions",width:"100px"}],this.vehicleTypes=x.php,this.vehicleNo="",this.vehicleType="",this.keyword$=new W.xQ,this.telKeyword$=new W.xQ,this.data=[]}ngOnInit(){this.keyword$.debounceTime(500).subscribe(()=>{this.reloadData()}),this.telKeyword$.debounceTime(400).subscribe(()=>this.reloadData()),this.reloadData()}vehicleTypeLogo(t,n){return(0,x.e9Z)(x.php,t,n)}displayName(t){return t?(0,x.ssW)(t):""}get filterParams(){return{vehicleType:this.vehicleType,vehicleNumber:this.keyword,phoneNumber:this.telKeyword?`%2B65${this.telKeyword}`:""}}reloadData(){this.isMotorist?this.reloadDataService(this.vehicleService):this.reloadDataByTel()}pageChanged(t){this.pagination=t,this.reloadData()}reloadDataByTel(){this.loading=!0,this.vehicleService.getTelList(this.filterParams,this.pagination).pipe((0,S.q)(1)).subscribe(t=>{t.number>t.totalPages&&(this.pagination={...this.pagination,page:t.pagination.totalPages}),this.loading=!1,this.pagination={...this.pagination,totalCount:t.totalElements},this.listData=t.content,this.loading=!1},()=>{this.loading=!1,this.listData=[],this.pagination={...this.pagination,totalCount:0},this.loading=!1})}onNavigateToEdit(t,n){this.isMotorist?this._routerService.navigateByUrl(`vehicle-motorist/${t}/edit`):this._routerService.navigate([`vehicle-management/${t}/edit`],{queryParams:{firstName:n.firstName||"",mobile:n.mobile,email:n.email||""}})}onNavigateToView(t){this._routerService.navigate([`vehicle-management/${t}/view`])}onAddVehicle(){this._routerService.navigate(["../create/vehicle"],{relativeTo:this.route})}get isMotorist(){return this.carparkService.isMotorist()}onDeleteVehicle(t){this.vehicleId=t,this.modalService.confirm({nzTitle:"Permanently delete vehicle? Changes cannot be undone.",nzOnOk:()=>this.onConfirm(t),nzOkDanger:!0,nzOkText:"Delete",nzCancelText:"Cancel"})}onConfirm(t){const n=JSON.parse(localStorage.getItem("user")).login;this.vehicleService.deleteModel(n,t).subscribe(a=>{this.reloadData()},a=>{400==a.error.status&&this.messageService.error(a.error.message)})}get isOperator(){return this.vehicleService.isOperator()}setMobile(t){sessionStorage.setItem("vehicleInfo",JSON.stringify(t))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.f),e.Y36(_.gz),e.Y36(I.x),e.Y36(qe.Sf),e.Y36(_.F0),e.Y36(G.dD))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-visitor-overview"]],features:[e.qOj],decls:29,vars:21,consts:[[1,"form-group","m-form__group","m-portlet__filters"],[1,"filter-wrap"],[1,"filter-item"],[1,"filter-label"],["nzPlaceHolder","Please Select",2,"width","160px",3,"ngModel","ngModelChange"],["nzValue","","nzLabel","All"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[2,"width","210px",3,"nzPrefix"],["nz-input","","type","text","placeholder","Please Enter Vehicle No.",3,"ngModel","ngModelChange"],["suffixIconSearch",""],["class","filter-wrap",4,"ngIf"],["nz-button","","nzType","primary","nzShape","round","style","margin-left: auto;margin-right: 0;",3,"click",4,"ngIf"],["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowTotal","nzQueryParams"],["basicTable",""],[4,"ngFor","ngForOf"],[3,"ant-table-row-odd",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],["nz-icon","","nzType","search"],["nz-input","","type","text","placeholder","Please Enter Contact No.",3,"ngModel","ngModelChange"],["nz-button","","nzType","primary","nzShape","round",2,"margin-left","auto","margin-right","0",3,"click"],["nz-icon","","nzType","plus"],["alt","",3,"src"],[1,"act-icon-group"],["nz-tooltip","","nzTooltipTitle","View","nz-icon","","nzType","eye","nzTheme","outline",2,"cursor","pointer",3,"click"],["nzType","vertical",1,"nz-divider-style"],["nz-tooltip","","nzTooltipTitle","Transactions","nz-icon","","nzType","unordered-list","nzTheme","outline",3,"routerLink","click",4,"ngIf"],["nz-tooltip","","nzTooltipTitle","Edit","nz-icon","","nzType","edit","nzTheme","outline",3,"click"],["nz-tooltip","","nzTooltipTitle","Delete","nz-icon","","nzType","delete","nzTheme","outline",3,"click"],["nz-tooltip","","nzTooltipTitle","Transactions","nz-icon","","nzType","unordered-list","nzTheme","outline",3,"routerLink","click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"nz-select",4),e.NdJ("ngModelChange",function(r){return n.vehicleType=r})("ngModelChange",function(){return n.reloadData()}),e._UZ(7,"nz-option",5),e.YNc(8,We,1,2,"nz-option",6),e.qZA()()(),e.TgZ(9,"div",1)(10,"div",2)(11,"span",3),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"nz-input-group",7)(15,"input",8),e.NdJ("ngModelChange",function(r){return n.keyword=r})("ngModelChange",function(r){return n.keyword$.next(r)}),e.qZA()(),e.YNc(16,je,1,0,"ng-template",null,9,e.W1O),e.qZA()(),e.YNc(18,He,7,5,"div",10),e.YNc(19,Ge,4,3,"button",11),e.qZA(),e.YNc(20,Xe,1,3,"ng-template",null,12,e.W1O),e.TgZ(22,"nz-table",13,14),e.NdJ("nzQueryParams",function(r){return n.onQueryParamsChange(r)}),e.TgZ(24,"thead")(25,"tr"),e.YNc(26,et,2,1,"th",15),e.qZA()(),e.TgZ(27,"tbody"),e.YNc(28,it,20,7,"tr",16),e.qZA()()),2&t){const a=e.MAs(17),r=e.MAs(21),M=e.MAs(23);e.xp6(4),e.hij("",e.lcZ(5,17,"Vehicle Type"),":"),e.xp6(2),e.Q6J("ngModel",n.vehicleType),e.xp6(2),e.Q6J("ngForOf",n.vehicleTypes),e.xp6(4),e.hij("",e.lcZ(13,19,"Vehicle No."),":"),e.xp6(2),e.Q6J("nzPrefix",a),e.xp6(1),e.Q6J("ngModel",n.keyword),e.xp6(3),e.Q6J("ngIf",!n.isMotorist),e.xp6(1),e.Q6J("ngIf",!n.isOperator),e.xp6(3),e.Q6J("nzData",n.listData)("nzFrontPagination",!1)("nzLoading",n.loading)("nzTotal",n.pagination.totalCount)("nzPageSize",n.pagination.rowsPerPage)("nzPageIndex",n.pagination.page)("nzShowTotal",r),e.xp6(4),e.Q6J("ngForOf",n.tableHeaders),e.xp6(2),e.Q6J("ngForOf",M.data)}},dependencies:[f.sg,f.O5,h.Fj,h.JJ,h.On,_.rH,Q.Zp,Q.gB,Q.ke,$.Ls,B.ix,F.w,Y.dQ,w.Ip,w.Vq,X.SY,D.N8,D.Uo,D._C,D.Om,D.p0,D.$Z,ee.g,E.X$],styles:[".m-portlet__filter.btn-create[_ngcontent-%COMP%]{margin-left:auto;margin-right:0!important}"]}),i})();var ot=o(1059),rt=o(80013),lt=o(75778),te=o(2994),st=o(87545),ct=o(88117),ne=o(66708),ie=o(29252);function pt(i,c){if(1&i&&(e.TgZ(0,"div",28)(1,"div",29)(2,"div",30)(3,"h3",31),e._uU(4),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(4),e.hij(" ",t.item.vehicleNumber," ")}}function dt(i,c){if(1&i&&e._UZ(0,"nz-option",32),2&i){const t=c.$implicit;e.Q6J("nzValue",t.areaCode)("nzLabel",t.name)}}function mt(i,c){if(1&i&&e._UZ(0,"nz-option",32),2&i){const t=c.$implicit;e.Q6J("nzValue",t.value)("nzLabel",t.text)}}function ht(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"label",6)(1,"span",7),e._uU(2,"*"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",8)(6,"nz-select",33),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.form.vehicleType=a)}),e.YNc(7,mt,1,2,"nz-option",10),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,3,"Vehicle Type"),": "),e.xp6(3),e.Q6J("ngModel",t.form.vehicleType),e.xp6(1),e.Q6J("ngForOf",t.vehicleTypes)}}function ut(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",5)(1,"label",6)(2,"span",7),e._uU(3,"*"),e.qZA(),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",8)(7,"input",34),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.form.mobile=a)}),e.qZA()(),e.TgZ(8,"label",6)(9,"span",7),e._uU(10,"*"),e.qZA(),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div",8)(14,"input",35),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.seasonData.firstName=a)}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,4,"Contact No."),": "),e.xp6(3),e.Q6J("ngModel",t.form.mobile),e.xp6(4),e.hij(" ",e.lcZ(12,6,"First Name"),": "),e.xp6(3),e.Q6J("ngModel",t.seasonData.firstName)}}function _t(i,c){if(1&i&&e._UZ(0,"nz-option",32),2&i){const t=c.$implicit;e.Q6J("nzValue",t.value)("nzLabel",t.text)}}function gt(i,c){1&i&&(e.TgZ(0,"div",38),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Please select vehicle Type")," "))}function vt(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",5)(1,"label",6)(2,"span",7),e._uU(3,"*"),e.qZA(),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",8)(7,"input",36),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.seasonData.email=a)}),e.qZA()(),e.TgZ(8,"label",6)(9,"span",7),e._uU(10,"*"),e.qZA(),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div",8)(14,"nz-select",33,37),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.form.vehicleType=a)}),e.YNc(16,_t,1,2,"nz-option",10),e.qZA()(),e.YNc(17,gt,3,3,"div",15),e.qZA()}if(2&i){const t=e.MAs(15),n=e.oxw(),a=e.MAs(1);e.xp6(4),e.hij(" ",e.lcZ(5,6,"Email"),": "),e.xp6(3),e.Q6J("ngModel",n.seasonData.email),e.xp6(4),e.hij(" ",e.lcZ(12,8,"Vehicle Type"),": "),e.xp6(3),e.Q6J("ngModel",n.form.vehicleType),e.xp6(2),e.Q6J("ngForOf",n.vehicleTypes),e.xp6(1),e.Q6J("ngIf",t.invalid&&(t.dirty||t.touched||a.submitted))}}function ft(i,c){if(1&i&&(e.TgZ(0,"div",38),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,t.vehicleNoMessage)," At least 3 characters. ")}}function Tt(i,c){1&i&&(e.TgZ(0,"span",7),e._uU(1,"*"),e.qZA())}function Ct(i,c){1&i&&(e.TgZ(0,"div",38),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Please enter numbers only")," "))}function Mt(i,c){1&i&&(e.TgZ(0,"span",40),e._uU(1,"Invalid IU Number"),e.qZA())}function xt(i,c){if(1&i&&e.YNc(0,Mt,2,0,"span",39),2&i){const t=e.oxw();e.Q6J("ngIf",t.InvalidIUNumber)}}function Zt(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.delete(a))}),e._UZ(1,"span",41),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&i&&(e.xp6(2),e.hij("",e.lcZ(3,1,"Delete")," "))}let ae=(()=>{class i{constructor(t,n,a,r,M){this.router=t,this._route=n,this.driverService=a,this.translate=r,this.carparkService=M,this.deleted=new e.vpe,this.canceled=new e.vpe,this.submitted=new e.vpe,this.vehicleNoMessage=x.vwt.VehicleNo,this.vehicleTypes=x.php,this.driverInput$=new W.xQ,this.InvalidIUNumber=!1,this.isSingapore=65,this.listAreaCode=[{areaCode:65,value:65,name:"Singapore"},{areaCode:60,value:60,name:"Malaysia"}]}ngOnInit(){ne.Z.isUndefinedOrNull(this.areaCode)&&(this.areaCode=65),this.form=this.item||(0,x.wky)(),this.isMotorist?this.driver=JSON.parse(localStorage.getItem("user")).hpNumber:(this.driver$=this.driverInput$.pipe((0,ot.O)(""),(0,rt.b)(200),(0,lt.x)(),(0,te.b)(()=>this.driverLoading=!0),(0,st.w)(t=>this.driverService.searchModel(t).pipe((0,te.b)(()=>{this.driverLoading=!1}))),(0,ct.B)()),this.driver$.pipe((0,S.q)(1)).subscribe(t=>{this.driver=this.form.driver?this.form.driver:t[0]})),this._route.queryParams.subscribe(t=>{if(Reflect.has(t,"mobile")&&Reflect.has(t,"email")&&Reflect.has(t,"firstName"))this.seasonData=t,this.form.mobile=t.mobile;else{let n=JSON.parse(sessionStorage.getItem("vehicleInfo"));this.seasonData={email:n.email,firstName:n.firstName,mobile:n.mobile},this.form.mobile=n.mobile}})}get isMotorist(){return this.carparkService.isMotorist()}delete(t){t.preventDefault(),this.deleted.emit()}cancel(t){t.preventDefault(),this.canceled.emit()}submit(t){if((65!=this.areaCode||this.form.iuNumber)&&!this.InvalidIUNumber)return this.isMotorist?t.valid&&this.submitted.emit({...this.form,driverCode:this.driver.userName,driver:this.driver,countryCode:this.areaCode}):t.valid&&this.submitted.emit({...this.form})}verifyIUNumber(){this.InvalidIUNumber=this.form.iuNumber.length<10&&this.form.iuNumber.length>0}displayDriverOption(t){return[[t.firstName,t.lastName].filter(a=>a).join(" "),t.mobile,t.email].filter(a=>a&&a.length).join(", ")}onChangeAreaCode(t){this.areaCode=parseInt(t.target.value,10)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.F0),e.Y36(_.gz),e.Y36(z.F),e.Y36(E.sK),e.Y36(I.x))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vehicle-form"]],inputs:{item:"item"},outputs:{deleted:"deleted",canceled:"canceled",submitted:"submitted"},decls:53,vars:26,consts:[[1,"m-form","m-form--fit","m-form--label-align-right",3,"ngSubmit"],["formRef","ngForm"],[1,"m-portlet"],["class","m-portlet__head",4,"ngIf"],[1,"m-portlet__body"],[1,"row","form-group","m-form__group"],[1,"col-form-label","col-lg-2","col-sm-12"],[1,"m--font-danger"],[1,"col-lg-4","col-sm-12"],["id","countryCode","name","countryCode",2,"width","100%",3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"ngIf"],["class","row form-group m-form__group",4,"ngIf"],["nz-input","","type","text","maxlength","8","minlength","3","pattern","^[a-zA-Z0-9]+$","oninput","this.value = this.value.toUpperCase()","name","vehicleNumber","placeholder","Vehicle No.","required","",3,"ngModel","ngModelChange"],["vehicleNumber","ngModel"],["class","form-control-feedback",4,"ngIf"],["class","m--font-danger",4,"ngIf"],["nz-input","","type","text","name","iuNumber","maxlength","10","pattern","^[0-9]+$","digitOnly","","inputmode","numeric","placeholder","IU No.",3,"ngModel","required","ngModelChange"],["iuNumber","ngModel"],["class","form-control-feedback",4,"ngIf","ngIfElse"],["hasIuNumber",""],[1,"m-portlet__foot","bg-light-gray"],[1,"row"],[1,"m-form__actions","col"],["class","btn-form-ops","nz-button","","nzType","primary","nzSize","large","nzGhost","",3,"click",4,"ngIf"],[1,"m-form__actions","m-form__actions--right","row"],["nz-button","","nzType","primary","nzSize","large","nzGhost","",1,"btn-form-ops",3,"click"],["nz-button","","nzType","primary","nzSize","large","type","submit",1,"m--margin-left-30","btn-form-ops"],[1,"m-portlet__head"],[1,"m-portlet__head-caption"],[1,"m-portlet__head-title"],[1,"m-portlet__head-text"],[3,"nzValue","nzLabel"],["name","vehicleType",2,"width","100%",3,"ngModel","ngModelChange"],["nz-input","","type","text","name","mobile","maxlength","8","pattern","^[0-9]+$","placeholder","Contact No.","readonly","",3,"ngModel","ngModelChange"],["nz-input","","type","text","name","FristName","placeholder","First Name","readonly","",3,"ngModel","ngModelChange"],["nz-input","","type","text","name","Email","placeholder","Email","readonly","",3,"ngModel","ngModelChange"],["vehicleType","ngModel"],[1,"form-control-feedback"],["style","color: #f00;",4,"ngIf"],[2,"color","#f00"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){e.CHM(a);const M=e.MAs(1);return e.KtG(n.submit(M))}),e.TgZ(2,"div",2),e.YNc(3,pt,5,1,"div",3),e.TgZ(4,"div",4)(5,"div",5)(6,"label",6)(7,"span",7),e._uU(8,"*"),e.qZA(),e._uU(9," Country of Registration: "),e.qZA(),e.TgZ(10,"div",8)(11,"nz-select",9),e.NdJ("ngModelChange",function(M){return n.areaCode=M}),e.YNc(12,dt,1,2,"nz-option",10),e.qZA()(),e.YNc(13,ht,8,5,"ng-template",11),e.qZA(),e.YNc(14,ut,15,8,"div",12),e.YNc(15,vt,18,10,"div",12),e.TgZ(16,"div",5)(17,"label",6)(18,"span",7),e._uU(19,"*"),e.qZA(),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"div",8)(23,"input",13,14),e.NdJ("ngModelChange",function(M){return n.form.vehicleNumber=M}),e.qZA(),e.YNc(25,ft,3,3,"div",15),e.qZA(),e.TgZ(26,"label",6),e.YNc(27,Tt,2,0,"span",16),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"div",8)(31,"input",17,18),e.NdJ("ngModelChange",function(M){return n.form.iuNumber=M})("ngModelChange",function(){return n.verifyIUNumber()}),e.qZA(),e.YNc(33,Ct,3,3,"div",19),e.YNc(34,xt,1,1,"ng-template",null,20,e.W1O),e.qZA()(),e.TgZ(36,"div",5)(37,"label",6)(38,"span",7),e._uU(39,"*"),e.qZA(),e._uU(40," Required field(s) "),e.qZA(),e._UZ(41,"div",8),e.qZA()(),e.TgZ(42,"div",21)(43,"div",22)(44,"div",23),e.YNc(45,Zt,4,3,"button",24),e.qZA(),e.TgZ(46,"div",25)(47,"button",26),e.NdJ("click",function(M){return n.cancel(M)}),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.TgZ(50,"button",27),e._uU(51),e.ALo(52,"translate"),e.qZA()()()()()()}if(2&t){const a=e.MAs(1),r=e.MAs(24),M=e.MAs(32),L=e.MAs(35);e.xp6(3),e.Q6J("ngIf",n.item),e.xp6(8),e.Q6J("ngModel",n.areaCode),e.xp6(1),e.Q6J("ngForOf",n.listAreaCode),e.xp6(1),e.Q6J("ngIf",n.areaCode!==n.isSingapore&&n.isMotorist),e.xp6(1),e.Q6J("ngIf",!n.isMotorist),e.xp6(1),e.Q6J("ngIf",!n.isMotorist),e.xp6(5),e.hij(" ",e.lcZ(21,18,"Vehicle No."),": "),e.xp6(3),e.Q6J("ngModel",n.form.vehicleNumber),e.xp6(2),e.Q6J("ngIf",r.invalid&&(r.dirty||r.touched||a.submitted)),e.xp6(2),e.Q6J("ngIf",n.areaCode===n.isSingapore),e.xp6(1),e.hij(" ",e.lcZ(29,20,"IU No."),": "),e.xp6(3),e.Q6J("ngModel",n.form.iuNumber)("required",n.areaCode===n.isSingapore),e.xp6(2),e.Q6J("ngIf",M.invalid&&(M.dirty||M.touched||a.submitted))("ngIfElse",L),e.xp6(12),e.Q6J("ngIf",n.item),e.xp6(3),e.hij(" ",e.lcZ(49,22,"Cancel")," "),e.xp6(3),e.hij(" ",e.lcZ(52,24,"Submit")," ")}},dependencies:[f.sg,f.O5,Q.Zp,$.Ls,B.ix,F.w,Y.dQ,w.Ip,w.Vq,h._Y,h.Fj,h.JJ,h.JL,h.Q7,h.wO,h.nD,h.c5,h.On,h.F,ie.L,E.X$],encapsulation:2}),i})();const At=["alertErrMsg"];let yt=(()=>{class i{constructor(t,n,a,r){this.router=t,this.vehicleService=n,this.carparkService=a,this.nzMessageService=r}ngOnInit(){}get isMotorist(){return this.carparkService.isMotorist()}cancel(){this.router.navigate(this.isMotorist?["/vehicle-motorist"]:["/vehicle-management"])}submit(t){let n;if(this.isMotorist){n={...t,country:65===t.countryCode?"Singapore":"Malaysia"};const a=JSON.parse(localStorage.getItem("user")).login;this.vehicleService.createModel(a,n).subscribe(()=>{this.router.navigate(["/message-management/overview"])},r=>{this.errMsg=r.error.message,this.nzMessageService.error(this.errMsg)})}else n={mobile:t.mobile,vehicleNumber:t.vehicleNumber,iuNumber:t.iuNumber,vehicleType:t.vehicleType},this.vehicleService.createVehicleAdmin(n).subscribe(()=>{this.router.navigate(["/vehicle-management/overview"])},a=>{this.errMsg=a.error.message,this.nzMessageService.error(this.errMsg)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.F0),e.Y36(g.f),e.Y36(I.x),e.Y36(G.dD))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vehicle-create"]],viewQuery:function(t,n){if(1&t&&e.Gf(At,5),2&t){let a;e.iGM(a=e.CRH())&&(n.alertErrMsg=a.first)}},decls:4,vars:0,consts:[[1,"body-wrapper"],[1,"m-content"],[3,"canceled","submitted"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-title-bar"),e.TgZ(2,"div",1)(3,"app-vehicle-form",2),e.NdJ("canceled",function(){return n.cancel()})("submitted",function(r){return n.submit(r)}),e.qZA()()())},dependencies:[R.G,ae],encapsulation:2}),i})();var bt=o(20388);const zt=["alertErrMsg"];function Dt(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",5)(1,"p"),e._uU(2,"Permanently delete vehicle? Changes cannot be undone."),e.qZA(),e.TgZ(3,"button",6),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onDecline())}),e._uU(4," Cancel "),e.qZA(),e.TgZ(5,"button",7),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onConfirm())}),e._uU(6," Delete "),e.qZA()()}}function Ut(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",5)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"button",7),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onDecline())}),e._uU(4,"Close"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.errMsg)}}let Ot=(()=>{class i{constructor(t,n,a,r,M,L){this.router=t,this.route=n,this.vehicleService=a,this._locationService=r,this._carparkService=M,this._modalService=L}ngOnInit(){const t=this.route.parent.snapshot.data.item;this.item={...t,startTime:new Date(t.startTime),endTime:new Date(t.endTime)}}onDeleted(t){this.modalRef=this._modalService.show(t,{class:"modal-sm"})}onDecline(){this.message="Declined!",this.modalRef.hide()}onConfirm(){this.message="Confirmed!",this.isMotorist?this.vehicleService.deleteModel(this.item.driverCode,this.item.id).subscribe(()=>{this.onCanceled(),this.modalRef.hide()},t=>{this.modalRef.hide(),this.errMsg=t.error.message,this.modalRef=this._modalService.show(this.alertErrMsg,{class:"modal-md"})}):this.vehicleService.deleteAdminModel(this.item.id).subscribe(()=>{this.router.navigate(["/vehicle-management/overview"])},t=>{this.modalRef.hide(),this.errMsg=t.error.message,this.modalRef=this._modalService.show(this.alertErrMsg,{class:"modal-md"})})}onCanceled(){this._locationService.back()}get isMotorist(){return this._carparkService.isMotorist()}onSubmitted(t){if(this.isMotorist){const n=JSON.parse(localStorage.getItem("user")).login;console.log(t);const a={vehicle:{...t,country:65===t.countryCode?"Singapore":"Malaysia"},vehicleId:t.id};this.vehicleService.putUpdateVehicle(n,a.vehicle).subscribe(()=>{this.onCanceled()},r=>{this.errMsg=r.error.message,this.modalRef=this._modalService.show(this.alertErrMsg,{class:"modal-md"})})}else this.vehicleService.updateModel({id:t.id,vehicleNumber:t.vehicleNumber,iuNumber:t.iuNumber,mobile:t.mobile,vehicleType:t.vehicleType}).subscribe(()=>{this.router.navigate(["/vehicle-management/overview"])},a=>{this.errMsg=a.error.message||a.error.detail,this.modalRef=this._modalService.show(this.alertErrMsg,{class:"modal-md"})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.F0),e.Y36(_.gz),e.Y36(g.f),e.Y36(f.Ye),e.Y36(I.x),e.Y36(bt.tT))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vehicle-update"]],viewQuery:function(t,n){if(1&t&&e.Gf(zt,5),2&t){let a;e.iGM(a=e.CRH())&&(n.alertErrMsg=a.first)}},decls:8,vars:1,consts:[[1,"body-wrapper"],[1,"m-content"],[3,"item","deleted","canceled","submitted"],["templateConfirmDelete",""],["alertErrMsg",""],[1,"modal-body","text-center"],["type","button",1,"btn","btn-default","mr-3",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"div",0),e._UZ(1,"app-title-bar"),e.TgZ(2,"div",1)(3,"app-vehicle-form",2),e.NdJ("deleted",function(){e.CHM(a);const M=e.MAs(5);return e.KtG(n.onDeleted(M))})("canceled",function(){return n.onCanceled()})("submitted",function(M){return n.onSubmitted(M)}),e.qZA()(),e.YNc(4,Dt,7,0,"ng-template",null,3,e.W1O),e.YNc(6,Ut,5,1,"ng-template",null,4,e.W1O),e.qZA()}2&t&&(e.xp6(3),e.Q6J("item",n.item))},dependencies:[R.G,ae],encapsulation:2}),i})();var oe=o(88796),re=o(59245),le=o(21532),se=o(80529),ce=o(19832);function Et(i){return new ce.w(i,"../assets/i18n/",".json")}let Nt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[b.k,v.e,I.x],imports:[_.Bz,f.ez,le.x,h.u5,l.D,re.mr,d.kn,oe.A0,ie.E7,E.aw.forChild({loader:{provide:E.Zw,useFactory:Et,deps:[se.eN]}})]}),i})();function Pt(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",21)(1,"div",22)(2,"div",23)(3,"h3",24),e._uU(4),e.qZA(),e.TgZ(5,"span",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.backToHome())}),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(4),e.hij(" ",t.item.vehicleNumber," ")}}function St(i,c){if(1&i&&e._UZ(0,"nz-option",26),2&i){const t=c.$implicit;e.Q6J("nzValue",t.areaCode)("nzLabel",t.name)}}function Lt(i,c){if(1&i&&e._UZ(0,"nz-option",26),2&i){const t=c.$implicit;e.Q6J("nzValue",t.value)("nzLabel",t.text)}}function wt(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"label",7)(1,"span",8),e._uU(2,"*"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",9)(6,"nz-select",27),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.form.vehicleType=a)}),e.YNc(7,Lt,1,2,"nz-option",11),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,3,"Vehicle Type"),": "),e.xp6(3),e.Q6J("ngModel",t.form.vehicleType),e.xp6(1),e.Q6J("ngForOf",t.vehicleTypes)}}function It(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"label",7)(2,"span",8),e._uU(3,"*"),e.qZA(),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",9)(7,"input",28),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.form.mobile=a)}),e.qZA()(),e.TgZ(8,"label",7)(9,"span",8),e._uU(10,"*"),e.qZA(),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div",9)(14,"input",29),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.seasonData.firstName=a)}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,4,"Contact No."),": "),e.xp6(3),e.Q6J("ngModel",t.form.mobile),e.xp6(4),e.hij(" ",e.lcZ(12,6,"First Name"),": "),e.xp6(3),e.Q6J("ngModel",t.seasonData.firstName)}}function Vt(i,c){if(1&i&&e._UZ(0,"nz-option",26),2&i){const t=c.$implicit;e.Q6J("nzValue",t.value)("nzLabel",t.text)}}function Jt(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"label",7)(2,"span",8),e._uU(3,"*"),e.qZA(),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",9)(7,"input",30),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.seasonData.email=a)}),e.qZA()(),e.TgZ(8,"label",7)(9,"span",8),e._uU(10,"*"),e.qZA(),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div",9)(14,"nz-select",27),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.form.vehicleType=a)}),e.YNc(15,Vt,1,2,"nz-option",11),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,5,"Email"),": "),e.xp6(3),e.Q6J("ngModel",t.seasonData.email),e.xp6(4),e.hij(" ",e.lcZ(12,7,"Vehicle Type"),": "),e.xp6(3),e.Q6J("ngModel",t.form.vehicleType),e.xp6(1),e.Q6J("ngForOf",t.vehicleTypes)}}function Ft(i,c){1&i&&(e.TgZ(0,"span",8),e._uU(1,"*"),e.qZA())}function de(i){return new ce.w(i,"../assets/i18n/",".json")}const Rt=[{path:"",component:m.f,children:[{path:"",component:Ye,children:[{path:"",redirectTo:"overview",pathMatch:"full"},{path:"overview",component:at}]},{path:"create",component:s.O,children:[{path:"",redirectTo:"vehicle",pathMatch:"full"},{path:"vehicle",component:yt}]},{path:":id",component:s.O,resolve:{item:Z.iO},children:[{path:"",component:Ke,children:[{path:"",redirectTo:"transactions",pathMatch:"full"},{path:"transactions",component:$e},{path:"season-parking",component:fe}]},{path:"edit",component:Ot},{path:"view",component:(()=>{class i{constructor(t,n,a,r,M){this.router=t,this._route=n,this.driverService=a,this.translate=r,this.carparkService=M,this.listAreaCode=[{areaCode:65,value:65,name:"Singapore"},{areaCode:60,value:60,name:"Malaysia"}],this.vehicleTypes=x.php,this.isSingapore=65,this.isFromTransaction=!1}ngOnInit(){this._route.queryParams.subscribe(n=>{n.isFromTransaction&&(this.isFromTransaction=!0)});const t=this._route.parent.snapshot.data.item;this.item={...t,startTime:new Date(t.startTime),endTime:new Date(t.endTime)},this.form=this.item||(0,x.wky)(),this.seasonData=this.item,this.form.mobile=this.item.mobile,ne.Z.isUndefinedOrNull(this.areaCode)&&(this.areaCode=65)}get isMotorist(){return this.carparkService.isMotorist()}backToHome(){this.router.navigate(this.isFromTransaction?["evc/ev-transactions"]:["vehicle-management/overview"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.F0),e.Y36(_.gz),e.Y36(z.F),e.Y36(E.sK),e.Y36(I.x))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vehicle-view"]],decls:38,vars:18,consts:[[1,"body-wrapper"],[1,"m-content"],[1,"m-form","m-form--fit","m-form--label-align-right"],[1,"m-portlet"],["class","m-portlet__head",4,"ngIf"],[1,"m-portlet__body"],[1,"row","form-group","m-form__group"],[1,"col-form-label","col-lg-2","col-sm-12"],[1,"m--font-danger"],[1,"col-lg-4","col-sm-12"],["id","areaCode","name","areaCode","nzDisabled","",2,"width","100%",3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"ngIf"],["class","row form-group m-form__group",4,"ngIf"],["readonly","","nz-input","","name","vehicleNumber","type","text",3,"ngModel","ngModelChange"],["class","m--font-danger",4,"ngIf"],["readonly","","nz-input","","type","text","name","iuNumber",3,"ngModel","ngModelChange"],[1,"m-portlet__foot","bg-light-gray"],[1,"footer-act"],[1,"m-form__actions","m-form__actions--right","row"],["nz-button","","nzType","primary","nzSize","large",1,"m--margin-left-30","btn-form-ops",3,"click"],[1,"m-portlet__head"],[1,"m-portlet__head-caption"],[1,"header-act"],[1,"m-portlet__head-text"],["nz-icon","","nzType","close","nzTheme","outline",3,"click"],[3,"nzValue","nzLabel"],["name","vehicleType","nzDisabled","",2,"width","100%",3,"ngModel","ngModelChange"],["nz-input","","type","text","name","mobile","maxlength","8","pattern","^[0-9]+$","placeholder","Contact No.","readonly","",3,"ngModel","ngModelChange"],["nz-input","","type","text","name","firstName","placeholder","First Name","readonly","",3,"ngModel","ngModelChange"],["nz-input","","type","text","name","Email","readonly","",3,"ngModel","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-title-bar"),e.TgZ(2,"div",1)(3,"form",2)(4,"div",3),e.YNc(5,Pt,6,1,"div",4),e.TgZ(6,"div",5)(7,"div",6)(8,"label",7)(9,"span",8),e._uU(10,"*"),e.qZA(),e._uU(11," Country of Registration: "),e.qZA(),e.TgZ(12,"div",9)(13,"nz-select",10),e.NdJ("ngModelChange",function(r){return n.areaCode=r}),e.YNc(14,St,1,2,"nz-option",11),e.qZA()(),e.YNc(15,wt,8,5,"ng-template",12),e.qZA(),e.YNc(16,It,15,8,"div",13),e.YNc(17,Jt,16,9,"div",13),e.TgZ(18,"div",6)(19,"label",7)(20,"span",8),e._uU(21,"*"),e.qZA(),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"div",9)(25,"input",14),e.NdJ("ngModelChange",function(r){return n.form.vehicleNumber=r}),e.qZA()(),e.TgZ(26,"label",7),e.YNc(27,Ft,2,0,"span",15),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"div",9)(31,"input",16),e.NdJ("ngModelChange",function(r){return n.form.iuNumber=r}),e.qZA()()()(),e.TgZ(32,"div",17)(33,"div",18)(34,"div",19)(35,"button",20),e.NdJ("click",function(){return n.backToHome()}),e._uU(36),e.ALo(37,"translate"),e.qZA()()()()()()()()),2&t&&(e.xp6(5),e.Q6J("ngIf",n.item),e.xp6(8),e.Q6J("ngModel",n.areaCode),e.xp6(1),e.Q6J("ngForOf",n.listAreaCode),e.xp6(1),e.Q6J("ngIf",n.areaCode!==n.isSingapore&&n.isMotorist),e.xp6(1),e.Q6J("ngIf",!n.isMotorist),e.xp6(1),e.Q6J("ngIf",!n.isMotorist),e.xp6(5),e.hij(" ",e.lcZ(23,12,"Vehicle No."),": "),e.xp6(3),e.Q6J("ngModel",n.form.vehicleNumber),e.xp6(2),e.Q6J("ngIf",n.areaCode===n.isSingapore),e.xp6(1),e.hij(" ",e.lcZ(29,14,"IU No."),": "),e.xp6(3),e.Q6J("ngModel",n.form.iuNumber),e.xp6(5),e.hij(" ",e.lcZ(37,16,"Back")," "))},dependencies:[f.sg,f.O5,h._Y,h.Fj,h.JJ,h.JL,h.nD,h.c5,h.On,h.F,R.G,Q.Zp,$.Ls,B.ix,F.w,Y.dQ,w.Ip,w.Vq,E.X$],styles:[".header-act[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.header-act[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.footer-act[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]}),i})()}]}]}];let $t=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[b.k,v.e,g.f,A.p,z.F,y.R,p.Y,Z.Nb,Z.aE,Z.iO,u.I,C.C],imports:[f.ez,h.u5,_.Bz.forChild(Rt),le.x,l.D,T.p,re.mr,d.kn,Nt,oe.A0,E.aw.forChild({loader:{provide:E.Zw,useFactory:de,deps:[se.eN]}}),ee.S,X.cg,$.PV,_.Bz]}),i})()},15035:(N,U,o)=>{"use strict";o.d(U,{W8:()=>y});var f=o(21837),h=(()=>((h||(h={})).Med="yyyy-LL-dd",h))();function y(u,z=h.Med){return u?f.ou.fromJSDate(u).toFormat(z):null}},94327:function(N,U){var h;void 0!==(h=function(){"use strict";function d(v,C,A){var g=new XMLHttpRequest;g.open("GET",v),g.responseType="blob",g.onload=function(){b(g.response,C,A)},g.onerror=function(){console.error("could not download file")},g.send()}function Z(v){var C=new XMLHttpRequest;C.open("HEAD",v,!1);try{C.send()}catch{}return 200<=C.status&&299>=C.status}function y(v){try{v.dispatchEvent(new MouseEvent("click"))}catch{var C=document.createEvent("MouseEvents");C.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),v.dispatchEvent(C)}}var u="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,z=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),b=u.saveAs||("object"!=typeof window||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!z?function(v,C,A){var g=u.URL||u.webkitURL,p=document.createElement("a");p.download=C=C||v.name||"download",p.rel="noopener","string"==typeof v?(p.href=v,p.origin===location.origin?y(p):Z(p.href)?d(v,C,A):y(p,p.target="_blank")):(p.href=g.createObjectURL(v),setTimeout(function(){g.revokeObjectURL(p.href)},4e4),setTimeout(function(){y(p)},0))}:"msSaveOrOpenBlob"in navigator?function(v,C,A){if(C=C||v.name||"download","string"!=typeof v)navigator.msSaveOrOpenBlob(function _(v,C){return typeof C>"u"?C={autoBom:!1}:"object"!=typeof C&&(console.warn("Deprecated: Expected third argument to be a object"),C={autoBom:!C}),C.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(v.type)?new Blob(["\ufeff",v],{type:v.type}):v}(v,A),C);else if(Z(v))d(v,C,A);else{var g=document.createElement("a");g.href=v,g.target="_blank",setTimeout(function(){y(g)})}}:function(v,C,A,g){if((g=g||open("","_blank"))&&(g.document.title=g.document.body.innerText="downloading..."),"string"==typeof v)return d(v,C,A);var p="application/octet-stream"===v.type,l=/constructor/i.test(u.HTMLElement)||u.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||p&&l||z)&&typeof FileReader<"u"){var m=new FileReader;m.onloadend=function(){var O=m.result;O=s?O:O.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=O:location=O,g=null},m.readAsDataURL(v)}else{var T=u.URL||u.webkitURL,x=T.createObjectURL(v);g?g.location=x:location.href=x,g=null,setTimeout(function(){T.revokeObjectURL(x)},4e4)}});u.saveAs=b.saveAs=b,N.exports=b}.apply(U,[]))&&(N.exports=h)}}]);