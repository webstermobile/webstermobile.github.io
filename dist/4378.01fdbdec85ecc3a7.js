"use strict";(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[4378],{76284:(E,U,a)=>{a.d(U,{z:()=>h});var _=a(3927),m=a(94650),x=a(80529),r=a(28555),v=a(11481),b=a(91599);let h=(()=>{class T extends _.su{constructor(t,f,M,C){super(t,f),this.http=t,this.store=f,this.sanitizer=M,this.modelName="User",this.baseUrl="",this.handleError=C.createHandleError(`${this.modelName}Service`)}uploadImage(t){const f=this.getUrl("carpark/api/assets/img"),M=new FormData;return M.append("file",t,t.name),this.post(f,M).map(({uuid:C})=>this.getImage(C))}getImage(t){return this.getUrl(`carpark/api/resources/${t}`)}getImageByUuid(t,f){return this.get(this.getUrl(`carpark/api/resources/${t}`),{responseType:"blob"}).map(M=>f?this._getSafeFileUrl(M):this.getSafeFileUrl(M))}getSafeFileUrl(t){return this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(t))}_getSafeFileUrl(t){return{imgUrl:this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(t)),type:t.type}}requestSessionImage(t,f){const M=this.getUrl(`carpark/api/anpr/request/${t}/${f}`);return this.get(M,{responseType:"text"})}getSessionImage(t){return this.get(this.getUrl(`carpark/api/anpr/assets/${t}/1`),{responseType:"blob"}).map(f=>this.getSafeFileUrl(f))}}return T.\u0275fac=function(t){return new(t||T)(m.LFG(x.eN),m.LFG(r.yh),m.LFG(v.H7),m.LFG(b.k))},T.\u0275prov=m.Yz7({token:T,factory:T.\u0275fac}),T})()},71942:(E,U,a)=>{a.d(U,{f:()=>M});var _=a(38014),m=a(3927),x=a(86181),r=a(21086),v=a(27221),b=a(66708),h=a(94650),T=a(60097),D=a(80529),t=a(28555),f=a(91599);let M=(()=>{class C extends m.su{constructor(s,o,d,g){super(o,d),this.carparkService=s,this.http=o,this.store=d,this.modelName="Vehicle",this.handleError=g.createHandleError(`${this.modelName}Service`),this.handleDynamicUrl()}ngOnInit(){}handleDynamicUrl(){const s=JSON.parse(localStorage.getItem("user")).login;this.baseUrl=this.carparkService.isMotorist()&&b.Z.isNotNull(s)?`carpark/api/drivers/${s}/vehicles`:"carpark/api/vehicle/get-vehicles"}getTelList(s,o){console.log(s);const d=this.getUrl((0,x.U8)("carpark/api/vehicle/vehicles",{...s,...(0,x.jq)(o)}));return this.get(d)}filterModel(s,o){const d=this.getUrl((0,x.U8)(this.baseUrl,{...s,...(0,x.jq)(o)}));return this.get(d).pipe((0,v.K)(this.handleError(`${this.modelName}Filter`,{}))).map(g=>Array.isArray(g)?(0,m.eC)(g):(0,m.O7)(g))}updateVehicle(s){const o=this.getUrl(`carpark/api/drivers/${s.driverCode}/vehicles/${s.vehicleId}`);return this.patch(o,s.vehicle).pipe((0,v.K)(this.handleError(`${this.modelName}Update`,{})))}getModel(s){const o=this.getUrl(`carpark/api/vehicle/${s}`);return this.get(o).pipe((0,v.K)(this.handleError(`${this.modelName}Get`,{})))}deleteModel(s,o){const d=this.getUrl(`carpark/api/drivers/${s}/vehicles/${o}`);return this.delete(d).pipe((0,v.K)(this.handleError(`${this.modelName}Delete`)))}deleteAdminModel(s){const o=this.getUrl(`carpark/api/admin/vehicle/${s}`);return this.delete(o).pipe((0,v.K)(this.handleError(`${this.modelName}Delete`)))}createVehicle(s,o){const d=this.getUrl(`carpark/api/drivers/${s}/vehicles`);return this.post(d,o)}putUpdateVehicle(s,o){const d=this.getUrl(`carpark/api/drivers/${s}/vehicles/${o.id}`);return this.put(d,o)}getDriverCode(s){const o=this.getUrl(`carpark/api/drivers/${s}/driverCode`);return this.get(o)}createModel(s,o){const d=this.getUrl(`carpark/api/drivers/${s}/vehicles`);return this.post(d,o).pipe((0,v.K)(this.handleError(`${this.modelName}Create`,{})))}createVehicleAdmin(s){const o=this.getUrl(`carpark/api/admin/vehicles/${s.mobile}`);return this.post(o,s).pipe((0,v.K)(this.handleError(`${this.modelName}Create`,{})))}updateModel(s){const o=this.getUrl("carpark/api/admin/vehicle-changes");return this.post(o,s).pipe((0,v.K)(this.handleError(`${this.modelName}Update`,{})))}getSimpleList(){const s=this.getUrl("carpark/api/vehicle/simple-vehicles-list");return this.get(s).pipe((0,v.K)(this.handleError(`${this.modelName}SimpleList`,{})))}filterModelByDriver(s){const o=this.getUrl(`carpark/api/drivers/${s}/vehicles`);return this.get(o).pipe((0,v.K)(()=>(0,r.of)([])))}isOperator(){const s=JSON.parse(localStorage.getItem("user-roles"));return!(!b.Z.isNotNull(s)||!s.includes(_.i44.Operator))}getUserVehicle(s,o){this.baseUrl=`carpark/api/drivers/${s}/vehicles`;const d=this.getUrl((0,x.U8)(this.baseUrl,{...(0,x.jq)(o)}));return this.get(d).pipe((0,v.K)(this.handleError(`${this.modelName}Filter`,{}))).map(g=>Array.isArray(g)?(0,m.eC)(g):(0,m.O7)(g))}}return C.\u0275fac=function(s){return new(s||C)(h.LFG(T.x),h.LFG(D.eN),h.LFG(t.yh),h.LFG(f.k))},C.\u0275prov=h.Yz7({token:C,factory:C.\u0275fac}),C})()},76916:(E,U,a)=>{a.d(U,{G:()=>C});var _=a(34793),m=a(92198),x=a(38014),r=a(94650),v=a(89383),b=a(60097),h=a(36895);function T(u,s){if(1&u&&(r.TgZ(0,"a",14)(1,"span",15),r._uU(2),r.ALo(3,"translate"),r.qZA()()),2&u){const o=r.oxw().$implicit;r.xp6(2),r.hij(" ",r.lcZ(3,1,o.label)," ")}}function D(u,s){if(1&u&&(r.TgZ(0,"a",16)(1,"span",15),r._uU(2),r.ALo(3,"translate"),r.qZA()()),2&u){const o=r.oxw(),d=o.$implicit,g=o.last,A=r.oxw(2);r.Q6J("routerLink",d.url)("queryParams",g&&A.route.snapshot.queryParams),r.xp6(2),r.hij(" ",r.lcZ(3,3,d.label)," ")}}function t(u,s){if(1&u&&(r.ynx(0),r.TgZ(1,"li",10)(2,"span"),r._uU(3," > "),r.qZA()(),r.TgZ(4,"li",11),r.YNc(5,T,4,3,"a",12),r.YNc(6,D,4,5,"a",13),r.qZA(),r.BQk()),2&u){const o=s.first;r.xp6(5),r.Q6J("ngIf",o),r.xp6(1),r.Q6J("ngIf",!o)}}function f(u,s){if(1&u){const o=r.EpF();r.TgZ(0,"div",1)(1,"div",2)(2,"div",3),r._UZ(3,"h3",4),r.TgZ(4,"ul",5)(5,"li",6)(6,"a",7),r.NdJ("click",function(){r.CHM(o);const g=r.oxw();return r.KtG(g.jumpHome())}),r._UZ(7,"i",8),r.qZA()(),r.YNc(8,t,7,2,"ng-container",9),r.qZA()(),r.TgZ(9,"div"),r.Hsn(10),r.qZA()()()}if(2&u){const o=r.oxw();r.xp6(3),r.Q6J("innerHTML",o.title,r.oJD),r.xp6(5),r.Q6J("ngForOf",o.breads)}}const M=["*"];let C=(()=>{class u{constructor(o,d,g,A){this.router=o,this.route=d,this.translate=g,this._carparkService=A,this.breads=[],this.loginUser=""}ngOnInit(){let o=JSON.parse(localStorage.getItem("user-roles"))[0];this.loginUser=o,console.log(this.loginUser,"\u4fe1\u606f"),this.breads=this.buildBreadCrumb(this.route.root),this.translate.get(this.breads[0].label).subscribe(g=>{this.label=g}),this.router.events.pipe((0,m.h)(g=>g instanceof _.m2)).subscribe(()=>{this.breads=this.buildBreadCrumb(this.route.root)})}buildBreadCrumb(o,d=[""],g=[]){const A=o.snapshot.url[0]&&o.snapshot.url[0].path,L=[...d,A],y={...this.extractBreadcrumb(o),url:L},Z=A&&y.label?[...g,y]:g;return this.title=y.title||this.title||"",this.isMotorist&&"My Vehicle(s)"===y.label&&(this.title="My Vehicle(s)"),o.firstChild?A?this.buildBreadCrumb(o.firstChild,L,Z):this.buildBreadCrumb(o.firstChild,d,g):(this.translate.get(this.title).subscribe(O=>{this.title=O}),Z)}get isMotorist(){return this._carparkService.isMotorist()}extractBreadcrumb(o){return o.snapshot.data.breadcrumb instanceof Function?o.snapshot.data.breadcrumb(o):o.snapshot.data.breadcrumb}jumpHome(){let o=JSON.parse(localStorage.getItem("user-roles"))[0]??"";this.router.navigate(o.length?[x.gpL[o]]:["/"])}}return u.\u0275fac=function(o){return new(o||u)(r.Y36(_.F0),r.Y36(_.gz),r.Y36(v.sK),r.Y36(b.x))},u.\u0275cmp=r.Xpm({type:u,selectors:[["app-title-bar"]],ngContentSelectors:M,decls:1,vars:1,consts:[["class","m-subheader",4,"ngIf"],[1,"m-subheader"],[1,"d-flex","align-items-center"],[1,"mr-auto"],[1,"m-subheader__title","m-subheader__title--separator","text-main",3,"innerHTML"],[1,"m-subheader__breadcrumbs","m-nav","m-nav--inline"],[1,"m-nav__item","m-nav__item--home"],[1,"m-nav__link","m-nav__link--icon",3,"click"],[1,"m-nav__link-icon","la","la-home"],[4,"ngFor","ngForOf"],[1,"m-nav__separator"],[1,"m-nav__item"],["class","m-nav__link",4,"ngIf"],["class","m-nav__link",3,"routerLink","queryParams",4,"ngIf"],[1,"m-nav__link"],[1,"m-nav__link-text"],[1,"m-nav__link",3,"routerLink","queryParams"]],template:function(o,d){1&o&&(r.F$t(),r.YNc(0,f,11,2,"div",0)),2&o&&r.Q6J("ngIf","ROLE_TPO_PARTNER"!==d.loginUser)},dependencies:[h.sg,h.O5,_.yS,v.X$],encapsulation:2}),u})()},54378:(E,U,a)=>{a.r(U),a.d(U,{ViolationsModule:()=>Tt,createTranslateLoader:()=>H});var _=a(36895),m=a(34793),x=a(60097),r=a(36511),v=a(91599),b=a(42684),h=a(71942),T=a(3927),D=a(86181),t=a(94650),f=a(80529),M=a(28555);let C=(()=>{class i extends T.su{constructor(e,n,l){super(e,n),this.http=e,this.store=n,this.modelName="Violation",this.baseUrl="carpark/api/enforcement/transactions",this.handleError=l.createHandleError(`${this.modelName}Service`)}filterModel(e,n){return super.filterModel(e,n).map(l=>l.data?l:{data:[],pagination:(0,D.f$)()})}createModel(e){const n=this.getUrl("carpark/api/parking-transactions-entry");return this.post(n,e)}getRuleList(e){const n=this.getUrl(`carpark/api/code-tables/type/${e}`);return this.get(n)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(f.eN),t.LFG(M.yh),t.LFG(v.k))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();var u=a(30329),s=a(59501),o=a(88796),d=a(21532),g=a(24006),A=a(372),L=a(59245),y=a(89518),Z=a(89383),O=a(19832),N=a(76284);function K(i){return new O.w(i,"../assets/i18n/",".json")}let k=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[C,x.x,r.I,N.z],imports:[_.ez,g.u5,m.Bz,d.x,u.D,A.kn,L.mr,o.A0,y.H3,Z.aw.forChild({loader:{provide:Z.Zw,useFactory:K,deps:[f.eN]}})]}),i})();var W=a(76916),P=a(38014),I=a(79118),$=a(15035),B=a(8929),j=a(1059),Q=a(80013),Y=a(75778),F=a(2994),w=a(87545),G=a(71198),z=a(87501),X=a(36053),q=a(21086),J=a(20388),tt=a(40269);function et(i,p){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=p.$implicit,n=t.oxw().$implicit,l=t.oxw();t.Udp("width",l.originalHeaders[6].width),t.xp6(1),t.hij(" ",e.code===l.addZero(n.ruleInfringed)?e.value:""," ")}}function nt(i,p){if(1&i){const e=t.EpF();t.TgZ(0,"td",5),t.NdJ("click",function(){const c=t.CHM(e).index,V=t.oxw(),S=t.MAs(1);return t.KtG(V.toggleViolation(S,c))}),t.TgZ(1,"span"),t._UZ(2,"i",6),t.qZA()(),t.TgZ(3,"td",7)(4,"span"),t._uU(5),t.qZA()(),t.TgZ(6,"td",7)(7,"span")(8,"span"),t._UZ(9,"img",8),t.qZA(),t.TgZ(10,"span"),t._uU(11),t.qZA()()(),t.TgZ(12,"td",7)(13,"span"),t._uU(14),t.qZA()(),t.TgZ(15,"td",7)(16,"span"),t._uU(17),t.ALo(18,"date"),t._UZ(19,"br"),t._uU(20),t.ALo(21,"date"),t.qZA()(),t.TgZ(22,"td",7)(23,"span"),t._uU(24),t.qZA()(),t.TgZ(25,"td",7),t.YNc(26,et,2,3,"span",9),t.qZA(),t.TgZ(27,"td",7)(28,"span"),t._uU(29),t.qZA()()}if(2&i){const e=p.$implicit,n=p.expanded,l=t.oxw();t.xp6(1),t.Udp("width",l.tableHeaders[0].width),t.xp6(1),t.Q6J("ngClass",n?"fa-caret-down":"fa-caret-right"),t.xp6(2),t.Udp("width",l.originalHeaders[1].width),t.xp6(1),t.hij(" ",e.id," "),t.xp6(2),t.Udp("width",l.originalHeaders[2].width),t.xp6(2),t.Q6J("src",l.vehicleTypeLogo(e),t.LSH),t.xp6(2),t.Oqu(e.plateNo),t.xp6(2),t.Udp("width",l.originalHeaders[3].width),t.xp6(1),t.hij(" ",null==e.carPark?null:e.carPark.code," "),t.xp6(2),t.Udp("width",l.originalHeaders[4].width),t.xp6(1),t.hij(" ",t.xi3(18,24,e.incidentDateTime,"MMM d, y")," "),t.xp6(3),t.hij(" ",t.xi3(21,27,e.incidentDateTime,"h:mm:ss a")," "),t.xp6(3),t.Udp("width",l.originalHeaders[5].width),t.xp6(1),t.hij(" ",e.violationType," "),t.xp6(2),t.Q6J("ngForOf",l.typeList),t.xp6(2),t.Udp("width",l.originalHeaders[7].width),t.xp6(1),t.hij(" ",e.compositionFine," ")}}function it(i,p){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"img",16),t.NdJ("click",function(){const c=t.CHM(e).$implicit,V=t.oxw(3),S=t.MAs(7);return t.KtG(V.showLargerSize(S,c))})("contextmenu",function(l){t.CHM(e);const c=t.oxw(3);return t.KtG(c.onRightClick(l))}),t.qZA()()}if(2&i){const e=p.$implicit;t.xp6(1),t.Q6J("src",e,t.LSH)}}function at(i,p){if(1&i&&(t.ynx(0),t.YNc(1,it,2,1,"div",15),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.attachments)}}function ot(i,p){1&i&&(t.TgZ(0,"div"),t._uU(1,"Loading Attachments"),t.qZA())}function rt(i,p){1&i&&(t.TgZ(0,"div"),t._uU(1,"No Attachment"),t.qZA())}function lt(i,p){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,ot,2,0,"div",14),t.YNc(2,rt,2,0,"div",14),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",0!==e.assets.length),t.xp6(1),t.Q6J("ngIf",0===e.assets.length)}}function st(i,p){if(1&i&&(t.TgZ(0,"td",7),t._UZ(1,"span"),t.qZA(),t.TgZ(2,"td",7)(3,"div",10)(4,"div",11),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",12)(8,"div",13),t.YNc(9,at,2,1,"ng-container",14),t.YNc(10,lt,3,2,"div",14),t.qZA()()()()),2&i){const e=p.$implicit,n=t.oxw();t.xp6(1),t.Udp("width",n.tableHeaders[0].width),t.xp6(4),t.hij(" ",t.lcZ(6,5,"Attachment")," "),t.xp6(4),t.Q6J("ngIf",e.attachments),t.xp6(1),t.Q6J("ngIf",!e.attachments)}}const ct=function(i,p){return{width:i,height:p}};function pt(i,p){if(1&i){const e=t.EpF();t.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"img",20),t.NdJ("contextmenu",function(l){t.CHM(e);const c=t.oxw();return t.KtG(c.onRightClick(l))}),t.qZA()(),t.TgZ(4,"div",21)(5,"button",22),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.imgZoom("minus"))}),t._uU(6,"-"),t.qZA(),t.TgZ(7,"button",23),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.imgZoom("plus"))}),t._uU(8,"+"),t.qZA()()(),t.TgZ(9,"div",24)(10,"button",23),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.cancel())}),t._uU(11,"Cancel"),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(3),t.Q6J("src",e.selectedImg,t.LSH)("ngStyle",t.WLB(2,ct,e.imgWidth+"px",e.imgHeight+"px"))}}const R=[{text:"",width:"30px",align:I.iW.Center},{text:"ID",width:"60px"},{text:"Vehicle",column:"vehiclePlateNo",width:"140px"},{text:"Car Park ID",column:"carParkId",width:"120px"},{text:"Offence Time",column:"offenceTime",width:"120px"},{text:"Violation Type",column:"violationType",width:"120px"},{text:"Type",column:"type",width:"120px"},{text:"Fine",column:"fine",width:"120px"}];let dt=(()=>{class i{constructor(e,n,l,c){this.translate=e,this.assetsService=n,this.modalService=l,this.bsModalRef=c,this.loading=!1,this.pageChange=new t.vpe,this.pagination=(0,D.f$)(),this.data=[],this.defaultImgWidth=800,this.defaultImgHeight=500,this.imgWidth=this.defaultImgWidth,this.imgHeight=this.defaultImgHeight,this.tableHeaders=R,this.originalHeaders=R}vehicleTypeLogo(e){return P.php.filter(n=>n.value===e.plateNo).map(n=>n.icon)[0]}addZero(e){const n="000"+e;return n.substring(n.length-3)}pageChanged(e){this.pagination=e,this.pageChange.emit(this.pagination)}ngOnInit(){const e=this.tableHeaders.map(n=>n.text);this.translate.get(e).subscribe(n=>{this.tableHeaders.forEach(l=>{for(const c in n)n.hasOwnProperty(c)&&l.text===c&&(l.text=n[c])})})}toggleViolation(e,n){e.toggleItem(n);const l=this.data[n];l.attachments||this.getAttachments(l.assets).subscribe({next:c=>l.attachments=c})}getAttachments(e){return console.log(e.length),e.length?(0,X.aj)(e.map(n=>this.assetsService.getImageByUuid(n.assetUuid))):(0,q.of)(null)}saveAs(e,n){e.attachments.map(l=>{this.saveFile(`${e.id}_${n}`,l.changingThisBreaksApplicationSecurity)})}saveFile(e,n){const l=document.createElement("a");document.body.appendChild(l),l.href=n,l.download=e,l.click(),setTimeout(()=>{window.URL.revokeObjectURL(n),document.body.removeChild(l)},0)}showLargerSize(e,n){this.selectedImg=n,this.bsModalRef=this.modalService.show(e,{ignoreBackdropClick:!0,class:"gray modal-lg"}),this.imgWidth=this.defaultImgWidth,this.imgHeight=this.defaultImgHeight}onRightClick(e){return!1}cancel(){this.bsModalRef.hide()}imgZoom(e){if("minus"===e){if(this.imgWidth==this.defaultImgWidth||this.imgHeight==this.defaultImgHeight)return;return this.imgWidth-=100,void(this.imgHeight-=100)}this.imgWidth+=100,this.imgHeight+=100}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.sK),t.Y36(N.z),t.Y36(J.tT),t.Y36(J.UZ))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-violations-datatable"]],inputs:{isExtended:"isExtended",loading:"loading",pagination:"pagination",data:"data",typeList:"typeList"},outputs:{pageChange:"pageChange"},decls:8,vars:5,consts:[[3,"headers","items","loading","pagination","scrollingDisabled","pageChanged"],["tableViolations",""],["rowTemplate",""],["expandTemplate",""],["largeSizeImg",""],[1,"m-datatable__cell","text-center",3,"click"],[1,"fa","text-primary",3,"ngClass"],[1,"m-datatable__cell"],["alt","",3,"src"],[3,"width",4,"ngFor","ngForOf"],[1,"row"],[1,"col-3","col-md-2","m-font-weight-500"],[1,"col"],[1,"row","m-0"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"mr-3",2,"max-width","90px","max-height","200px",3,"src","click","contextmenu"],[1,"modal-body","m-form","m-form--fit","m-form--label-align-right","text-center"],[1,"modalContent"],[1,"imgContainer"],[1,"modal-large-size-img",3,"src","ngStyle","contextmenu"],[1,"imgZoomBtnContianer"],["type","button",1,"btn","btn-default","mr-3","minusBtn",3,"click"],["type","button",1,"btn","btn-default","mr-3",3,"click"],[1,"mt-3","text-center"]],template:function(e,n){1&e&&(t.TgZ(0,"app-datatable",0,1),t.NdJ("pageChanged",function(c){return n.pageChanged(c)}),t.YNc(2,nt,30,30,"ng-template",null,2,t.W1O),t.YNc(4,st,11,7,"ng-template",null,3,t.W1O),t.qZA(),t.YNc(6,pt,12,5,"ng-template",null,4,t.W1O)),2&e&&t.Q6J("headers",n.tableHeaders)("items",n.data)("loading",n.loading)("pagination",n.pagination)("scrollingDisabled",!0)},dependencies:[_.mk,_.sg,_.O5,_.PC,tt.Uo,I.nE,_.uU,Z.X$],styles:[".modalContent[_ngcontent-%COMP%]{display:flex}.modalContent[_ngcontent-%COMP%]   .imgZoomBtnContianer[_ngcontent-%COMP%]{flex-direction:column;justify-content:flex-end;align-items:center;display:flex;margin-left:20px}.modalContent[_ngcontent-%COMP%]   .imgZoomBtnContianer[_ngcontent-%COMP%]   .minusBtn[_ngcontent-%COMP%]{margin-bottom:10px}.modalContent[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]{width:900px;height:500px;overflow:auto}"]}),i})();const gt=["filterTemplate"];function ht(i,p){if(1&i&&(t.TgZ(0,"option",17),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&i){const e=p.$implicit;t.Q6J("value",e.code),t.xp6(1),t.hij(" ",t.lcZ(2,2,e.value)," ")}}function mt(i,p){if(1&i&&(t.TgZ(0,"option",17),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&i){const e=p.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",t.lcZ(2,2,e.value)," ")}}function ut(i,p){if(1&i&&(t.TgZ(0,"option",17),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&i){const e=p.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",t.lcZ(2,2,e.description)," ")}}let _t=(()=>{class i extends I.Gw{constructor(e,n,l,c){super(),this.violationService=e,this.carParkService=n,this.codeTablesService=l,this.translate=c,this.vehiclePlateNo="",this.loading=!1,this.violationType="",this.ruleInfringed="",this.status="",this.type="",this.timeRange=[],this.vehicle$=new B.xQ,this.StatusList=P.xM4,this.carParkInput$=new B.xQ,this.ruleList=[],this.pagination=(0,D.f$)(),this.data=[]}get filterParams(){return{vehicle:this.vehicle,carPark:this.carParkId,violationType:this.violationType,status:this.status,type:this.ruleInfringed,from:this.timeRange[0]&&(0,$.W8)(this.timeRange[0]),to:this.timeRange[1]&&(0,$.W8)(this.timeRange[1]),sort:"incidentDateTime,desc"}}reloadData(){this.reloadDataService(this.violationService)}pageChanged(e){this.pagination=e,this.reloadData()}ngOnInit(){this.vehicle$.debounceTime(500).subscribe(()=>{this.reloadData()}),this.reloadData(),this.carParks$=this.carParkInput$.pipe((0,j.O)(""),(0,Q.b)(200),(0,Y.x)(),(0,F.b)(()=>this.carParkLoading=!0),(0,w.w)(e=>this.carParkService.getSimpleList(e).pipe((0,F.b)(()=>this.carParkLoading=!1)))),this.violationTypes$=this.codeTablesService.filterModelByType(P.BcL.Violation),this.violationService.getRuleList(P.BcL.RuleInfringed).subscribe(e=>{this.ruleList=e})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(C),t.Y36(x.x),t.Y36(r.I),t.Y36(Z.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-violations-table"]],contentQueries:function(e,n,l){if(1&e&&t.Suo(l,gt,5),2&e){let c;t.iGM(c=t.CRH())&&(n.filterTemplate=c.first)}},inputs:{isExtended:"isExtended"},features:[t.qOj],decls:56,vars:47,consts:[[1,"form-group","m-form__group","m-portlet__filters"],[1,"m-portlet__filter","col-3"],["placeholder","","bindLabel","name","bindValue","id",3,"items","ngModel","typeahead","loading","ngModelChange","change"],[1,"m-portlet__filter"],["bsDaterangepicker","",1,"form-control",3,"ngModel","ngModelChange"],["drp","bsDaterangepicker"],[1,"col-form-label"],[1,"m-input-icon","m-input-icon--left"],["type","text","placeholder","",1,"form-control","m-input",3,"ngModel","ngModelChange"],[1,"m-input-icon__icon","m-input-icon__icon--left"],[1,"la","la-search"],["name","type",1,"form-control","m-input",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["name","violationType",1,"form-control","m-input",3,"ngModel","ngModelChange"],["name","status",1,"form-control","m-input",3,"ngModel","ngModelChange"],[3,"data","typeList","loading","pagination","pageChange"],[3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div")(6,"ng-select",2),t.NdJ("ngModelChange",function(c){return n.carParkId=c})("change",function(){return n.reloadData()}),t.ALo(7,"async"),t.qZA()()(),t.TgZ(8,"div",3)(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div")(13,"input",4,5),t.NdJ("ngModelChange",function(c){return n.timeRange=c})("ngModelChange",function(){return n.reloadData()}),t.qZA()()(),t.TgZ(15,"div",3)(16,"label",6),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",7)(20,"input",8),t.NdJ("ngModelChange",function(c){return n.vehicle=c})("ngModelChange",function(c){return n.vehicle$.next(c)}),t.qZA(),t.TgZ(21,"span",9)(22,"span"),t._UZ(23,"i",10),t.qZA()()()(),t.TgZ(24,"div",3)(25,"label"),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"div")(29,"select",11),t.NdJ("ngModelChange",function(c){return n.ruleInfringed=c})("ngModelChange",function(){return n.reloadData()}),t.TgZ(30,"option",12),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.YNc(33,ht,3,4,"option",13),t.qZA()()(),t.TgZ(34,"div",3)(35,"label"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"div")(39,"select",14),t.NdJ("ngModelChange",function(c){return n.violationType=c})("ngModelChange",function(){return n.reloadData()}),t.TgZ(40,"option",12),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.YNc(43,mt,3,4,"option",13),t.ALo(44,"async"),t.qZA()()(),t.TgZ(45,"div",3)(46,"label"),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"div")(50,"select",15),t.NdJ("ngModelChange",function(c){return n.status=c})("ngModelChange",function(){return n.reloadData()}),t.TgZ(51,"option",12),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.YNc(54,ut,3,4,"option",13),t.qZA()()()(),t.TgZ(55,"app-violations-datatable",16),t.NdJ("pageChange",function(c){return n.pageChanged(c)}),t.qZA()),2&e&&(t.xp6(3),t.hij(" ",t.lcZ(4,25,"Car Park"),": "),t.xp6(3),t.Q6J("items",t.lcZ(7,27,n.carParks$))("ngModel",n.carParkId)("typeahead",n.carParkInput$)("loading",n.carParkLoading),t.xp6(4),t.hij(" ",t.lcZ(11,29,"Date"),": "),t.xp6(3),t.Q6J("ngModel",n.timeRange),t.xp6(4),t.hij(" ",t.lcZ(18,31,"Vehicle No."),": "),t.xp6(3),t.Q6J("ngModel",n.vehicle),t.xp6(6),t.hij(" ",t.lcZ(27,33,"Type"),": "),t.xp6(3),t.Q6J("ngModel",n.ruleInfringed),t.xp6(2),t.Oqu(t.lcZ(32,35,"All")),t.xp6(2),t.Q6J("ngForOf",n.ruleList),t.xp6(3),t.hij(" ",t.lcZ(37,37,"Violation Type"),": "),t.xp6(3),t.Q6J("ngModel",n.violationType),t.xp6(2),t.Oqu(t.lcZ(42,39,"All")),t.xp6(2),t.Q6J("ngForOf",t.lcZ(44,41,n.violationTypes$)),t.xp6(4),t.hij(" ",t.lcZ(48,43,"Status"),": "),t.xp6(3),t.Q6J("ngModel",n.status),t.xp6(2),t.Oqu(t.lcZ(53,45,"All")),t.xp6(2),t.Q6J("ngForOf",n.StatusList),t.xp6(1),t.Q6J("data",n.data)("typeList",n.ruleList)("loading",n.loading)("pagination",n.pagination))},dependencies:[_.sg,g.YN,g.Kr,g.Fj,g.EJ,g.JJ,g.On,G.T,z.F,o.w9,y.Bp,dt,_.Ov,_.rS,Z.X$],encapsulation:2}),i})();function H(i){return new O.w(i,"../assets/i18n/",".json")}const ft=[{path:"",component:s.f,children:[{path:"",component:(()=>{class i{constructor(e){this.translate=e,this.breadcrumbs=[{text:"Violations"}],this.carParks=[]}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-violations-home"]],decls:6,vars:1,consts:[[1,"m-content"],[1,"m-portlet","m-portlet--bordered-semi","m--padding-top-40"],[1,"m-portlet__body","m-portlet__body--scrollable"],[1,"m-portlet__frame"],[3,"isExtended"]],template:function(e,n){1&e&&(t._UZ(0,"app-title-bar"),t.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),t._UZ(5,"app-violations-table",4),t.qZA()()()()),2&e&&(t.xp6(5),t.Q6J("isExtended",!0))},dependencies:[W.G,_t],encapsulation:2}),i})()}]}];let Tt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[v.k,b.e,C,x.x,h.f,r.I],imports:[_.ez,m.Bz.forChild(ft),d.x,u.D,k,o.A0,Z.aw.forChild({loader:{provide:Z.Zw,useFactory:H,deps:[f.eN]}}),m.Bz]}),i})()},15035:(E,U,a)=>{a.d(U,{W8:()=>b});var _=a(21837),m=(()=>((m||(m={})).Med="yyyy-LL-dd",m))();function b(h,T=m.Med){return h?_.ou.fromJSDate(h).toFormat(T):null}}}]);