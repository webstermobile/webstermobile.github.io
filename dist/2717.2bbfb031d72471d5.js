"use strict";(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[2717],{73071:(B,z,s)=>{s.d(z,{K:()=>t});var h=s(3927),_=s(94650),m=s(80529),a=s(28555),T=s(91599);let t=(()=>{class p extends h.su{constructor(v,C,y){super(v,C),this.http=v,this.store=C,this.modelName="User",this.baseUrl="",this.handleError=y.createHandleError(`${this.modelName}Service`)}searchOwners(v){const C=this.getUrl("carpark/api/car-park-owners");return this.get(C)}searchOperators(v){const C=this.getUrl("carpark/api/car-park-operators");return this.get(C)}}return p.\u0275fac=function(v){return new(v||p)(_.LFG(m.eN),_.LFG(a.yh),_.LFG(T.k))},p.\u0275prov=_.Yz7({token:p,factory:p.\u0275fac}),p})()},52746:(B,z,s)=>{s.d(z,{t:()=>a});var h=s(72986),_=s(591),m=s(94650);let a=(()=>{class T{constructor(){this.loading=!1,this.pagination={totalCount:0,rowsPerPage:20,page:1,sortBy:null,descending:!0,totalPages:1},this.listData=[],this.hadGetData$=new _.X(!1)}get hadGetData(){return this.hadGetData$.getValue()}get filterParams(){return this._filterParams}set filterParams(p){this._filterParams=p}reloadDataService(p,x="filterModel"){this.loading=!0,this.hadGetData$.next(!1),p[x](this.filterParams,this.pagination).pipe((0,h.q)(1)).subscribe(v=>{if(v.pagination.page>v.pagination.totalPages)return this.pagination={...this.pagination,page:v.pagination.totalPages},this.reloadDataService(p);this.loading=!1,this.pagination={...this.pagination,totalCount:v.pagination.totalCount||v.pagination.totalElements},this.listData=v.data,this.hadGetData$.next(!0)},()=>{this.loading=!1,this.listData=[],this.pagination={...this.pagination,totalCount:0}})}onQueryParamsChange(p){const{pageSize:x,pageIndex:v}=p;this.pagination={...this.pagination,rowsPerPage:x,page:v},this.reloadData()}reloadData(){}ngOnInit(){}}return T.\u0275fac=function(p){return new(p||T)},T.\u0275cmp=m.Xpm({type:T,selectors:[["ng-component"]],decls:0,vars:0,template:function(p,x){},encapsulation:2}),T})()},76916:(B,z,s)=>{s.d(z,{G:()=>U});var h=s(34793),_=s(92198),m=s(38014),a=s(94650),T=s(89383),t=s(60097),p=s(36895);function x(f,D){if(1&f&&(a.TgZ(0,"a",14)(1,"span",15),a._uU(2),a.ALo(3,"translate"),a.qZA()()),2&f){const c=a.oxw().$implicit;a.xp6(2),a.hij(" ",a.lcZ(3,1,c.label)," ")}}function v(f,D){if(1&f&&(a.TgZ(0,"a",16)(1,"span",15),a._uU(2),a.ALo(3,"translate"),a.qZA()()),2&f){const c=a.oxw(),Z=c.$implicit,u=c.last,A=a.oxw(2);a.Q6J("routerLink",Z.url)("queryParams",u&&A.route.snapshot.queryParams),a.xp6(2),a.hij(" ",a.lcZ(3,3,Z.label)," ")}}function C(f,D){if(1&f&&(a.ynx(0),a.TgZ(1,"li",10)(2,"span"),a._uU(3," > "),a.qZA()(),a.TgZ(4,"li",11),a.YNc(5,x,4,3,"a",12),a.YNc(6,v,4,5,"a",13),a.qZA(),a.BQk()),2&f){const c=D.first;a.xp6(5),a.Q6J("ngIf",c),a.xp6(1),a.Q6J("ngIf",!c)}}function y(f,D){if(1&f){const c=a.EpF();a.TgZ(0,"div",1)(1,"div",2)(2,"div",3),a._UZ(3,"h3",4),a.TgZ(4,"ul",5)(5,"li",6)(6,"a",7),a.NdJ("click",function(){a.CHM(c);const u=a.oxw();return a.KtG(u.jumpHome())}),a._UZ(7,"i",8),a.qZA()(),a.YNc(8,C,7,2,"ng-container",9),a.qZA()(),a.TgZ(9,"div"),a.Hsn(10),a.qZA()()()}if(2&f){const c=a.oxw();a.xp6(3),a.Q6J("innerHTML",c.title,a.oJD),a.xp6(5),a.Q6J("ngForOf",c.breads)}}const I=["*"];let U=(()=>{class f{constructor(c,Z,u,A){this.router=c,this.route=Z,this.translate=u,this._carparkService=A,this.breads=[],this.loginUser=""}ngOnInit(){let c=JSON.parse(localStorage.getItem("user-roles"))[0];this.loginUser=c,console.log(this.loginUser,"\u4fe1\u606f"),this.breads=this.buildBreadCrumb(this.route.root),this.translate.get(this.breads[0].label).subscribe(u=>{this.label=u}),this.router.events.pipe((0,_.h)(u=>u instanceof h.m2)).subscribe(()=>{this.breads=this.buildBreadCrumb(this.route.root)})}buildBreadCrumb(c,Z=[""],u=[]){const A=c.snapshot.url[0]&&c.snapshot.url[0].path,P=[...Z,A],O={...this.extractBreadcrumb(c),url:P},J=A&&O.label?[...u,O]:u;return this.title=O.title||this.title||"",this.isMotorist&&"My Vehicle(s)"===O.label&&(this.title="My Vehicle(s)"),c.firstChild?A?this.buildBreadCrumb(c.firstChild,P,J):this.buildBreadCrumb(c.firstChild,Z,u):(this.translate.get(this.title).subscribe(F=>{this.title=F}),J)}get isMotorist(){return this._carparkService.isMotorist()}extractBreadcrumb(c){return c.snapshot.data.breadcrumb instanceof Function?c.snapshot.data.breadcrumb(c):c.snapshot.data.breadcrumb}jumpHome(){let c=JSON.parse(localStorage.getItem("user-roles"))[0]??"";this.router.navigate(c.length?[m.gpL[c]]:["/"])}}return f.\u0275fac=function(c){return new(c||f)(a.Y36(h.F0),a.Y36(h.gz),a.Y36(T.sK),a.Y36(t.x))},f.\u0275cmp=a.Xpm({type:f,selectors:[["app-title-bar"]],ngContentSelectors:I,decls:1,vars:1,consts:[["class","m-subheader",4,"ngIf"],[1,"m-subheader"],[1,"d-flex","align-items-center"],[1,"mr-auto"],[1,"m-subheader__title","m-subheader__title--separator","text-main",3,"innerHTML"],[1,"m-subheader__breadcrumbs","m-nav","m-nav--inline"],[1,"m-nav__item","m-nav__item--home"],[1,"m-nav__link","m-nav__link--icon",3,"click"],[1,"m-nav__link-icon","la","la-home"],[4,"ngFor","ngForOf"],[1,"m-nav__separator"],[1,"m-nav__item"],["class","m-nav__link",4,"ngIf"],["class","m-nav__link",3,"routerLink","queryParams",4,"ngIf"],[1,"m-nav__link"],[1,"m-nav__link-text"],[1,"m-nav__link",3,"routerLink","queryParams"]],template:function(c,Z){1&c&&(a.F$t(),a.YNc(0,y,11,2,"div",0)),2&c&&a.Q6J("ngIf","ROLE_TPO_PARTNER"!==Z.loginUser)},dependencies:[p.sg,p.O5,h.yS,T.X$],encapsulation:2}),f})()},42717:(B,z,s)=>{s.r(z),s.d(z,{DriverModule:()=>Wt,createTranslateLoader:()=>X});var h=s(36895),_=s(24006),m=s(34793),a=s(372),T=s(72986),t=s(94650),p=s(64050);let x=(()=>{class n{constructor(e,r){this.driverService=e,this.router=r}resolve(e){return this.driverService.getModel(e.paramMap.get("login")).pipe((0,T.q)(1))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(p.F),t.LFG(m.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var v=s(91599),C=s(42684),y=s(30329),I=s(59501),U=s(59245),f=s(21532),D=s(73071),c=s(88796),Z=s(80529),u=s(89383),A=s(19832),P=s(71942);function O(n){return new A.w(n,"../assets/i18n/",".json")}let J=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[v.k,C.e,D.K,P.f],imports:[m.Bz,h.ez,f.x,_.u5,y.D,U.mr,a.kn,c.A0,u.aw.forChild({loader:{provide:u.Zw,useFactory:O,deps:[Z.eN]}})]}),n})();var F=s(76916),N=s(38014),E=s(35635),Q=s(66616),q=s(47044),k=s(21811),Y=s(38231),R=s(52746),H=(s(79118),s(60097)),w=s(73325),M=s(29562),d=s(40269);function tt(n,i){if(1&n&&t._uU(0),2&n){const e=i.range;t.lnq(" ",e[0],"-",e[1]," of ",i.$implicit," items\n")}}function et(n,i){if(1&n&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Oqu(e.text)}}const nt=function(n){return["/vehicle-management/",n]};function rt(n,i){if(1&n&&(t.TgZ(0,"li",11),t._UZ(1,"i",12),t.TgZ(2,"span"),t._uU(3,"View"),t.qZA()()),2&n){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,nt,e.id))}}function it(n,i){if(1&n&&(t.TgZ(0,"tr")(1,"td")(2,"span"),t._UZ(3,"img",5),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA()(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td")(11,"button",6),t._UZ(12,"i",7),t.qZA(),t.TgZ(13,"nz-dropdown-menu",null,8)(15,"ul",9),t.YNc(16,rt,4,3,"li",10),t.qZA()()()()),2&n){const e=i.$implicit,r=i.index,o=t.MAs(14),l=t.oxw();t.ekj("ant-table-row-odd",r%2==1),t.xp6(3),t.Q6J("src",l.vehicleTypeLogo(e.vehicleType,"icon"),t.LSH),t.xp6(2),t.Oqu(e.vehicleNumber),t.xp6(2),t.Oqu(e.iuNumber),t.xp6(2),t.Oqu(l.vehicleTypeLogo(e.vehicleType,"text")),t.xp6(2),t.Q6J("nzDropdownMenu",o)("nzPlacement","topCenter"),t.xp6(5),t.Q6J("ngIf",!l.isMotorist)}}let ot=(()=>{class n extends R.t{constructor(e,r){super(),this.vehicleService=e,this.carparkService=r,this.tableHeaders=[{text:"Vehicle No.",column:"vehiclePlateNo",width:"150px"},{text:"IU No.",column:"iuNumber",width:"120px"},{text:"Vehicle Type",column:"vehicleType",width:"120px"},{text:"Actions",width:"100px"}]}ngOnInit(){this.reloadData()}get filterParams(){return{}}reloadData(){this.vehicleService.getUserVehicle(this.driverCode,this.pagination).subscribe(e=>{this.loading=!1,this.pagination={...this.pagination,totalCount:e.pagination.totalCount},this.listData=e.data},()=>{this.loading=!1,this.listData=[],this.pagination={...this.pagination,totalCount:0}})}pageChanged(e){this.pagination=e,this.reloadData()}vehicleTypeLogo(e,r){return(0,N.e9Z)(N.php,e,r)}get isMotorist(){return this.carparkService.isMotorist()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(P.f),t.Y36(H.x))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-vehicle-datatable"]],inputs:{driverCode:"driverCode"},features:[t.qOj],decls:9,vars:10,consts:[["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowSizeChanger","nzShowTotal","nzQueryParams"],["basicTable",""],[4,"ngFor","ngForOf"],[3,"ant-table-row-odd",4,"ngFor","ngForOf"],["alt","",3,"src"],["nz-dropdown","","nzTrigger","click",1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--outline-2x","m-btn--pill","no-border",3,"nzDropdownMenu","nzPlacement"],[1,"la","la-ellipsis-h"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"routerLink",4,"ngIf"],["nz-menu-item","",3,"routerLink"],[1,"la","la-eye",2,"margin-right","4px"]],template:function(e,r){if(1&e&&(t.YNc(0,tt,1,3,"ng-template",null,0,t.W1O),t.TgZ(2,"nz-table",1,2),t.NdJ("nzQueryParams",function(l){return r.onQueryParamsChange(l)}),t.TgZ(4,"thead")(5,"tr"),t.YNc(6,et,2,1,"th",3),t.qZA()(),t.TgZ(7,"tbody"),t.YNc(8,it,17,9,"tr",4),t.qZA()()),2&e){const o=t.MAs(1),l=t.MAs(3);t.xp6(2),t.Q6J("nzData",r.listData)("nzFrontPagination",!1)("nzLoading",r.loading)("nzTotal",r.pagination.totalCount)("nzPageSize",r.pagination.rowsPerPage)("nzPageIndex",r.pagination.page)("nzShowSizeChanger",!0)("nzShowTotal",o),t.xp6(4),t.Q6J("ngForOf",r.tableHeaders),t.xp6(2),t.Q6J("ngForOf",l.data)}},dependencies:[m.rH,h.sg,h.O5,w.wO,w.r9,M.cm,M.RR,q.w,d.N8,d.Uo,d._C,d.Om,d.p0,d.$Z]}),n})();function at(n,i){if(1&n&&(t.TgZ(0,"div",22)(1,"div",23)(2,"div",24)(3,"h3",25),t._uU(4),t.ALo(5,"translate"),t.qZA()()()()),2&n){const e=t.oxw();t.xp6(4),t.AsE(" ",t.lcZ(5,2,"Driver ID"),": ",e.form.id," ")}}function st(n,i){1&n&&(t.TgZ(0,"div",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Field is required.")," "))}function lt(n,i){1&n&&(t.TgZ(0,"div",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Field is required.")," "))}function ct(n,i){1&n&&(t.TgZ(0,"div",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Field is required.")," "))}function dt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"nz-input-group",27)(1,"nz-select",28),t.NdJ("ngModelChange",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.mobileCode=o)}),t._UZ(2,"nz-option",29),t.qZA(),t.TgZ(3,"input",30,31),t.NdJ("ngModelChange",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.mobileNo=o)}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.mobileCode),t.xp6(1),t.Q6J("nzLabel","+65")("nzValue","+65"),t.xp6(1),t.Q6J("ngModel",e.mobileNo)}}function pt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"input",32,33),t.NdJ("ngModelChange",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.form.hpNumber=o)}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("ngModel",e.form.hpNumber)}}let $=(()=>{class n{constructor(e){this.translate=e,this.canceled=new t.vpe,this.submitted=new t.vpe,this.form=(0,N.Mri)(),this.mobileCode="+65",this.identityTypeOptions=N.KiP}ngOnInit(){}cancel(){this.canceled.emit()}submit(){this.form.hpNumber=this.form.id?this.form.hpNumber:`${this.mobileCode} ${this.mobileNo}`,this.submitted.emit(this.form)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-drivers-form"]],inputs:{form:"form"},outputs:{canceled:"canceled",submitted:"submitted"},decls:52,vars:28,consts:[[1,"m-form","m-form--fit","m-form--label-align-right"],[1,"m-portlet"],["class","m-portlet__head",4,"ngIf"],[1,"m-portlet__body"],[1,"row","form-group","m-form__group"],[1,"col-form-label","col-lg-2","col-sm-12"],[1,"m--font-danger"],[1,"col-lg-4","col-sm-12"],["nz-input","","type","text","name","firstName","placeholder","","required","",3,"ngModel","ngModelChange"],["firstName","ngModel"],["class","form-control-feedback",4,"ngIf"],["nz-input","","type","text","name","lastName","placeholder","","required","",3,"ngModel","ngModelChange"],["lastName","ngModel"],["nz-input","","type","text","name","email","placeholder","","required","",3,"ngModel","ngModelChange"],["email","ngModel"],["nzCompact","",4,"ngIf","ngIfElse"],["editMobile",""],[3,"driverCode"],[1,"m-portlet__foot","bg-light-gray"],[1,"m-form__actions","m-form__actions--right"],["nz-button","","nzType","primary","nzSize","large","nzGhost","",1,"btn-form-ops",3,"click"],["nz-button","","nzType","primary","nzSize","large",1,"btn-form-ops","m--margin-left-30",3,"click"],[1,"m-portlet__head"],[1,"m-portlet__head-caption"],[1,"m-portlet__head-title"],[1,"m-portlet__head-text"],[1,"form-control-feedback"],["nzCompact",""],["id","mobileCodeControl","name","mobileCodeControl",2,"width","80px",3,"ngModel","ngModelChange"],[3,"nzLabel","nzValue"],["nz-input","","type","text","name","mobileNumberControl","placeholder","","required","",2,"width","calc(100% - 80px)",3,"ngModel","ngModelChange"],["mobileNumberControl","ngModel"],["nz-input","","type","text","name","hpNumber","placeholder","","required","",3,"ngModel","ngModelChange"],["hpNumber","ngModel"]],template:function(e,r){if(1&e&&(t.TgZ(0,"form",0)(1,"div",1),t.YNc(2,at,6,4,"div",2),t.TgZ(3,"div",3)(4,"div",4)(5,"label",5)(6,"span",6),t._uU(7,"*"),t.qZA(),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",7)(11,"input",8,9),t.NdJ("ngModelChange",function(l){return r.form.firstName=l}),t.qZA(),t.YNc(13,st,3,3,"div",10),t.qZA(),t.TgZ(14,"label",5)(15,"span",6),t._uU(16,"*"),t.qZA(),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",7)(20,"input",11,12),t.NdJ("ngModelChange",function(l){return r.form.lastName=l}),t.qZA(),t.YNc(22,lt,3,3,"div",10),t.qZA()(),t.TgZ(23,"div",4)(24,"label",5)(25,"span",6),t._uU(26,"*"),t.qZA(),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"div",7)(30,"input",13,14),t.NdJ("ngModelChange",function(l){return r.form.email=l}),t.qZA(),t.YNc(32,ct,3,3,"div",10),t.qZA(),t.TgZ(33,"label",5)(34,"span",6),t._uU(35,"*"),t.qZA(),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"div",7),t.YNc(39,dt,5,4,"nz-input-group",15),t.YNc(40,pt,2,1,"ng-template",null,16,t.W1O),t.qZA()(),t._UZ(42,"div",4)(43,"app-vehicle-datatable",17),t.qZA(),t.TgZ(44,"div",18)(45,"div",19)(46,"button",20),t.NdJ("click",function(){return r.cancel()}),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"button",21),t.NdJ("click",function(){return r.submit()}),t._uU(50),t.ALo(51,"translate"),t.qZA()()()()()),2&e){const o=t.MAs(12),l=t.MAs(21),g=t.MAs(31),b=t.MAs(41);t.xp6(2),t.Q6J("ngIf",r.form.id),t.xp6(6),t.hij(" ",t.lcZ(9,16,"First Name")," "),t.xp6(3),t.Q6J("ngModel",r.form.firstName),t.xp6(2),t.Q6J("ngIf",o.invalid&&(o.dirty||o.touched)),t.xp6(4),t.hij(" ",t.lcZ(18,18,"Last Name")," "),t.xp6(3),t.Q6J("ngModel",r.form.lastName),t.xp6(2),t.Q6J("ngIf",l.invalid&&(l.dirty||l.touched)),t.xp6(5),t.hij(" ",t.lcZ(28,20,"Email")," "),t.xp6(3),t.Q6J("ngModel",r.form.email),t.xp6(2),t.Q6J("ngIf",g.invalid&&(g.dirty||g.touched)),t.xp6(4),t.hij(" ",t.lcZ(37,22,"Mobile")," "),t.xp6(3),t.Q6J("ngIf",!r.form.id)("ngIfElse",b),t.xp6(4),t.Q6J("driverCode",r.form.login),t.xp6(4),t.hij(" ",t.lcZ(48,24,"Cancel")," "),t.xp6(3),t.hij(" ",t.lcZ(51,26,"Submit")," ")}},dependencies:[h.O5,E.Zp,E.gB,Q.ix,q.w,k.dQ,Y.Ip,Y.Vq,_._Y,_.Fj,_.JJ,_.JL,_.Q7,_.On,_.F,ot,u.X$],encapsulation:2}),n})(),mt=(()=>{class n{constructor(e,r){this.router=e,this.driverService=r}ngOnInit(){}cancel(){this.router.navigate(["/drivers"])}submit(e){this.driverService.createModel(e).subscribe(()=>{this.router.navigate(["/drivers"])})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.F0),t.Y36(p.F))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-drivers-create"]],decls:4,vars:0,consts:[[1,"body-wrapper"],[1,"m-content"],[3,"canceled","submitted"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-title-bar"),t.TgZ(2,"div",1)(3,"app-drivers-form",2),t.NdJ("canceled",function(){return r.cancel()})("submitted",function(l){return r.submit(l)}),t.qZA()()())},dependencies:[F.G,$],encapsulation:2}),n})();const ut=function(){return["overview"]},gt=function(){return["unregistered"]},ht=function(){return["fail"]};let _t=(()=>{class n{constructor(e,r){this.router=e,this.translate=r}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.F0),t.Y36(u.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-drivers-home"]],decls:19,vars:9,consts:[[1,"body-wrapper"],[1,"m-content"],[1,"m-portlet","m-portlet--tabs"],[1,"m-portlet__head"],[1,"m-portlet__head-tools"],["role","tablist",1,"nav","nav-tabs","m-tabs-line","m-tabs-line--primary","m-tabs-line--2x"],[1,"nav-item","m-tabs__item"],[1,"nav-link","m-tabs__link",3,"routerLink","routerLinkActive"],[1,"m-portlet__body","m-portlet__body--scrollable"],[1,"m-portlet__frame"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-title-bar"),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"ul",5)(7,"li",6)(8,"a",7),t._uU(9," Normal "),t.qZA()(),t.TgZ(10,"li",6)(11,"a",7),t._uU(12," Unregistered "),t.qZA()(),t.TgZ(13,"li",6)(14,"a",7),t._uU(15," Fail Registered "),t.qZA()()()()(),t.TgZ(16,"div",8)(17,"div",9),t._UZ(18,"router-outlet"),t.qZA()()()()()),2&e&&(t.xp6(8),t.Q6J("routerLink",t.DdM(6,ut))("routerLinkActive","active"),t.xp6(3),t.Q6J("routerLink",t.DdM(7,gt))("routerLinkActive","active"),t.xp6(3),t.Q6J("routerLink",t.DdM(8,ht))("routerLinkActive","active"))},dependencies:[m.lC,m.yS,m.Od,F.G],encapsulation:2}),n})();var L=s(70853);let vt=(()=>{class n{constructor(e,r,o,l){this.router=e,this.route=r,this.driverService=o,this.busService=l}ngOnInit(){this.item=this.route.snapshot.data.driver}delete(){this.driverService.deleteModel(this.item.login).subscribe(()=>{this.cancel()})}cancel(){this.router.navigate([this.busService.isBusAdmin()?"/bus-drivers":"/drivers"])}submit(e){this.driverService.updateModel(e).subscribe(()=>{this.cancel()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.F0),t.Y36(m.gz),t.Y36(p.F),t.Y36(L.Z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-drivers-update"]],decls:4,vars:1,consts:[[1,"body-wrapper"],[1,"m-content"],[3,"form","canceled","submitted"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-title-bar"),t.TgZ(2,"div",1)(3,"app-drivers-form",2),t.NdJ("canceled",function(){return r.cancel()})("submitted",function(l){return r.submit(l)}),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("form",r.item))},dependencies:[F.G,$],encapsulation:2}),n})();var ft=s(86181),bt=s(8929),K=s(47423);function Zt(n,i){1&n&&t._UZ(0,"span",12)}function Tt(n,i){if(1&n&&t._uU(0),2&n){const e=i.range;t.lnq(" ",e[0],"-",e[1]," of ",i.$implicit," items\n")}}function xt(n,i){if(1&n&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Oqu(e.text)}}function Ct(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1," 5 Nov 2020 "),t.qZA())}function At(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1," 9 Aug 2020 "),t.qZA())}const j=function(n){return[n,"update"]};function Dt(n,i){if(1&n&&(t.TgZ(0,"td")(1,"a",17),t._UZ(2,"i",18),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(1,j,e.login))}}const zt=function(n){return[n,"billing-history"]};function Ut(n,i){if(1&n&&(t.TgZ(0,"td")(1,"div",19)(2,"button",20),t._UZ(3,"i",21),t.qZA(),t.TgZ(4,"nz-dropdown-menu",null,22)(6,"ul",23)(7,"li",24),t._UZ(8,"i",25),t.TgZ(9,"span"),t._uU(10,"Edit Driver"),t.qZA()(),t.TgZ(11,"li",24),t._UZ(12,"i",26),t.TgZ(13,"span"),t._uU(14,"View Billing History"),t.qZA()()()()()()),2&n){const e=t.MAs(5),r=t.oxw().$implicit;t.xp6(2),t.Q6J("nzDropdownMenu",e)("nzPlacement","topCenter"),t.xp6(5),t.Q6J("routerLink",t.VKq(4,j,r.login)),t.xp6(4),t.Q6J("routerLink",t.VKq(6,zt,r.login))}}function wt(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr")(2,"td",13),t.NdJ("nzExpandChange",function(o){const g=t.CHM(e).$implicit,b=t.oxw();return t.KtG(b.onExpandChange(g.id,o))}),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t.YNc(10,Ct,2,0,"span",14),t.YNc(11,At,2,0,"span",14),t.qZA(),t.YNc(12,Dt,3,3,"td",14),t.YNc(13,Ut,15,8,"td",14),t.qZA(),t.TgZ(14,"tr",15)(15,"nz-table",16)(16,"thead")(17,"tr")(18,"th"),t._uU(19,"Email Address"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Address"),t.qZA()()(),t.TgZ(22,"tbody")(23,"tr")(24,"td"),t._uU(25),t.qZA(),t.TgZ(26,"td"),t._uU(27),t.qZA()()()()(),t.BQk()}if(2&n){const e=i.$implicit,r=i.index,o=t.oxw();t.xp6(1),t.ekj("ant-table-row-odd",r%2==1),t.xp6(1),t.Q6J("nzExpand",o.expandSet.has(e.id)),t.xp6(2),t.Oqu(e.id),t.xp6(2),t.AsE("",e.firstName," ",e.lastName,""),t.xp6(2),t.Oqu(e.hpNumber),t.xp6(2),t.Q6J("ngIf",e.id%2==0),t.xp6(1),t.Q6J("ngIf",e.id%2!=0),t.xp6(1),t.Q6J("ngIf",o.isBusAdmin),t.xp6(1),t.Q6J("ngIf",!o.isBusAdmin),t.xp6(1),t.Q6J("nzExpand",o.expandSet.has(e.id)),t.xp6(1),t.Q6J("nzShowPagination",!1),t.xp6(10),t.Oqu(e.email||"-"),t.xp6(2),t.Oqu(e.address||"-")}}let Mt=(()=>{class n extends R.t{constructor(e,r,o,l){super(),this.router=e,this.driverService=r,this.translate=o,this.busService=l,this.data=[],this.pagination=(0,ft.f$)(),this.keyword="",this.keyword$=new bt.xQ,this.isBusAdmin=!1,this.expandSet=new Set,this.tableHeaders=[{text:"Driver ID",column:"id",width:"100px"},{text:"Driver Name",column:"name",width:"150px"},{text:"Mobile",column:"mobile",width:"150px"},{text:"Date Created",column:"createdAt",width:"120px"},{text:"Actions",width:"100px"}]}gotoCreate(){this.router.navigate(["/drivers/create"])}get filterParams(){return{key:this.keyword,sort:"id,desc"}}onExpandChange(e,r){r?this.expandSet.add(e):this.expandSet.delete(e)}reloadData(){this.reloadDataService(this.driverService)}pageChanged(e){this.pagination=e,this.reloadData()}displayVehicleNo(e){return e.carPlate}ngOnInit(){this.keyword$.debounceTime(500).subscribe(()=>{this.reloadData()}),this.reloadData();const e=this.tableHeaders.map(r=>r.text);this.translate.get(e).subscribe(r=>{this.tableHeaders.forEach(o=>{for(let l in r)r.hasOwnProperty(l)&&o.text===l&&(o.text=r[l])})}),this.isBusAdmin=this.busService.isBusAdmin()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.F0),t.Y36(p.F),t.Y36(u.sK),t.Y36(L.Z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-drivers-overview"]],features:[t.qOj],decls:19,vars:12,consts:[[1,"row","form-group","m-form__group"],[1,"col-form-label",2,"padding-left","20px"],[1,"col-lg-5"],[1,"m-input-icon","m-input-icon--left"],[3,"nzPrefix"],["nz-input","","type","text","placeholder","Please Enter...",3,"ngModel","ngModelChange"],["suffixIconSearch",""],["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowSizeChanger","nzShowTotal","nzQueryParams"],["basicTable",""],["nzWidth","60px"],[4,"ngFor","ngForOf"],["nz-icon","","nzType","search"],[3,"nzExpand","nzExpandChange"],[4,"ngIf"],[3,"nzExpand"],["nzSize","middle","nzTemplateMode","",3,"nzShowPagination"],[1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","no-border",3,"routerLink"],[1,"la","la-edit"],["dropdown","","placement","bottom right"],["nz-dropdown","","nzTrigger","click",1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--outline-2x","m-btn--pill","no-border",3,"nzDropdownMenu","nzPlacement"],[1,"la","la-ellipsis-h"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"routerLink"],[1,"la","la-edit",2,"margin-right","4px"],[1,"la","la-eye",2,"margin-right","4px"]],template:function(e,r){if(1&e&&(t.TgZ(0,"div",0)(1,"label",1),t._uU(2," Driver Name / Mobile Number / Vehicle No.: "),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"nz-input-group",4)(6,"input",5),t.NdJ("ngModelChange",function(l){return r.keyword=l})("ngModelChange",function(l){return r.keyword$.next(l)}),t.qZA()(),t.YNc(7,Zt,1,0,"ng-template",null,6,t.W1O),t.qZA()()(),t.YNc(9,Tt,1,3,"ng-template",null,7,t.W1O),t.TgZ(11,"nz-table",8,9),t.NdJ("nzQueryParams",function(l){return r.onQueryParamsChange(l)}),t.TgZ(13,"thead")(14,"tr"),t._UZ(15,"th",10),t.YNc(16,xt,2,1,"th",11),t.qZA()(),t.TgZ(17,"tbody"),t.YNc(18,wt,28,15,"ng-container",11),t.qZA()()),2&e){const o=t.MAs(8),l=t.MAs(10),g=t.MAs(12);t.xp6(5),t.Q6J("nzPrefix",o),t.xp6(1),t.Q6J("ngModel",r.keyword),t.xp6(5),t.Q6J("nzData",r.listData)("nzFrontPagination",!1)("nzLoading",r.loading)("nzTotal",r.pagination.totalCount)("nzPageSize",r.pagination.rowsPerPage)("nzPageIndex",r.pagination.page)("nzShowSizeChanger",!0)("nzShowTotal",l),t.xp6(5),t.Q6J("ngForOf",r.tableHeaders),t.xp6(2),t.Q6J("ngForOf",g.data)}},dependencies:[h.sg,h.O5,_.Fj,_.JJ,_.On,m.rH,m.yS,E.Zp,E.gB,E.ke,K.Ls,w.wO,w.r9,M.cm,M.RR,q.w,d.N8,d.Uo,d._C,d.h7,d.Om,d.p0,d.$Z,d.d3,d.Vk,U.TO],encapsulation:2}),n})();var G=s(15861),V=s(20388);const yt=["msgModal"];function Nt(n,i){if(1&n&&(t.TgZ(0,"th",14)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n){const e=i.$implicit;t.xp6(1),t.Udp("width",e.width),t.xp6(1),t.Oqu(t.lcZ(3,3,e.text))}}function St(n,i){if(1&n&&(t.TgZ(0,"thead",11)(1,"tr",12),t.YNc(2,Nt,4,5,"th",13),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.tableHeaders)}}function Ot(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ul",22)(1,"li",23)(2,"a",24),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,l=t.oxw();return t.KtG(l.activeAccount(o))}),t.TgZ(3,"span"),t._uU(4,"Active Account"),t.qZA()()()()}}function Ft(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"tr",15)(2,"td",14),t._UZ(3,"span"),t.qZA(),t.TgZ(4,"td",14)(5,"span"),t._uU(6),t.qZA()(),t.TgZ(7,"td",14)(8,"span"),t._uU(9),t.qZA()(),t.TgZ(10,"td",14)(11,"span"),t._uU(12),t.qZA()(),t.TgZ(13,"td",16)(14,"span",17)(15,"div",18)(16,"button",19),t._UZ(17,"i",20),t.qZA(),t.YNc(18,Ot,5,0,"ul",21),t.qZA()()()(),t.BQk()),2&n){const e=i.$implicit,r=i.index,o=t.oxw();t.xp6(1),t.Q6J("ngClass",r%2>0?"m-datatable__row--even":""),t.xp6(2),t.Udp("width",o.tableHeaders[0].width),t.xp6(2),t.Udp("width",o.tableHeaders[1].width),t.xp6(1),t.hij(" ",e.hpNumber," "),t.xp6(2),t.Udp("width",o.tableHeaders[2].width),t.xp6(1),t.hij(" ",e.password," "),t.xp6(2),t.Udp("width",o.tableHeaders[3].width),t.xp6(1),t.hij(" ",e.remarks," "),t.xp6(2),t.Udp("width",o.tableHeaders[4].width)}}function Pt(n,i){1&n&&(t.TgZ(0,"div",25)(1,"div",26)(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"span"),t._UZ(6,"div",27),t.qZA()()()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"Please wait...")," "))}function Et(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",28)(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"button",29),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.cancelAlert())}),t._uU(4,"Close"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.msg)}}let qt=(()=>{class n{constructor(e,r,o,l){this.modalService=e,this.bsModalRef=r,this.router=o,this.driverService=l,this.tableHeaders=[{text:"",column:"",width:"20px"},{text:"Phone Number",column:"hpNumber",width:"200px"},{text:"Password",column:"password",width:"200px"},{text:"Remarks",column:"remarks",width:"200px"},{text:"Actions",column:"actions",width:"100px"}],this.Status=N.qbd,this.loading=!1,this.data=[],this.msg="success"}ngOnInit(){this.getBatchUser()}btachActiveAccount(){var e=this;return(0,G.Z)(function*(){e.loading=!0;for(let r=0;r<e.data.length;r++){let o=yield new Promise(g=>{e.driverService.activeAccount(e.data[r].hpNumber,"9999").subscribe(b=>{g("")},b=>{let S="";S=b.error&&(b.error.message||b.error.detail)||"Unkown Error",g(S)})}),l=o?e.Status.ACTIVE_FAILURE:e.Status.ACTIVE_SUCCESS;yield new Promise(g=>{e.driverService.putBatchUser(e.data[r].id,l,o).subscribe(b=>{g("")},b=>{g("")})})}e.loading=!1,e.msg="Completed",e.openMdModal()})()}getBatchUser(){this.driverService.getBatchUser([1]).subscribe(e=>{this.data=e.data.content},e=>{})}activeAccount(e){this.loading=!0,this.driverService.activeAccount(e.hpNumber,"9999").subscribe(r=>{this.loading=!1,this.msg="Completed",this.openMdModal(),this.driverService.putBatchUser(e.id,this.Status.ACTIVE_SUCCESS,"").subscribe(o=>{this.getBatchUser()},o=>{})},r=>{this.loading=!1,this.msg=r.error&&(r.error.message||r.error.detail)||"Unkown Error",this.openMdModal(),this.driverService.putBatchUser(e.id,this.Status.ACTIVE_FAILURE,this.msg).subscribe(o=>{this.getBatchUser()},o=>{})})}openMdModal(){this.bsModalRef=this.modalService.show(this.msgModal,{class:"modal-md"})}cancelAlert(){this.bsModalRef.hide()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(V.tT),t.Y36(V.UZ),t.Y36(m.F0),t.Y36(p.F))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-drivers-not-active"]],viewQuery:function(e,r){if(1&e&&t.Gf(yt,5),2&e){let o;t.iGM(o=t.CRH())&&(r.msgModal=o.first)}},decls:16,vars:3,consts:[[1,"form-group","m-form__group","m-portlet__filters"],[1,"m-portlet__filter"],[1,"btn","btn-main","m-btn","m-btn--custom","m-btn--icon","m-btn--air","m-btn--pill",3,"click"],[1,"la","la-plus"],[1,"m-datatable","m-datatable--default","m-datatable--brand","m-datatable--loaded",2,"padding-bottom","120px"],[1,"m-datatable__table",2,"overflow","visible"],["class","m-datatable__head",4,"ngIf"],[1,"m-datatable__body"],[4,"ngFor","ngForOf"],["class","m-blockui-loading",4,"ngIf"],["msgModal",""],[1,"m-datatable__head"],[1,"m-datatable__row"],["class","m-datatable__cell",4,"ngFor","ngForOf"],[1,"m-datatable__cell"],[1,"m-datatable__row",3,"ngClass"],[1,"m-datatable__cell","action-cell"],[1,"cell-actions"],["dropdown","","placement","bottom right"],["dropdownToggle","",1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--outline-2x","m-btn--pill","no-border"],[1,"la","la-ellipsis-h"],["class","dropdown-menu dropdown-menu-right","role","menu",4,"dropdownMenu"],["role","menu",1,"dropdown-menu","dropdown-menu-right"],["role","menuitem"],[1,"dropdown-item",3,"click"],[1,"m-blockui-loading"],[1,"m-blockui"],[1,"m-loader","m-loader--brand"],[1,"modal-body","text-center"],["type","button",1,"btn","btn-default","mr-3",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"a",2),t.NdJ("click",function(){return r.btachActiveAccount()}),t.TgZ(3,"span"),t._UZ(4,"i",3),t.TgZ(5,"span"),t._uU(6," Batch Active Account "),t.qZA()()()()(),t.TgZ(7,"div",4)(8,"table",5),t.YNc(9,St,3,1,"thead",6),t.TgZ(10,"tbody",7),t.ynx(11),t.YNc(12,Ft,19,14,"ng-container",8),t.BQk(),t.qZA()(),t.YNc(13,Pt,7,3,"div",9),t.qZA(),t.YNc(14,Et,5,1,"ng-template",null,10,t.W1O)),2&e&&(t.xp6(9),t.Q6J("ngIf",r.tableHeaders&&r.tableHeaders.length),t.xp6(3),t.Q6J("ngForOf",r.data),t.xp6(1),t.Q6J("ngIf",r.loading))},dependencies:[h.mk,h.sg,h.O5,d.Uo,d._C,d.Om,d.p0,d.$Z,U.Hz,U.Mq,U.TO,u.X$],encapsulation:2}),n})();var W=s(49651);function Jt(n,i){if(1&n&&t._uU(0),2&n){const e=i.range;t.lnq(" ",e[0],"-",e[1]," of ",i.$implicit," items\n")}}function Bt(n,i){if(1&n&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Oqu(e.text)}}function It(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"button",9),t._UZ(9,"i",10),t.qZA(),t.TgZ(10,"nz-dropdown-menu",null,11)(12,"ul",12)(13,"li",13),t.NdJ("click",function(){const l=t.CHM(e).$implicit,g=t.oxw();return t.KtG(g.createAccount(l))}),t._uU(14," Create Account "),t.qZA()()()()()}if(2&n){const e=i.$implicit,r=i.index,o=t.MAs(11);t.ekj("ant-table-row-odd",r%2==1),t.xp6(2),t.Oqu(e.hpNumber),t.xp6(2),t.Oqu(e.password),t.xp6(2),t.Oqu(e.remarks),t.xp6(2),t.Q6J("nzDropdownMenu",o)("nzPlacement","topCenter")}}let Lt=(()=>{class n{constructor(e,r){this.driverService=e,this.messageService=r,this.tableHeaders=[{text:"",column:"",width:"20px"},{text:"Phone Number",column:"hpNumber",width:"200px"},{text:"Password",column:"password",width:"200px"},{text:"Remarks",column:"remarks",width:"200px"},{text:"Actions",column:"actions",width:"100px"}],this.Status=N.qbd,this.loading=!1,this.data=[],this.msg="success",this.pageNow=1}ngOnInit(){this.getBatchUser()}btachCreateAccount(){var e=this;return(0,G.Z)(function*(){e.loading=!0;for(let r=0;r<e.data.length;r++){let o=yield new Promise(g=>{e.driverService.createAccount(e.data[r].hpNumber,"Admin@1234").subscribe(b=>{g("")},b=>{let S="";S=b.error&&(b.error.message||b.error.detail)||"Unkown Error",g(S)})}),l=o?e.Status.REGISTER_FAILURE:e.Status.REGISTER_SUCCESS;yield new Promise(g=>{e.driverService.putBatchUser(e.data[r].id,l,o).subscribe(b=>{g("")},b=>{g("")})})}e.loading=!1,e.msg="Completed",e.openMdModal(),e.getBatchUser()})()}getBatchUser(){this.loading=!0,this.driverService.getBatchUser([0]).subscribe(e=>{this.data=e.data.content,this.loading=!1},e=>{this.loading=!1})}createAccount(e){this.loading=!0,this.driverService.createAccount(e.hpNumber,e.password).subscribe(r=>{this.loading=!1,this.msg="Completed",this.openMdModal(),this.driverService.putBatchUser(e.id,this.Status.REGISTER_SUCCESS,"").subscribe(o=>{this.getBatchUser()},o=>{})},r=>{this.loading=!1,this.msg=r.error&&(r.error.message||r.error.detail)||"Unkown Error",this.openMdModal(),this.driverService.putBatchUser(e.id,this.Status.REGISTER_FAILURE,this.msg).subscribe(o=>{this.getBatchUser()},o=>{})})}openMdModal(){this.messageService.warning(this.msg)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.F),t.Y36(W.dD))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-drivers-unregistered"]],decls:14,vars:9,consts:[[1,"form-group","m-form__group","m-portlet__filters",2,"position","absolute","right","0","top","-62px"],[1,"m-portlet__filter"],["nz-button","","nzType","primary","nsSize","large","nzShape","round",3,"click"],["nz-icon","","nzType","plus"],["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowTotal"],["basicTable",""],[4,"ngFor","ngForOf"],[3,"ant-table-row-odd",4,"ngFor","ngForOf"],["nz-dropdown","","nzTrigger","click",1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--outline-2x","m-btn--pill","no-border",3,"nzDropdownMenu","nzPlacement"],[1,"la","la-ellipsis-h"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"click"]],template:function(e,r){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return r.btachCreateAccount()}),t._UZ(3,"span",3),t._uU(4," Batch Create Account"),t.qZA()()(),t.YNc(5,Jt,1,3,"ng-template",null,4,t.W1O),t.TgZ(7,"nz-table",5,6)(9,"thead")(10,"tr"),t.YNc(11,Bt,2,1,"th",7),t.qZA()(),t.TgZ(12,"tbody"),t.YNc(13,It,15,7,"tr",8),t.qZA()()),2&e){const o=t.MAs(6),l=t.MAs(8);t.xp6(7),t.Q6J("nzData",r.data)("nzFrontPagination",!0)("nzLoading",r.loading)("nzTotal",r.data.length)("nzPageSize",6)("nzPageIndex",r.pageNow)("nzShowTotal",o),t.xp6(4),t.Q6J("ngForOf",r.tableHeaders),t.xp6(2),t.Q6J("ngForOf",l.data)}},dependencies:[h.sg,K.Ls,w.wO,w.r9,M.cm,M.RR,Q.ix,q.w,k.dQ,d.N8,d.Uo,d._C,d.Om,d.p0,d.$Z],encapsulation:2}),n})();function Qt(n,i){if(1&n&&t._uU(0),2&n){const e=i.range;t.lnq(" ",e[0],"-",e[1]," of ",i.$implicit," items\n")}}function kt(n,i){if(1&n&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Oqu(e.text)}}function Yt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"button",5),t._UZ(9,"i",6),t.qZA(),t.TgZ(10,"nz-dropdown-menu",null,7)(12,"ul",8)(13,"li",9),t.NdJ("click",function(){const l=t.CHM(e).$implicit,g=t.oxw();return t.KtG(g.createAccount(l))}),t._uU(14," Rest Create Account "),t.qZA()()()()()}if(2&n){const e=i.$implicit,r=i.index,o=t.MAs(11);t.ekj("ant-table-row-odd",r%2==1),t.xp6(2),t.Oqu(e.hpNumber),t.xp6(2),t.Oqu(e.password),t.xp6(2),t.Oqu(e.remarks),t.xp6(2),t.Q6J("nzDropdownMenu",o)("nzPlacement","topCenter")}}let Rt=(()=>{class n{constructor(e,r){this.driverService=e,this.messageService=r,this.tableHeaders=[{text:"Phone Number",column:"hpNumber",width:"200px"},{text:"Password",column:"password",width:"200px"},{text:"Remarks",column:"remarks",width:"200px"},{text:"Actions",column:"actions",width:"100px"}],this.loading=!1,this.data=[],this.pageNow=1,this.msg="success",this.Status=N.qbd}ngOnInit(){this.getBatchUser()}getBatchUser(){this.loading=!0,this.driverService.getBatchUser([3,4]).subscribe(e=>{this.data=e.data.content,this.loading=!1},e=>{this.loading=!1})}createAccount(e){this.loading=!0,this.driverService.createAccount(e.hpNumber,e.password).subscribe(r=>{this.loading=!1,this.msg="Completed",this.openMdModal(),this.driverService.putBatchUser(e.id,this.Status.REGISTER_SUCCESS,"").subscribe(o=>{this.getBatchUser()},o=>{})},r=>{this.loading=!1,this.msg=r.error&&(r.error.message||r.error.detail)||"Unkown Error",this.openMdModal(),this.driverService.putBatchUser(e.id,this.Status.REGISTER_FAILURE,this.msg).subscribe(o=>{this.getBatchUser()},o=>{})})}openMdModal(){this.messageService.info(this.msg)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.F),t.Y36(W.dD))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-drivers-fail"]],decls:9,vars:9,consts:[["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowTotal"],["basicTable",""],[4,"ngFor","ngForOf"],[3,"ant-table-row-odd",4,"ngFor","ngForOf"],["nz-dropdown","","nzTrigger","click",1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--outline-2x","m-btn--pill","no-border",3,"nzDropdownMenu","nzPlacement"],[1,"la","la-ellipsis-h"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"click"]],template:function(e,r){if(1&e&&(t.YNc(0,Qt,1,3,"ng-template",null,0,t.W1O),t.TgZ(2,"nz-table",1,2)(4,"thead")(5,"tr"),t.YNc(6,kt,2,1,"th",3),t.qZA()(),t.TgZ(7,"tbody"),t.YNc(8,Yt,15,7,"tr",4),t.qZA()()),2&e){const o=t.MAs(1),l=t.MAs(3);t.xp6(2),t.Q6J("nzData",r.data)("nzFrontPagination",!0)("nzLoading",r.loading)("nzTotal",r.data.length)("nzPageSize",6)("nzPageIndex",r.pageNow)("nzShowTotal",o),t.xp6(4),t.Q6J("ngForOf",r.tableHeaders),t.xp6(2),t.Q6J("ngForOf",l.data)}},dependencies:[h.sg,w.wO,w.r9,M.cm,M.RR,q.w,d.N8,d.Uo,d._C,d.Om,d.p0,d.$Z],encapsulation:2}),n})();var Ht=s(3116),$t=s(75191),Kt=s(10054);let jt=(()=>{class n{constructor(e){this.route=e}ngOnInit(){this.driver=this.route.snapshot.data.driver}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-drivers-billing-history"]],decls:12,vars:4,consts:[[1,"body-wrapper"],[1,"m-content"],[1,"m-portlet"],[1,"m-portlet__head"],[1,"m-portlet__head-caption"],[1,"m-portlet__head-title"],[1,"m-portlet__head-text"],[1,"m-portlet__body"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-title-bar"),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"h3",6),t._uU(8),t.ALo(9,"translate"),t.qZA()()()(),t.TgZ(10,"div",7),t._UZ(11,"router-outlet"),t.qZA()()()()),2&e&&(t.xp6(8),t.AsE(" ",t.lcZ(9,2,"Driver ID"),": ",r.driver.id," "))},dependencies:[m.lC,F.G,u.X$]}),n})();var Gt=s(98731);function X(n){return new A.w(n,"../assets/i18n/",".json")}const Vt=[{path:"",component:I.f,children:[{path:"",component:_t,children:[{path:"",redirectTo:"overview",pathMatch:"full"},{path:"overview",component:Mt,data:{breadcrumb:{label:"Overview"}}},{path:"unregistered",component:Lt,data:{breadcrumb:{label:"Unregistered"}}},{path:"not-active",component:qt,data:{breadcrumb:{label:"Not Active"}}},{path:"fail",component:Rt,data:{breadcrumb:{label:"Fail Registered"}}}]},{path:"create",component:mt,data:{breadcrumb:{label:"Create"}}},{path:"overview/:login/update",resolve:{driver:x},component:vt},{path:"overview/:login",component:jt,resolve:{driver:x},children:[{path:"billing-history",data:{breadcrumb:{label:"Billing History"}},component:Kt.Z},{path:"billing-detail",component:Gt.d,data:{breadcrumb:{label:"Billing Detail"}}}]}]}];let Wt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[v.k,C.e,p.F,x,H.x,$t.B,L.Z],imports:[h.ez,_.u5,m.Bz.forChild(Vt),Ht.b,f.x,y.D,U.mr,a.kn,J,u.aw.forChild({loader:{provide:u.Zw,useFactory:X,deps:[Z.eN]}}),m.Bz]}),n})()}}]);