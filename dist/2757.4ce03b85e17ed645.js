"use strict";(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[2757],{76284:(U,f,n)=>{n.d(f,{z:()=>c});var s=n(3927),v=n(94650),t=n(80529),r=n(28555),D=n(11481),a=n(91599);let c=(()=>{class T extends s.su{constructor(g,u,d,p){super(g,u),this.http=g,this.store=u,this.sanitizer=d,this.modelName="User",this.baseUrl="",this.handleError=p.createHandleError(`${this.modelName}Service`)}uploadImage(g){const u=this.getUrl("carpark/api/assets/img"),d=new FormData;return d.append("file",g,g.name),this.post(u,d).map(({uuid:p})=>this.getImage(p))}getImage(g){return this.getUrl(`carpark/api/resources/${g}`)}getImageByUuid(g,u){return this.get(this.getUrl(`carpark/api/resources/${g}`),{responseType:"blob"}).map(d=>u?this._getSafeFileUrl(d):this.getSafeFileUrl(d))}getSafeFileUrl(g){return this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(g))}_getSafeFileUrl(g){return{imgUrl:this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(g)),type:g.type}}requestSessionImage(g,u){const d=this.getUrl(`carpark/api/anpr/request/${g}/${u}`);return this.get(d,{responseType:"text"})}getSessionImage(g){return this.get(this.getUrl(`carpark/api/anpr/assets/${g}/1`),{responseType:"blob"}).map(u=>this.getSafeFileUrl(u))}}return T.\u0275fac=function(g){return new(g||T)(v.LFG(t.eN),v.LFG(r.yh),v.LFG(D.H7),v.LFG(a.k))},T.\u0275prov=v.Yz7({token:T,factory:T.\u0275fac}),T})()},64050:(U,f,n)=>{n.d(f,{F:()=>u}),n(38014);var v=n(3927),t=n(21086),r=n(27221),D=n(24850),a=n(26245),c=n(94650),T=n(80529),h=n(28555),g=n(91599);let u=(()=>{class d extends v.su{constructor(i,e,o){super(i,e),this.http=i,this.store=e,this.modelName="Driver",this.baseUrl="api/drivers",this.handleError=o.createHandleError(`${this.modelName}Service`)}getDriversSimpleList(i,e){const o=(0,a.U8)(`${this.baseUrl}`,{...i,...(0,a.jq)(e)});return this.get(this.getUrl(o)).pipe((0,r.K)(()=>(0,t.of)([]))).map(l=>Array.isArray(l)?(0,v.eC)(l):(0,v.O7)(l))}getModel(i){const e=this.getUrl(`api/users/${i}`);return this.get(e).map(o=>({...o,mobile:o.mobile||{},address:o.address||{}}))}createModel(i){const e=this.getUrl("api/register");return this.post(e,i)}updateModel(i){const e=this.getUrl("api/users/");return this.put(e,i)}deleteModel(i){const e=this.getUrl(`api/users/${i}`);return this.delete(e)}searchModel(i){const e=this.getUrl(`carpark/api/drivers/filter/${i||""}`);return this.get(e).pipe((0,D.U)(o=>o.content),(0,r.K)(()=>(0,t.of)([])))}getByCode(i){const e=this.getUrl(`carpark/api/drivers/${i}`);return this.get(e).pipe((0,r.K)(()=>(0,t.of)({})))}createModelApplication(i){const e=this.getUrl(`carpark/api/drivers/${i.driverCode}/seasons/applications`);return this.post(e,i)}getSimpleList(){return this.get(this.getUrl("carpark/api/drivers/simple-drivers-list"))}getEnforcementList(){return this.get(this.getUrl("carpark/api/drivers/enforcement"))}createAccount(i,e){const o=this.getUrl("api/register");return this.post(o,{hpNumber:i,password:e})}activeAccount(i,e){const o=this.getUrl("api/account/SMS_activate");return this.post(o,{hpNumber:i,key:e})}getBatchUser(i){return this.get(this.getUrl(`carpark/api/batch/user/info?status=${i}&size=99999`))}putBatchUser(i,e,o){const l=this.getUrl("carpark/api/batch/user/info");return this.put(l,{id:i,status:e,remarks:o})}}return d.\u0275fac=function(i){return new(i||d)(c.LFG(T.eN),c.LFG(h.yh),c.LFG(g.k))},d.\u0275prov=c.Yz7({token:d,factory:d.\u0275fac}),d})()},69440:(U,f,n)=>{n.d(f,{N:()=>u});var s=n(3927),v=n(26245),t=n(21837),r=n(92340),D=n(27221),a=n(21086),c=n(94650),T=n(80529),h=n(28555),g=n(91599);let u=(()=>{class d extends s.su{constructor(i,e,o){super(i,e),this.http=i,this.store=e,this.modelName="User",this.baseUrl="api/adminUsers",this.handleError=o.createHandleError(`${this.modelName}Service`)}fetchFault(i){const e=this.getUrl(`carpark/api/fault-infos/${i}`);return this.get(e)}fetchFaults(i=0,e=20){const o=this.getUrl(`carpark/api/fault-infos?page=${i}&pageSize=${e}&size=${e}&sort=id,desc`);return this.get(o)}filterHistoryFaults(i,e){return this.baseUrl="carpark/api/fault-info-historys",super.filterModel(i,e)}createFault(i){const e=this.getUrl("carpark/api/fault-infos/");return this.post(e,i)}updateFault(i){const e=this.getUrl("carpark/api/fault-infos/");return this.put(e,i)}assignFault({id:i,assignedTo:e}){const o=this.getUrl(`carpark/api/fault-infos/${i}/assign`);return this.post(o,{assignedTo:e})}rejectFault(i){const e=this.getUrl(`carpark/api/fault-infos/${i}/cancel`);return this.post(e)}solveFault({id:i}){const e=this.getUrl(`carpark/api/fault-infos/${i}/resolve`);return this.post(e)}createEnforcement(i){const e=this.getUrl("carpark/api/enforcements");return this.post(e,i)}filterEnforcements(i,e){return this.baseUrl="carpark/api/enforcements",super.filterModel(i,e)}fetchIntercalls(i){const e=(0,v.U8)(this.getUrl("carpark/api/intercom-statuses"),{...i});return this.get(e)}fetchIntercall(i){const e=this.getUrl(`carpark/api/intercom-statuses/${i}`);return this.get(e)}fetchNotes(i){const e=(0,v.U8)(this.getUrl("carpark/api/note-messages"),{...i});return this.get(e)}createNote({message:i}){const e=this.getUrl("carpark/api/note-messages");return this.post(e,{message:i})}formatTime(i){const e=t.ou.fromISO(i);return`${e.toFormat("HH:mm")}, ${e.toFormat("dd LLL yyyy")}`}filterVehicleChanges(i,e){return this.baseUrl=`carpark/api/vehicle-changes/all/${i.status}`,super.filterModel(i,e)}filterSeasonTerminations(i,e){return this.baseUrl=`carpark/api/season-terminations/all/${i.status}`,super.filterModel(i,e)}filterRefundRequests(i){this.baseUrl=`carpark/api/refund-requests/all/${i.status}`;const o=(0,v.U8)(this.baseUrl,{pageNum:i.pageNum,pageSize:i.pageSize});return this.get(this.getUrl(o)).pipe((0,D.K)(()=>(0,a.of)([]))).map(l=>Array.isArray(l)?(0,s.eC)(l):(0,s.O7)(l))}solveTermination(i){const e=this.getUrl(`carpark/api/season-terminations/${i}/update-resolve`);return this.get(e)}solveChangeVehicle(i){const e=this.getUrl(`carpark/api/vehicle-changes/${i}/update-resolve`);return this.get(e)}solveRefundRequest(i,e){const o=this.getUrl(`carpark/api/refund-requests/${i}/update-resolve/${e}`);return this.get(o)}getStatusSign(){return this.get(`${r.N.healthUrl}`)}getFaultsType(){const i=this.getUrl("carpark/api/fault-infos/operator-equipments");return this.get(i)}getFaultsListByType(i,e=0,o=20){const l=this.getUrl(`carpark/api/fault-infos/${i}/equipment?page=${e}&pageSize=${o}&size=${o}`);return this.get(l)}}return d.\u0275fac=function(i){return new(i||d)(c.LFG(T.eN),c.LFG(h.yh),c.LFG(g.k))},d.\u0275prov=c.Yz7({token:d,factory:d.\u0275fac}),d})()},4666:(U,f,n)=>{n.d(f,{p:()=>d}),n(38014);var v=n(3927),t=n(26245),r=n(27221),D=n(66708),a=n(94650),c=n(60097),T=n(93764),h=n(80529),g=n(28555),u=n(91599);let d=(()=>{class p extends v.su{constructor(e,o,l,P,_){super(l,P),this.carparkService=e,this.condoService=o,this.http=l,this.store=P,this.modelName="Transaction",this.handleError=_.createHandleError(`${this.modelName}Service`)}ngOnInit(){}handleDynamicUrl(){const e=JSON.parse(localStorage.getItem("user")).login;this.baseUrl=this.carparkService.isMotorist()&&D.Z.isNotNull(e)?`carpark/api/drivers/${e}/transactions`:this.condoService.isCondoOwner()?"carpark/api/working-sessions/transactions":"carpark/api/car-parks/transactions"}filterModel(e,o){return this.handleDynamicUrl(),super.filterModel(e,o).map(l=>l.data?l:{data:[],pagination:(0,t.f$)()})}fetchAbnormalTransactions(e,o){const l=(0,t.U8)("carpark/api/car-parks/transactions/abnormal",{...e,...(0,t.jq)(o)});return this.get(this.getUrl(l)).map(v.O7)}fetchAbnormalTransaction(e){return this.get(this.getUrl(`carpark/api/parking-transactions/${e}`))}verifyAbnormalTransaction(e){return this.post(this.getUrl(`carpark/api/parking-transactions/${e.id}/update`),e)}filterByVehicle(e,o){const l=this.getUrl((0,t.U8)(`carpark/api/parking-transactions/plateNo/${e}`,{...(0,t.jq)(o)}));return this.get(l).pipe((0,r.K)(this.handleError(`${this.modelName}Filter`,{}))).map(P=>Array.isArray(P)?(0,v.eC)(P):(0,v.O7)(P))}createModel(e){const o=this.getUrl("carpark/api/parking-transactions-entry");return this.post(o,e)}closeTransactions(e){const o=this.getUrl(`carpark/api/close/working-sessions/${e}`);return this.put(o,null)}getFile(e){const o=this.getUrl(`carpark/api/printTransactionReceipt/pdf/parking_transaction/${e}`);return this.get(o,{responseType:"blob"})}findIndentByPage(e,o){const l=this.getUrl(`scp-app-ordermanagement/chargepile/findIndentByPage/${o.rowsPerPage}/${o.page}`);return this.post(l,e)}exportExcellist(e,o){const l=this.getUrl("scp-app-ordermanagement/chargepile/exportFindIndent");return this.post(l,e,{responseType:"blob"})}exportExcelDetail(e,o){const l=this.getUrl("scp-app-ordermanagement/chargepile/export/detail");return this.post(l,e,{responseType:"blob"})}exportCondoOwnerExcel(e){const o=(0,t.U8)("carpark/api/working-sessions/exportParkingTransaction",{...e});return this.get(this.getUrl(o),{responseType:"blob"})}}return p.\u0275fac=function(e){return new(e||p)(a.LFG(c.x),a.LFG(T.p),a.LFG(h.eN),a.LFG(g.yh),a.LFG(u.k))},p.\u0275prov=a.Yz7({token:p,factory:p.\u0275fac}),p})()},71942:(U,f,n)=>{n.d(f,{f:()=>d});var s=n(38014),v=n(3927),t=n(26245),r=n(21086),D=n(27221),a=n(66708),c=n(94650),T=n(60097),h=n(80529),g=n(28555),u=n(91599);let d=(()=>{class p extends v.su{constructor(e,o,l,P){super(o,l),this.carparkService=e,this.http=o,this.store=l,this.modelName="Vehicle",this.handleError=P.createHandleError(`${this.modelName}Service`),this.handleDynamicUrl()}ngOnInit(){}handleDynamicUrl(){const e=JSON.parse(localStorage.getItem("user")).login;this.baseUrl=this.carparkService.isMotorist()&&a.Z.isNotNull(e)?`carpark/api/drivers/${e}/vehicles`:"carpark/api/vehicle/get-vehicles"}getTelList(e,o){console.log(e);const l=this.getUrl((0,t.U8)("carpark/api/vehicle/vehicles",{...e,...(0,t.jq)(o)}));return this.get(l)}filterModel(e,o){const l=this.getUrl((0,t.U8)(this.baseUrl,{...e,...(0,t.jq)(o)}));return this.get(l).pipe((0,D.K)(this.handleError(`${this.modelName}Filter`,{}))).map(P=>Array.isArray(P)?(0,v.eC)(P):(0,v.O7)(P))}updateVehicle(e){const o=this.getUrl(`carpark/api/drivers/${e.driverCode}/vehicles/${e.vehicleId}`);return this.patch(o,e.vehicle).pipe((0,D.K)(this.handleError(`${this.modelName}Update`,{})))}getModel(e){const o=this.getUrl(`carpark/api/vehicle/${e}`);return this.get(o).pipe((0,D.K)(this.handleError(`${this.modelName}Get`,{})))}deleteModel(e,o){const l=this.getUrl(`carpark/api/drivers/${e}/vehicles/${o}`);return this.delete(l).pipe((0,D.K)(this.handleError(`${this.modelName}Delete`)))}deleteAdminModel(e){const o=this.getUrl(`carpark/api/admin/vehicle/${e}`);return this.delete(o).pipe((0,D.K)(this.handleError(`${this.modelName}Delete`)))}createVehicle(e,o){const l=this.getUrl(`carpark/api/drivers/${e}/vehicles`);return this.post(l,o)}putUpdateVehicle(e,o){const l=this.getUrl(`carpark/api/drivers/${e}/vehicles/${o.id}`);return this.put(l,o)}getDriverCode(e){const o=this.getUrl(`carpark/api/drivers/${e}/driverCode`);return this.get(o)}createModel(e,o){const l=this.getUrl(`carpark/api/drivers/${e}/vehicles`);return this.post(l,o).pipe((0,D.K)(this.handleError(`${this.modelName}Create`,{})))}createVehicleAdmin(e){const o=this.getUrl(`carpark/api/admin/vehicles/${e.mobile}`);return this.post(o,e).pipe((0,D.K)(this.handleError(`${this.modelName}Create`,{})))}updateModel(e){const o=this.getUrl("carpark/api/admin/vehicle-changes");return this.post(o,e).pipe((0,D.K)(this.handleError(`${this.modelName}Update`,{})))}getSimpleList(){const e=this.getUrl("carpark/api/vehicle/simple-vehicles-list");return this.get(e).pipe((0,D.K)(this.handleError(`${this.modelName}SimpleList`,{})))}filterModelByDriver(e){const o=this.getUrl(`carpark/api/drivers/${e}/vehicles`);return this.get(o).pipe((0,D.K)(()=>(0,r.of)([])))}isOperator(){const e=JSON.parse(localStorage.getItem("user-roles"));return!(!a.Z.isNotNull(e)||!e.includes(s.i44.Operator))}getUserVehicle(e,o){this.baseUrl=`carpark/api/drivers/${e}/vehicles`;const l=this.getUrl((0,t.U8)(this.baseUrl,{...(0,t.jq)(o)}));return this.get(l).pipe((0,D.K)(this.handleError(`${this.modelName}Filter`,{}))).map(P=>Array.isArray(P)?(0,v.eC)(P):(0,v.O7)(P))}}return p.\u0275fac=function(e){return new(e||p)(c.LFG(T.x),c.LFG(h.eN),c.LFG(g.yh),c.LFG(u.k))},p.\u0275prov=c.Yz7({token:p,factory:p.\u0275fac}),p})()},52746:(U,f,n)=>{n.d(f,{t:()=>r});var s=n(72986),v=n(591),t=n(94650);let r=(()=>{class D{constructor(){this.loading=!1,this.pagination={totalCount:0,rowsPerPage:20,page:1,sortBy:null,descending:!0,totalPages:1},this.listData=[],this.hadGetData$=new v.X(!1)}get hadGetData(){return this.hadGetData$.getValue()}get filterParams(){return this._filterParams}set filterParams(c){this._filterParams=c}reloadDataService(c,T="filterModel"){this.loading=!0,this.hadGetData$.next(!1),c[T](this.filterParams,this.pagination).pipe((0,s.q)(1)).subscribe(h=>{if(h.pagination.page>h.pagination.totalPages)return this.pagination={...this.pagination,page:h.pagination.totalPages},this.reloadDataService(c);this.loading=!1,this.pagination={...this.pagination,totalCount:h.pagination.totalCount||h.pagination.totalElements},this.listData=h.data,this.hadGetData$.next(!0)},()=>{this.loading=!1,this.listData=[],this.pagination={...this.pagination,totalCount:0}})}onQueryParamsChange(c){const{pageSize:T,pageIndex:h}=c;this.pagination={...this.pagination,rowsPerPage:T,page:h},this.reloadData()}reloadData(){}ngOnInit(){}}return D.\u0275fac=function(c){return new(c||D)},D.\u0275cmp=t.Xpm({type:D,selectors:[["ng-component"]],decls:0,vars:0,template:function(c,T){},encapsulation:2}),D})()},22730:(U,f,n)=>{n.d(f,{S:()=>K});var s=n(36895),v=n(24006),t=n(34793),r=n(372),D=n(76284),a=n(7053),c=n(60097),T=n(36511),h=n(64050),g=n(69440),u=n(4666),d=n(30329),p=n(88796),i=n(43056),e=n(56776),o=n(80529),l=n(89383),P=n(19832),I=(n(40361),n(52194),n(65274),n(48043),n(19736),n(193),n(66422),n(98720),n(92525),n(59245)),S=n(20388),y=n(66616),Z=n(50007),z=n(94650);function N(x){return new P.w(x,"../assets/i18n/",".json")}let K=(()=>{class x{}return x.\u0275fac=function(W){return new(W||x)},x.\u0275mod=z.oAB({type:x}),x.\u0275inj=z.cJS({providers:[u.p,T.I,c.x,h.F,g.N,a.$,D.z],imports:[s.ez,v.u5,d.D,r.kn,e.Db,p.A0,t.Bz,i.UU,I.mr,S.zk,y.sL,Z.Qp,l.aw.forChild({loader:{provide:l.Zw,useFactory:N,deps:[o.eN]}})]}),x})()},65274:(U,f,n)=>{n.d(f,{r:()=>T});var s=n(94650),v=n(36895),t=n(98720),r=n(92525);function D(h,g){1&h&&s._UZ(0,"app-list-refund-pending")}function a(h,g){1&h&&s._UZ(0,"app-list-refund-resolved")}const c=function(h){return{active:h}};let T=(()=>{class h{constructor(){this.currentTab="PENDING"}ngOnInit(){}}return h.\u0275fac=function(u){return new(u||h)},h.\u0275cmp=s.Xpm({type:h,selectors:[["app-list-refund"]],decls:16,vars:9,consts:[[1,"body-wrapper"],[2,"padding-top","16px"],[1,"m-portlet","m-portlet--tabs"],[1,"m-portlet__head"],[1,"m-portlet__head-tools"],["role","tablist",1,"nav","nav-tabs","m-tabs-line","m-tabs-line--primary","m-tabs-line--2x"],[1,"nav-item","m-tabs__item"],[1,"nav-link","m-tabs__link",3,"ngClass","click"],[1,"m-portlet__body","m-portlet__body--scrollable"],[1,"m-portlet__frame",3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(u,d){1&u&&(s.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),s.NdJ("click",function(){return d.currentTab="PENDING"}),s._uU(8," Pending "),s.qZA()(),s.TgZ(9,"li",6)(10,"a",7),s.NdJ("click",function(){return d.currentTab="RESOLVED"}),s._uU(11," Resolved "),s.qZA()()()()(),s.TgZ(12,"div",8)(13,"div",9),s.YNc(14,D,1,0,"app-list-refund-pending",10),s.YNc(15,a,1,0,"app-list-refund-resolved",10),s.qZA()()()()()),2&u&&(s.xp6(7),s.Q6J("ngClass",s.VKq(5,c,"PENDING"===d.currentTab)),s.xp6(3),s.Q6J("ngClass",s.VKq(7,c,"RESOLVED"===d.currentTab)),s.xp6(3),s.Q6J("ngSwitch",d.currentTab),s.xp6(1),s.Q6J("ngSwitchCase","PENDING"),s.xp6(1),s.Q6J("ngSwitchCase","RESOLVED"))},dependencies:[v.mk,v.RF,v.n9,t._,r.G],encapsulation:2}),h})()},98720:(U,f,n)=>{n.d(f,{_:()=>P});var s=n(79118),v=n(52746),t=n(15439),D=n(72986),a=n(94650),c=n(69440),T=n(50007),h=n(36895),g=n(40269),u=n(66616),d=n(47044),p=n(21811),i=n(89383);function e(_,E){if(1&_&&a._uU(0),2&_){const m=E.range;a.lnq(" ",m[0],"-",m[1]," of ",E.$implicit," items\n")}}function o(_,E){if(1&_&&(a.TgZ(0,"th",5),a._uU(1),a.qZA()),2&_){const m=E.$implicit;a.Q6J("nzWidth",E.first?"60px":""),a.xp6(1),a.Oqu(m.text)}}function l(_,E){if(1&_){const m=a.EpF();a.ynx(0),a.TgZ(1,"tr")(2,"td",6),a.NdJ("nzExpandChange",function(C){const L=a.CHM(m).$implicit,A=a.oxw();return a.KtG(A.onExpandChange(L.id,C))}),a.qZA(),a.TgZ(3,"td"),a._uU(4),a.qZA(),a.TgZ(5,"td"),a._uU(6),a.qZA(),a.TgZ(7,"td"),a._uU(8),a.qZA(),a.TgZ(9,"td"),a._uU(10),a.qZA(),a.TgZ(11,"td"),a._uU(12),a.qZA(),a.TgZ(13,"td"),a._uU(14),a.ALo(15,"date"),a.ALo(16,"date"),a.qZA(),a.TgZ(17,"td"),a._uU(18),a.qZA(),a.TgZ(19,"td")(20,"button",7),a.NdJ("click",function(){const M=a.CHM(m).$implicit,L=a.oxw();return a.KtG(L.confirmSolve(M.id))}),a._uU(21),a.ALo(22,"translate"),a.qZA()()(),a.TgZ(23,"tr",8)(24,"nz-table",9)(25,"thead")(26,"tr")(27,"th"),a._uU(28),a.ALo(29,"translate"),a.qZA()()(),a.TgZ(30,"tbody")(31,"tr")(32,"td"),a._uU(33),a.qZA()()()()(),a.BQk()}if(2&_){const m=E.$implicit,O=E.index,C=a.oxw();a.xp6(1),a.ekj("ant-table-row-odd",O%2==1),a.xp6(1),a.Q6J("nzExpand",C.expandSet.has(m.id)),a.xp6(2),a.Oqu(m.id),a.xp6(2),a.Oqu(m.carParkName),a.xp6(2),a.Oqu(m.payeeName),a.xp6(2),a.Oqu(m.contactNo),a.xp6(2),a.Oqu(m.amount),a.xp6(2),a.AsE(" ",a.xi3(15,16,m.date,"d LLL yyyy")," ",a.xi3(16,19,m.date,"h:mm:ss a")," "),a.xp6(4),a.Oqu(m.vehicleNo),a.xp6(2),a.Q6J("disabled",C.viewOnly||C.solving[m.id]),a.xp6(1),a.hij(" ",a.lcZ(22,22,"Solve")," "),a.xp6(2),a.Q6J("nzExpand",C.expandSet.has(m.id)),a.xp6(5),a.Oqu(a.lcZ(29,24,"Reason")),a.xp6(5),a.Oqu(m.reason)}}let P=(()=>{class _ extends v.t{constructor(m,O){super(),this.maintenanceService=m,this.nzModalService=O,this.tableHeaders=[{text:"",width:"30px",align:s.iW.Center},{text:"id",column:"id",width:"30px"},{text:"Car Park Name",column:"carParkName",width:"160px"},{text:"Name",column:"payeeName",width:"160px"},{text:"Contact Number",column:"contactNo",width:"160px"},{text:"Charged Amount (S$)",column:"amount",width:"160px"},{text:"Transaction Date",column:"date",width:"160px"},{text:"Vehicle No.",column:"vehicleNo",width:"160px"},{text:"Actions",width:"150px"}],this.alive=!0,this.solving={},this.expandSet=new Set}get filterParams(){return{status:0,pageNum:this.pagination.page-1,pageSize:this.pagination.rowsPerPage}}reloadData(){this.loading=!0,this.maintenanceService.filterRefundRequests(this.filterParams).pipe((0,D.q)(1)).subscribe(m=>{const{data:O,pagination:C}=m,{totalPages:M,page:L,totalCount:A}=C;if(L>=M)return this.pagination={...this.pagination,page:M},this.reloadData();this.loading=!1,this.pagination={...this.pagination,totalCount:A},this.listData=this.sortById(O)},()=>{this.loading=!1,this.listData=[],this.pagination={...this.pagination,totalCount:0}})}solveIssue(m){this.solving[m]=!0;const O=t().format("YYYY-MM-DDTHH:mm:ss");this.maintenanceService.solveRefundRequest(m,O).subscribe(()=>this.reloadData(),null,()=>this.solving[m]=!1)}ngOnInit(){this.reloadData()}sortById(m){return m?(this.listData=m.sort((O,C)=>C.id-O.id),this.listData):[]}confirmSolve(m){this.solveId=m,this.nzModalService.confirm({nzTitle:"Confirm solve this issue?",nzOnOk:()=>this.solveIssue(this.solveId)})}pageChanged(m){this.pagination=m,this.reloadData()}onExpandChange(m,O){O?this.expandSet.add(m):this.expandSet.delete(m)}}return _.\u0275fac=function(m){return new(m||_)(a.Y36(c.N),a.Y36(T.Sf))},_.\u0275cmp=a.Xpm({type:_,selectors:[["app-list-refund-pending"]],features:[a.qOj],decls:9,vars:10,consts:[["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowSizeChanger","nzShowTotal","nzQueryParams"],["basicTable",""],[3,"nzWidth",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"nzWidth"],[3,"nzExpand","nzExpandChange"],["nz-button","","nzType","primary",3,"disabled","click"],[3,"nzExpand"],["nzTemplateMode",""]],template:function(m,O){if(1&m&&(a.YNc(0,e,1,3,"ng-template",null,0,a.W1O),a.TgZ(2,"nz-table",1,2),a.NdJ("nzQueryParams",function(M){return O.onQueryParamsChange(M)}),a.TgZ(4,"thead")(5,"tr"),a.YNc(6,o,2,2,"th",3),a.qZA()(),a.TgZ(7,"tbody"),a.YNc(8,l,34,26,"ng-container",4),a.qZA()()),2&m){const C=a.MAs(1),M=a.MAs(3);a.xp6(2),a.Q6J("nzData",O.listData)("nzFrontPagination",!1)("nzLoading",O.loading)("nzTotal",O.pagination.totalCount)("nzPageSize",O.pagination.rowsPerPage)("nzPageIndex",O.pagination.page)("nzShowSizeChanger",!0)("nzShowTotal",C),a.xp6(4),a.Q6J("ngForOf",O.tableHeaders),a.xp6(2),a.Q6J("ngForOf",M.data)}},dependencies:[h.sg,g.N8,g.Uo,g._C,g.h7,g.Om,g.p0,g.$Z,g.d3,g.Vk,u.ix,d.w,p.dQ,h.uU,i.X$],encapsulation:2}),_})()},92525:(U,f,n)=>{n.d(f,{G:()=>d});var s=n(79118),v=n(52746),t=n(72986),r=n(94650),D=n(69440),a=n(36895),c=n(40269),T=n(89383);function h(p,i){if(1&p&&r._uU(0),2&p){const e=i.range;r.lnq(" ",e[0],"-",e[1]," of ",i.$implicit," items\n")}}function g(p,i){if(1&p&&(r.TgZ(0,"th",5),r._uU(1),r.qZA()),2&p){const e=i.$implicit;r.Q6J("nzWidth",i.first?"60px":""),r.xp6(1),r.Oqu(e.text)}}function u(p,i){if(1&p){const e=r.EpF();r.ynx(0),r.TgZ(1,"tr")(2,"td",6),r.NdJ("nzExpandChange",function(l){const _=r.CHM(e).$implicit,E=r.oxw();return r.KtG(E.onExpandChange(_.id,l))}),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.qZA(),r.TgZ(5,"td"),r._uU(6),r.qZA(),r.TgZ(7,"td"),r._uU(8),r.qZA(),r.TgZ(9,"td"),r._uU(10),r.qZA(),r.TgZ(11,"td"),r._uU(12),r.qZA(),r.TgZ(13,"td"),r._uU(14),r.ALo(15,"date"),r.ALo(16,"date"),r.qZA(),r.TgZ(17,"td"),r._uU(18),r.qZA(),r.TgZ(19,"td"),r._uU(20),r.ALo(21,"date"),r.ALo(22,"date"),r.qZA()(),r.TgZ(23,"tr",7)(24,"nz-table",8)(25,"thead")(26,"tr")(27,"th"),r._uU(28),r.ALo(29,"translate"),r.qZA()()(),r.TgZ(30,"tbody")(31,"tr")(32,"td"),r._uU(33),r.qZA()()()()(),r.BQk()}if(2&p){const e=i.$implicit,o=i.index,l=r.oxw();r.xp6(1),r.ekj("ant-table-row-odd",o%2==1),r.xp6(1),r.Q6J("nzExpand",l.expandSet.has(e.id)),r.xp6(2),r.Oqu(e.id),r.xp6(2),r.Oqu(e.carParkName),r.xp6(2),r.Oqu(e.payeeName),r.xp6(2),r.Oqu(e.contactNo),r.xp6(2),r.Oqu(e.amount),r.xp6(2),r.AsE(" ",r.xi3(15,16,e.date,"d LLL yyyy")," ",r.xi3(16,19,e.date,"h:mm:ss a")," "),r.xp6(4),r.Oqu(e.vehicleNo),r.xp6(2),r.AsE(" ",r.xi3(21,22,null==e?null:e.lastUpdatedDate,"d LLL yyyy")," ",r.xi3(22,25,null==e?null:e.lastUpdatedDate,"h:mm:ss a")," "),r.xp6(3),r.Q6J("nzExpand",l.expandSet.has(e.id)),r.xp6(5),r.Oqu(r.lcZ(29,28,"Reason")),r.xp6(5),r.Oqu(e.reason)}}let d=(()=>{class p extends v.t{constructor(e){super(),this.maintenanceService=e,this.tableHeaders=[{text:"",width:"30px",align:s.iW.Center},{text:"id",column:"id",width:"30px"},{text:"Car Park Name",column:"carParkName",width:"160px"},{text:"Name",column:"payeeName",width:"160px"},{text:"Contact Number",column:"contactNo",width:"160px"},{text:"Charged Amount (S$)",column:"amount",width:"160px"},{text:"Transaction Date",column:"date",width:"160px"},{text:"Vehicle No.",column:"vehicleNo",width:"160px"},{text:"Time Solved",width:"150px"}],this.alive=!0,this.expandSet=new Set}get filterParams(){return{status:1,pageNum:this.pagination.page-1,pageSize:this.pagination.rowsPerPage}}pageChanged(e){this.pagination=e,this.reloadData()}reloadData(){this.loading=!0,this.maintenanceService.filterRefundRequests(this.filterParams).pipe((0,t.q)(1)).subscribe(e=>{const{data:o,pagination:l}=e,{totalPages:P,page:_,totalCount:E}=l;if(_>=P)return this.pagination={...this.pagination,page:P},this.reloadData();this.loading=!1,this.pagination={...this.pagination,totalCount:E},this.listData=o},()=>{this.loading=!1,this.listData=[],this.pagination={...this.pagination,totalCount:0}})}ngOnInit(){this.reloadData()}onExpandChange(e,o){o?this.expandSet.add(e):this.expandSet.delete(e)}}return p.\u0275fac=function(e){return new(e||p)(r.Y36(D.N))},p.\u0275cmp=r.Xpm({type:p,selectors:[["app-list-refund-resolved"]],features:[r.qOj],decls:9,vars:10,consts:[["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowSizeChanger","nzShowTotal","nzQueryParams"],["basicTable",""],[3,"nzWidth",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"nzWidth"],[3,"nzExpand","nzExpandChange"],[3,"nzExpand"],["nzTemplateMode",""]],template:function(e,o){if(1&e&&(r.YNc(0,h,1,3,"ng-template",null,0,r.W1O),r.TgZ(2,"nz-table",1,2),r.NdJ("nzQueryParams",function(P){return o.onQueryParamsChange(P)}),r.TgZ(4,"thead")(5,"tr"),r.YNc(6,g,2,2,"th",3),r.qZA()(),r.TgZ(7,"tbody"),r.YNc(8,u,34,30,"ng-container",4),r.qZA()()),2&e){const l=r.MAs(1),P=r.MAs(3);r.xp6(2),r.Q6J("nzData",o.listData)("nzFrontPagination",!1)("nzLoading",o.loading)("nzTotal",o.pagination.totalCount)("nzPageSize",o.pagination.rowsPerPage)("nzPageIndex",o.pagination.page)("nzShowSizeChanger",!0)("nzShowTotal",l),r.xp6(4),r.Q6J("ngForOf",o.tableHeaders),r.xp6(2),r.Q6J("ngForOf",P.data)}},dependencies:[a.sg,c.N8,c.Uo,c._C,c.h7,c.Om,c.p0,c.$Z,c.d3,c.Vk,a.uU,T.X$],encapsulation:2}),p})()},40361:(U,f,n)=>{n.d(f,{t:()=>T});var s=n(94650),v=n(36895),t=n(66422),r=n(193);function D(h,g){1&h&&s._UZ(0,"app-list-termination-pending")}function a(h,g){1&h&&s._UZ(0,"app-list-termination-resolved")}const c=function(h){return{active:h}};let T=(()=>{class h{constructor(){this.currentTab="PENDING"}ngOnInit(){}}return h.\u0275fac=function(u){return new(u||h)},h.\u0275cmp=s.Xpm({type:h,selectors:[["app-list-termination"]],decls:15,vars:9,consts:[[1,"body-wrapper"],[1,"m-portlet","m-portlet--tabs"],[1,"m-portlet__head"],[1,"m-portlet__head-tools"],["role","tablist",1,"nav","nav-tabs","m-tabs-line","m-tabs-line--primary","m-tabs-line--2x"],[1,"nav-item","m-tabs__item"],[1,"nav-link","m-tabs__link",3,"ngClass","click"],[1,"m-portlet__body","m-portlet__body--scrollable"],[1,"m-portlet__frame",3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(u,d){1&u&&(s.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),s.NdJ("click",function(){return d.currentTab="PENDING"}),s._uU(7," Pending "),s.qZA()(),s.TgZ(8,"li",5)(9,"a",6),s.NdJ("click",function(){return d.currentTab="RESOLVED"}),s._uU(10," Resolved "),s.qZA()()()()(),s.TgZ(11,"div",7)(12,"div",8),s.YNc(13,D,1,0,"app-list-termination-pending",9),s.YNc(14,a,1,0,"app-list-termination-resolved",9),s.qZA()()()()),2&u&&(s.xp6(6),s.Q6J("ngClass",s.VKq(5,c,"PENDING"===d.currentTab)),s.xp6(3),s.Q6J("ngClass",s.VKq(7,c,"RESOLVED"===d.currentTab)),s.xp6(3),s.Q6J("ngSwitch",d.currentTab),s.xp6(1),s.Q6J("ngSwitchCase","PENDING"),s.xp6(1),s.Q6J("ngSwitchCase","RESOLVED"))},dependencies:[v.mk,v.RF,v.n9,t.Q,r.z],encapsulation:2}),h})()},66422:(U,f,n)=>{n.d(f,{Q:()=>o}),n(79118);var v=n(52746),t=n(94650),r=n(69440),D=n(50007),a=n(36895),c=n(40269),T=n(66616),h=n(47044),g=n(21811),u=n(89383);const d=["confirmModal"];function p(l,P){if(1&l&&t._uU(0),2&l){const _=P.range;t.lnq(" ",_[0],"-",_[1]," of ",P.$implicit," items\n")}}function i(l,P){if(1&l&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&l){const _=P.$implicit;t.xp6(1),t.Oqu(_.text)}}function e(l,P){if(1&l){const _=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"date"),t.ALo(8,"date"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td")(12,"button",5),t.NdJ("click",function(){const O=t.CHM(_).$implicit,C=t.oxw();return t.KtG(C.confirmSolve(O.id))}),t._uU(13),t.ALo(14,"translate"),t.qZA()()()}if(2&l){const _=P.$implicit,E=P.index,m=t.oxw();t.ekj("ant-table-row-odd",E%2==1),t.xp6(2),t.Oqu(_.id),t.xp6(2),t.Oqu(_.vehicleNo),t.xp6(2),t.AsE(" ",t.xi3(7,9,_.terminationDate,"d LLL yyyy")," ",t.xi3(8,12,_.terminationDate,"h:mm:ss a")," "),t.xp6(4),t.Oqu(_.seasonCode),t.xp6(2),t.Q6J("disabled",m.viewOnly||m.solving[_.id]),t.xp6(1),t.hij(" ",t.lcZ(14,15,"Solve")," ")}}let o=(()=>{class l extends v.t{constructor(_,E){super(),this.maintenanceService=_,this.nzModalService=E,this.tableHeaders=[{text:"ID",width:"80px"},{text:"Vehicle No.",column:"vehicleNo",width:"120px"},{text:"Termination Date",column:"terminationDate",width:"200px"},{text:"Season Code",column:"seasonCode",width:"160px"},{text:"Actions",width:"80px"}],this.alive=!0,this.solving={}}get filterParams(){return{status:0}}reloadData(){this.reloadDataService(this.maintenanceService,"filterSeasonTerminations")}pageChanged(_){this.pagination=_,this.reloadData()}solveIssue(_){this.solving[_]=!0,this.maintenanceService.solveTermination(_).subscribe(()=>this.reloadData(),null,()=>this.solving[_]=!1)}ngOnInit(){this.reloadData()}sortById(_){return _?(this.listData=_.sort((E,m)=>m.id-E.id),this.listData):[]}confirmSolve(_){this.solveId=_,this.nzModalService.confirm({nzTitle:"Confirm solve this issue?",nzContent:"",nzOnOk:()=>this.solveIssue(this.solveId)})}}return l.\u0275fac=function(_){return new(_||l)(t.Y36(r.N),t.Y36(D.Sf))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-list-termination-pending"]],viewQuery:function(_,E){if(1&_&&t.Gf(d,5),2&_){let m;t.iGM(m=t.CRH())&&(E.confirmModal=m.first)}},features:[t.qOj],decls:9,vars:10,consts:[["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowSizeChanger","nzShowTotal","nzQueryParams"],["basicTable",""],[4,"ngFor","ngForOf"],[3,"ant-table-row-odd",4,"ngFor","ngForOf"],["nz-button","","nzType","primary",3,"disabled","click"]],template:function(_,E){if(1&_&&(t.YNc(0,p,1,3,"ng-template",null,0,t.W1O),t.TgZ(2,"nz-table",1,2),t.NdJ("nzQueryParams",function(O){return E.onQueryParamsChange(O)}),t.TgZ(4,"thead")(5,"tr"),t.YNc(6,i,2,1,"th",3),t.qZA()(),t.TgZ(7,"tbody"),t.YNc(8,e,15,17,"tr",4),t.qZA()()),2&_){const m=t.MAs(1),O=t.MAs(3);t.xp6(2),t.Q6J("nzData",E.sortById(E.listData))("nzFrontPagination",!1)("nzLoading",E.loading)("nzTotal",E.pagination.totalCount)("nzPageSize",E.pagination.rowsPerPage)("nzPageIndex",E.pagination.page)("nzShowSizeChanger",!0)("nzShowTotal",m),t.xp6(4),t.Q6J("ngForOf",E.tableHeaders),t.xp6(2),t.Q6J("ngForOf",O.data)}},dependencies:[a.sg,c.N8,c.Uo,c._C,c.Om,c.p0,c.$Z,T.ix,h.w,g.dQ,a.uU,u.X$],encapsulation:2}),l})()},193:(U,f,n)=>{n.d(f,{z:()=>g}),n(79118);var v=n(52746),t=n(94650),r=n(69440),D=n(36895),a=n(40269);function c(u,d){if(1&u&&t._uU(0),2&u){const p=d.range;t.lnq(" ",p[0],"-",p[1]," of ",d.$implicit," items\n")}}function T(u,d){if(1&u&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&u){const p=d.$implicit;t.xp6(1),t.Oqu(p.text)}}function h(u,d){if(1&u&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"date"),t.ALo(8,"date"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"date"),t.ALo(14,"date"),t.qZA()()),2&u){const p=d.$implicit;t.ekj("ant-table-row-odd",d.index%2==1),t.xp6(2),t.Oqu(p.id),t.xp6(2),t.Oqu(p.vehicleNo),t.xp6(2),t.AsE(" ",t.xi3(7,9,p.terminationDate,"d LLL yyyy")," ",t.xi3(8,12,p.terminationDate,"h:mm:ss a")," "),t.xp6(4),t.Oqu(p.seasonCode),t.xp6(2),t.AsE(" ",t.xi3(13,15,p.lastUpdateDate,"d LLL yyyy")," ",t.xi3(14,18,p.lastUpdateDate,"h:mm:ss a")," ")}}let g=(()=>{class u extends v.t{constructor(p){super(),this.maintenanceService=p,this.tableHeaders=[{text:"ID",width:"80px"},{text:"Vehicle No.",column:"vehicleNo",width:"120px"},{text:"Termination Date",column:"terminationDate",width:"200px"},{text:"Season Code",column:"seasonCode",width:"160px"},{text:"Time Solved",width:"150px"}],this.alive=!0}get filterParams(){return{status:1}}pageChanged(p){this.pagination=p,this.reloadData()}reloadData(){this.reloadDataService(this.maintenanceService,"filterSeasonTerminations")}ngOnInit(){this.reloadData()}}return u.\u0275fac=function(p){return new(p||u)(t.Y36(r.N))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-list-termination-resolved"]],features:[t.qOj],decls:9,vars:10,consts:[["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowSizeChanger","nzShowTotal","nzQueryParams"],["basicTable",""],[4,"ngFor","ngForOf"],[3,"ant-table-row-odd",4,"ngFor","ngForOf"]],template:function(p,i){if(1&p&&(t.YNc(0,c,1,3,"ng-template",null,0,t.W1O),t.TgZ(2,"nz-table",1,2),t.NdJ("nzQueryParams",function(o){return i.onQueryParamsChange(o)}),t.TgZ(4,"thead")(5,"tr"),t.YNc(6,T,2,1,"th",3),t.qZA()(),t.TgZ(7,"tbody"),t.YNc(8,h,15,21,"tr",4),t.qZA()()),2&p){const e=t.MAs(1),o=t.MAs(3);t.xp6(2),t.Q6J("nzData",i.listData)("nzFrontPagination",!1)("nzLoading",i.loading)("nzTotal",i.pagination.totalCount)("nzPageSize",i.pagination.rowsPerPage)("nzPageIndex",i.pagination.page)("nzShowSizeChanger",!0)("nzShowTotal",e),t.xp6(4),t.Q6J("ngForOf",i.tableHeaders),t.xp6(2),t.Q6J("ngForOf",o.data)}},dependencies:[D.sg,a.N8,a.Uo,a._C,a.Om,a.p0,a.$Z,D.uU],encapsulation:2}),u})()},52194:(U,f,n)=>{n.d(f,{y:()=>T});var s=n(94650),v=n(36895),t=n(48043),r=n(19736);function D(h,g){1&h&&s._UZ(0,"app-list-vehicle-pending")}function a(h,g){1&h&&s._UZ(0,"app-list-vehicle-resolved")}const c=function(h){return{active:h}};let T=(()=>{class h{constructor(){this.currentTab="PENDING"}ngOnInit(){}}return h.\u0275fac=function(u){return new(u||h)},h.\u0275cmp=s.Xpm({type:h,selectors:[["app-list-vehicle"]],decls:15,vars:9,consts:[[1,"body-wrapper"],[1,"m-portlet","m-portlet--tabs"],[1,"m-portlet__head"],[1,"m-portlet__head-tools"],["role","tablist",1,"nav","nav-tabs","m-tabs-line","m-tabs-line--primary","m-tabs-line--2x"],[1,"nav-item","m-tabs__item"],[1,"nav-link","m-tabs__link",3,"ngClass","click"],[1,"m-portlet__body","m-portlet__body--scrollable"],[1,"m-portlet__frame",3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(u,d){1&u&&(s.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),s.NdJ("click",function(){return d.currentTab="PENDING"}),s._uU(7," Pending "),s.qZA()(),s.TgZ(8,"li",5)(9,"a",6),s.NdJ("click",function(){return d.currentTab="RESOLVED"}),s._uU(10," Resolved "),s.qZA()()()()(),s.TgZ(11,"div",7)(12,"div",8),s.YNc(13,D,1,0,"app-list-vehicle-pending",9),s.YNc(14,a,1,0,"app-list-vehicle-resolved",9),s.qZA()()()()),2&u&&(s.xp6(6),s.Q6J("ngClass",s.VKq(5,c,"PENDING"===d.currentTab)),s.xp6(3),s.Q6J("ngClass",s.VKq(7,c,"RESOLVED"===d.currentTab)),s.xp6(3),s.Q6J("ngSwitch",d.currentTab),s.xp6(1),s.Q6J("ngSwitchCase","PENDING"),s.xp6(1),s.Q6J("ngSwitchCase","RESOLVED"))},dependencies:[v.mk,v.RF,v.n9,t.B,r.u],encapsulation:2}),h})()},19736:(U,f,n)=>{n.d(f,{u:()=>o}),n(79118);var v=n(52746),t=n(94650),r=n(69440),D=n(50007),a=n(36895),c=n(40269),T=n(66616),h=n(47044),g=n(21811),u=n(89383);const d=["confirmModal"];function p(l,P){if(1&l&&t._uU(0),2&l){const _=P.range;t.lnq(" ",_[0],"-",_[1]," of ",P.$implicit," items\n")}}function i(l,P){if(1&l&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&l){const _=P.$implicit;t.xp6(1),t.Oqu(_.text)}}function e(l,P){if(1&l){const _=t.EpF();t.ynx(0),t.TgZ(1,"tr")(2,"td",5),t.NdJ("nzExpandChange",function(m){const C=t.CHM(_).$implicit,M=t.oxw();return t.KtG(M.onExpandChange(C.id,m))}),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"date"),t.ALo(16,"date"),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td")(20,"button",6),t.NdJ("click",function(){const O=t.CHM(_).$implicit,C=t.oxw();return t.KtG(C.confirmSolve(O.id))}),t._uU(21),t.ALo(22,"translate"),t.qZA()()(),t.TgZ(23,"tr",7)(24,"nz-table",8)(25,"thead")(26,"tr")(27,"th"),t._uU(28),t.ALo(29,"translate"),t.qZA()()(),t.TgZ(30,"tbody")(31,"tr")(32,"td"),t._uU(33),t.qZA()()()()(),t.BQk()}if(2&l){const _=P.$implicit,E=P.index,m=t.oxw();t.xp6(1),t.ekj("ant-table-row-odd",E%2==1),t.xp6(1),t.Q6J("nzExpand",m.expandSet.has(_.id)),t.xp6(2),t.Oqu(_.id),t.xp6(2),t.Oqu(_.currentVehicleNo),t.xp6(2),t.Oqu(_.newVehicleNumber),t.xp6(2),t.Oqu(_.currentIUNumber),t.xp6(2),t.Oqu(_.newIUNumber),t.xp6(2),t.AsE(" ",t.xi3(15,17,_.effectiveDate,"d LLL yyyy")," ",t.xi3(16,20,_.effectiveDate,"h:mm:ss a")," "),t.xp6(4),t.Oqu(_.email),t.xp6(2),t.Q6J("disabled",m.viewOnly||m.solving[_.id]),t.xp6(1),t.hij(" ",t.lcZ(22,23,"Solve")," "),t.xp6(2),t.Q6J("nzExpand",m.expandSet.has(_.id)),t.xp6(1),t.Q6J("nzShowPagination",!1),t.xp6(4),t.Oqu(t.lcZ(29,25,"Reason")),t.xp6(5),t.Oqu(_.reasonForChange||"-")}}let o=(()=>{class l extends v.t{constructor(_,E){super(),this.maintenanceService=_,this.nzModalService=E,this.tableHeaders=[{text:"ID",width:"80px"},{text:"Current Vehicle No.",column:"currentVehicleNo",width:"160px"},{text:"New Vehicle No.",column:"newVehicleNumber",width:"160px"},{text:"Current IU No.",column:"currentIUNumber",width:"160px"},{text:"New IU No.",column:"newIUNumber",width:"160px"},{text:"Effective Date",column:"effectiveDate",width:"160px"},{text:"Email",column:"email",width:"150px"},{text:"Actions",width:"150px"}],this.alive=!0,this.solving={},this.expandSet=new Set}get filterParams(){return{status:0}}reloadData(){this.reloadDataService(this.maintenanceService,"filterVehicleChanges")}pageChanged(_){this.pagination=_,this.reloadData()}solveIssue(_){this.solving[_]=!0,this.maintenanceService.solveChangeVehicle(_).subscribe(()=>this.reloadData(),null,()=>this.solving[_]=!1)}ngOnInit(){this.reloadData()}confirmSolve(_){this.solveId=_,this.nzModalService.confirm({nzTitle:"Confirm solve this issue?",nzContent:"",nzOnOk:()=>this.solveIssue(this.solveId)})}onExpandChange(_,E){E?this.expandSet.add(_):this.expandSet.delete(_)}}return l.\u0275fac=function(_){return new(_||l)(t.Y36(r.N),t.Y36(D.Sf))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-list-vehicle-pending"]],viewQuery:function(_,E){if(1&_&&t.Gf(d,5),2&_){let m;t.iGM(m=t.CRH())&&(E.confirmModal=m.first)}},features:[t.qOj],decls:10,vars:10,consts:[["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowSizeChanger","nzShowTotal","nzQueryParams"],["basicTable",""],["nzWidth","60px"],[4,"ngFor","ngForOf"],[3,"nzExpand","nzExpandChange"],["nz-button","","nzType","primary",3,"disabled","click"],[3,"nzExpand"],["nzSize","small","nzTemplateMode","",3,"nzShowPagination"]],template:function(_,E){if(1&_&&(t.YNc(0,p,1,3,"ng-template",null,0,t.W1O),t.TgZ(2,"nz-table",1,2),t.NdJ("nzQueryParams",function(O){return E.onQueryParamsChange(O)}),t.TgZ(4,"thead")(5,"tr"),t._UZ(6,"th",3),t.YNc(7,i,2,1,"th",4),t.qZA()(),t.TgZ(8,"tbody"),t.YNc(9,e,34,27,"ng-container",4),t.qZA()()),2&_){const m=t.MAs(1),O=t.MAs(3);t.xp6(2),t.Q6J("nzData",E.listData)("nzFrontPagination",!1)("nzLoading",E.loading)("nzTotal",E.pagination.totalCount)("nzPageSize",E.pagination.rowsPerPage)("nzPageIndex",E.pagination.page)("nzShowSizeChanger",!0)("nzShowTotal",m),t.xp6(5),t.Q6J("ngForOf",E.tableHeaders),t.xp6(2),t.Q6J("ngForOf",O.data)}},dependencies:[a.sg,c.N8,c.Uo,c._C,c.h7,c.Om,c.p0,c.$Z,c.d3,c.Vk,T.ix,h.w,g.dQ,a.uU,u.X$],encapsulation:2}),l})()},48043:(U,f,n)=>{n.d(f,{B:()=>u}),n(79118);var v=n(52746),t=n(94650),r=n(69440),D=n(36895),a=n(40269),c=n(89383);function T(d,p){if(1&d&&t._uU(0),2&d){const i=p.range;t.lnq(" ",i[0],"-",i[1]," of ",p.$implicit," items\n")}}function h(d,p){if(1&d&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&d){const i=p.$implicit;t.xp6(1),t.Oqu(i.text)}}function g(d,p){if(1&d){const i=t.EpF();t.ynx(0),t.TgZ(1,"tr")(2,"td",5),t.NdJ("nzExpandChange",function(o){const P=t.CHM(i).$implicit,_=t.oxw();return t.KtG(_.onExpandChange(P.id,o))}),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"date"),t.ALo(16,"date"),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.ALo(21,"date"),t.ALo(22,"date"),t.qZA()(),t.TgZ(23,"tr",6)(24,"nz-table",7)(25,"thead")(26,"tr")(27,"th"),t._uU(28),t.ALo(29,"translate"),t.qZA()()(),t.TgZ(30,"tbody")(31,"tr")(32,"td"),t._uU(33),t.qZA()()()()(),t.BQk()}if(2&d){const i=p.$implicit,e=p.index,o=t.oxw();t.xp6(1),t.ekj("ant-table-row-odd",e%2==1),t.xp6(1),t.Q6J("nzExpand",o.expandSet.has(i.id)),t.xp6(2),t.Oqu(i.id),t.xp6(2),t.Oqu(i.currentVehicleNo),t.xp6(2),t.Oqu(i.newVehicleNumber),t.xp6(2),t.Oqu(i.currentIUNumber),t.xp6(2),t.Oqu(i.newIUNumber),t.xp6(2),t.AsE(" ",t.xi3(15,17,i.effectiveDate,"d LLL yyyy")," ",t.xi3(16,20,i.effectiveDate,"h:mm:ss a")," "),t.xp6(4),t.Oqu(i.email),t.xp6(2),t.AsE(" ",t.xi3(21,23,i.lastUpdatedDate,"d LLL yyyy")," ",t.xi3(22,26,i.lastUpdatedDate,"h:mm:ss a")," "),t.xp6(3),t.Q6J("nzExpand",o.expandSet.has(i.id)),t.xp6(1),t.Q6J("nzShowPagination",!1),t.xp6(4),t.Oqu(t.lcZ(29,29,"Reason")),t.xp6(5),t.Oqu(i.reasonForChange||"-")}}let u=(()=>{class d extends v.t{constructor(i){super(),this.maintenanceService=i,this.tableHeaders=[{text:"ID",width:"80px"},{text:"Current Vehicle No.",column:"currentVehicleNo",width:"160px"},{text:"New Vehicle No.",column:"newVehicleNumber",width:"160px"},{text:"Current IU No.",column:"currentIUNumber",width:"160px"},{text:"New IU No.",column:"newIUNumber",width:"160px"},{text:"Effective Date",column:"effectiveDate",width:"160px"},{text:"Email",column:"email",width:"150px"},{text:"Time Solved",width:"150px"}],this.expandSet=new Set}get filterParams(){return{status:1}}pageChanged(i){this.pagination=i,this.reloadData()}reloadData(){this.reloadDataService(this.maintenanceService,"filterVehicleChanges")}ngOnInit(){this.reloadData()}onExpandChange(i,e){e?this.expandSet.add(i):this.expandSet.delete(i)}}return d.\u0275fac=function(i){return new(i||d)(t.Y36(r.N))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-list-vehicle-resolved"]],features:[t.qOj],decls:10,vars:10,consts:[["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowSizeChanger","nzShowTotal","nzQueryParams"],["basicTable",""],["nzWidth","60px"],[4,"ngFor","ngForOf"],[3,"nzExpand","nzExpandChange"],[3,"nzExpand"],["nzSize","small","nzTemplateMode","",3,"nzShowPagination"]],template:function(i,e){if(1&i&&(t.YNc(0,T,1,3,"ng-template",null,0,t.W1O),t.TgZ(2,"nz-table",1,2),t.NdJ("nzQueryParams",function(l){return e.onQueryParamsChange(l)}),t.TgZ(4,"thead")(5,"tr"),t._UZ(6,"th",3),t.YNc(7,h,2,1,"th",4),t.qZA()(),t.TgZ(8,"tbody"),t.YNc(9,g,34,31,"ng-container",4),t.qZA()()),2&i){const o=t.MAs(1),l=t.MAs(3);t.xp6(2),t.Q6J("nzData",e.listData)("nzFrontPagination",!1)("nzLoading",e.loading)("nzTotal",e.pagination.totalCount)("nzPageSize",e.pagination.rowsPerPage)("nzPageIndex",e.pagination.page)("nzShowSizeChanger",!0)("nzShowTotal",o),t.xp6(5),t.Q6J("ngForOf",e.tableHeaders),t.xp6(2),t.Q6J("ngForOf",l.data)}},dependencies:[D.sg,a.N8,a.Uo,a._C,a.h7,a.Om,a.p0,a.$Z,a.d3,a.Vk,D.uU,c.X$],encapsulation:2}),d})()},7499:(U,f,n)=>{Object.defineProperty(f,"__esModule",{value:!0});var s=n(77415),v=n(67694);s.Observable.prototype.takeWhile=v.takeWhile},67694:(U,f,n)=>{Object.defineProperty(f,"__esModule",{value:!0});var s=n(41451);f.takeWhile=function v(t){return s.takeWhile(t)(this)}},19612:(U,f,n)=>{n(7499)}}]);