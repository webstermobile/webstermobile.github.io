"use strict";(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[232],{76284:(R,U,a)=>{a.d(U,{z:()=>v});var r=a(3927),e=a(94650),i=a(80529),M=a(28555),Z=a(11481),A=a(91599);let v=(()=>{class y extends r.su{constructor(m,h,u,c){super(m,h),this.http=m,this.store=h,this.sanitizer=u,this.modelName="User",this.baseUrl="",this.handleError=c.createHandleError(`${this.modelName}Service`)}uploadImage(m){const h=this.getUrl("carpark/api/assets/img"),u=new FormData;return u.append("file",m,m.name),this.post(h,u).map(({uuid:c})=>this.getImage(c))}getImage(m){return this.getUrl(`carpark/api/resources/${m}`)}getImageByUuid(m,h){return this.get(this.getUrl(`carpark/api/resources/${m}`),{responseType:"blob"}).map(u=>h?this._getSafeFileUrl(u):this.getSafeFileUrl(u))}getSafeFileUrl(m){return this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(m))}_getSafeFileUrl(m){return{imgUrl:this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(m)),type:m.type}}requestSessionImage(m,h){const u=this.getUrl(`carpark/api/anpr/request/${m}/${h}`);return this.get(u,{responseType:"text"})}getSessionImage(m){return this.get(this.getUrl(`carpark/api/anpr/assets/${m}/1`),{responseType:"blob"}).map(h=>this.getSafeFileUrl(h))}}return y.\u0275fac=function(m){return new(m||y)(e.LFG(i.eN),e.LFG(M.yh),e.LFG(Z.H7),e.LFG(A.k))},y.\u0275prov=e.Yz7({token:y,factory:y.\u0275fac}),y})()},52746:(R,U,a)=>{a.d(U,{t:()=>M});var r=a(72986),e=a(591),i=a(94650);let M=(()=>{class Z{constructor(){this.loading=!1,this.pagination={totalCount:0,rowsPerPage:20,page:1,sortBy:null,descending:!0,totalPages:1},this.listData=[],this.hadGetData$=new e.X(!1)}get hadGetData(){return this.hadGetData$.getValue()}get filterParams(){return this._filterParams}set filterParams(v){this._filterParams=v}reloadDataService(v,y="filterModel"){this.loading=!0,this.hadGetData$.next(!1),v[y](this.filterParams,this.pagination).pipe((0,r.q)(1)).subscribe(C=>{if(C.pagination.page>C.pagination.totalPages)return this.pagination={...this.pagination,page:C.pagination.totalPages},this.reloadDataService(v);this.loading=!1,this.pagination={...this.pagination,totalCount:C.pagination.totalCount||C.pagination.totalElements},this.listData=C.data,this.hadGetData$.next(!0)},()=>{this.loading=!1,this.listData=[],this.pagination={...this.pagination,totalCount:0}})}onQueryParamsChange(v){const{pageSize:y,pageIndex:C}=v;this.pagination={...this.pagination,rowsPerPage:y,page:C},this.reloadData()}reloadData(){}ngOnInit(){}}return Z.\u0275fac=function(v){return new(v||Z)},Z.\u0275cmp=i.Xpm({type:Z,selectors:[["ng-component"]],decls:0,vars:0,template:function(v,y){},encapsulation:2}),Z})()},67869:(R,U,a)=>{a.d(U,{F:()=>C});var r=a(94650),e=a(8929),i=a(11481),M=a(76284),Z=a(36895),A=a(89383);function v(m,h){if(1&m&&(r.TgZ(0,"div",5)(1,"h3",6),r._uU(2),r.ALo(3,"translate"),r.qZA(),r.TgZ(4,"span",7),r._uU(5),r.ALo(6,"translate"),r.qZA()()),2&m){const u=r.oxw();r.xp6(2),r.hij("",r.lcZ(3,2,u.textWaysUploading),"."),r.xp6(3),r.hij(" ",r.lcZ(6,4,u.textImageAllowed)," ")}}function y(m,h){if(1&m&&(r.TgZ(0,"div"),r._UZ(1,"img",8),r.qZA()),2&m){const u=r.oxw();r.xp6(1),r.Q6J("src",u.fileToUploadUrl,r.LSH)}}let C=(()=>{class m{constructor(u,c){this.sanitizer=u,this.assetsService=c,this.disableTextDefault=!1,this.checkImage=!1,this.imageChanged=new r.vpe,this.errorMsg=new r.vpe,this.fileToUpload=null,this.dragEvent$=new e.xQ,this.textWaysUploading="Drop files here or click to upload.",this.textImageAllowed="Only image files are allowed for upload",this.limitImage={minWidth:465,maxWidth:480,minHeight:310,maxHeight:320}}ngOnInit(){this.fileToUploadUrl=this.image,this.disableTextDefault&&(this.textWaysUploading="",this.textImageAllowed="")}handleFileInput(u){if(this.fileToUpload=u.item(0),!this.checkImage)return this.fileToUploadUrl=this.fileToUpload?this.assetsService.getSafeFileUrl(this.fileToUpload):this.fileToUpload,void this.imageChanged.emit(this.fileToUpload);this.checkImageDimensions()}onDrop(u){if(u.preventDefault(),this.fileToUpload=u.dataTransfer.files.item(0),!this.checkImage)return this.fileToUploadUrl=this.fileToUpload?this.assetsService.getSafeFileUrl(this.fileToUpload):this.fileToUpload,void this.imageChanged.emit(this.fileToUpload);this.checkImageDimensions()}onDragOver(u){u.stopPropagation(),u.preventDefault()}checkImageDimensions(){if(this.fileToUpload){let u=new FileReader;u.readAsDataURL(this.fileToUpload),u.onload=c=>{const _=new Image;_.src=u.result,_.onload=()=>{const s=_.naturalHeight,f=_.naturalWidth;f>=this.limitImage.minWidth&&f<=this.limitImage.maxWidth&&s>=this.limitImage.minHeight&&s<=this.limitImage.maxHeight?(this.fileToUploadUrl=this.fileToUpload?this.assetsService.getSafeFileUrl(this.fileToUpload):this.fileToUpload,this.imageChanged.emit(this.fileToUpload)):this.errorMsg.emit(!0)}}}}}return m.\u0275fac=function(u){return new(u||m)(r.Y36(i.H7),r.Y36(M.z))},m.\u0275cmp=r.Xpm({type:m,selectors:[["app-image-input"]],inputs:{image:"image",disableTextDefault:"disableTextDefault",checkImage:"checkImage"},outputs:{imageChanged:"imageChanged",errorMsg:"errorMsg"},decls:6,vars:2,consts:[[1,"m-dropzone","m-dropzone--success","dz-clickable","m--padding-0",3,"click","drop","dragover"],["class","m-dropzone__msg dz-message m--margin-50",4,"ngIf","ngIfElse"],["imageTpl",""],["type","file","accept","image/*",3,"change"],["file",""],[1,"m-dropzone__msg","dz-message","m--margin-50"],[1,"m-dropzone__msg-title"],[1,"m-dropzone__msg-desc"],[2,"height","140px","width","auto",3,"src"]],template:function(u,c){if(1&u){const _=r.EpF();r.TgZ(0,"div",0),r.NdJ("click",function(){r.CHM(_);const f=r.MAs(5);return r.KtG(f.click())})("drop",function(f){return c.onDrop(f)})("dragover",function(f){return c.onDragOver(f)}),r.YNc(1,v,7,6,"div",1),r.YNc(2,y,2,1,"ng-template",null,2,r.W1O),r.TgZ(4,"input",3,4),r.NdJ("change",function(f){return c.handleFileInput(f.target.files)}),r.qZA()()}if(2&u){const _=r.MAs(3);r.xp6(1),r.Q6J("ngIf",!c.fileToUploadUrl)("ngIfElse",_)}},dependencies:[Z.O5,A.X$],styles:["input[_ngcontent-%COMP%]{display:none}img[_ngcontent-%COMP%]{width:100%}"]}),m})()},76916:(R,U,a)=>{a.d(U,{G:()=>u});var r=a(34793),e=a(92198),i=a(94650),M=a(89383),Z=a(60097),A=a(36895);function v(c,_){if(1&c&&(i.TgZ(0,"a",14)(1,"span",15),i._uU(2),i.ALo(3,"translate"),i.qZA()()),2&c){const s=i.oxw().$implicit;i.xp6(2),i.hij(" ",i.lcZ(3,1,s.label)," ")}}function y(c,_){if(1&c&&(i.TgZ(0,"a",16)(1,"span",15),i._uU(2),i.ALo(3,"translate"),i.qZA()()),2&c){const s=i.oxw(),f=s.$implicit,T=s.last,b=i.oxw(2);i.Q6J("routerLink",f.url)("queryParams",T&&b.route.snapshot.queryParams),i.xp6(2),i.hij(" ",i.lcZ(3,3,f.label)," ")}}function C(c,_){if(1&c&&(i.ynx(0),i.TgZ(1,"li",10)(2,"span"),i._uU(3," > "),i.qZA()(),i.TgZ(4,"li",11),i.YNc(5,v,4,3,"a",12),i.YNc(6,y,4,5,"a",13),i.qZA(),i.BQk()),2&c){const s=_.first;i.xp6(5),i.Q6J("ngIf",s),i.xp6(1),i.Q6J("ngIf",!s)}}function m(c,_){if(1&c&&(i.TgZ(0,"div",1)(1,"div",2)(2,"div",3),i._UZ(3,"h3",4),i.TgZ(4,"ul",5)(5,"li",6)(6,"a",7),i._UZ(7,"i",8),i.qZA()(),i.YNc(8,C,7,2,"ng-container",9),i.qZA()(),i.TgZ(9,"div"),i.Hsn(10),i.qZA()()()),2&c){const s=i.oxw();i.xp6(3),i.Q6J("innerHTML",s.title,i.oJD),i.xp6(5),i.Q6J("ngForOf",s.breads)}}const h=["*"];let u=(()=>{class c{constructor(s,f,T,b){this.router=s,this.route=f,this.translate=T,this._carparkService=b,this.breads=[],this.loginUser=""}ngOnInit(){let s=JSON.parse(localStorage.getItem("user-roles"))[0];this.loginUser=s,console.log(this.loginUser,"\u4fe1\u606f"),this.breads=this.buildBreadCrumb(this.route.root),this.translate.get(this.breads[0].label).subscribe(T=>{this.label=T}),this.router.events.pipe((0,e.h)(T=>T instanceof r.m2)).subscribe(()=>{this.breads=this.buildBreadCrumb(this.route.root)})}buildBreadCrumb(s,f=[""],T=[]){const b=s.snapshot.url[0]&&s.snapshot.url[0].path,Y=[...f,b],x={...this.extractBreadcrumb(s),url:Y},O=b&&x.label?[...T,x]:T;return this.title=x.title||this.title||"",this.isMotorist&&"My Vehicle(s)"===x.label&&(this.title="My Vehicle(s)"),s.firstChild?b?this.buildBreadCrumb(s.firstChild,Y,O):this.buildBreadCrumb(s.firstChild,f,T):(this.translate.get(this.title).subscribe(P=>{this.title=P}),O)}get isMotorist(){return this._carparkService.isMotorist()}extractBreadcrumb(s){return s.snapshot.data.breadcrumb instanceof Function?s.snapshot.data.breadcrumb(s):s.snapshot.data.breadcrumb}}return c.\u0275fac=function(s){return new(s||c)(i.Y36(r.F0),i.Y36(r.gz),i.Y36(M.sK),i.Y36(Z.x))},c.\u0275cmp=i.Xpm({type:c,selectors:[["app-title-bar"]],ngContentSelectors:h,decls:1,vars:1,consts:[["class","m-subheader",4,"ngIf"],[1,"m-subheader"],[1,"d-flex","align-items-center"],[1,"mr-auto"],[1,"m-subheader__title","m-subheader__title--separator","text-main",3,"innerHTML"],[1,"m-subheader__breadcrumbs","m-nav","m-nav--inline"],[1,"m-nav__item","m-nav__item--home"],["routerLink","/",1,"m-nav__link","m-nav__link--icon"],[1,"m-nav__link-icon","la","la-home"],[4,"ngFor","ngForOf"],[1,"m-nav__separator"],[1,"m-nav__item"],["class","m-nav__link",4,"ngIf"],["class","m-nav__link",3,"routerLink","queryParams",4,"ngIf"],[1,"m-nav__link"],[1,"m-nav__link-text"],[1,"m-nav__link",3,"routerLink","queryParams"]],template:function(s,f){1&s&&(i.F$t(),i.YNc(0,m,11,2,"div",0)),2&s&&i.Q6J("ngIf","ROLE_TPO_PARTNER"!==f.loginUser)},dependencies:[A.sg,A.O5,r.yS,M.X$],encapsulation:2}),c})()},60232:(R,U,a)=>{a.r(U),a.d(U,{LifestyleManagementModule:()=>Se,createTranslateLoader:()=>V});var r=a(36895),e=a(94650),i=a(34793),M=a(76916);const Z=function(){return["create"]},A=function(){return["overview"]};let v=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-lifestyle"]],decls:16,vars:6,consts:[[1,"body-wrapper"],[1,"m-content"],[1,"m-portlet","m-portlet--tabs"],[1,"m-portlet__head"],[1,"m-portlet__head-tools"],["role","tablist",1,"nav","nav-tabs","m-tabs-line","m-tabs-line--primary","m-tabs-line--2x"],[1,"nav-item","m-tabs__item"],[1,"nav-link","m-tabs__link",3,"routerLink","routerLinkActive"],[1,"m-portlet__body","m-portlet__body--scrollable"],[1,"m-portlet__frame"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-title-bar"),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"ul",5)(7,"li",6)(8,"a",7),e._uU(9," Create Lifestyle "),e.qZA()(),e.TgZ(10,"li",6)(11,"a",7),e._uU(12," Lifestyle List "),e.qZA()()()()(),e.TgZ(13,"div",8)(14,"div",9),e._UZ(15,"router-outlet"),e.qZA()()()()()),2&n&&(e.xp6(8),e.Q6J("routerLink",e.DdM(4,Z))("routerLinkActive","active"),e.xp6(3),e.Q6J("routerLink",e.DdM(5,A))("routerLinkActive","active"))},dependencies:[i.lC,i.yS,i.Od,M.G]}),t})();var y=a(59501),C=a(21532),m=a(30329),h=a(79118),u=a(26245),c=a(8929),_=a(38014),s=a(52746),f=a(3927),T=a(80529),b=a(28555),Y=a(91599);let x=(()=>{class t extends f.su{constructor(n,o,g){super(n,o),this.http=n,this.store=o,this.modelName="Lifestyle",this.baseUrl="carpark/api/web/coupons",this.handleError=g.createHandleError(`${this.modelName}Service`)}createModel(n){const o=this.getUrl("carpark/api/web/coupon");return this.post(o,n)}updateModel(n){const o=this.getUrl("carpark/api/web/coupon");return this.put(o,n)}getCoupon(n){const o=this.getUrl(`carpark/api/getCoupon?id=${n}`);return this.get(o)}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(T.eN),e.LFG(b.yh),e.LFG(Y.k))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var O=a(35635),P=a(38231),z=a(40269),L=a(24006);let ne=(()=>{class t{transform(n){const o=_.cRD.filter(g=>g.id===n);return o.length?o[0].name:""}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=e.Yjl({name:"couponCategoryPipe",type:t,pure:!0}),t})(),oe=(()=>{class t{transform(n){const o=_.zY3.filter(g=>g.id===n);return o.length?o[0].name:""}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=e.Yjl({name:"couponStatusPipe",type:t,pure:!0}),t})();var B=a(89383);function ie(t,l){if(1&t&&(e._UZ(0,"nz-option",13),e.ALo(1,"titlecase")),2&t){const n=l.$implicit;e.Q6J("nzValue",n.id)("nzLabel",e.lcZ(1,2,n.name))}}function ae(t,l){if(1&t&&(e._UZ(0,"nz-option",13),e.ALo(1,"titlecase")),2&t){const n=l.$implicit;e.Q6J("nzValue",n.id)("nzLabel",e.lcZ(1,2,n.name))}}function re(t,l){if(1&t&&e._uU(0),2&t){const n=l.range;e.lnq(" ",n[0],"-",n[1]," of ",l.$implicit," items\n")}}function le(t,l){if(1&t&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&t){const n=l.$implicit;e.xp6(1),e.Oqu(n.text)}}const se=function(t){return["../edit",t]};function pe(t,l){if(1&t&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"couponCategoryPipe"),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"couponStatusPipe"),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"date"),e.qZA(),e.TgZ(16,"td")(17,"a",14),e._UZ(18,"i",15),e.qZA()()()),2&t){const n=l.$implicit,o=l.index;e.ekj("ant-table-row-odd",o%2==1),e.xp6(2),e.Oqu(o+1),e.xp6(2),e.Oqu(n.id),e.xp6(2),e.Oqu(n.couponName),e.xp6(2),e.Oqu(e.lcZ(9,9,n.couponCategory)),e.xp6(3),e.Oqu(e.lcZ(12,11,n.status)),e.xp6(3),e.Oqu(e.xi3(15,13,n.expiryDate,"dd MMM yyyy")),e.xp6(3),e.Q6J("routerLink",e.VKq(16,se,n.id))}}const de=[{text:"#",width:"30px",align:h.iW.Center},{text:"Coupon ID",column:"id",width:"120px"},{text:"Coupon Name",column:"name",width:"140px"},{text:"Coupon Type",column:"type",width:"120px"},{text:"Status",column:"status",width:"120px"},{text:"Expiry Date",column:"date",width:"120px"},{text:"Actions",column:"",width:"120px"}];let k=(()=>{class t extends s.t{constructor(n){super(),this.lifestyleService=n,this.couponCategory="",this.status="",this.couponName="",this.pagination=(0,u.f$)(),this.tableHeaders=de,this.couponCategoryList=_.cRD,this.statusList=_.zY3,this.data=[],this.couponName$=new c.xQ}ngOnInit(){this.couponName$.debounceTime(500).subscribe(()=>{this.reloadData()}),this.reloadData()}get filterParams(){return{status:this.status,couponCategory:this.couponCategory,couponName:this.couponName}}reloadData(){this.reloadDataService(this.lifestyleService)}pageChanged(n){this.pagination=n,this.reloadData()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(x))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-lifestyle-overview"]],features:[e.qOj],decls:31,vars:20,consts:[[1,"form-group","m-form__group","m-portlet__filters"],[1,"filter-wrap"],[1,"filter-item"],[1,"filter-label"],["nzPlaceHolder","Please Select",2,"width","160px",3,"ngModel","ngModelChange"],["nzValue","",3,"nzLabel"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["type","text","nz-input","","placeholder","","placeholder","Please Enter Coupon Name",2,"width","220px",3,"ngModel","ngModelChange"],["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowTotal","nzQueryParams"],["basicTable",""],[4,"ngFor","ngForOf"],[3,"ant-table-row-odd",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],[1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","no-border",3,"routerLink"],[1,"la","la-edit"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4,"Coupon Type:"),e.qZA(),e.TgZ(5,"nz-select",4),e.NdJ("ngModelChange",function(p){return o.couponCategory=p})("ngModelChange",function(){return o.reloadData()}),e._UZ(6,"nz-option",5),e.ALo(7,"translate"),e.YNc(8,ie,2,4,"nz-option",6),e.qZA()()(),e.TgZ(9,"div",1)(10,"div",2)(11,"span",3),e._uU(12,"Status:"),e.qZA(),e.TgZ(13,"nz-select",4),e.NdJ("ngModelChange",function(p){return o.status=p})("ngModelChange",function(){return o.reloadData()}),e._UZ(14,"nz-option",5),e.ALo(15,"translate"),e.YNc(16,ae,2,4,"nz-option",6),e.qZA()()(),e.TgZ(17,"div",1)(18,"div",2)(19,"span",3),e._uU(20,"Coupon Name:"),e.qZA(),e.TgZ(21,"input",7),e.NdJ("ngModelChange",function(p){return o.couponName=p})("ngModelChange",function(p){return o.couponName$.next(p)}),e.qZA()()()(),e.YNc(22,re,1,3,"ng-template",null,8,e.W1O),e.TgZ(24,"nz-table",9,10),e.NdJ("nzQueryParams",function(p){return o.onQueryParamsChange(p)}),e.TgZ(26,"thead")(27,"tr"),e.YNc(28,le,2,1,"th",11),e.qZA()(),e.TgZ(29,"tbody"),e.YNc(30,pe,19,18,"tr",12),e.qZA()()),2&n){const g=e.MAs(23),p=e.MAs(25);e.xp6(5),e.Q6J("ngModel",o.couponCategory),e.xp6(1),e.s9C("nzLabel",e.lcZ(7,16,"All")),e.xp6(2),e.Q6J("ngForOf",o.couponCategoryList),e.xp6(5),e.Q6J("ngModel",o.status),e.xp6(1),e.s9C("nzLabel",e.lcZ(15,18,"All")),e.xp6(2),e.Q6J("ngForOf",o.statusList),e.xp6(5),e.Q6J("ngModel",o.couponName),e.xp6(3),e.Q6J("nzData",o.listData)("nzFrontPagination",!1)("nzLoading",o.loading)("nzTotal",o.pagination.totalCount)("nzPageSize",o.pagination.rowsPerPage)("nzPageIndex",o.pagination.page)("nzShowTotal",g),e.xp6(4),e.Q6J("ngForOf",o.tableHeaders),e.xp6(2),e.Q6J("ngForOf",p.data)}},dependencies:[r.sg,i.yS,O.Zp,P.Ip,P.Vq,z.N8,z.Uo,z._C,z.Om,z.p0,z.$Z,L.Fj,L.JJ,L.On,r.rS,r.uU,ne,oe,B.X$]}),t})();var me=a(15439),W=a(76284),ue=a(49651),ge=a(66616),ce=a(47044),_e=a(21811),fe=a(834),he=a(67869),K=a(29252);function ve(t,l){1&t&&(e.TgZ(0,"div",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function ye(t,l){1&t&&(e.TgZ(0,"div",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function Ce(t,l){1&t&&(e.TgZ(0,"div",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function Te(t,l){1&t&&(e.TgZ(0,"div",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function Ze(t,l){if(1&t&&e._UZ(0,"nz-option",48),2&t){const n=l.$implicit;e.Q6J("nzValue",n.id)("nzLabel",n.name)}}function Me(t,l){1&t&&(e.TgZ(0,"div",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function Ae(t,l){if(1&t&&e._UZ(0,"nz-option",48),2&t){const n=l.$implicit;e.Q6J("nzValue",n.id)("nzLabel",n.name)}}function Le(t,l){1&t&&(e.TgZ(0,"div",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function Ue(t,l){1&t&&(e.TgZ(0,"div",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function be(t,l){1&t&&(e.TgZ(0,"div",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function xe(t,l){1&t&&(e.TgZ(0,"div",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function Pe(t,l){1&t&&(e.TgZ(0,"div",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function ze(t,l){1&t&&(e.TgZ(0,"div",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function De(t,l){1&t&&(e.TgZ(0,"div",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function Ie(t,l){1&t&&(e.TgZ(0,"div",49)(1,"div",50)(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"span"),e._UZ(6,"div",51),e.qZA()()()),2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"Please wait...")," "))}let $=(()=>{class t{constructor(n,o,g,p){this.assetsService=n,this.lifeStyleService=o,this.router=g,this.messageService=p,this.form=(0,_.y9C)(),this.couponCategoryList=_.cRD,this.statusList=_.zY3,this.loading=!1,this.msg=""}ngOnInit(){this.statusList=this.statusList.filter(n=>n.name!==_.Fwb.Expired)}submit(n){const o=-1!==this.router.url.indexOf("create");if(n.valid){const{id:g,couponCode:p,couponDetail:d,couponName:F,couponAmount:D,couponCategory:E,status:q,totalQty:J,couponPercentage:I,expiryDate:S,actionDisplay:N,tncUrl:Q,tncDisplay:w,images:X,carParkGroupId:Ne,carParkOperatorId:Qe,carParkOwnerId:we,couponUuid:Re,leftQty:Ye,type:Be,usedQty:je,message:We}=this.form,ee={id:g,couponCode:p,couponDetail:d,couponName:F,couponAmount:0!=+D?+D:null,couponCategory:E,status:q,totalQty:+J,couponPercentage:0!=+I?+I:null,expiryDate:me(S).endOf("day").format(),actionDisplay:N,tncUrl:Q,tncDisplay:w,picUrl:X.length>0?X[0].lifestyleImage.split("/").pop():null,message:We};if(this.loading=!0,o)this.lifeStyleService.createModel(ee).subscribe(j=>{this.cancel(),this.loading=!1},j=>{this.loading=!1,this.msg=j.error.message,this.openMdModal()});else{const j={...ee,carParkGroupId:Ne,carParkOperatorId:Qe,carParkOwnerId:we,couponUuid:Re,leftQty:Ye,type:Be,usedQty:je};this.lifeStyleService.updateModel(j).subscribe(te=>{this.loading=!1,this.cancel()},te=>{this.loading=!1,this.msg=te.error.message,this.openMdModal()})}}}getErrorMsg(n){n&&(this.msg="The dimension of image is too large! Recommended upload image size 473 * 315. Allow pictures with a width of 465 to 480 and a height of 310 to 320",this.openMdModal())}formatTime(n){return n?new Date(n).getTime():null}openMdModal(){this.messageService.warning(this.msg)}onImageChanged(n){this.assetsService.uploadImage(n).subscribe(o=>this.form.images[0]?this.form.images[0].lifestyleImage=o:this.form.images=[{lifestyleImage:o}])}cancel(){this.router.navigate(["/lifestyle/overview"])}onDateChange(n){this.form.expiryDate=n}getCouponAmountOrPercentage(n){"couponAmount"===n&&(this.form.couponPercentage=0),"couponPercentage"===n&&(this.form.couponAmount=0)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(W.z),e.Y36(x),e.Y36(i.F0),e.Y36(ue.dD))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-lifestyle-form"]],inputs:{form:"form"},decls:127,vars:36,consts:[[1,"m-portlet","m-portlet--bordered-semi",2,"margin-bottom","0"],[1,"m-portlet__body"],[1,"m-form","m-form--fit","m-form--label-align-right",3,"ngSubmit"],["formRef","ngForm"],[1,"m-portlet__head"],[1,"m-portlet__head-caption"],[1,"m-portlet__head-title"],[1,"m-portlet__head-text"],[1,"form-group","m-form__group","row"],[1,"col-form-label","col-lg-2","col-sm-12"],[1,"col-md-10","col-sm-12"],[3,"image","checkImage","imageChanged","errorMsg"],[1,"m--font-danger"],[1,"col-lg-4","col-sm-12"],["type","text","nz-input","","name","couponCode","required","","placeholder","Please Enter Coupon Code",3,"ngModel","ngModelChange"],["couponCodeRef","ngModel"],["class","form-control-feedback",4,"ngIf"],["type","text","nz-input","","name","couponDetail","required","","placeholder","Please Enter Coupon Detail",3,"ngModel","ngModelChange"],["couponDetailRef","ngModel"],["type","text","nz-input","","name","couponName","required","","placeholder","Please Enter Coupon Name",3,"ngModel","ngModelChange"],["couponNameRef","ngModel"],["type","text","nz-input","","digitOnly","","name","couponAmount","required","","placeholder","Please Enter Coupon Amount",3,"ngModel","ngModelChange","blur"],["couponAmountRef","ngModel"],["name","type","nzPlaceHolder","Select Type",2,"width","100%",3,"ngModel","ngModelChange"],["couponCategoryRef","ngModel"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["name","status","nzPlaceHolder","Select Status",2,"width","100%",3,"ngModel","ngModelChange"],["statusRef","ngModel"],["type","text","nz-input","","digitOnly","","name","totalQty","required","","placeholder","Please Enter Total Quantity",3,"ngModel","ngModelChange"],["totalQtyRef","ngModel"],["type","text","nz-input","","digitOnly","","name","couponPercentage","required","","placeholder","Please Enter Coupon Percentage",3,"ngModel","ngModelChange","blur"],["couponPercentageRef","ngModel"],[1,"m-input-icon","m-input-icon--right","m--padding-0"],["name","expiryDate","nzFormat","dd/MM/yyyy",2,"width","100%",3,"ngModel","ngModelChange"],["type","text","nz-input","","name","actionDisplay","required","","placeholder","Please Enter Action Display",3,"ngModel","ngModelChange"],["actionDisplayRef","ngModel"],["type","text","nz-input","","name","tncUrl","required","","placeholder","Please Enter Tnc Url",3,"ngModel","ngModelChange"],["tncUrlRef","ngModel"],["type","text","nz-input","","name","tncDisplay","required","","placeholder","Please Enter Tnc Display",3,"ngModel","ngModelChange"],["tncDisplayRef","ngModel"],["type","text","nz-input","","name","message","required","","placeholder","Please Enter Message",3,"ngModel","ngModelChange"],["couponMessageRef","ngModel"],[1,"m-portlet__foot","bg-light-gray","d-flex","justify-content-end"],[1,"m-form__actions","m-form__actions--right"],["nz-button","","nzType","primary","nzGhost","","nzSize","large",1,"mr-3","btn-form-ops",3,"click"],["nz-button","","nzType","primary","nzSize","large","type","submit",1,"btn-form-ops"],["class","m-blockui-loading",4,"ngIf"],[1,"form-control-feedback"],[3,"nzValue","nzLabel"],[1,"m-blockui-loading"],[1,"m-blockui"],[1,"m-loader","m-loader--brand"]],template:function(n,o){if(1&n){const g=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"form",2,3),e.NdJ("ngSubmit",function(){e.CHM(g);const d=e.MAs(3);return e.KtG(o.submit(d))}),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"h3",7),e._uU(8," Lifestyle Setup "),e.qZA()()()(),e.TgZ(9,"div",1)(10,"div",8)(11,"label",9),e._uU(12," Coupon Picture: "),e.qZA(),e.TgZ(13,"div",10)(14,"app-image-input",11),e.NdJ("imageChanged",function(d){return o.onImageChanged(d)})("errorMsg",function(d){return o.getErrorMsg(d)}),e.qZA()(),e.TgZ(15,"label",9)(16,"span",12),e._uU(17,"*"),e.qZA(),e._uU(18," Coupon Code: "),e.qZA(),e.TgZ(19,"div",13)(20,"input",14,15),e.NdJ("ngModelChange",function(d){return o.form.couponCode=d}),e.qZA(),e.YNc(22,ve,3,3,"div",16),e.qZA(),e.TgZ(23,"label",9)(24,"span",12),e._uU(25,"*"),e.qZA(),e._uU(26," Coupon Detail: "),e.qZA(),e.TgZ(27,"div",13)(28,"input",17,18),e.NdJ("ngModelChange",function(d){return o.form.couponDetail=d}),e.qZA(),e.YNc(30,ye,3,3,"div",16),e.qZA(),e.TgZ(31,"label",9)(32,"span",12),e._uU(33,"*"),e.qZA(),e._uU(34," Coupon Name: "),e.qZA(),e.TgZ(35,"div",13)(36,"input",19,20),e.NdJ("ngModelChange",function(d){return o.form.couponName=d}),e.qZA(),e.YNc(38,Ce,3,3,"div",16),e.qZA(),e.TgZ(39,"label",9)(40,"span",12),e._uU(41,"*"),e.qZA(),e._uU(42," Coupon Amount: "),e.qZA(),e.TgZ(43,"div",13)(44,"input",21,22),e.NdJ("ngModelChange",function(d){return o.form.couponAmount=d})("blur",function(){return o.getCouponAmountOrPercentage("couponAmount")}),e.qZA(),e.YNc(46,Te,3,3,"div",16),e.qZA(),e.TgZ(47,"label",9),e._UZ(48,"span",12),e._uU(49," Type: "),e.qZA(),e.TgZ(50,"div",13)(51,"nz-select",23,24),e.NdJ("ngModelChange",function(d){return o.form.couponCategory=d}),e.YNc(53,Ze,1,2,"nz-option",25),e.qZA(),e.YNc(54,Me,3,3,"div",16),e.qZA(),e.TgZ(55,"label",9),e._UZ(56,"span",12),e._uU(57," Status: "),e.qZA(),e.TgZ(58,"div",13)(59,"nz-select",26,27),e.NdJ("ngModelChange",function(d){return o.form.status=d}),e.YNc(61,Ae,1,2,"nz-option",25),e.qZA(),e.YNc(62,Le,3,3,"div",16),e.qZA(),e.TgZ(63,"label",9)(64,"span",12),e._uU(65,"*"),e.qZA(),e._uU(66," Total Quantity: "),e.qZA(),e.TgZ(67,"div",13)(68,"input",28,29),e.NdJ("ngModelChange",function(d){return o.form.totalQty=d}),e.qZA(),e.YNc(70,Ue,3,3,"div",16),e.qZA(),e.TgZ(71,"label",9)(72,"span",12),e._uU(73,"*"),e.qZA(),e._uU(74," Coupon Percentage: "),e.qZA(),e.TgZ(75,"div",13)(76,"input",30,31),e.NdJ("ngModelChange",function(d){return o.form.couponPercentage=d})("blur",function(){return o.getCouponAmountOrPercentage("couponPercentage")}),e.qZA(),e.YNc(78,be,3,3,"div",16),e.qZA(),e.TgZ(79,"label",9)(80,"span",12),e._uU(81,"*"),e.qZA(),e._uU(82," Expiry Date: "),e.qZA(),e.TgZ(83,"div",13)(84,"div",32)(85,"nz-date-picker",33),e.NdJ("ngModelChange",function(d){return o.form.expiryDate=d})("ngModelChange",function(d){return o.onDateChange(d)}),e.qZA()()(),e.TgZ(86,"label",9)(87,"span",12),e._uU(88,"*"),e.qZA(),e._uU(89," Action Display: "),e.qZA(),e.TgZ(90,"div",13)(91,"input",34,35),e.NdJ("ngModelChange",function(d){return o.form.actionDisplay=d}),e.qZA(),e.YNc(93,xe,3,3,"div",16),e.qZA(),e.TgZ(94,"label",9)(95,"span",12),e._uU(96,"*"),e.qZA(),e._uU(97," Tnc url: "),e.qZA(),e.TgZ(98,"div",13)(99,"input",36,37),e.NdJ("ngModelChange",function(d){return o.form.tncUrl=d}),e.qZA(),e.YNc(101,Pe,3,3,"div",16),e.qZA(),e.TgZ(102,"label",9)(103,"span",12),e._uU(104,"*"),e.qZA(),e._uU(105," Tnc Display: "),e.qZA(),e.TgZ(106,"div",13)(107,"input",38,39),e.NdJ("ngModelChange",function(d){return o.form.tncDisplay=d}),e.qZA(),e.YNc(109,ze,3,3,"div",16),e.qZA(),e.TgZ(110,"label",9)(111,"span",12),e._uU(112,"*"),e.qZA(),e._uU(113," Message: "),e.qZA(),e.TgZ(114,"div",13)(115,"input",40,41),e.NdJ("ngModelChange",function(d){return o.form.message=d}),e.qZA(),e.YNc(117,De,3,3,"div",16),e.qZA()()(),e.TgZ(118,"div",42)(119,"div",43)(120,"button",44),e.NdJ("click",function(){return o.cancel()}),e._uU(121),e.ALo(122,"translate"),e.qZA(),e.TgZ(123,"button",45),e._uU(124),e.ALo(125,"translate"),e.qZA()()()(),e.YNc(126,Ie,7,3,"div",46),e.qZA()()}if(2&n){const g=e.MAs(3),p=e.MAs(21),d=e.MAs(29),F=e.MAs(37),D=e.MAs(45),E=e.MAs(52),q=e.MAs(60),J=e.MAs(69),I=e.MAs(77),S=e.MAs(92),N=e.MAs(100),Q=e.MAs(108),w=e.MAs(116);e.xp6(14),e.Q6J("image",null==o.form.images[0]?null:o.form.images[0].lifestyleImage)("checkImage",!0),e.xp6(6),e.Q6J("ngModel",o.form.couponCode),e.xp6(2),e.Q6J("ngIf",p.invalid&&(p.dirty||p.touched||g.submitted)),e.xp6(6),e.Q6J("ngModel",o.form.couponDetail),e.xp6(2),e.Q6J("ngIf",d.invalid&&(d.dirty||d.touched||g.submitted)),e.xp6(6),e.Q6J("ngModel",o.form.couponName),e.xp6(2),e.Q6J("ngIf",F.invalid&&(F.dirty||F.touched||g.submitted)),e.xp6(6),e.Q6J("ngModel",o.form.couponAmount),e.xp6(2),e.Q6J("ngIf",D.invalid&&(D.dirty||D.touched||g.submitted)),e.xp6(5),e.Q6J("ngModel",o.form.couponCategory),e.xp6(2),e.Q6J("ngForOf",o.couponCategoryList),e.xp6(1),e.Q6J("ngIf",E.invalid&&(E.dirty||E.touched||g.submitted)),e.xp6(5),e.Q6J("ngModel",o.form.status),e.xp6(2),e.Q6J("ngForOf",o.statusList),e.xp6(1),e.Q6J("ngIf",q.invalid&&(q.dirty||q.touched||g.submitted)),e.xp6(6),e.Q6J("ngModel",o.form.totalQty),e.xp6(2),e.Q6J("ngIf",J.invalid&&(J.dirty||J.touched||g.submitted)),e.xp6(6),e.Q6J("ngModel",o.form.couponPercentage),e.xp6(2),e.Q6J("ngIf",I.invalid&&(I.dirty||I.touched||g.submitted)),e.xp6(7),e.Q6J("ngModel",o.form.expiryDate),e.xp6(6),e.Q6J("ngModel",o.form.actionDisplay),e.xp6(2),e.Q6J("ngIf",S.invalid&&(S.dirty||S.touched||g.submitted)),e.xp6(6),e.Q6J("ngModel",o.form.tncUrl),e.xp6(2),e.Q6J("ngIf",N.invalid&&(N.dirty||N.touched||g.submitted)),e.xp6(6),e.Q6J("ngModel",o.form.tncDisplay),e.xp6(2),e.Q6J("ngIf",Q.invalid&&(Q.dirty||Q.touched||g.submitted)),e.xp6(6),e.Q6J("ngModel",o.form.message),e.xp6(2),e.Q6J("ngIf",w.invalid&&(w.dirty||w.touched||g.submitted)),e.xp6(4),e.hij(" ",e.lcZ(122,32,"Cancel")," "),e.xp6(3),e.hij(" ",e.lcZ(125,34,"Submit")," "),e.xp6(2),e.Q6J("ngIf",o.loading)}},dependencies:[r.sg,r.O5,O.Zp,ge.ix,ce.w,_e.dQ,P.Ip,P.Vq,fe.uw,he.F,L._Y,L.Fj,L.JJ,L.JL,L.Q7,L.On,L.F,K.L,B.X$],styles:[".m-form.m-form--fit[_ngcontent-%COMP%]   .m-form__group[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding-top:15px}.m-form.m-form--fit[_ngcontent-%COMP%]   .m-form__group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:50px}"]}),t})();var Oe=a(19832);let H=(()=>{class t{constructor(n,o){this.route=n,this.assetsService=o,this.form=(0,_.y9C)()}ngOnInit(){const{detail:n}=this.route.snapshot.data,{couponPercentage:o,couponAmount:g,picUrl:p}=n;this.form={...n,couponPercentage:o||0,couponAmount:g||0,images:[{id:null,lifestyleImage:this.assetsService.getImage(p)}]}}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(i.gz),e.Y36(W.z))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-lifestyle-update"]],decls:3,vars:1,consts:[[1,"body-wrapper"],[3,"form"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-title-bar")(2,"app-lifestyle-form",1),e.qZA()),2&n&&(e.xp6(2),e.Q6J("form",o.form))},dependencies:[M.G,$]}),t})();var Fe=a(88796),Ee=a(372),qe=a(72986);let G=(()=>{class t{constructor(n){this.lifestyleService=n}resolve(n){return this.lifestyleService.getCoupon(n.paramMap.get("id")).pipe((0,qe.q)(1))}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(x))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();function V(t){return new Oe.w(t,"../assets/i18n/",".json")}const Je=[{path:"",component:y.f,children:[{path:"",component:v,children:[{path:"",redirectTo:"create",pathMatch:"full"},{path:"overview",component:k,data:{breadcrumb:{label:"Lifestyle Overview"}}},{path:"create",component:$,data:{breadcrumb:{label:"Create Lifestyle"}}}]},{path:"edit/:id",component:H,resolve:{detail:G},data:{breadcrumb:{label:"Edit Lifestyle"}}}]}];let Se=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[x,W.z,G],imports:[r.ez,i.Bz.forChild(Je),C.x,m.D,L.u5,Fe.A0,Ee.kn,K.E7,B.aw.forChild({loader:{provide:B.Zw,useFactory:V,deps:[T.eN]}})]}),t})()}}]);