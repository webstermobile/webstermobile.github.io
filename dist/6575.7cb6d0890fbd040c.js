(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[6575,9226],{71942:(D,U,c)=>{"use strict";c.d(U,{f:()=>T});var h=c(38014),p=c(3927),r=c(26245),k=c(21086),Z=c(27221),x=c(66708),b=c(94650),q=c(60097),O=c(80529),g=c(28555),f=c(91599);let T=(()=>{class d extends p.su{constructor(s,u,_,C){super(u,_),this.carparkService=s,this.http=u,this.store=_,this.modelName="Vehicle",this.handleError=C.createHandleError(`${this.modelName}Service`),this.handleDynamicUrl()}ngOnInit(){}handleDynamicUrl(){const s=JSON.parse(localStorage.getItem("user")).login;this.baseUrl=this.carparkService.isMotorist()&&x.Z.isNotNull(s)?`carpark/api/drivers/${s}/vehicles`:"carpark/api/vehicle/get-vehicles"}getTelList(s,u){console.log(s);const _=this.getUrl((0,r.U8)("carpark/api/vehicle/vehicles",{...s,...(0,r.jq)(u)}));return this.get(_)}filterModel(s,u){const _=this.getUrl((0,r.U8)(this.baseUrl,{...s,...(0,r.jq)(u)}));return this.get(_).pipe((0,Z.K)(this.handleError(`${this.modelName}Filter`,{}))).map(C=>Array.isArray(C)?(0,p.eC)(C):(0,p.O7)(C))}updateVehicle(s){const u=this.getUrl(`carpark/api/drivers/${s.driverCode}/vehicles/${s.vehicleId}`);return this.patch(u,s.vehicle).pipe((0,Z.K)(this.handleError(`${this.modelName}Update`,{})))}getModel(s){const u=this.getUrl(`carpark/api/vehicle/${s}`);return this.get(u).pipe((0,Z.K)(this.handleError(`${this.modelName}Get`,{})))}deleteModel(s,u){const _=this.getUrl(`carpark/api/drivers/${s}/vehicles/${u}`);return this.delete(_).pipe((0,Z.K)(this.handleError(`${this.modelName}Delete`)))}deleteAdminModel(s){const u=this.getUrl(`carpark/api/admin/vehicle/${s}`);return this.delete(u).pipe((0,Z.K)(this.handleError(`${this.modelName}Delete`)))}createVehicle(s,u){const _=this.getUrl(`carpark/api/drivers/${s}/vehicles`);return this.post(_,u)}putUpdateVehicle(s,u){const _=this.getUrl(`carpark/api/drivers/${s}/vehicles/${u.id}`);return this.put(_,u)}getDriverCode(s){const u=this.getUrl(`carpark/api/drivers/${s}/driverCode`);return this.get(u)}createModel(s,u){const _=this.getUrl(`carpark/api/drivers/${s}/vehicles`);return this.post(_,u).pipe((0,Z.K)(this.handleError(`${this.modelName}Create`,{})))}createVehicleAdmin(s){const u=this.getUrl(`carpark/api/admin/vehicles/${s.mobile}`);return this.post(u,s).pipe((0,Z.K)(this.handleError(`${this.modelName}Create`,{})))}updateModel(s){const u=this.getUrl("carpark/api/admin/vehicle-changes");return this.post(u,s).pipe((0,Z.K)(this.handleError(`${this.modelName}Update`,{})))}getSimpleList(){const s=this.getUrl("carpark/api/vehicle/simple-vehicles-list");return this.get(s).pipe((0,Z.K)(this.handleError(`${this.modelName}SimpleList`,{})))}filterModelByDriver(s){const u=this.getUrl(`carpark/api/drivers/${s}/vehicles`);return this.get(u).pipe((0,Z.K)(()=>(0,k.of)([])))}isOperator(){const s=JSON.parse(localStorage.getItem("user-roles"));return!(!x.Z.isNotNull(s)||!s.includes(h.i44.Operator))}getUserVehicle(s,u){this.baseUrl=`carpark/api/drivers/${s}/vehicles`;const _=this.getUrl((0,r.U8)(this.baseUrl,{...(0,r.jq)(u)}));return this.get(_).pipe((0,Z.K)(this.handleError(`${this.modelName}Filter`,{}))).map(C=>Array.isArray(C)?(0,p.eC)(C):(0,p.O7)(C))}}return d.\u0275fac=function(s){return new(s||d)(b.LFG(q.x),b.LFG(O.eN),b.LFG(g.yh),b.LFG(f.k))},d.\u0275prov=b.Yz7({token:d,factory:d.\u0275fac}),d})()},76916:(D,U,c)=>{"use strict";c.d(U,{G:()=>T});var h=c(34793),p=c(92198),r=c(94650),k=c(89383),Z=c(60097),x=c(36895);function b(d,v){if(1&d&&(r.TgZ(0,"a",14)(1,"span",15),r._uU(2),r.ALo(3,"translate"),r.qZA()()),2&d){const s=r.oxw().$implicit;r.xp6(2),r.hij(" ",r.lcZ(3,1,s.label)," ")}}function q(d,v){if(1&d&&(r.TgZ(0,"a",16)(1,"span",15),r._uU(2),r.ALo(3,"translate"),r.qZA()()),2&d){const s=r.oxw(),u=s.$implicit,_=s.last,C=r.oxw(2);r.Q6J("routerLink",u.url)("queryParams",_&&C.route.snapshot.queryParams),r.xp6(2),r.hij(" ",r.lcZ(3,3,u.label)," ")}}function O(d,v){if(1&d&&(r.ynx(0),r.TgZ(1,"li",10)(2,"span"),r._uU(3," > "),r.qZA()(),r.TgZ(4,"li",11),r.YNc(5,b,4,3,"a",12),r.YNc(6,q,4,5,"a",13),r.qZA(),r.BQk()),2&d){const s=v.first;r.xp6(5),r.Q6J("ngIf",s),r.xp6(1),r.Q6J("ngIf",!s)}}function g(d,v){if(1&d&&(r.TgZ(0,"div",1)(1,"div",2)(2,"div",3),r._UZ(3,"h3",4),r.TgZ(4,"ul",5)(5,"li",6)(6,"a",7),r._UZ(7,"i",8),r.qZA()(),r.YNc(8,O,7,2,"ng-container",9),r.qZA()(),r.TgZ(9,"div"),r.Hsn(10),r.qZA()()()),2&d){const s=r.oxw();r.xp6(3),r.Q6J("innerHTML",s.title,r.oJD),r.xp6(5),r.Q6J("ngForOf",s.breads)}}const f=["*"];let T=(()=>{class d{constructor(s,u,_,C){this.router=s,this.route=u,this.translate=_,this._carparkService=C,this.breads=[],this.loginUser=""}ngOnInit(){let s=JSON.parse(localStorage.getItem("user-roles"))[0];this.loginUser=s,console.log(this.loginUser,"\u4fe1\u606f"),this.breads=this.buildBreadCrumb(this.route.root),this.translate.get(this.breads[0].label).subscribe(_=>{this.label=_}),this.router.events.pipe((0,p.h)(_=>_ instanceof h.m2)).subscribe(()=>{this.breads=this.buildBreadCrumb(this.route.root)})}buildBreadCrumb(s,u=[""],_=[]){const C=s.snapshot.url[0]&&s.snapshot.url[0].path,y=[...u,C],w={...this.extractBreadcrumb(s),url:y},e=C&&w.label?[..._,w]:_;return this.title=w.title||this.title||"",this.isMotorist&&"My Vehicle(s)"===w.label&&(this.title="My Vehicle(s)"),s.firstChild?C?this.buildBreadCrumb(s.firstChild,y,e):this.buildBreadCrumb(s.firstChild,u,_):(this.translate.get(this.title).subscribe(P=>{this.title=P}),e)}get isMotorist(){return this._carparkService.isMotorist()}extractBreadcrumb(s){return s.snapshot.data.breadcrumb instanceof Function?s.snapshot.data.breadcrumb(s):s.snapshot.data.breadcrumb}}return d.\u0275fac=function(s){return new(s||d)(r.Y36(h.F0),r.Y36(h.gz),r.Y36(k.sK),r.Y36(Z.x))},d.\u0275cmp=r.Xpm({type:d,selectors:[["app-title-bar"]],ngContentSelectors:f,decls:1,vars:1,consts:[["class","m-subheader",4,"ngIf"],[1,"m-subheader"],[1,"d-flex","align-items-center"],[1,"mr-auto"],[1,"m-subheader__title","m-subheader__title--separator","text-main",3,"innerHTML"],[1,"m-subheader__breadcrumbs","m-nav","m-nav--inline"],[1,"m-nav__item","m-nav__item--home"],["routerLink","/",1,"m-nav__link","m-nav__link--icon"],[1,"m-nav__link-icon","la","la-home"],[4,"ngFor","ngForOf"],[1,"m-nav__separator"],[1,"m-nav__item"],["class","m-nav__link",4,"ngIf"],["class","m-nav__link",3,"routerLink","queryParams",4,"ngIf"],[1,"m-nav__link"],[1,"m-nav__link-text"],[1,"m-nav__link",3,"routerLink","queryParams"]],template:function(s,u){1&s&&(r.F$t(),r.YNc(0,g,11,2,"div",0)),2&s&&r.Q6J("ngIf","ROLE_TPO_PARTNER"!==u.loginUser)},dependencies:[x.sg,x.O5,h.yS,k.X$],encapsulation:2}),d})()},26575:(D,U,c)=>{"use strict";c.r(U),c.d(U,{ComplimentaryModule:()=>Nt,createTranslateLoader:()=>W});var h=c(36895),p=c(24006),r=c(34793),k=c(372),Z=c(97176),x=c(60097),b=c(36511),q=c(91599),O=c(42684),g=c(71942),f=c(457),T=c(30329),d=c(21532),v=c(74564),s=c(59501),u=c(88796),_=c(59245),C=c(80529),y=c(89383),w=c(19832),e=c(94650),P=c(48339),te=c(76916);const ne=function(){return["create"]};function ie(i,a){1&i&&(e.TgZ(0,"li",7)(1,"a",11),e._uU(2," Purchase of Prepaid Tickets "),e.qZA()()),2&i&&(e.xp6(1),e.Q6J("routerLink",e.DdM(2,ne))("routerLinkActive","active"))}const oe=function(i){return{routerActive:i}};function ae(i,a){if(1&i&&(e.TgZ(0,"li",7)(1,"div",12)(2,"span",13),e._uU(3," Ticket Details "),e.qZA()()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(1,oe,t.showVehicleList))}}const le=function(){return["overview"]};let V=(()=>{class i{constructor(t,n,o,l){this.router=t,this.translate=n,this.carparkService=o,this._alertService=l,this.showVehicleList=!1}ngOnInit(){this.subscription=this._alertService.getMessage().subscribe(t=>{this.showVehicleList=t&&""!==t.text}),this.showVehicleList=-1!==this.router.url.indexOf("vehicle-list")}ngOnDestroy(){this.subscription.unsubscribe()}get isMotorist(){return this.carparkService.isMotorist()}navigateToApplications(){this._alertService.success("")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(r.F0),e.Y36(y.sK),e.Y36(x.x),e.Y36(P.c))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-complimentary-home"]],decls:15,vars:5,consts:[[1,"body-wrapper"],[1,"m-content"],[1,"m-portlet","m-portlet--tabs"],[1,"m-portlet__head"],[1,"m-portlet__head-tools"],["role","tablist",1,"nav","nav-tabs","m-tabs-line","m-tabs-line--primary","m-tabs-line--2x"],["class","nav-item m-tabs__item",4,"ngIf"],[1,"nav-item","m-tabs__item"],[1,"nav-link","m-tabs__link",3,"routerLink","routerLinkActive","click"],[1,"m-portlet__body","m-portlet__body--scrollable"],[1,"m-portlet__frame"],[1,"nav-link","m-tabs__link",3,"routerLink","routerLinkActive"],[1,"showVehicleTextContainer",3,"ngClass"],[1,"showVehicleText"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-title-bar"),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"ul",5),e.YNc(7,ie,3,3,"li",6),e.TgZ(8,"li",7)(9,"a",8),e.NdJ("click",function(){return n.navigateToApplications()}),e._uU(10," Prepaid Tickets Summary "),e.qZA()(),e.YNc(11,ae,4,3,"li",6),e.qZA()()(),e.TgZ(12,"div",9)(13,"div",10),e._UZ(14,"router-outlet"),e.qZA()()()()()),2&t&&(e.xp6(7),e.Q6J("ngIf",n.isMotorist),e.xp6(2),e.Q6J("routerLink",e.DdM(4,le))("routerLinkActive","active"),e.xp6(2),e.Q6J("ngIf",n.showVehicleList))},dependencies:[h.mk,h.O5,r.lC,r.yS,r.Od,te.G],styles:[".showVehicleTextContainer[_ngcontent-%COMP%]{padding:1.7rem 0 1.5rem}.showVehicleTextContainer[_ngcontent-%COMP%]   .showVehicleText[_ngcontent-%COMP%]{color:#7b7e8a;font-weight:400;font-size:1.285rem}.routerActive[_ngcontent-%COMP%]{color:#00bdb5!important;border-bottom:3px solid #00bdb5!important}"]}),i})();var A=c(38014),L=c(15439),N=c(20388),re=c(81558),se=c(8278),I=c(29252);const ce=["formComplimentary"],me=["zoneChange"],pe=["confirmTemplate"];function de(i,a){1&i&&(e.TgZ(0,"div",39),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function ue(i,a){if(1&i&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.code)("selected","Fixed Day Event"===t.code),e.xp6(1),e.hij(" ",t.code," ")}}function _e(i,a){if(1&i&&(e.TgZ(0,"ng-option",41),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function ge(i,a){if(1&i&&(e.TgZ(0,"ng-option",41),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function he(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",7)(1,"label",8)(2,"span",9),e._uU(3,"*"),e.qZA(),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",10)(7,"ng-select",42,43),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.zoneName=o)})("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.changePrice(o))}),e.YNc(9,ge,2,2,"ng-option",19),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,3,"Zone"),": "),e.xp6(3),e.Q6J("ngModel",t.zoneName),e.xp6(2),e.Q6J("ngForOf",t.zoneChange)}}function fe(i,a){1&i&&(e.TgZ(0,"div",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"*Required field"),". "))}function ve(i,a){1&i&&(e.TgZ(0,"div",39),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function Ce(i,a){1&i&&(e.TgZ(0,"div",39),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Please input valid NTU email address.")," "))}function Ze(i,a){if(1&i&&(e.TgZ(0,"div",7)(1,"label",8),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",8),e._uU(5),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,3,"Floor & Unit No."),": "),e.xp6(3),e.AsE(" #",t.billingForm.floorNumber,"-",t.billingForm.unitNumber," ")}}function be(i,a){if(1&i&&(e.TgZ(0,"div",50)(1,"label",51),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",52),e._uU(5),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.hij("",e.lcZ(3,3,"Floor & Unit No."),":"),e.xp6(3),e.AsE("#",t.billingForm.floorNumber,"-",t.billingForm.unitNumber,"")}}function xe(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",45)(1,"h4",46),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",47),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.modalRef.hide())}),e.TgZ(5,"span",48),e._uU(6,"\xd7"),e.qZA()()(),e.TgZ(7,"div",49)(8,"div",50)(9,"label",51),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"span",52),e._uU(13),e.qZA()(),e.TgZ(14,"div",53)(15,"label",51),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"span",52),e._uU(19),e.qZA()(),e.TgZ(20,"div",50)(21,"label",51),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"span",52),e._uU(25),e.qZA()(),e.TgZ(26,"div",50)(27,"label",51),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"span",52),e._uU(31),e.qZA()(),e.TgZ(32,"div",50)(33,"label",51),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"span",52),e._uU(37),e.qZA()(),e.TgZ(38,"div",50)(39,"label",51),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"span",52),e._uU(43),e.qZA()(),e.YNc(44,be,6,5,"div",54),e.TgZ(45,"div",50)(46,"label",51),e._uU(47),e.ALo(48,"translate"),e.qZA(),e.TgZ(49,"span",52),e._uU(50),e.qZA()(),e.TgZ(51,"div",50)(52,"label",51),e._uU(53),e.ALo(54,"translate"),e.qZA(),e.TgZ(55,"span",52),e._uU(56),e.qZA()(),e.TgZ(57,"div",50)(58,"label",51),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.TgZ(61,"span",52),e._uU(62),e.qZA()(),e.TgZ(63,"div",50)(64,"label",51),e._uU(65),e.ALo(66,"translate"),e.qZA(),e.TgZ(67,"span",52),e._uU(68),e.ALo(69,"date"),e.qZA()(),e.TgZ(70,"div",50)(71,"label",51),e._uU(72),e.ALo(73,"translate"),e.qZA(),e.TgZ(74,"span",52),e._uU(75),e.ALo(76,"date"),e.qZA()(),e.TgZ(77,"div",50)(78,"label",51),e._uU(79),e.ALo(80,"translate"),e.qZA(),e.TgZ(81,"span",52),e._uU(82),e.qZA()(),e.TgZ(83,"div",50)(84,"label",51),e._uU(85),e.qZA(),e.TgZ(86,"span",52),e._uU(87),e.ALo(88,"number"),e.qZA()(),e.TgZ(89,"div",50)(90,"label",51),e._uU(91),e.qZA(),e.TgZ(92,"span",52),e._uU(93),e.ALo(94,"number"),e.qZA()(),e.TgZ(95,"div",50)(96,"label",51),e._uU(97),e.ALo(98,"translate"),e.qZA(),e.TgZ(99,"span",52),e._uU(100),e.qZA()(),e.TgZ(101,"div",55)(102,"input",56,57),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.form.checkDetails=o)}),e.qZA(),e.TgZ(104,"span",58),e._uU(105,"Note: I acknowledge that the prepaid parking ticket will be invoiced to the billing address of the requestor."),e.qZA()()(),e.TgZ(106,"div",59)(107,"button",35),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.modalRef.hide())}),e._uU(108),e.ALo(109,"translate"),e.qZA(),e.TgZ(110,"button",60),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),l=e.MAs(1);return e.KtG(o.submitForm(l))}),e._uU(111),e.ALo(112,"translate"),e.qZA()()}if(2&i){const t=e.MAs(103),n=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,36,"Please Verify and Confirm Your Booking Details")),e.xp6(8),e.hij("",e.lcZ(11,38,"Department"),":"),e.xp6(3),e.Oqu(n.billingForm.department),e.xp6(3),e.hij("",e.lcZ(17,40,"Purchaser"),":"),e.xp6(3),e.Oqu(n.billingForm.name),e.xp6(3),e.hij("",e.lcZ(23,42,"Purchaser Email"),":"),e.xp6(3),e.Oqu(n.billingForm.email),e.xp6(3),e.hij("",e.lcZ(29,44,"Ro Email"),":"),e.xp6(3),e.Oqu(n.form.roEmail),e.xp6(3),e.hij("",e.lcZ(35,46,"Billing Address"),":"),e.xp6(3),e.Oqu(n.getAddress(n.billingForm)),e.xp6(3),e.hij("",e.lcZ(41,48,"Postal Code"),":"),e.xp6(3),e.Oqu(n.billingForm.postalCode),e.xp6(1),e.Q6J("ngIf",!(null!=n.billingForm&&n.billingForm.unitNoApplicable)),e.xp6(3),e.hij("",e.lcZ(48,50,"Event Name"),":"),e.xp6(3),e.Oqu(n.form.eventName),e.xp6(3),e.hij("",e.lcZ(54,52,"Ticket Type"),":"),e.xp6(3),e.Oqu(n.form.ticketType),e.xp6(3),e.hij("",e.lcZ(60,54,"Location"),":"),e.xp6(3),e.Oqu(n.form.location.name),e.xp6(3),e.hij("",e.lcZ(66,56,"Validity Start"),":"),e.xp6(3),e.Oqu(e.xi3(69,58,n.form.validityStart,"d LLL yyyy")),e.xp6(4),e.hij("",e.lcZ(73,61,"Validity End"),":"),e.xp6(3),e.Oqu(e.xi3(76,63,n.validEnd,"d LLL yyyy")),e.xp6(4),e.hij("",e.lcZ(80,66,"No. of Tickets"),":"),e.xp6(3),e.Oqu(n.form.numberOfTickets),e.xp6(3),e.hij("","Cost Per Tickets",":"),e.xp6(2),e.Oqu(e.xi3(88,68,n.form.perTicketCost,".2")),e.xp6(4),e.hij("","Total Cost",":"),e.xp6(2),e.Oqu(e.xi3(94,71,n.form.totalCost,".2")),e.xp6(4),e.hij("",e.lcZ(98,74,"Reason"),":"),e.xp6(3),e.Oqu(n.form.reason),e.xp6(2),e.Q6J("ngModel",n.form.checkDetails),e.xp6(6),e.hij(" ",e.lcZ(109,76,"Cancel")," "),e.xp6(2),e.Q6J("disabled",t.invalid),e.xp6(1),e.hij(" ",e.lcZ(112,78,"Submit")," ")}}function Te(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",61)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"button",62),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.modalRef.hide())}),e._uU(4,"Close"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.msg)}}const ye=function(){return{isAnimated:!0,useUtc:!0,dateInputFormat:"d LLL yyyy"}};let j=(()=>{class i{constructor(t,n,o){this.carparkService=t,this.complimentaryService=n,this.modalService=o,this.canceled=new e.vpe,this.submitted=new e.vpe,this.form=(0,A.Erl)(),this.billingForm=(0,A.RS$)(),this.vehicleNoMessage=A.vwt.VehicleNo,this.subscription=[],this.listImagesOriginal=[],this.minDate=L().add(0,"d").toDate(),this.maxDate=L().add(0,"d").subtract(1,"d").add(3,"M").toDate(),this.currency="(S$)",this.minQuantityMsg="restrict min quantity to 1",this.zone=null,this.zoneChange=null,this.daysDisabled=[],this.datesDisabled=[],this.dateInpuDisabled=!0}ngOnInit(){this.complimentaryService.getPurchaser().subscribe(t=>this.billingForm=t),this.ticketType$=this.complimentaryService.getTicketType(),this.form.ticketType="Fixed Day Event",this.location$=this.complimentaryService.getLocation(),this.complimentaryService.getZone().subscribe(t=>{this.zone=t.content})}carParkChanged(){}cancel(){this.canceled.emit()}submit(t){let n=/[-\|a-z0-9A-Z._](@ntu\.edu\.sg|@nie\.edu\.sg)$/;if(this.form.validityStart=L(this.eventEndDate).format("YYYY-MM-DDTHH:mm:ssZ"),!(this.form.numberOfTickets<1)){if(!n.test(this.form.roEmail))return void(this.form.roEmail=null);if(this.form.roEmail===this.billingForm.email)return void(this.form.roEmail=null);this.modalRef=this.modalService.show(this.confirmTemplate)}}submitForm(t){this.form={...this.form,ticketType:"Open Dated"===this.form.ticketType?1:2,billingAddress:this.billingForm.address},t.valid&&this.submitted.emit({...this.form}),this.modalRef.hide()}changeZone(t){this.form.locationId=this.form.location.id,this.dateInpuDisabled=!1,this.daysDisabled=[],t.sunday&&this.daysDisabled.push(0),t.saturday&&this.daysDisabled.push(6),t.publicHolidays&&this.complimentaryService.getHolidays(t.code).subscribe(n=>{this.datesDisabled=[...n.map(o=>new Date(o))]}),console.log(t),this.zoneChange=this.zone.filter(n=>n.type===t.type),this.zoneName=this.zoneChange[0],this.changePrice(this.zoneChange[0]),this.zoneChange.length<=1&&(this.form.perTicketCost=this.zoneChange[0].ticketPrice/100,this.form.zoneId=this.zoneChange[0].id,this.zoneChange=null)}changePrice(t){this.zone.map(n=>{n.name===t.name&&(this.form.zoneId=n.id,this.form.perTicketCost=n.ticketPrice/100)})}resetForm(){this.form=(0,A.Erl)(),this.formComplimentary.reset()}getTotalCost(){let{numberOfTickets:t,perTicketCost:n}=this.form;this.form.numberOfTickets=+t,this.form.totalCost=+(+t*n).toFixed(2)}getAddress(t){return t.blockNo+" "+t.roadName+(t.buildingName?" "+t.buildingName:"")}changeZoneControl(t){this.FormCarouselZoneComponent.onGetZoneControl(t)}onDateChange(t){this.eventEndDate=t,this.validEnd="Open Dated"===this.form.ticketType?L(this.eventEndDate).subtract(1,"d").add(3,"M").toDate():t}changeValidend(t){this.validEnd="Open Dated"===t?L(this.eventEndDate).subtract(1,"d").add(3,"M").toDate():this.eventEndDate}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(x.x),e.Y36(Z.n),e.Y36(N.tT))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-complimentary-form-ticket"]],viewQuery:function(t,n){if(1&t&&(e.Gf(ce,5),e.Gf(me,5),e.Gf(pe,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.formComplimentary=o.first),e.iGM(o=e.CRH())&&(n.FormCarouselZoneComponent=o.first),e.iGM(o=e.CRH())&&(n.confirmTemplate=o.first)}},inputs:{form:"form"},outputs:{canceled:"canceled",submitted:"submitted"},decls:173,vars:117,consts:[["name","formComplimentary",1,"m-form","m-form--fit","m-form--label-align-right",3,"ngSubmit"],["formComplimentary","ngForm"],[1,"m-portlet"],[1,"m-portlet__body","row","px-0"],[1,"col-sm-12","col-md-12","col-lg-6","group-show-input"],[1,"row"],[1,"col-sm-12","ml-3","tikets-title"],[1,"row","form-group","m-form__group"],[1,"col-form-label","col-lg-4","col-sm-12"],[1,"m--font-danger"],[1,"col-lg-7","col-sm-12"],["type","text","name","eventName","required","",1,"form-control","m-input",3,"ngModel","ngModelChange"],["eventName","ngModel"],["class","form-control-feedback",4,"ngIf"],["name","ticketType",1,"form-control","m-input",3,"ngModel","ngModelChange"],["ticketType","ngModel"],[3,"value","selected",4,"ngFor","ngForOf"],["name","location",3,"clearable","ngModel","ngModelChange"],["location","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","row form-group m-form__group",4,"ngIf"],[1,"m-input-icon","m-input-icon--right"],["type","text","placeholder","","bsDatepicker","","onkeydown","return false",1,"form-control",3,"bsConfig","disabled","minDate","maxDate","daysDisabled","datesDisabled","bsValueChange"],[1,"m-input-icon__icon","m-input-icon__icon--right"],[1,"la","la-calendar"],["class","form-control-feedback errMsg",4,"ngIf"],[1,"form-border"],["digitOnly","","type","text","maxlength","4","name","complimentaryNumber","required","",1,"form-control","m-input",3,"ngModel","ngModelChange"],["complimentaryNumber","ngModel"],["type","text","name","reason",1,"form-control","m-input",3,"ngModel","ngModelChange"],["reason","ngModel"],["type","text","name","roEmail","required","",1,"form-control","m-input",3,"ngModel","ngModelChange"],["roEmail","ngModel"],[1,"m-portlet__foot","bg-light-gray"],[1,"m-form__actions","m-form__actions--right"],[1,"btn","btn-outline-main",3,"click"],["type","submit",1,"btn","btn-main","m--margin-left-30",3,"disabled"],["confirmTemplate",""],["msgModal",""],[1,"form-control-feedback"],[3,"value","selected"],[3,"value"],["bind","zone.name","name","zone",3,"ngModel","ngModelChange"],["zone","ngModel"],[1,"form-control-feedback","errMsg"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","m-form__group","centerAlign"],[1,"col-form-label","col-lg-6","col-sm-12","rightAlign"],[1,"col-form-label","col-lg-6","col-sm-12"],[1,"row","form-group","m-form__group","centerAlign"],["class","form-group m-form__group centerAlign",4,"ngIf"],[1,"form-group","m-form__group","centerAlign","check-details"],["type","checkbox","name","checkDetails","required","",3,"ngModel","ngModelChange"],["checkDetails","ngModel"],[1,"col-lg-10","col-sm-12","note"],[1,"modal-footer"],[1,"btn","btn-main",3,"disabled","click"],[1,"modal-body","text-center"],["type","button",1,"btn","btn-default","mr-3",3,"click"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){e.CHM(o);const m=e.MAs(1);return e.KtG(n.submit(m))}),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5"),e._uU(8),e.ALo(9,"translate"),e.qZA()()(),e.TgZ(10,"div",7)(11,"label",8)(12,"span",9),e._uU(13,"*"),e.qZA(),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"div",10)(17,"input",11,12),e.NdJ("ngModelChange",function(m){return n.form.eventName=m}),e.qZA(),e.YNc(19,de,3,3,"div",13),e.qZA()(),e.TgZ(20,"div",7)(21,"label",8)(22,"span",9),e._uU(23,"*"),e.qZA(),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"div",10)(27,"select",14,15),e.NdJ("ngModelChange",function(m){return n.form.ticketType=m})("ngModelChange",function(m){return n.changeValidend(m)}),e.YNc(29,ue,2,3,"option",16),e.ALo(30,"async"),e.qZA()()(),e.TgZ(31,"div",7)(32,"label",8)(33,"span",9),e._uU(34,"*"),e.qZA(),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"div",10)(38,"ng-select",17,18),e.NdJ("ngModelChange",function(m){return n.form.location=m})("ngModelChange",function(m){return n.changeZone(m)}),e.YNc(40,_e,2,2,"ng-option",19),e.ALo(41,"async"),e.qZA()()(),e.YNc(42,he,10,5,"div",20),e.TgZ(43,"div",7)(44,"label",8)(45,"span",9),e._uU(46,"*"),e.qZA(),e._uU(47),e.ALo(48,"translate"),e.qZA(),e.TgZ(49,"div",10)(50,"div",21)(51,"input",22),e.NdJ("bsValueChange",function(m){return n.onDateChange(m)}),e.qZA(),e.TgZ(52,"span",23)(53,"span"),e._UZ(54,"i",24),e.qZA()()(),e.YNc(55,fe,3,3,"div",25),e.qZA()(),e.TgZ(56,"div",7)(57,"label",8)(58,"span",9),e._uU(59,"*"),e.qZA(),e._uU(60),e.ALo(61,"translate"),e.qZA(),e.TgZ(62,"div",10)(63,"div",21)(64,"div",26),e._uU(65),e.ALo(66,"date"),e.qZA()()()(),e.TgZ(67,"div",7)(68,"label",8),e._uU(69),e.ALo(70,"translate"),e.qZA(),e.TgZ(71,"div",10)(72,"input",27,28),e.NdJ("ngModelChange",function(m){return n.form.numberOfTickets=m})("ngModelChange",function(){return n.getTotalCost()}),e.qZA(),e.YNc(74,ve,3,3,"div",13),e.qZA()(),e.TgZ(75,"div",7)(76,"label",8),e._uU(77),e.ALo(78,"translate"),e.TgZ(79,"span"),e._uU(80),e.qZA(),e._uU(81," : "),e.qZA(),e.TgZ(82,"div",10)(83,"div",26),e._uU(84),e.ALo(85,"number"),e.qZA()()(),e.TgZ(86,"div",7)(87,"label",8),e._uU(88),e.ALo(89,"translate"),e.TgZ(90,"span"),e._uU(91),e.qZA(),e._uU(92," : "),e.qZA(),e.TgZ(93,"div",10)(94,"div",26),e._uU(95),e.ALo(96,"number"),e.qZA()()(),e.TgZ(97,"div",7)(98,"label",8),e._uU(99),e.ALo(100,"translate"),e.qZA(),e.TgZ(101,"div",10)(102,"textarea",29,30),e.NdJ("ngModelChange",function(m){return n.form.reason=m}),e.qZA()()(),e.TgZ(104,"div",5)(105,"div",6)(106,"h5"),e._uU(107),e.ALo(108,"translate"),e.qZA()()(),e.TgZ(109,"div",7)(110,"label",8)(111,"span",9),e._uU(112,"*"),e.qZA(),e._uU(113),e.ALo(114,"translate"),e.qZA(),e.TgZ(115,"div",10)(116,"input",31,32),e.NdJ("ngModelChange",function(m){return n.form.roEmail=m}),e.qZA(),e.YNc(118,Ce,3,3,"div",13),e.qZA()(),e.TgZ(119,"div",7)(120,"label",8),e._uU(121),e.ALo(122,"translate"),e.qZA(),e.TgZ(123,"div",8),e._uU(124),e.qZA()(),e.TgZ(125,"div",7)(126,"label",8),e._uU(127),e.ALo(128,"translate"),e.qZA(),e.TgZ(129,"div",8),e._uU(130),e.ALo(131,"translate"),e.qZA()(),e.YNc(132,Ze,6,5,"div",20),e.TgZ(133,"div",7)(134,"label",8),e._uU(135),e.ALo(136,"translate"),e.qZA(),e.TgZ(137,"div",8),e._uU(138),e.ALo(139,"translate"),e.qZA()(),e.TgZ(140,"div",7)(141,"label",8),e._uU(142),e.ALo(143,"translate"),e.qZA(),e.TgZ(144,"div",8),e._uU(145),e.ALo(146,"translate"),e.qZA()(),e.TgZ(147,"div",7)(148,"label",8),e._uU(149),e.ALo(150,"translate"),e.qZA(),e.TgZ(151,"div",8),e._uU(152),e.ALo(153,"translate"),e.qZA()(),e.TgZ(154,"div",7)(155,"label",8),e._uU(156),e.ALo(157,"translate"),e.qZA(),e.TgZ(158,"div",8),e._uU(159),e.ALo(160,"translate"),e.qZA()()()(),e.TgZ(161,"div",33)(162,"div",34)(163,"button",35),e.NdJ("click",function(){return n.cancel()}),e._uU(164),e.ALo(165,"translate"),e.qZA(),e.TgZ(166,"button",36),e._uU(167),e.ALo(168,"translate"),e.qZA()()()()(),e.YNc(169,xe,113,80,"ng-template",null,37,e.W1O),e.YNc(171,Te,5,1,"ng-template",null,38,e.W1O)}if(2&t){const o=e.MAs(1),l=e.MAs(18),m=e.MAs(73),M=e.MAs(117);e.xp6(8),e.Oqu(e.lcZ(9,53,"Purchase of Prepaid Tickets")),e.xp6(6),e.hij(" ",e.lcZ(15,55,"Event Name"),": "),e.xp6(3),e.Q6J("ngModel",n.form.eventName),e.xp6(2),e.Q6J("ngIf",l.invalid&&(l.dirty||l.touched||o.submitted)),e.xp6(5),e.hij(" ",e.lcZ(25,57,"Ticket Type"),": "),e.xp6(3),e.Q6J("ngModel",n.form.ticketType),e.xp6(2),e.Q6J("ngForOf",e.lcZ(30,59,n.ticketType$)),e.xp6(6),e.hij(" ",e.lcZ(36,61,"Location"),": "),e.xp6(3),e.Q6J("clearable",!1)("ngModel",n.form.location),e.xp6(2),e.Q6J("ngForOf",e.lcZ(41,63,n.location$)),e.xp6(2),e.Q6J("ngIf",n.zoneChange),e.xp6(5),e.hij(" ",e.lcZ(48,65,"Validity Start"),": "),e.xp6(4),e.Q6J("bsConfig",e.DdM(116,ye))("disabled",n.dateInpuDisabled)("minDate",n.minDate)("maxDate",n.maxDate)("daysDisabled",n.daysDisabled)("datesDisabled",n.datesDisabled),e.xp6(4),e.Q6J("ngIf",!n.eventEndDate&&o.submitted),e.xp6(5),e.hij(" ",e.lcZ(61,67,"Validity End"),": "),e.xp6(5),e.Oqu(e.xi3(66,69,n.validEnd,"d LLL yyyy")),e.xp6(4),e.hij(" ",e.lcZ(70,72,"No. of Ticket(s)"),": "),e.xp6(3),e.Q6J("ngModel",n.form.numberOfTickets),e.xp6(2),e.Q6J("ngIf",m.invalid&&(m.dirty||m.touched||o.submitted)),e.xp6(3),e.hij(" ",e.lcZ(78,74,"Cost Per Ticket")," "),e.xp6(3),e.Oqu(n.currency),e.xp6(4),e.Oqu(e.xi3(85,76,n.form.perTicketCost,".2")),e.xp6(4),e.hij(" ",e.lcZ(89,79,"Total Cost")," "),e.xp6(3),e.Oqu(n.currency),e.xp6(4),e.Oqu(e.xi3(96,81,n.form.totalCost,".2")),e.xp6(4),e.hij(" ",e.lcZ(100,84,"Reason")," "),e.xp6(3),e.Q6J("ngModel",n.form.reason),e.xp6(5),e.Oqu(e.lcZ(108,86,"Billing and Contact Details")),e.xp6(6),e.hij(" ",e.lcZ(114,88,"RO Email"),": "),e.xp6(3),e.Q6J("ngModel",n.form.roEmail),e.xp6(2),e.Q6J("ngIf",M.invalid&&(M.dirty||M.touched||o.submitted)),e.xp6(3),e.hij(" ",e.lcZ(122,90,"Billing Address"),": "),e.xp6(3),e.hij(" ",n.getAddress(n.billingForm)," "),e.xp6(3),e.hij(" ",e.lcZ(128,92,"Postal Code"),": "),e.xp6(3),e.hij(" ",e.lcZ(131,94,n.billingForm.postalCode)," "),e.xp6(2),e.Q6J("ngIf",!(null!=n.billingForm&&n.billingForm.unitNoApplicable)),e.xp6(3),e.hij(" ",e.lcZ(136,96,"Purchaser Name"),": "),e.xp6(3),e.hij(" ",e.lcZ(139,98,n.billingForm.name)," "),e.xp6(4),e.hij(" ",e.lcZ(143,100,"Department"),": "),e.xp6(3),e.hij(" ",e.lcZ(146,102,n.billingForm.department)," "),e.xp6(4),e.hij(" ",e.lcZ(150,104,"Purchaser Email"),": "),e.xp6(3),e.hij(" ",e.lcZ(153,106,n.billingForm.email)," "),e.xp6(4),e.hij(" ",e.lcZ(157,108,"Contact No"),": "),e.xp6(3),e.hij(" ",e.lcZ(160,110,n.billingForm.contactNo)," "),e.xp6(5),e.Oqu(e.lcZ(165,112,"Cancel")),e.xp6(2),e.Q6J("disabled",o.invalid),e.xp6(1),e.hij(" ",e.lcZ(168,114,"Submit"),"")}},dependencies:[h.sg,h.O5,p._Y,p.YN,p.Kr,p.Fj,p.Wl,p.EJ,p.JJ,p.JL,p.Q7,p.nD,p.Zs,p.On,p.F,re.N,se.Y,u.w9,u.jq,I.L,h.Ov,h.JJ,h.uU,y.X$],styles:[".errMsg[_ngcontent-%COMP%]{color:red}.minQuantity[_ngcontent-%COMP%]{color:#f4516c}  .bs-datepicker-body table td:not(.disabled):not(.week) span:not(.disabled):not(.is-other-month){font-weight:600;color:#000}.tikets-title[_ngcontent-%COMP%]{font-weight:600;color:#000}.check-details[_ngcontent-%COMP%]{display:flex;flex-direction:row}.form-border[_ngcontent-%COMP%]{border:0;line-height:40px;height:40px;color:#000}.rightAlign[_ngcontent-%COMP%]{text-align:right}.centerAlign[_ngcontent-%COMP%]{display:flex;justify-content:center}.note[_ngcontent-%COMP%]{color:red}"]}),i})();const Ae=["msgModal"];function Me(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",3)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"button",4),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.closeModal())}),e._uU(4,"Close"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.msg)}}let Q=(()=>{class i{constructor(t,n,o,l){this.router=t,this.complimentaryService=n,this.modalService=o,this.bsModalRef=l,this.msg=""}ngOnInit(){}cancel(){this.ticketForm.resetForm()}submit(t){const{billingAddress:n,eventName:o,locationId:l,numberOfTickets:m,reason:M,roEmail:Y,ticketType:H,validityStart:Dt,zoneId:Lt}=t;JSON.parse(localStorage.getItem("user")),this.complimentaryService.submitComplimentaryTicket({billingAddress:n,eventName:o,locationId:l,numberOfTickets:m,reason:M,roEmail:Y,ticketType:H,validityStart:Dt,zoneId:Lt}).subscribe(X=>{this.msg="Your application has been submitted successfully",this.bsModalRef=this.modalService.show(this.msgModal),this.router.navigate(["complimentary-parking-motorist/overview"])},X=>{const{error:ee}=X;this.msg=ee.detail||ee.message,this.bsModalRef=this.modalService.show(this.msgModal,{class:"modal-md"})})}closeModal(){this.bsModalRef.hide()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(r.F0),e.Y36(Z.n),e.Y36(N.tT),e.Y36(N.UZ))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-complimentary-create"]],viewQuery:function(t,n){if(1&t&&(e.Gf(j,5),e.Gf(Ae,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.ticketForm=o.first),e.iGM(o=e.CRH())&&(n.msgModal=o.first)}},decls:4,vars:0,consts:[[3,"canceled","submitted"],["ticketForm",""],["msgModal",""],[1,"modal-body","text-center"],["type","button",1,"btn","btn-default","mr-3",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"app-complimentary-form-ticket",0,1),e.NdJ("canceled",function(){return n.cancel()})("submitted",function(l){return n.submit(l)}),e.qZA(),e.YNc(2,Me,5,1,"ng-template",null,2,e.W1O))},dependencies:[j],encapsulation:2}),i})();var F=c(79118),$=c(26245),ke=c(17489),K=c(94327),B=c(40269),we=c(91846);function Oe(i,a){1&i&&(e.TgZ(0,"div",11),e._uU(1,"Reason is required."),e.qZA())}let Ue=(()=>{class i{constructor(t,n){this.router=t,this.bsModalRef=n,this.cancel=new e.vpe,this.submit=new e.vpe}doSubmit(){this.submit.emit(this.rejectReason)}doCancel(){this.cancel.emit()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(r.F0),e.Y36(N.UZ))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-reject-application"]],inputs:{noReason:"noReason"},outputs:{cancel:"cancel",submit:"submit"},decls:20,vars:14,consts:[[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"form-group"],["for","message-text",1,"form-control-label"],["name","rejectReason",1,"form-control",3,"ngModel","ngModelChange"],["style","color: rgb(244, 81, 108);",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-main",3,"click"],["type","button",1,"btn","btn-main",3,"click"],[2,"color","rgb(244, 81, 108)"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",3)(6,"form")(7,"div",4)(8,"label",5),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"textarea",6),e.NdJ("ngModelChange",function(l){return n.rejectReason=l}),e.qZA()()(),e.YNc(12,Oe,2,0,"div",7),e.qZA(),e.TgZ(13,"div",8)(14,"button",9),e.NdJ("click",function(){return n.doCancel()}),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"button",10),e.NdJ("click",function(){return n.doSubmit()}),e._uU(18),e.ALo(19,"translate"),e.qZA()()()),2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,6,"Reject Application")," "),e.xp6(6),e.hij(" ",e.lcZ(10,8,"Reason"),": "),e.xp6(2),e.Q6J("ngModel",n.rejectReason),e.xp6(1),e.Q6J("ngIf",n.noReason),e.xp6(3),e.hij(" ",e.lcZ(16,10,"Cancel")," "),e.xp6(3),e.hij(" ",e.lcZ(19,12,"Confirm")," "))},dependencies:[h.O5,p._Y,p.Fj,p.JJ,p.JL,p.On,p.F,y.X$],encapsulation:2}),i})();const qe=["confirmModal"],Ne=["msgModal"];function De(i,a){if(1&i&&(e.TgZ(0,"td",10)(1,"span"),e._uU(2),e.ALo(3,"number"),e.qZA()()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Udp("width",n.tableHeaders[9].width),e.xp6(1),e.hij(" S$",e.xi3(3,3,t.totalCost/100,".2")," ")}}function Le(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"a",27),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(4).$implicit,l=e.oxw(),m=e.MAs(17);return e.KtG(l.openModal(m,o,""))}),e.TgZ(1,"span"),e._uU(2,"Make Payment"),e.qZA()()}}function Pe(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"a",27),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(4).$implicit,l=e.oxw();return e.KtG(l.navigateToDetails(o))}),e.TgZ(1,"span"),e._uU(2,"Ticket Details"),e.qZA()()}}function Fe(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"a",27),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(4).$implicit,l=e.oxw(),m=e.MAs(8);return e.KtG(l.openModal(m,o,"delete"))}),e.TgZ(1,"span"),e._uU(2,"Delete"),e.qZA()()}}function Ee(i,a){if(1&i&&(e.TgZ(0,"li",25),e.YNc(1,Le,3,0,"a",26),e.YNc(2,Pe,3,0,"a",26),e.YNc(3,Fe,3,0,"a",26),e.qZA()),2&i){const t=e.oxw(3).$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf","Pending Payment"==t.status&&!n.getRole()),e.xp6(1),e.Q6J("ngIf","Approved"==t.status),e.xp6(1),e.Q6J("ngIf","Approved"!==t.status)}}function Ie(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"a",27),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(4).$implicit,l=e.oxw();return e.KtG(l.navigateToDetails(o))}),e.TgZ(1,"span"),e._uU(2,"Ticket Details"),e.qZA()()}}function je(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"a",27),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(4).$implicit,l=e.oxw(),m=e.MAs(11);return e.KtG(l.openModal(m,o))}),e.TgZ(1,"span"),e._UZ(2,"i",28),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"Approve")))}function Se(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"a",27),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(4).$implicit,l=e.oxw(),m=e.MAs(13);return e.KtG(l.openModal(m,o))}),e.TgZ(1,"span"),e._UZ(2,"i",29),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"Reject")))}function Je(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"li",25)(1,"a",27),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3).$implicit,l=e.oxw();return e.KtG(l.sendEmail(o.uuid))}),e.TgZ(2,"span"),e._uU(3),e.qZA()(),e.YNc(4,Ie,3,0,"a",26),e.YNc(5,je,6,3,"a",26),e.YNc(6,Se,6,3,"a",26),e.qZA()}if(2&i){const t=e.oxw(3).$implicit,n=e.oxw();e.xp6(3),e.Oqu("Send Email"),e.xp6(1),e.Q6J("ngIf","Approved"==t.status),e.xp6(1),e.Q6J("ngIf","Pending"==t.status&&n.getRole()),e.xp6(1),e.Q6J("ngIf","Pending"==t.status&&n.getRole())}}function Re(i,a){if(1&i&&(e.TgZ(0,"ul",22),e.YNc(1,Ee,4,3,"li",23),e.YNc(2,Je,7,4,"ng-template",null,24,e.W1O),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",n.isMotorist)("ngIfElse",t)}}function Ye(i,a){1&i&&(e.TgZ(0,"div",18)(1,"button",19),e._UZ(2,"i",20),e.qZA(),e.YNc(3,Re,4,2,"ul",21),e.qZA())}const He=function(i,a){return{width:i,color:a}};function Ve(i,a){if(1&i&&(e.TgZ(0,"td",10)(1,"span"),e._uU(2),e.qZA()(),e.TgZ(3,"td",10)(4,"span",11),e._uU(5),e.qZA()(),e.TgZ(6,"td",10)(7,"span"),e._uU(8),e.qZA()(),e.TgZ(9,"td",10)(10,"span"),e._uU(11),e.qZA()(),e.TgZ(12,"td",10)(13,"span"),e._uU(14),e.ALo(15,"date"),e.qZA()(),e.TgZ(16,"td",10)(17,"span")(18,"span"),e._uU(19),e.ALo(20,"date"),e.qZA()()(),e.TgZ(21,"td",10)(22,"span"),e._uU(23),e.qZA()(),e.TgZ(24,"td",10)(25,"span"),e._uU(26),e.qZA()(),e.TgZ(27,"td",10)(28,"span"),e._uU(29),e.qZA()(),e.YNc(30,De,4,6,"td",12),e.TgZ(31,"td",10)(32,"span",13),e._uU(33),e.ALo(34,"titlecase"),e.qZA()(),e.TgZ(35,"td",10)(36,"span",14),e._uU(37),e.qZA()(),e.TgZ(38,"td",15)(39,"span",16),e.YNc(40,Ye,4,0,"div",17),e.qZA()()),2&i){const t=a.$implicit,n=e.oxw();e.xp6(1),e.Udp("width",n.tableHeaders[0].width),e.xp6(1),e.hij(" ",t.id," "),e.xp6(2),e.Udp("width",n.tableHeaders[1].width),e.xp6(1),e.hij(" ",t.eventName," "),e.xp6(2),e.Udp("width",n.tableHeaders[2].width),e.xp6(1),e.hij(" ",t.locationDisplay," "),e.xp6(2),e.Udp("width",n.tableHeaders[3].width),e.xp6(1),e.hij(" ",t.ticketTypeDisplay," "),e.xp6(2),e.Udp("width",n.tableHeaders[4].width),e.xp6(1),e.hij(" ",e.xi3(15,36,t.validityStart,"d LLL yyyy")," "),e.xp6(3),e.Udp("width",n.tableHeaders[5].width),e.xp6(2),e.Oqu(e.xi3(20,39,t.validityEnd,"d LLL yyyy")),e.xp6(3),e.Udp("width",n.tableHeaders[6].width),e.xp6(1),e.hij(" ",t.numberOfTickets," "),e.xp6(2),e.Udp("width",n.tableHeaders[7].width),e.xp6(1),e.hij(" ",t.activatedCount," "),e.xp6(2),e.Udp("width",n.tableHeaders[8].width),e.xp6(1),e.hij(" ",t.utilizedCount," "),e.xp6(1),e.Q6J("ngIf",!n.showPuchased),e.xp6(2),e.Q6J("ngStyle",e.WLB(44,He,n.showPuchased?n.tableHeaders[9].width:n.tableHeaders[10].width,n.getStatusColor(null==t?null:t.status))),e.xp6(1),e.hij(" ",e.lcZ(34,42,n.checkStatus(t.status))," "),e.xp6(3),e.Udp("width",n.showPuchased?n.tableHeaders[10].width:n.tableHeaders[11].width),e.xp6(1),e.hij(" ",t.remark," "),e.xp6(2),e.Udp("width",n.showPuchased?n.tableHeaders[11].width:n.tableHeaders[12].width),e.xp6(1),e.Q6J("ngIf","Pending Payment"==t.status||"Pending"==t.status||"Approved"==t.status||"Reject"==t.status)}}function Qe(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",30)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"button",31),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.modalRef.hide())}),e._uU(4,"OK"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.modalMsg)}}function $e(i,a){1&i&&(e.TgZ(0,"div",42),e._uU(1,"Reason is required."),e.qZA())}function Ke(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",32)(1,"div",33)(2,"h5",34),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",35)(6,"form")(7,"div",36)(8,"label",37),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"textarea",38),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.cancelReason=o)}),e.qZA()()(),e.YNc(12,$e,2,0,"div",39),e.qZA(),e.TgZ(13,"div",40)(14,"button",31),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cancel())}),e._uU(15,"Cancel"),e.qZA(),e.TgZ(16,"button",41),e.NdJ("debounceClick",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.submitDelete(o.selectedData,o.cancelReason))}),e._uU(17,"Confirm"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,5,"Delete Application")," "),e.xp6(6),e.hij(" ",e.lcZ(10,7,"Reason"),": "),e.xp6(2),e.Q6J("ngModel",t.cancelReason),e.xp6(1),e.Q6J("ngIf",!t.cancelReason),e.xp6(4),e.Q6J("debounceTime",1e3)}}function Be(i,a){1&i&&(e.TgZ(0,"div",43)(1,"div",44)(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"span"),e._UZ(6,"div",45),e.qZA()()()),2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"Please wait...")," "))}function Ge(i,a){1&i&&(e.TgZ(0,"div",42),e._uU(1,"Reason is required."),e.qZA())}function ze(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",32)(1,"div",33)(2,"h5",34),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",35)(6,"form")(7,"div",36)(8,"label",37),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"textarea",46),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.approveReason=o)}),e.qZA()()(),e.YNc(12,Ge,2,0,"div",39),e.qZA(),e.TgZ(13,"div",40)(14,"button",47),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cancel())}),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"button",48),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.approve(o.approveReason))}),e._uU(18),e.ALo(19,"translate"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,6,"Approve Application")," "),e.xp6(6),e.hij(" ",e.lcZ(10,8,"Reason"),": "),e.xp6(2),e.Q6J("ngModel",t.approveReason),e.xp6(1),e.Q6J("ngIf",!t.approveReason),e.xp6(3),e.hij(" ",e.lcZ(16,10,"Cancel")," "),e.xp6(3),e.hij(" ",e.lcZ(19,12,"Confirm")," ")}}function We(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"app-reject-application",49),e.NdJ("cancel",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cancel())})("submit",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.reject(o))}),e.qZA()}}function Xe(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",30)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"button",31),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cancel())}),e._uU(4,"Close"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.msg)}}function et(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",50)(1,"div",51)(2,"div",52),e._UZ(3,"div",53),e.TgZ(4,"div",54)(5,"div",55)(6,"div",56),e._UZ(7,"img",57),e.qZA(),e.TgZ(8,"div",54)(9,"div"),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"div"),e._uU(13),e.ALo(14,"date"),e.qZA()()()()(),e.TgZ(15,"div",58)(16,"div",59)(17,"div",60),e._uU(18,"Application Date"),e.qZA(),e.TgZ(19,"div",61),e._uU(20),e.ALo(21,"date"),e.qZA()(),e.TgZ(22,"div",59)(23,"div",60),e._uU(24,"Amount"),e.qZA(),e.TgZ(25,"div",61),e._uU(26),e.qZA()(),e.TgZ(27,"div",59)(28,"div",60),e._uU(29,"Payment Method"),e.qZA(),e.TgZ(30,"div",61)(31,"select",62),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.paymentMethod=o)}),e.TgZ(32,"option",63),e._uU(33,"Credit Card"),e.qZA()()()()()(),e.TgZ(34,"div",64)(35,"button",47),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cancel())}),e._uU(36," Close "),e.qZA(),e.TgZ(37,"button",65),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),l=e.MAs(8);return e.KtG(o.prepareMakePayment(l,o.selectedData))}),e._uU(38," Make Payment "),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(10),e.Oqu(e.xi3(11,6,null==t.selectedData?null:t.selectedData.eventDate,"d LLL yyyy")),e.xp6(3),e.Oqu(e.xi3(14,9,null==t.selectedData?null:t.selectedData.eventDate,"d LLL yyyy")),e.xp6(7),e.Oqu(e.xi3(21,12,t.selectedData.createdDate,"d LLL yyyy")),e.xp6(6),e.hij("SGD ",(t.selectedData.totalCost/100).toFixed(2),""),e.xp6(5),e.Q6J("ngModel",t.paymentMethod),e.xp6(6),e.Q6J("disabled",t.isDisabledMakePaymentSubmit)}}let G=(()=>{class i extends F.Gw{constructor(t,n,o,l,m,M,Y,H){super(),this.complimentaryService=t,this.modalService=n,this.bsModalRef=o,this.router=l,this.carparkService=m,this._route=M,this._alertService=Y,this.platformLocation=H,this.ComplimentaryHeaders1=[{text:"ID",column:"id",width:"80px"},{text:"Event Name",column:"name",width:"120px"},{text:"Location",column:"location",width:"150px"},{text:"Type",column:"type",width:"130px"},{text:"Validity Start",column:"createDate",width:"120px"},{text:"Expiry",column:"eventDate",width:"120px"},{text:"Number of ticket",column:"number",width:"150px"},{text:"Tickets Activated",column:"activated",width:"150px"},{text:"Tickets Utilised",column:"utilised",width:"130px"},{text:"Tickets Purchased",column:"totalCost",width:"150px"},{text:"Status",column:"status",width:"120px"},{text:"Remark",column:"remark",width:"120px"}],this.ComplimentaryHeaders2=[],this.ComplimentaryHeaders3=[{text:"Actions",width:"80px"}],this.tableHeaders=this.isMotorist?[...this.ComplimentaryHeaders1,...this.ComplimentaryHeaders3]:[...this.ComplimentaryHeaders1,...this.ComplimentaryHeaders2,...this.ComplimentaryHeaders3],this.elementType="url",this.display=!1,this.href=null,this.qrCodeShow=!1,this.loading=!1,this.pagination=(0,$.f$)(),this.myIpHost="",this.host="",this.downloadApi="",this.subscription=[],this.msg="",this.isDisabledMakePaymentSubmit=!1,this.data=[],this.paymentMethod="6",this.currency="S$",this.modalMsg="",this.host=this.platformLocation.location.href.split("#")[0],this.downloadApi=`${this.myIpHost||this.host}#/ticket`}get filterParams(){return{sort:"id,desc"}}reloadData(t){this.reloadDataService(this.complimentaryService,t)}pageChanged(t){this.pagination=t,this.reloadData()}ngOnInit(){this.routeName=this._route.snapshot.url.map(t=>t.path)[0],this.showPuchased&&this.tableHeaders.splice(9,1),this.reloadData(this.routeName)}openModal(t,n,o){this.selectedData=n,this.modalName=o,this.bsModalRef=this.modalService.show(t,{class:"modal-dialog-centered"})}openMdModal(){this.bsModalRef=this.modalService.show(this.msgModal,{class:"modal-md"})}cancel(){this.bsModalRef.hide()}submitPayment(t){this.cancel(),this.loading=!0,this.complimentaryService.paymentTicket(t.serialNo).subscribe(n=>{this.reloadData(this.routeName),this.loading=!1,this.msg="Payment successful",this.isDisabledMakePaymentSubmit=!0,this.openMdModal()},n=>{const{error:o}=n;this.loading=!1,this.msg=o.detail||o.message,this.openMdModal()}),this.loading=!0,setTimeout(()=>{this.loading=!1},3e3)}downloadImage(t,n,o){const{serialNo:l,id:m}=n;o.preventDefault(),this.href=document.querySelector(`tbody>tr:nth-child(${t+1})>td:last-child qr-code img`).src;var M=document.createElement("a");M.href=this.href,M.download=`${l}.png`,document.getElementById(m)&&document.body.removeChild(document.getElementById(m)),document.body.appendChild(M),M.click()}navigateToDetails(t){this.router.navigate(this.isMotorist?["/complimentary-parking-motorist/vehicle-list"]:["/complimentary-parking/vehicle-list"],{queryParams:{uuid:t.uuid}}),this._alertService.success("1")}get isMotorist(){return this.carparkService.isMotorist()}get showPuchased(){return this.carparkService.showPuchased()}approve(t){this.complimentaryService.approveTicket(this.selectedData.uuid,{action:"Approve",message:t}).subscribe(()=>{this.cancel(),this.reloadData()},o=>{this.cancel();const{error:l}=o;this.loading=!1,this.msg=l.detail,this.openMdModal()})}reject(t){this.complimentaryService.rejectTicket(this.selectedData.uuid,{action:"Reject",message:t}).subscribe(()=>{this.cancel(),this.reloadData()},o=>{this.cancel();const{error:l}=o;this.loading=!1,this.msg=l.detail,this.openMdModal()})}submitDelete(t,n){const o={action:"Cancel",message:n};this.cancel(),this.loading=!0,this.complimentaryService.deleteComplimentaryById(t.uuid,o).subscribe(l=>{this.reloadData(this.routeName),this.loading=!1,this.msg="Success Cancel",this.openMdModal()},l=>{this.cancel();const{error:m}=l;this.loading=!1,this.msg=m.detail,this.openMdModal()})}showCostDetail(t){return`${t.numberOfTickets} * S$ ${this.getPrice(t.costPerTicket)} = S$ ${this.getPrice(t.totalCost)}`}getRole(){const t=JSON.parse(localStorage.getItem("user-roles"));return!!(0,ke.intersection)([A.i44.Admin,A.i44.Operator,A.i44.TicketOrganizer],t).length}prepareMakePayment(t,n){this.cancel(),this.openModal(t,n,"payment")}getStatusColor(t){if(t){const n=t.toLowerCase();return"pending"===n||"reject"===n||"delete"===n||"cancel"===n?A.cEj:A.K8l}return"#000"}downLoadContent(t){return`${this.downloadApi}/CFyoecfRj92v5FIT`}downloadReceipt(t){this.complimentaryService.downloadReceiptBySerialNo(t.serialNo).subscribe(n=>{(0,K.saveAs)(n,t.serialNo)})}getPrice(t){return`${this.currency}${t/100}`}checkStatus(t){switch(t.toLowerCase()){case"cancel":return"Cancelled";case"reject":return"Rejected";default:return t}}sendEmail(t){this.complimentaryService.sendEmail(t).subscribe(n=>{200==n.status?(this.modalMsg="Sending Email is successfully activated, you may receive shortly!",this.modalRef=this.modalService.show(this.confirmModal,{class:"modal-md"})):(this.modalMsg="Sending Email failed!",this.modalRef=this.modalService.show(this.confirmModal,{class:"modal-md"}))},n=>{this.modalMsg="Sending Email failed!",this.modalRef=this.modalService.show(this.confirmModal,{class:"modal-md"})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.n),e.Y36(N.tT),e.Y36(N.UZ),e.Y36(r.F0),e.Y36(x.x),e.Y36(r.gz),e.Y36(P.c),e.Y36(h.lw))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-complimentary-overview"]],viewQuery:function(t,n){if(1&t&&(e.Gf(qe,5),e.Gf(Ne,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.confirmModal=o.first),e.iGM(o=e.CRH())&&(n.msgModal=o.first)}},features:[e.qOj],decls:18,vars:7,consts:[[3,"headers","items","isExtended","loading","pagination","scrollingDisabled","pageChanged"],["whitelistTable",""],["rowTemplate",""],["confirmModal",""],["modal",""],["class","m-blockui-loading",4,"ngIf"],["approveApplication",""],["rejectApplication",""],["msgModal",""],["makePayment",""],[1,"m-datatable__cell"],[2,"word-break","keep-all","word-wrap","break-word"],["class","m-datatable__cell",4,"ngIf"],[3,"ngStyle"],[2,"word-break","keep-all"],[1,"m-datatable__cell","action-cell"],[1,"cell-actions"],["dropdown","","placement","bottom right",4,"ngIf"],["dropdown","","placement","bottom right"],["dropdownToggle","",1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--outline-2x","m-btn--pill","no-border"],[1,"la","la-ellipsis-h"],["class","dropdown-menu dropdown-menu-right","role","menu",4,"dropdownMenu"],["role","menu",1,"dropdown-menu","dropdown-menu-right"],["role","menuitem",4,"ngIf","ngIfElse"],["otherRole",""],["role","menuitem"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"dropdown-item",3,"click"],[1,"la","la-check"],[1,"la","la-close"],[1,"modal-body","text-center"],["type","button",1,"btn","btn-default","mr-3",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"form-group"],["for","message-text",1,"form-control-label"],["name","cancelReason",1,"form-control",3,"ngModel","ngModelChange"],["style","color: rgb(244, 81, 108);",4,"ngIf"],[1,"modal-footer"],["type","button","appDebounceClick","",1,"btn","btn-default","mr-3",3,"debounceTime","debounceClick"],[2,"color","rgb(244, 81, 108)"],[1,"m-blockui-loading"],[1,"m-blockui"],[1,"m-loader","m-loader--brand"],["name","approveReason",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-outline-main",3,"click"],["type","button",1,"btn","btn-main",3,"click"],[3,"cancel","submit"],[1,"make-payment","modal-body"],[1,"modal-wrapper"],[1,"inline-flex","m--margin-bottom-10","text-left"],[1,"flex-start"],[1,"flex-end"],[1,"modal-msg","text-right","inline-flex"],[1,"flex-start","m--padding-right-10"],["src","./assets/app/media/img/icons/startFromEndFromIndicator.svg","height","52"],[1,"modal-stripe"],[1,"row"],[1,"col-sm-6","colorFade"],[1,"col-sm-6","text-right"],["name","paymentMethod",1,"form-control","m-input",3,"ngModel","ngModelChange"],["value","6"],[1,"modal-btns"],["type","button",1,"btn","btn-main",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"app-datatable",0,1),e.NdJ("pageChanged",function(l){return n.pageChanged(l)}),e.ynx(2),e.YNc(3,Ve,41,47,"ng-template",null,2,e.W1O),e.YNc(5,Qe,5,1,"ng-template",null,3,e.W1O),e.BQk(),e.qZA(),e.YNc(7,Ke,18,9,"ng-template",null,4,e.W1O),e.YNc(9,Be,7,3,"div",5),e.YNc(10,ze,20,14,"ng-template",null,6,e.W1O),e.YNc(12,We,1,0,"ng-template",null,7,e.W1O),e.YNc(14,Xe,5,1,"ng-template",null,8,e.W1O),e.YNc(16,et,39,15,"ng-template",null,9,e.W1O)),2&t&&(e.Q6J("headers",n.tableHeaders)("items",n.data)("isExtended",!0)("loading",n.loading)("pagination",n.pagination)("scrollingDisabled",!0),e.xp6(9),e.Q6J("ngIf",n.loading))},dependencies:[h.O5,h.PC,p._Y,p.YN,p.Kr,p.Fj,p.EJ,p.JJ,p.JL,p.On,p.F,B.Uo,F.nE,we.J,_.Hz,_.Mq,_.TO,Ue,h.JJ,h.rS,h.uU,y.X$],styles:[".make-payment[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-items:center;align-items:center;padding:0 15px}.make-payment[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{color:#6c6e86;line-height:2.5rem}.make-payment[_ngcontent-%COMP%]   .modal-msg[_ngcontent-%COMP%]{color:#868aa8;font-size:18px}.make-payment[_ngcontent-%COMP%]   .modal-wrapper[_ngcontent-%COMP%]{width:100%}.make-payment[_ngcontent-%COMP%]   .inline-flex[_ngcontent-%COMP%]{display:inline-flex;justify-content:space-between;align-items:center;width:100%}.make-payment[_ngcontent-%COMP%]   .flex-start[_ngcontent-%COMP%]{justify-content:flex-start}.make-payment[_ngcontent-%COMP%]   .flex-end[_ngcontent-%COMP%]{justify-content:flex-end}.make-payment[_ngcontent-%COMP%]   .modal-stripe[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]:nth-child(odd){background:#ffffff}.make-payment[_ngcontent-%COMP%]   .modal-stripe[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]:nth-child(odd){background:#faf9fc}.make-payment[_ngcontent-%COMP%]   .modal-stripe[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{padding:16px}.make-payment[_ngcontent-%COMP%]   .modal-stripe[_ngcontent-%COMP%]   .colorFade[_ngcontent-%COMP%]{color:#0006}.make-payment[_ngcontent-%COMP%]   .modal-btns[_ngcontent-%COMP%]{margin-top:20px}.make-payment[_ngcontent-%COMP%]   .modal-btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 10px}.modalContent[_ngcontent-%COMP%]{display:flex}.modalContent[_ngcontent-%COMP%]   .imgZoomBtnContianer[_ngcontent-%COMP%]{flex-direction:column;justify-content:flex-end;align-items:center;display:flex;margin-left:20px}.modalContent[_ngcontent-%COMP%]   .imgZoomBtnContianer[_ngcontent-%COMP%]   .minusBtn[_ngcontent-%COMP%]{margin-bottom:10px}.modalContent[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]{width:900px;height:500px;overflow:auto}"]}),i})();var tt=c(96300);const nt=["formComplimentary"];function it(i,a){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.value)}}function ot(i,a){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij("",e.xi3(2,1,t.value,"d LLL yyyy")," ")}}function at(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"label",25),e._uU(2),e.qZA(),e.YNc(3,it,2,1,"span",26),e.YNc(4,ot,3,4,"ng-template",null,27,e.W1O),e.BQk()),2&i){const t=a.$implicit,n=e.MAs(5);e.xp6(2),e.hij(" ",t.text,": "),e.xp6(1),e.Q6J("ngIf","Event Name"==t.text)("ngIfElse",n)}}function lt(i,a){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.Oqu(t.text)}}function rt(i,a){if(1&i&&(e.TgZ(0,"div",28),e.YNc(1,lt,2,1,"div",7),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.vehicleNoErrMsgList)}}function st(i,a){1&i&&(e.TgZ(0,"span",29),e._uU(1,"Invalid Vehicle No."),e.qZA())}function ct(i,a){1&i&&(e.TgZ(0,"div",28),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Please enter numbers only")," "))}function mt(i,a){1&i&&(e.TgZ(0,"span",29),e._uU(1,"Invalid IU Number"),e.qZA())}function pt(i,a){if(1&i&&e.YNc(0,mt,2,0,"span",16),2&i){const t=e.oxw();e.Q6J("ngIf",t.InvalidIUNumber)}}let S=(()=>{class i{constructor(t){this._localeService=t,this.canceled=new e.vpe,this.submitted=new e.vpe,this.labelDisplayArr=[],this.vehicleNoMessage=A.vwt.VehicleNo,this.vehicleNoErrMsgList=A.obi,this.InvalidIUNumber=!1,this.InvalidVehicle=!1}ngOnInit(){this.form={...this.item},"Add"==this.routeName&&this._localeService.messageSource.subscribe(t=>{this.form={...this.form,...t}})}ngOnChanges(t){}cancel(){this.canceled.emit()}submit(t){this.form={...this.form,action:"Edit",message:"Update Ticket"},t.valid&&!this.InvalidIUNumber&&!this.InvalidVehicle&&this.submitted.emit({...this.form})}resetForm(){this.formComplimentary.reset()}verifyIUNumber(){let t=this.form.iuNumber.length;this.InvalidIUNumber=t<10&&0!==t}checkVehicle(t){this.InvalidVehicle=!/[a-zA-Z]$/.test(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(tt.v))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-complimentary-form-vhicle-detail"]],viewQuery:function(t,n){if(1&t&&e.Gf(nt,5),2&t){let o;e.iGM(o=e.CRH())&&(n.formComplimentary=o.first)}},inputs:{routeName:"routeName",item:"item",form:"form"},outputs:{canceled:"canceled",submitted:"submitted"},features:[e.TTD],decls:38,vars:13,consts:[[1,"m-form","m-form--fit","m-form--label-align-right",3,"ngSubmit"],["formVehilceDetail","ngForm"],[1,"m-portlet"],[1,"m-portlet__head"],[1,"m-portlet__head-caption"],[1,"m-portlet__head-title","m-portlet__head-title_container"],[1,"m-portlet__head-text"],[4,"ngFor","ngForOf"],[1,"m-portlet__body"],[1,"row","form-group","m-form__group"],[1,"col-form-label","col-lg-2","col-sm-12"],[1,"m--font-danger"],[1,"col-lg-4","col-sm-12"],["type","text","name","vehicleNo","required","","maxlength","8","minlength","3","pattern","^[a-zA-Z0-9]+$","oninput","this.value = this.value.toUpperCase()",1,"form-control","m-input",3,"ngModel","ngModelChange"],["vehicleNumber","ngModel"],["class","form-control-feedback",4,"ngIf"],["class","form-control-feedback","style","color: #f00;",4,"ngIf"],["type","text","name","iuNo","maxlength","10","pattern","^[0-9]+$","digitOnly","",1,"form-control","m-input",3,"ngModel","ngModelChange"],["vehicleIUNo","ngModel"],["class","form-control-feedback",4,"ngIf","ngIfElse"],["hasIuNumber",""],[1,"m-portlet__foot","bg-light-gray"],[1,"m-form__actions","m-form__actions--right"],["type","button",1,"btn","btn-outline-main",3,"click"],["type","submit",1,"btn","btn-main","m--margin-left-30"],[1,"form-label"],[4,"ngIf","ngIfElse"],["eventTime",""],[1,"form-control-feedback"],[1,"form-control-feedback",2,"color","#f00"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){e.CHM(o);const m=e.MAs(1);return e.KtG(n.submit(m))}),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),e._uU(7," Register Vehicle Details "),e.qZA(),e.TgZ(8,"div"),e.YNc(9,at,6,3,"ng-container",7),e.qZA()()()(),e.TgZ(10,"div",8)(11,"div",9)(12,"label",10)(13,"span",11),e._uU(14,"*"),e.qZA(),e._uU(15," Vehicle No.: "),e.qZA(),e.TgZ(16,"div",12)(17,"input",13,14),e.NdJ("ngModelChange",function(m){return n.form.vehicleNo=m})("ngModelChange",function(m){return n.checkVehicle(m)}),e.qZA(),e.YNc(19,rt,2,1,"div",15),e.YNc(20,st,2,0,"span",16),e.qZA()(),e.TgZ(21,"div",9)(22,"label",10),e._uU(23," IU No.: "),e.qZA(),e.TgZ(24,"div",12)(25,"input",17,18),e.NdJ("ngModelChange",function(m){return n.form.iuNumber=m}),e.qZA(),e.YNc(27,ct,3,3,"div",19),e.YNc(28,pt,1,1,"ng-template",null,20,e.W1O),e.qZA()()(),e.TgZ(30,"div",21)(31,"div",22)(32,"button",23),e.NdJ("click",function(){return n.cancel()}),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"button",24),e._uU(36),e.ALo(37,"translate"),e.qZA()()()()()}if(2&t){const o=e.MAs(1),l=e.MAs(18),m=e.MAs(26),M=e.MAs(29);e.xp6(9),e.Q6J("ngForOf",n.labelDisplayArr),e.xp6(8),e.Q6J("ngModel",n.form.vehicleNo),e.xp6(2),e.Q6J("ngIf",l.invalid&&(l.dirty||l.touched||o.submitted)),e.xp6(1),e.Q6J("ngIf",n.InvalidVehicle),e.xp6(5),e.Q6J("ngModel",n.form.iuNumber),e.xp6(2),e.Q6J("ngIf",m.invalid&&(m.dirty||m.touched||o.submitted))("ngIfElse",M),e.xp6(6),e.Oqu(e.lcZ(34,9,"Cancel")),e.xp6(3),e.hij(" ",e.lcZ(37,11,"Submit"),"")}},dependencies:[h.sg,h.O5,p._Y,p.Fj,p.JJ,p.JL,p.Q7,p.wO,p.nD,p.c5,p.On,p.F,I.L,h.uU,y.X$],styles:[".m-portlet[_ngcontent-%COMP%]   .m-portlet__head[_ngcontent-%COMP%]   .m-portlet__head-caption[_ngcontent-%COMP%]   .m-portlet__head-title.m-portlet__head-title_container[_ngcontent-%COMP%]{display:flex;align-items:center}.form-label[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;margin-left:20px;margin-right:10px}"]}),i})();var E=c(90371),J=c(66708);function ht(i){return new w.w(i,"../assets/i18n/",".json")}let ft=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[r.Bz,h.ez,d.x,p.u5,T.D,_.mr,k.kn,u.A0,p.UX,y.aw.forChild({loader:{provide:y.Zw,useFactory:ht,deps:[C.eN]}}),E.bB.forRoot(),I.E7]}),i})();var vt=c(8929),Ct=c(72986);const Zt=["qrSelect"];function bt(i,a){if(1&i&&(e.TgZ(0,"div",1)(1,"div",2),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",3),e._uU(5),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,3,"Floor & Unit No. "),": "),e.xp6(3),e.AsE(" #",null==t.ticketData?null:t.ticketData.floorNo,"-",null==t.ticketData?null:t.ticketData.unitNo," ")}}function xt(i,a){if(1&i&&(e.TgZ(0,"td",11)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Udp("width",n.tableHeaders[2].width),e.xp6(1),e.hij(" ",null==t?null:t.code," ")}}function Tt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"td",11)(1,"span")(2,"input",12),e.NdJ("click",function(){const l=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.setValue(l.code))}),e.qZA()()(),e.TgZ(3,"td",11)(4,"span"),e._uU(5),e.qZA()(),e.YNc(6,xt,3,3,"td",13),e.TgZ(7,"td",11)(8,"span")(9,"span"),e._UZ(10,"img",14),e.qZA(),e.TgZ(11,"span"),e._uU(12),e.qZA()()(),e.TgZ(13,"td",11)(14,"span")(15,"span"),e._uU(16),e.qZA()()(),e.TgZ(17,"td",11)(18,"span")(19,"span"),e._uU(20),e.qZA()()(),e.TgZ(21,"td",11)(22,"span")(23,"span"),e._uU(24),e.ALo(25,"date"),e._UZ(26,"br"),e._uU(27),e.ALo(28,"date"),e.qZA()()(),e.TgZ(29,"td",11)(30,"span")(31,"span"),e._uU(32),e.ALo(33,"date"),e._UZ(34,"br"),e._uU(35),e.ALo(36,"date"),e.qZA()()(),e.TgZ(37,"td",15)(38,"span")(39,"div",16)(40,"button",6),e.NdJ("click",function(){const l=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.toEditVehicle(l))}),e.TgZ(41,"span"),e._uU(42,"Register vehicle"),e.qZA()()()()()}if(2&i){const t=a.$implicit,n=e.oxw();e.xp6(1),e.Udp("width",n.tableHeaders[0].width),e.xp6(1),e.Q6J("checked",n.selectAll),e.xp6(2),e.Udp("width",n.tableHeaders[1].width),e.xp6(1),e.hij(" ",null==t?null:t.serialNo," "),e.xp6(1),e.Q6J("ngIf",n.isCodeShow()),e.xp6(2),e.Udp("width",n.tableHeaders[3].width),e.xp6(2),e.Q6J("src",n.vehicleTypeLogo(null==t?null:t.vehicleType),e.LSH),e.xp6(2),e.Oqu(null==t?null:t.vehicleNo),e.xp6(2),e.Udp("width",n.tableHeaders[4].width),e.xp6(2),e.Oqu(null==t?null:t.iuNumber),e.xp6(2),e.Udp("width",n.tableHeaders[5].width),e.xp6(2),e.Oqu(null!=t&&t.issued?"Issued":t.issued),e.xp6(2),e.Udp("width",n.tableHeaders[6].width),e.xp6(2),e.hij(" ",e.xi3(25,27,null==t?null:t.lastIssuedAt,"d LLL yyyy")," "),e.xp6(3),e.hij(" ",e.xi3(28,30,null==t?null:t.lastIssuedAt,"h:mm:ss a")," "),e.xp6(3),e.Udp("width",n.tableHeaders[7].width),e.xp6(2),e.hij(" ",e.xi3(33,33,null==t?null:t.utilizedDate,"d LLL yyyy")," "),e.xp6(3),e.hij(" ",e.xi3(36,36,null==t?null:t.utilizedDate,"h:mm:ss a")," "),e.xp6(3),e.Udp("width",n.tableHeaders[8].width)}}function yt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",20),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onDecline())}),e._uU(2,"No"),e.qZA(),e.TgZ(3,"button",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2),l=e.MAs(72);return e.KtG(o.onConfirm(l))}),e._uU(4,"Yes"),e.qZA()()}}function At(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onDecline())}),e._uU(1,"Close"),e.qZA()}}function Mt(i,a){if(1&i&&(e.TgZ(0,"div",17)(1,"p"),e._uU(2),e.qZA(),e.YNc(3,yt,5,0,"div",18),e.YNc(4,At,2,0,"ng-template",null,19,e.W1O),e.qZA()),2&i){const t=e.MAs(5),n=e.oxw();e.xp6(2),e.Oqu(n.errMsg||"Confirm deletion?"),e.xp6(1),e.Q6J("ngIf",!n.errMsg)("ngIfElse",t)}}function kt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",17)(1,"p"),e._uU(2,"Please select ticket"),e.qZA(),e.TgZ(3,"button",20),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onDecline())}),e._uU(4,"Close"),e.qZA()()}}let z=(()=>{class i extends F.Gw{constructor(t,n,o,l,m){super(),this.complimentaryService=t,this._routerService=n,this.route=o,this.modalService=l,this.carparkService=m,this.tableHeaders=[{text:"",width:"20px"},{text:"S/N",width:"30px"},{text:"Code",column:"code",width:"200px"},{text:"Vehicle No.",column:"vehicleNo",width:"100px"},{text:"IU Number",column:"iuNo",width:"120px"},{text:"Issued",column:"issued",width:"80px"},{text:"Activated On",column:"event",width:"90px"},{text:"Utilised On",column:"utilised",width:"90px"},{text:"Actions",width:"120px"}],this.tableHeadersDisplay=[],this.vehicleTypes=A.php,this.vehicleNo="",this.vehicleType="",this.keyword$=new vt.xQ,this.pagination=(0,$.tl)(),this.qrParams=(0,A.viM)(),this.ticketCode=[],this.selectAll=!1,this.route.queryParams.subscribe(M=>{this.ticketUuid=M.uuid})}get isMotorist(){return this.carparkService.isMotorist()}ngOnInit(){if(this.reloadData(),this.complimentaryService.getTicketDetails(this.ticketUuid).subscribe(t=>{this.ticketData=t}),this.tableHeadersDisplay=this.tableHeaders.map(t=>t),!this.isCodeShow()){const t=this.tableHeadersDisplay.findIndex((n,o)=>{if("code"==n.column)return!0});console.log("code index ",t),this.tableHeadersDisplay.splice(t,1)}}get filterParams(){return{}}reloadData(){this.complimentaryService.getVehicleList(this.ticketUuid,this.pagination).pipe((0,Ct.q)(1)).subscribe(t=>{t.number>t.totalPages&&(this.pagination={...this.pagination,page:t.pagination.totalPages}),this.loading=!1,this.pagination={...this.pagination,totalCount:t.pagination.totalCount},this.data=t.data},()=>{this.loading=!1,this.data=[],this.pagination={...this.pagination,totalCount:0}})}pageChanged(t){this.pagination=t,this.reloadData()}selectAllBox(t){this.selectAll=t}vehicleTypeLogo(t){return(0,A.e9Z)(A.php,t,"icon")}removeVehicle(t,n){this.modalRef=this.modalService.show(t,{class:"modal-sm"}),this.vehicleId=n,this.errMsg=""}onDecline(){this.modalRef.hide()}onConfirm(t){this.errMsg="",this.complimentaryService.deleteModel(this.vehicleId).subscribe(n=>{this.reloadData(),this.modalRef.hide()},n=>{this.modalRef.hide(),console.log(n),this.errMsg=n.error.detail,this.modalRef=this.modalService.show(t,{class:"modal-md"})})}toEditVehicle(t){const{code:n,vehicleNo:o,iuNumber:l}=t;this._routerService.navigate(this.isMotorist?[`/complimentary-parking-motorist/edit/${this.ticketUuid}`]:[`/complimentary-parking/edit/${this.ticketUuid}`],{queryParams:{code:n,vehicleNo:o,iuNumber:l}})}setValue(t){const n=this.ticketCode.indexOf(t);n>-1?this.ticketCode.splice(n,1):this.ticketCode.push(t)}downloadQr(t){let n;this.selectAll||this.ticketCode.length?(n=this.selectAll?{...this.qrParams,remark:"All"}:{...this.qrParams,ticketCodes:this.ticketCode},this.complimentaryService.getTicketsQR(n,this.ticketUuid,t).subscribe(o=>{let l=o.body,m=o.headers.get("content-disposition").split(";")[1].split("filename=")[1];(0,K.saveAs)(l,m)})):this.modalRef=this.modalService.show(this.qrSelect)}isCodeShow(){console.log("isCodeShow here...");const t=JSON.parse(localStorage.getItem("user-roles"));return!(J.Z.isNotNull(t)&&t.includes(A.i44.TicketAdmin)||J.Z.isNotNull(t)&&t.includes(A.i44.TicketOrganizer))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.n),e.Y36(r.F0),e.Y36(r.gz),e.Y36(N.tT),e.Y36(x.x))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-complimentary-vehicle-list"]],viewQuery:function(t,n){if(1&t&&e.Gf(Zt,5),2&t){let o;e.iGM(o=e.CRH())&&(n.qrSelect=o.first)}},features:[e.qOj],decls:75,vars:51,consts:[[1,"detail-container"],[1,"detail-item","row"],[1,"detail-left","col-lg-3","col-sm-6"],[1,"detail-right","col-lg-3","col-sm-6"],["class","detail-item row",4,"ngIf"],[1,"downloadBtn"],["type","button",1,"btn","btn-main","mr-3",3,"click"],[3,"headers","items","loading","pagination","scrollingDisabled","selectAll","pageSize","pageChanged","selectAllBox"],["rowTemplate",""],["template",""],["qrSelect",""],[1,"m-datatable__cell"],["type","checkbox","name","value",3,"checked","click"],["class","m-datatable__cell",4,"ngIf"],["alt","",3,"src"],[1,"m-datatable__cell","action-cell"],["dropdown","","placement","bottom right"],[1,"modal-body","text-center"],[4,"ngIf","ngIfElse"],["close",""],["type","button",1,"btn","btn-default","mr-3",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",3),e._uU(6),e.qZA()(),e.TgZ(7,"div",1)(8,"div",2),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"div",3),e._uU(12),e.qZA()(),e.TgZ(13,"div",1)(14,"div",2),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"div",3),e._uU(18),e.ALo(19,"date"),e.qZA()(),e.TgZ(20,"div",1)(21,"div",2),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"div",3),e._uU(25),e.qZA()(),e.TgZ(26,"div",1)(27,"div",2),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"div",3),e._uU(31),e.qZA()(),e.TgZ(32,"div",1)(33,"div",2),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"div",3),e._uU(37),e.qZA()(),e.TgZ(38,"div",1)(39,"div",2),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"div",3),e._uU(43),e.qZA()(),e.TgZ(44,"div",1)(45,"div",2),e._uU(46),e.ALo(47,"translate"),e.qZA(),e.TgZ(48,"div",3),e._uU(49),e.qZA()(),e.YNc(50,bt,6,5,"div",4),e.TgZ(51,"div",1)(52,"div",2),e._uU(53),e.ALo(54,"translate"),e.qZA(),e.TgZ(55,"div",3),e._uU(56),e.qZA()(),e.TgZ(57,"div",1)(58,"div",2),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.TgZ(61,"div",3),e._uU(62),e.qZA()()(),e.TgZ(63,"div",5)(64,"button",6),e.NdJ("click",function(){return n.downloadQr("excel")}),e._uU(65,"Download report in Excel"),e.qZA(),e.TgZ(66,"button",6),e.NdJ("click",function(){return n.downloadQr("pdf")}),e._uU(67,"Download QR code in PDF"),e.qZA()(),e.TgZ(68,"app-datatable",7),e.NdJ("pageChanged",function(l){return n.pageChanged(l)})("selectAllBox",function(l){return n.selectAllBox(l)}),e.YNc(69,Tt,43,39,"ng-template",8,8,e.W1O),e.YNc(71,Mt,6,3,"ng-template",null,9,e.W1O),e.qZA(),e.YNc(73,kt,5,0,"ng-template",null,10,e.W1O)),2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,28,"Event Name"),": "),e.xp6(3),e.hij(" ",null==n.ticketData?null:n.ticketData.eventName," "),e.xp6(3),e.hij(" ",e.lcZ(10,30,"Event Type"),": "),e.xp6(3),e.hij(" ",null==n.ticketData?null:n.ticketData.ticketTypeDisplay," "),e.xp6(3),e.hij(" ",e.lcZ(16,32,"Valid To"),": "),e.xp6(3),e.hij(" ",e.xi3(19,34,null==n.ticketData?null:n.ticketData.validityEnd,"d LLL yyyy")," "),e.xp6(4),e.hij(" ",e.lcZ(23,37,"No. of Tickets"),": "),e.xp6(3),e.hij(" ",null==n.ticketData?null:n.ticketData.numberOfTickets," "),e.xp6(3),e.hij(" ",e.lcZ(29,39,"Cost Per Ticket"),": "),e.xp6(3),e.hij(" ",(null==n.ticketData?null:n.ticketData.costPerTicket)/100," "),e.xp6(3),e.hij(" ",e.lcZ(35,41,"Total Cost "),": "),e.xp6(3),e.hij(" ",(null==n.ticketData?null:n.ticketData.totalCost)/100," "),e.xp6(3),e.hij(" ",e.lcZ(41,43,"Billing Address"),": "),e.xp6(3),e.hij(" ",null==n.ticketData?null:n.ticketData.billingAddress," "),e.xp6(3),e.hij(" ",e.lcZ(47,45,"Postal Code "),": "),e.xp6(3),e.hij(" ",null==n.ticketData?null:n.ticketData.postalCode," "),e.xp6(1),e.Q6J("ngIf",!(null!=n.ticketData&&n.ticketData.unitNoApplicable)),e.xp6(3),e.hij(" ",e.lcZ(54,47,"Status"),": "),e.xp6(3),e.hij(" ",null==n.ticketData?null:n.ticketData.status," "),e.xp6(3),e.hij(" ",e.lcZ(60,49,"Reason"),": "),e.xp6(3),e.hij(" ",null==n.ticketData?null:n.ticketData.reason," "),e.xp6(6),e.Q6J("headers",n.tableHeadersDisplay)("items",n.data)("loading",n.loading)("pagination",n.pagination)("scrollingDisabled",!0)("selectAll",!0)("pageSize",!0))},dependencies:[h.O5,B.Uo,F.nE,_.TO,h.uU,y.X$],styles:[".detail-left[_ngcontent-%COMP%]{text-align:right}.detail-item[_ngcontent-%COMP%]{font-size:medium;font-weight:600;height:50px}.downloadBtn[_ngcontent-%COMP%]{margin-bottom:10px;display:flex;justify-content:flex-end}.checkbox[_ngcontent-%COMP%]{margin-left:10px}"]}),i})();const wt=["template"];function Ot(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"div")(4,"button",7),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onDecline())}),e._uU(5,"Yes"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.errMsg)}}let R=(()=>{class i{constructor(t,n,o,l,m){this._route=t,this.router=n,this.complimentaryService=o,this._locationService=l,this.modalService=m,this.routeName="",this.queryParams=[],this.item={}}ngOnInit(){this.queryParams=this._route.snapshot.url.map(t=>t.path),this.routeName=this.queryParams[0].charAt(0).toUpperCase()+this.queryParams[0].slice(1),this.vehilcleId=this.queryParams[1],this.item=this._route.snapshot.queryParams}cancel(){this._locationService.back()}submit(t){"Edit"==this.routeName&&this.complimentaryService.updateTicket(t,this.vehilcleId).subscribe(n=>{this.cancel()},n=>{this.errMsg=n.error.detail,this.modalRef=this.modalService.show(this.template,{class:"modal-md"})})}onDecline(){this.modalRef.hide()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(r.gz),e.Y36(r.F0),e.Y36(Z.n),e.Y36(h.Ye),e.Y36(N.tT))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-complimentary-vehicle-details"]],viewQuery:function(t,n){if(1&t&&(e.Gf(S,5),e.Gf(wt,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.vehicleDetailForm=o.first),e.iGM(o=e.CRH())&&(n.template=o.first)}},decls:7,vars:2,consts:[[1,"body-wrapper"],[1,"m-content"],[1,"m-portlet","m-portlet--tabs"],[3,"item","routeName","submitted","canceled"],["vehicleDetailForm",""],["template",""],[1,"modal-body","text-center"],["type","button",1,"btn","btn-default","mr-3",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-complimentary-form-vhicle-detail",3,4),e.NdJ("submitted",function(l){return n.submit(l)})("canceled",function(){return n.cancel()}),e.qZA()()(),e.YNc(5,Ot,6,1,"ng-template",null,5,e.W1O),e.qZA()),2&t&&(e.xp6(3),e.Q6J("item",n.item)("routeName",n.routeName))},dependencies:[S]}),i})();var Ut=c(49333);function W(i){return new w.w(i,"../assets/i18n/",".json")}const qt=[{path:"",component:s.f,children:[{path:"",component:V,children:[{path:"",redirectTo:"overview",pathMatch:"full"},{path:"create",component:Q,data:{breadcrumb:{label:"Create Prepaid Ticket"}}},{path:"overview",component:G,data:{breadcrumb:{label:"Prepaid Ticket Application"}}},{path:"vehicle-list",component:z,data:{breadcrumb:{label:"Ticket Detail"}}},{path:"edit/:id",component:R,data:{breadcrumb:{label:"Register Vehicle Details"}}}]},{component:v.O,path:"vehicle-details",children:[{path:"add/:applicationId",component:R,data:{breadcrumb:{label:"Add Vehicle Details"}}}]}]}];let Nt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[q.k,O.e,f.Y,Z.n,x.x,g.f,b.I],imports:[h.ez,p.u5,r.Bz.forChild(qt),d.x,T.D,_.mr,k.kn,u.A0,ft,y.aw.forChild({loader:{provide:y.Zw,useFactory:W,deps:[C.eN]}}),Ut.k,r.Bz]}),i})()},94327:function(D,U){var p;void 0!==(p=function(){"use strict";function k(g,f,T){var d=new XMLHttpRequest;d.open("GET",g),d.responseType="blob",d.onload=function(){O(d.response,f,T)},d.onerror=function(){console.error("could not download file")},d.send()}function Z(g){var f=new XMLHttpRequest;f.open("HEAD",g,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function x(g){try{g.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),g.dispatchEvent(f)}}var b="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,q=b.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),O=b.saveAs||("object"!=typeof window||window!==b?function(){}:"download"in HTMLAnchorElement.prototype&&!q?function(g,f,T){var d=b.URL||b.webkitURL,v=document.createElement("a");v.download=f=f||g.name||"download",v.rel="noopener","string"==typeof g?(v.href=g,v.origin===location.origin?x(v):Z(v.href)?k(g,f,T):x(v,v.target="_blank")):(v.href=d.createObjectURL(g),setTimeout(function(){d.revokeObjectURL(v.href)},4e4),setTimeout(function(){x(v)},0))}:"msSaveOrOpenBlob"in navigator?function(g,f,T){if(f=f||g.name||"download","string"!=typeof g)navigator.msSaveOrOpenBlob(function r(g,f){return typeof f>"u"?f={autoBom:!1}:"object"!=typeof f&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(g.type)?new Blob(["\ufeff",g],{type:g.type}):g}(g,T),f);else if(Z(g))k(g,f,T);else{var d=document.createElement("a");d.href=g,d.target="_blank",setTimeout(function(){x(d)})}}:function(g,f,T,d){if((d=d||open("","_blank"))&&(d.document.title=d.document.body.innerText="downloading..."),"string"==typeof g)return k(g,f,T);var v="application/octet-stream"===g.type,s=/constructor/i.test(b.HTMLElement)||b.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||v&&s||q)&&typeof FileReader<"u"){var _=new FileReader;_.onloadend=function(){var w=_.result;w=u?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=w:location=w,d=null},_.readAsDataURL(g)}else{var C=b.URL||b.webkitURL,y=C.createObjectURL(g);d?d.location=y:location.href=y,d=null,setTimeout(function(){C.revokeObjectURL(y)},4e4)}});b.saveAs=O.saveAs=O,D.exports=O}.apply(U,[]))&&(D.exports=p)}}]);