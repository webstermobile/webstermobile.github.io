"use strict";(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[6569],{96599:(P,M,i)=>{i.d(M,{K:()=>r});var t=i(94650),_=i(38014),d=i(21837),e=i(89383),g=i(36895),h=i(43056),b=i(71198),f=i(87501),v=i(69484),D=i(84790);function C(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"li",8)(1,"a",9),t.NdJ("click",function(){const m=t.CHM(n).$implicit,k=t.oxw(2);return t.KtG(k.selectTab(m.value))}),t._uU(2),t.qZA()()}if(2&o){const n=c.$implicit,l=t.oxw(2);t.xp6(1),t.Q6J("ngClass",l.activeClass(n.value)),t.xp6(1),t.hij(" ",n.name," ")}}function u(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"div")(1,"input",10),t.NdJ("bsValueChange",function(p){t.CHM(n);const m=t.oxw(2);return t.KtG(m.changeDateRange(p))}),t.qZA()()}if(2&o){const n=t.oxw(2);t.xp6(1),t.Q6J("bsConfig",n.bsConfig)("isOpen",n.isOpen)("bsValue",n._data)}}function T(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"div")(1,"app-monthpicker-body",11),t.NdJ("select",function(p){t.CHM(n);const m=t.oxw(2);return t.MAs(2).hide(),t.KtG(m.selectDate(p))}),t.qZA()()}if(2&o){const n=t.oxw(2);t.xp6(1),t.Q6J("scopeMonth",n.isScopeMonth)("expireMonth",n.expireDate)("pickerName",n.pickerName)("data",n._data[0])}}function a(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"div")(1,"app-yearpicker-body",12),t.NdJ("select",function(p){t.CHM(n);const m=t.oxw(2);return t.MAs(2).hide(),t.KtG(m.selectDate(p))}),t.qZA()()}if(2&o){const n=t.oxw(2);t.xp6(1),t.Q6J("data",n._data[0])}}function s(o,c){if(1&o&&(t.TgZ(0,"ul",5),t.YNc(1,C,3,2,"li",6),t.qZA(),t.YNc(2,u,2,3,"div",7),t.YNc(3,T,2,4,"div",7),t.YNc(4,a,2,1,"div",7)),2&o){const n=t.oxw();t.Q6J("ngStyle",n.setHeaderStyles()),t.xp6(1),t.Q6J("ngForOf",n.tabs),t.xp6(1),t.Q6J("ngIf","day"===n.currentTab),t.xp6(1),t.Q6J("ngIf","month"===n.currentTab),t.xp6(1),t.Q6J("ngIf","year"===n.currentTab)}}let r=(()=>{class o{constructor(n){this.translate=n,this.currentTab=_.Nxg.Day,this._data=[new Date,new Date],this.headerDatePicker=!0,this.isScopeMonth=!1,this.select=new t.vpe,this.isOpen=!0,this.tabs=[{name:"Week",value:_.Nxg.Day},{name:"Month",value:_.Nxg.Month},{name:"Year",value:_.Nxg.Year}],this.bsConfig={containerClass:"theme-light",showWeekNumbers:!1}}get data(){return{value:this._data,type:this.currentTab}}set data(n){!n||(this._data=n.value,this.currentTab=n.type)}get displayText(){switch(this.currentTab){case _.Nxg.Day:return this._data.map(n=>d.ou.fromJSDate(n).toLocaleString(d.ou.DATE_MED)).join(" - ");case _.Nxg.Month:return d.ou.fromJSDate(this._data[0]).toLocaleString({month:"short",year:"numeric"});case _.Nxg.Year:return this._data[0].getFullYear()}}activeClass(n){return this.currentTab===n?"active":""}ngOnInit(){const n=this.tabs.map(l=>l.name);this.translate.get(n).subscribe(l=>{this.tabs.forEach(p=>{for(let m in l)l.hasOwnProperty(m)&&p.name===m&&(p.name=l[m])})})}setHeaderStyles(){return{display:this.headerDatePicker?"":"none"}}selectTab(n){this.currentTab=n,this.currentTab===_.Nxg.Day&&(this.isOpen=!0)}selectDate(n){let l=[];switch(this.currentTab){case _.Nxg.Month:l=[d.ou.fromJSDate(n).startOf("month").toJSDate(),d.ou.fromJSDate(n).endOf("month").toJSDate()];break;case _.Nxg.Year:l=[d.ou.fromJSDate(n).startOf("year").toJSDate(),d.ou.fromJSDate(n).endOf("year").toJSDate()]}this._data[0]=n,this.select.emit({type:this.currentTab,value:l})}changeDateRange(n){this._data=n,this.select.emit({type:this.currentTab,value:this._data})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(e.sK))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-datepicker-tab"]],inputs:{containerClass:"containerClass",headerDatePicker:"headerDatePicker",isScopeMonth:"isScopeMonth",expireDate:"expireDate",pickerName:"pickerName",data:"data"},outputs:{select:"select"},decls:9,vars:4,consts:[[1,"app-datepicker",3,"ngClass"],["type","button","placement","bottom",1,"btn","btn-secondary","m-btn","m-btn--icon","dropdown-toggle",3,"popover","outsideClick"],["pop","bs-popover"],[1,"la","la-calendar"],["dpTemplate",""],[1,"nav","nav-tabs","m-tabs-line","m-tabs-line--danger","small",3,"ngStyle"],["class","nav-item m-tabs__item",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"nav-item","m-tabs__item"],[1,"nav-link","m-tabs__link",3,"ngClass","click"],["type","text","bsDaterangepicker","",1,"form-control",3,"bsConfig","isOpen","bsValue","bsValueChange"],[3,"scopeMonth","expireMonth","pickerName","data","select"],[3,"data","select"]],template:function(n,l){if(1&n&&(t.TgZ(0,"div",0)(1,"button",1,2)(3,"span"),t._UZ(4,"i",3),t.TgZ(5,"span"),t._uU(6),t.qZA()()()(),t.YNc(7,s,5,5,"ng-template",null,4,t.W1O)),2&n){const p=t.MAs(8);t.Q6J("ngClass",l.containerClass),t.xp6(1),t.Q6J("popover",p)("outsideClick",!0),t.xp6(5),t.hij(" ",l.displayText," ")}},dependencies:[g.mk,g.sg,g.O5,g.PC,h.k5,b.T,f.F,v.S,D.M],encapsulation:2}),o})()},69484:(P,M,i)=>{i.d(M,{S:()=>C});var t=i(94650),_=i(86181),d=i(21837),e=i(38014),g=i(36895),h=i(66616),b=i(47044),f=i(21811);function v(u,T){if(1&u){const a=t.EpF();t.TgZ(0,"div",10),t.NdJ("click",function(){const o=t.CHM(a).$implicit,c=t.oxw(2);return t.KtG("un-selectable"!==o.available&&c.selectMonth(o.value))}),t._uU(1),t.qZA()}if(2&u){const a=T.$implicit,s=t.oxw(2);t.Q6J("ngClass",s.selectedClass(a.value,a.available)),t.xp6(1),t.hij(" ",a.name," ")}}function D(u,T){if(1&u&&(t.TgZ(0,"div",8),t.YNc(1,v,2,2,"div",9),t.qZA()),2&u){const a=T.$implicit;t.xp6(1),t.Q6J("ngForOf",a)}}let C=(()=>{class u{constructor(){this._data=new Date,this.scopeMonth=!1,this.select=new t.vpe,this.monthTable=[],this.currentYear=(new Date).getFullYear(),this.currentDay=(new Date).getDate(),this.currentMonth=(new Date).getMonth()}get data(){return this._data}set data(a){this._data=a,this.currentYear=a.getFullYear()}selectMonth(a){if(this.data.getMonth()===a-1&&this.currentYear===this.data.getFullYear())return;const s=d.ou.fromJSDate(this.data).set({month:a,year:this.currentYear}).toJSDate();this._data=s}submit(){this.select.emit(this._data)}selectedClass(a,s){let r="";return r=a===this.data.getMonth()+1&&this._data.getFullYear()===this.currentYear?"selected":"","un-selectable"===s&&(r+=" un-selectable"),r}nextYear(){this.currentYear+=1,this.onResetMonthTable()}prevYear(){this.currentYear=this.currentYear-1,this.onResetMonthTable()}onResetMonthTable(){this.currentYear===(new Date).getFullYear()&&this.onTransformMonthTable(e.PhH.CurrentYear),this.currentYear<(new Date).getFullYear()&&this.onTransformMonthTable(e.PhH.PrevYear),this.currentYear>(new Date).getFullYear()&&this.onTransformMonthTable(e.PhH.NextYear)}ngOnInit(){this.monthTable=(0,_.DL)().reduce((a,s,r)=>{const o=Math.floor(r/4);return[...a.slice(0,o),[...a[o]||[],{value:r+1,name:s}],...a.slice(o+1)]},[]),this.onTransformMonthTable(e.PhH.CurrentYear)}onTransformMonthTable(a){if(this.scopeMonth)switch(a){case e.PhH.NextYear:this.monthTable=this.monthTable.reduce((s,r)=>[...s,r.map(o=>({...o,available:this.checkAvailableMonth(o.value)}))],[]);break;case e.PhH.PrevYear:this.monthTable=this.monthTable.reduce((s,r)=>[...s,r.map(o=>({...o,available:this.checkAvailableMonth(-1)}))],[]);break;default:this.monthTable=this.monthTable.reduce((s,r)=>[...s,r.map(o=>({...o,available:this.checkAvailableMonth(o.value)}))],[])}}checkAvailableMonth(a){if((new Date).getDate()>e.PhH.DatePoint){if(a<(new Date).getMonth()+1&&this.currentYear===(new Date).getFullYear())return"un-selectable";if(this.expireMonth&&a>(new Date).getMonth()+1+3)return"un-selectable";if(this.expireMonth&&8==a&&2020==(new Date).getFullYear()||this.expireMonth&&a>4-(12-(new Date).getMonth())&&this.currentYear>(new Date).getFullYear())return"un-selectable"}else{if(a<(new Date).getMonth()+1&&this.currentYear===(new Date).getFullYear())return"un-selectable";if(this.expireMonth&&a>(new Date).getMonth()+1+3)return"un-selectable";if(this.expireMonth&&8==a&&2020==(new Date).getFullYear()||this.expireMonth&&a>4-(12-(new Date).getMonth())&&this.currentYear>(new Date).getFullYear())return"un-selectable";if("season"===this.pickerName&&this.currentYear-(new Date).getFullYear()>1)return"un-selectable"}if(-1===a)return"un-selectable"}}return u.\u0275fac=function(a){return new(a||u)},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-monthpicker-body"]],inputs:{data:"data",scopeMonth:"scopeMonth",expireMonth:"expireMonth",pickerName:"pickerName"},outputs:{select:"select"},decls:15,vars:2,consts:[[1,"bs-datepicker","theme-light","month-picker",2,"display","block"],[1,"bs-datepicker-head"],[1,"previous",3,"click"],[1,"current"],[1,"next",3,"click"],[1,"bs-datepicker-body"],["class","month-wrap",4,"ngFor","ngForOf"],["type","button","nz-button","","nzType","primary","nzBlock","",3,"click"],[1,"month-wrap"],["class","month-item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"month-item",3,"ngClass","click"]],template:function(a,s){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(o){return o.preventDefault(),s.prevYear()}),t.TgZ(3,"span"),t._uU(4,"\u2039"),t.qZA()(),t.TgZ(5,"button",3)(6,"span"),t._uU(7),t.qZA()(),t.TgZ(8,"button",4),t.NdJ("click",function(o){return o.preventDefault(),s.nextYear()}),t.TgZ(9,"span"),t._uU(10,"\u203a"),t.qZA()()(),t.TgZ(11,"div",5),t.YNc(12,D,2,1,"div",6),t.TgZ(13,"button",7),t.NdJ("click",function(){return s.submit()}),t._uU(14," Apply "),t.qZA()()()),2&a&&(t.xp6(7),t.Oqu(s.currentYear),t.xp6(5),t.Q6J("ngForOf",s.monthTable))},dependencies:[g.mk,g.sg,h.ix,b.w,f.dQ],styles:[".un-selectable[_ngcontent-%COMP%]{background-color:#e4e4e4;color:#b4adad;cursor:not-allowed!important}.month-wrap[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.month-wrap[_ngcontent-%COMP%]   .month-item[_ngcontent-%COMP%]{padding:4px;width:40px;height:40px;margin-bottom:8px;text-align:center;line-height:32px;cursor:pointer;color:#54708b;border-radius:2px;transition:all .3s}.month-wrap[_ngcontent-%COMP%]   .month-item[_ngcontent-%COMP%]:hover{background:#f4f5f8}.month-wrap[_ngcontent-%COMP%]   .month-item.selected[_ngcontent-%COMP%]{background-color:#00bdb5;color:#fff}.month-wrap[_ngcontent-%COMP%]   .month-item.un-selectable[_ngcontent-%COMP%]{cursor:not-allowed;color:#b4adad;background-color:#e4e4e4!important}"]}),u})()},84790:(P,M,i)=>{i.d(M,{M:()=>d});var t=i(94650),_=i(21837);let d=(()=>{class e{constructor(){this._data=new Date,this.select=new t.vpe}get data(){return this._data}set data(h){this._data=h}selectedClass(h){return this._data.getFullYear()===h?"selected":""}nextYear(){this._data=_.ou.fromJSDate(this._data).plus({years:1}).toJSDate()}prevYear(){this._data=_.ou.fromJSDate(this._data).minus({years:1}).toJSDate()}submit(){this.select.emit(this._data)}ngOnInit(){}}return e.\u0275fac=function(h){return new(h||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-yearpicker-body"]],inputs:{data:"data"},outputs:{select:"select"},decls:14,vars:1,consts:[[1,"bs-datepicker","theme-light","year-picker"],[1,"bs-datepicker-head"],[1,"previous",3,"click"],[1,"current"],[1,"next",3,"click"],[1,"bs-datepicker-body"],["type","button",1,"btn","btn-main","btn-block",3,"click"]],template:function(h,b){1&h&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return b.prevYear()}),t.TgZ(3,"span"),t._uU(4,"\u2039"),t.qZA()(),t.TgZ(5,"button",3)(6,"span"),t._uU(7),t.qZA()(),t.TgZ(8,"button",4),t.NdJ("click",function(){return b.nextYear()}),t.TgZ(9,"span"),t._uU(10,"\u203a"),t.qZA()()(),t.TgZ(11,"div",5)(12,"button",6),t.NdJ("click",function(){return b.submit()}),t._uU(13," Apply "),t.qZA()()()),2&h&&(t.xp6(7),t.Oqu(b.data.getFullYear()))},encapsulation:2}),e})()},76916:(P,M,i)=>{i.d(M,{G:()=>T});var t=i(34793),_=i(92198),d=i(38014),e=i(94650),g=i(89383),h=i(60097),b=i(36895);function f(a,s){if(1&a&&(e.TgZ(0,"a",14)(1,"span",15),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&a){const r=e.oxw().$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,1,r.label)," ")}}function v(a,s){if(1&a&&(e.TgZ(0,"a",16)(1,"span",15),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&a){const r=e.oxw(),o=r.$implicit,c=r.last,n=e.oxw(2);e.Q6J("routerLink",o.url)("queryParams",c&&n.route.snapshot.queryParams),e.xp6(2),e.hij(" ",e.lcZ(3,3,o.label)," ")}}function D(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"li",10)(2,"span"),e._uU(3," > "),e.qZA()(),e.TgZ(4,"li",11),e.YNc(5,f,4,3,"a",12),e.YNc(6,v,4,5,"a",13),e.qZA(),e.BQk()),2&a){const r=s.first;e.xp6(5),e.Q6J("ngIf",r),e.xp6(1),e.Q6J("ngIf",!r)}}function C(a,s){if(1&a){const r=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3),e._UZ(3,"h3",4),e.TgZ(4,"ul",5)(5,"li",6)(6,"a",7),e.NdJ("click",function(){e.CHM(r);const c=e.oxw();return e.KtG(c.jumpHome())}),e._UZ(7,"i",8),e.qZA()(),e.YNc(8,D,7,2,"ng-container",9),e.qZA()(),e.TgZ(9,"div"),e.Hsn(10),e.qZA()()()}if(2&a){const r=e.oxw();e.xp6(3),e.Q6J("innerHTML",r.title,e.oJD),e.xp6(5),e.Q6J("ngForOf",r.breads)}}const u=["*"];let T=(()=>{class a{constructor(r,o,c,n){this.router=r,this.route=o,this.translate=c,this._carparkService=n,this.breads=[],this.loginUser=""}ngOnInit(){let r=JSON.parse(localStorage.getItem("user-roles"))[0];this.loginUser=r,console.log(this.loginUser,"\u4fe1\u606f"),this.breads=this.buildBreadCrumb(this.route.root),this.translate.get(this.breads[0].label).subscribe(c=>{this.label=c}),this.router.events.pipe((0,_.h)(c=>c instanceof t.m2)).subscribe(()=>{this.breads=this.buildBreadCrumb(this.route.root)})}buildBreadCrumb(r,o=[""],c=[]){const n=r.snapshot.url[0]&&r.snapshot.url[0].path,l=[...o,n],p={...this.extractBreadcrumb(r),url:l},m=n&&p.label?[...c,p]:c;return this.title=p.title||this.title||"",this.isMotorist&&"My Vehicle(s)"===p.label&&(this.title="My Vehicle(s)"),r.firstChild?n?this.buildBreadCrumb(r.firstChild,l,m):this.buildBreadCrumb(r.firstChild,o,c):(this.translate.get(this.title).subscribe(k=>{this.title=k}),m)}get isMotorist(){return this._carparkService.isMotorist()}extractBreadcrumb(r){return r.snapshot.data.breadcrumb instanceof Function?r.snapshot.data.breadcrumb(r):r.snapshot.data.breadcrumb}jumpHome(){let r=JSON.parse(localStorage.getItem("user-roles"))[0]??"";this.router.navigate(r.length?[d.gpL[r]]:["/"])}}return a.\u0275fac=function(r){return new(r||a)(e.Y36(t.F0),e.Y36(t.gz),e.Y36(g.sK),e.Y36(h.x))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-title-bar"]],ngContentSelectors:u,decls:1,vars:1,consts:[["class","m-subheader",4,"ngIf"],[1,"m-subheader"],[1,"d-flex","align-items-center"],[1,"mr-auto"],[1,"m-subheader__title","m-subheader__title--separator","text-main",3,"innerHTML"],[1,"m-subheader__breadcrumbs","m-nav","m-nav--inline"],[1,"m-nav__item","m-nav__item--home"],[1,"m-nav__link","m-nav__link--icon",3,"click"],[1,"m-nav__link-icon","la","la-home"],[4,"ngFor","ngForOf"],[1,"m-nav__separator"],[1,"m-nav__item"],["class","m-nav__link",4,"ngIf"],["class","m-nav__link",3,"routerLink","queryParams",4,"ngIf"],[1,"m-nav__link"],[1,"m-nav__link-text"],[1,"m-nav__link",3,"routerLink","queryParams"]],template:function(r,o){1&r&&(e.F$t(),e.YNc(0,C,11,2,"div",0)),2&r&&e.Q6J("ngIf","ROLE_TPO_PARTNER"!==o.loginUser)},dependencies:[b.sg,b.O5,t.yS,g.X$],encapsulation:2}),a})()}}]);