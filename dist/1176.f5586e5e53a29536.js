"use strict";(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[1176,2946],{77407:(G,Q,d)=>{d.d(Q,{B:()=>P});var r=d(65136),h=d(92340),F=d(94650),H=d(80529),L=d(28555),e=d(91599);let P=(()=>{class M extends r.b{constructor(f,k,Z){super(f,k),this.http=f,this.store=k,this.baseUrl="carpark/api/dashboard-statistics",this.baseUrl02="batchservice/api/dashboard-statistics",this.baseUr3="carpark/api/evDashboard",this.handleError=Z.createHandleError("StatisticService")}getOverallStatistics(f){const k=this.getUrl(`${this.baseUrl02}/overall-statistics`);return this.post(k,f)}getDurationStatistics(f){const k=this.getUrl(`${this.baseUrl02}/overall-statistics`);return this.post(k,f)}getFaultStatistics(f){const k=this.getUrl(`${this.baseUrl}/fault`);return this.post(k,f)}getOccupancyStatistics(f){const k=this.getUrl(`${this.baseUrl02}/occupancy`);return this.post(k,f)}getOccupancyPrediction(f){const k=this.getUrl(`${this.baseUrl}/occupancy-prediction`);return this.post(k,f)}getDailyOccupancyStatistics(f){const k=this.getUrl(`${this.baseUrl02}/occupancy-per-day`);return this.post(k,f)}getMaxNormalSeasonalLotsStatistics(f){const k=this.getUrl(`${this.baseUrl02}/max-normal-seasonal-slots`);return this.post(k,f)}getRevenueStatistics(f){const k=this.getUrl(`${this.baseUrl02}/revenue`);return this.post(k,f).map(Z=>({carParkId:Z.carParkId,carParkCode:Z.carParkCode,carParkRevenue:Z.carParkRevenue}))}getTransactionStatistics(f){const k=this.getUrl(`${this.baseUrl02}/transaction`);return this.post(k,f)}getVehicleTypeStatistics(f){const k=this.getUrl(`${this.baseUrl02}/overall-statistics`);return this.post(k,f)}dashboardGetData(){return this.get(`${h.N.apiHost}/scp-mg-report/report/report/getHomePageReport`)}getDashboardFlag(){return this.get(`${h.N.apiHost}/carpark/api/userDashboardConfig`)}putDashboardFlag(f){return this.put(`${h.N.apiHost}/carpark/api/userDashboardConfig`,f)}getTransactionsEnergyRevenue(f,k){const Z=this.getUrl(`carpark/api/evDashboard/totalAnalysisTransactionsEnergyRevenue?endDate=${k}&startDate=${f}`);return this.get(Z)}getChargersUpDown(f,k){const Z=this.getUrl(`carpark/api/evDashboard/totalAnalysisChargersUpDown?endDate=${k}&startDate=${f}`);return this.get(Z)}getConnectorsTotalAvailableInuseDown(f,k){const Z=this.getUrl(`carpark/api/evDashboard/totalAnalysisConnectorsTotalAvailableInuseDown?endDate=${k}&startDate=${f}`);return this.get(Z)}getgetAverageFirst(f,k){const Z=this.getUrl(`carpark/api/evDashboard/averageAnalysisEnergyRevenueOfSession?endDate=${k}&startDate=${f}`);return this.get(Z)}getevRevenueAnalysis(f,k){const Z=this.getUrl(`carpark/api/evDashboard/evRevenueAnalysis?endDate=${k}&startDate=${f}`);return this.get(Z)}top10CarparwithHighest(f,k){const Z=this.getUrl(`carpark/api/evDashboard/top10CarParkWithHighestRevenue?endDate=${k}&startDate=${f}`);return this.get(Z)}}return M.\u0275fac=function(f){return new(f||M)(F.LFG(H.eN),F.LFG(L.yh),F.LFG(e.k))},M.\u0275prov=F.Yz7({token:M,factory:M.\u0275fac}),M})()},52746:(G,Q,d)=>{d.d(Q,{t:()=>H});var r=d(72986),h=d(591),F=d(94650);let H=(()=>{class L{constructor(){this.loading=!1,this.pagination={totalCount:0,rowsPerPage:20,page:1,sortBy:null,descending:!0,totalPages:1},this.listData=[],this.hadGetData$=new h.X(!1)}get hadGetData(){return this.hadGetData$.getValue()}get filterParams(){return this._filterParams}set filterParams(P){this._filterParams=P}reloadDataService(P,M="filterModel"){this.loading=!0,this.hadGetData$.next(!1),P[M](this.filterParams,this.pagination).pipe((0,r.q)(1)).subscribe(E=>{if(E.pagination.page>E.pagination.totalPages)return this.pagination={...this.pagination,page:E.pagination.totalPages},this.reloadDataService(P);this.loading=!1,this.pagination={...this.pagination,totalCount:E.pagination.totalCount||E.pagination.totalElements},this.listData=E.data,this.hadGetData$.next(!0)},()=>{this.loading=!1,this.listData=[],this.pagination={...this.pagination,totalCount:0}})}onQueryParamsChange(P){const{pageSize:M,pageIndex:E}=P;this.pagination={...this.pagination,rowsPerPage:M,page:E},this.reloadData()}reloadData(){}ngOnInit(){}}return L.\u0275fac=function(P){return new(P||L)},L.\u0275cmp=F.Xpm({type:L,selectors:[["ng-component"]],decls:0,vars:0,template:function(P,M){},encapsulation:2}),L})()},28100:(G,Q,d)=>{d.d(Q,{b:()=>t});var r=d(37340),h=d(94650),F=d(58663),H=d(10100),L=d(97640),e=d(36895),P=d(25141),M=d(53525),E=d(24657),f=d(52178),k=d(44147);const Z=["tooltipTemplate"];function O(x,U){if(1&x){const p=h.EpF();h.O4$(),h.TgZ(0,"g",6),h.NdJ("dimensionsChanged",function(D){h.CHM(p);const N=h.oxw();return h.KtG(N.updateXAxisHeight(D))}),h.qZA()}if(2&x){const p=h.oxw();h.Q6J("xScale",p.groupScale)("dims",p.dims)("showLabel",p.showXAxisLabel)("labelText",p.xAxisLabel)("tickFormatting",p.xAxisTickFormatting)("ticks",p.xAxisTicks)("xAxisOffset",p.dataLabelMaxHeight.negative)}}function b(x,U){if(1&x){const p=h.EpF();h.O4$(),h.TgZ(0,"g",7),h.NdJ("dimensionsChanged",function(D){h.CHM(p);const N=h.oxw();return h.KtG(N.updateYAxisWidth(D))}),h.qZA()}if(2&x){const p=h.oxw();h.Q6J("yScale",p.valueScale)("dims",p.dims)("showGridLines",p.showGridLines)("showLabel",p.showYAxisLabel)("labelText",p.yAxisLabel)("tickFormatting",p.yAxisTickFormatting)("ticks",p.yAxisTicks)("referenceLines",p.referenceLines)("showRefLines",p.showRefLines)("showRefLabels",p.showRefLabels)}}function w(x,U){if(1&x){const p=h.EpF();h.O4$(),h.TgZ(0,"g",8),h.NdJ("select",function(D){const Y=h.CHM(p).$implicit,$=h.oxw();return h.KtG($.onClick(D,Y))})("activate",function(D){const Y=h.CHM(p).$implicit,$=h.oxw();return h.KtG($.onActivate(D,Y))})("deactivate",function(D){const Y=h.CHM(p).$implicit,$=h.oxw();return h.KtG($.onDeactivate(D,Y))})("dataLabelHeightChanged",function(D){const Y=h.CHM(p).index,$=h.oxw();return h.KtG($.onDataLabelMaxHeightChanged(D,Y))}),h.qZA()}if(2&x){const p=U.$implicit,g=h.oxw();h.Q6J("@animationState","active")("activeEntries",g.activeEntries)("xScale",g.innerScale)("yScale",g.valueScale)("colors",g.colors)("series",p.series)("dims",g.dims)("gradient",g.gradient)("tooltipDisabled",g.tooltipDisabled)("tooltipTemplate",g.tooltipTemplate)("showDataLabel",g.showDataLabel)("dataLabelFormatting",g.dataLabelFormatting)("seriesName",p.name)("roundEdges",g.roundEdges)("animations",g.animations),h.uIk("transform",g.groupTransform(p))}}const y=function(x,U){return[x,U]};let t=(()=>{class x extends L.ep{constructor(){super(...arguments),this.legend=!1,this.legendTitle="Legend",this.tooltipDisabled=!1,this.scaleType="ordinal",this.showGridLines=!0,this.activeEntries=[],this.groupPadding=16,this.barPadding=8,this.roundDomains=!1,this.roundEdges=!0,this.showDataLabel=!1,this.showRefLines=!1,this.showRefLabels=!0,this.activate=new h.vpe,this.deactivate=new h.vpe,this.margin=[10,20,10,20],this.xAxisHeight=0,this.yAxisWidth=0,this.dataLabelMaxHeight={negative:0,positive:0}}update(){super.update(),this.showDataLabel||(this.dataLabelMaxHeight={negative:0,positive:0}),this.margin=[10+this.dataLabelMaxHeight.positive,20,10+this.dataLabelMaxHeight.negative,20],this.dims=(0,L.iG)({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.schemeType}),this.showDataLabel&&(this.dims.height-=this.dataLabelMaxHeight.negative),this.formatDates(),this.groupDomain=this.getGroupDomain(),this.innerDomain=this.getInnerDomain(),this.valuesDomain=this.getValueDomain(),this.groupScale=this.getGroupScale(),this.innerScale=this.getInnerScale(),this.valueScale=this.getValueScale(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.transform=`translate(${this.dims.xOffset} , ${this.margin[0]+this.dataLabelMaxHeight.negative})`}onDataLabelMaxHeightChanged(p,g){p.size.negative?this.dataLabelMaxHeight.negative=Math.max(this.dataLabelMaxHeight.negative,p.size.height):this.dataLabelMaxHeight.positive=Math.max(this.dataLabelMaxHeight.positive,p.size.height),g===this.results.length-1&&setTimeout(()=>this.update())}getGroupScale(){const p=this.groupDomain.length/(this.dims.height/this.groupPadding+1);return(0,F.Z)().rangeRound([0,this.dims.width]).paddingInner(p).paddingOuter(p/2).domain(this.groupDomain)}getInnerScale(){const p=this.groupScale.bandwidth(),g=this.innerDomain.length/(p/this.barPadding+1);return(0,F.Z)().rangeRound([0,p]).paddingInner(g).domain(this.innerDomain)}getValueScale(){const p=(0,H.Z)().range([this.dims.height,0]).domain(this.valuesDomain);return this.roundDomains?p.nice():p}getGroupDomain(){const p=[];for(const g of this.results)p.includes(g.name)||p.push(g.name);return p}getInnerDomain(){const p=[];for(const g of this.results)for(const D of g.series)p.includes(D.name)||p.push(D.name);return p}getValueDomain(){const p=[];for(const N of this.results)for(const Y of N.series)p.includes(Y.value)||p.push(Y.value);return[Math.min(0,...p),this.yScaleMax?Math.max(this.yScaleMax,...p):Math.max(...p)]}groupTransform(p){return`translate(${this.groupScale(p.name)}, 0)`}onClick(p,g){g&&(p.series=g.name),this.select.emit(p)}trackBy(p,g){return g.name}setColors(){let p;p="ordinal"===this.schemeType?this.innerDomain:this.valuesDomain,this.colors=new L.vH(this.scheme,this.schemeType,p,this.customColors)}getLegendOptions(){const p={scaleType:this.schemeType,colors:void 0,domain:[],title:void 0};return"ordinal"===p.scaleType?(p.domain=this.innerDomain,p.colors=this.colors,p.title=this.legendTitle):(p.domain=this.valuesDomain,p.colors=this.colors.scale),p}updateYAxisWidth({width:p}){this.yAxisWidth=p,this.update()}updateXAxisHeight({height:p}){this.xAxisHeight=p,this.update()}onActivate(p,g){const D={...p};g&&(D.series=g.name),!(this.activeEntries.findIndex(Y=>Y.name===D.name&&Y.value===D.value&&Y.series===D.series)>-1)&&(this.activeEntries=[D,...this.activeEntries],this.activate.emit({value:D,entries:this.activeEntries}))}onDeactivate(p,g){const D={...p};g&&(D.series=g.name);const N=this.activeEntries.findIndex(Y=>Y.name===D.name&&Y.value===D.value&&Y.series===D.series);this.activeEntries.splice(N,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:D,entries:this.activeEntries})}}return x.\u0275fac=function(){let U;return function(g){return(U||(U=h.n5z(x)))(g||x)}}(),x.\u0275cmp=h.Xpm({type:x,selectors:[["app-charts-bar-vertical-2d"]],contentQueries:function(p,g,D){if(1&p&&h.Suo(D,Z,5),2&p){let N;h.iGM(N=h.CRH())&&(g.tooltipTemplate=N.first)}},inputs:{legend:"legend",legendTitle:"legendTitle",xAxis:"xAxis",yAxis:"yAxis",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",tooltipDisabled:"tooltipDisabled",scaleType:"scaleType",gradient:"gradient",showGridLines:"showGridLines",activeEntries:"activeEntries",schemeType:"schemeType",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",xAxisTicks:"xAxisTicks",yAxisTicks:"yAxisTicks",groupPadding:"groupPadding",barPadding:"barPadding",roundDomains:"roundDomains",roundEdges:"roundEdges",yScaleMax:"yScaleMax",showDataLabel:"showDataLabel",dataLabelFormatting:"dataLabelFormatting",showRefLines:"showRefLines",referenceLines:"referenceLines",showRefLabels:"showRefLabels"},outputs:{activate:"activate",deactivate:"deactivate"},features:[h.qOj],decls:6,vars:17,consts:[[3,"view","showLegend","legendOptions","activeEntries","animations","legendLabelActivate","legendLabelDeactivate","legendLabelClick"],[1,"bar-chart","chart"],["ngx-charts-grid-panel-series","","orient","vertical",3,"xScale","yScale","data","dims"],["ngx-charts-x-axis","",3,"xScale","dims","showLabel","labelText","tickFormatting","ticks","xAxisOffset","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","tickFormatting","ticks","referenceLines","showRefLines","showRefLabels","dimensionsChanged",4,"ngIf"],["ngx-charts-series-vertical","",3,"activeEntries","xScale","yScale","colors","series","dims","gradient","tooltipDisabled","tooltipTemplate","showDataLabel","dataLabelFormatting","seriesName","roundEdges","animations","select","activate","deactivate","dataLabelHeightChanged",4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-x-axis","",3,"xScale","dims","showLabel","labelText","tickFormatting","ticks","xAxisOffset","dimensionsChanged"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","tickFormatting","ticks","referenceLines","showRefLines","showRefLabels","dimensionsChanged"],["ngx-charts-series-vertical","",3,"activeEntries","xScale","yScale","colors","series","dims","gradient","tooltipDisabled","tooltipTemplate","showDataLabel","dataLabelFormatting","seriesName","roundEdges","animations","select","activate","deactivate","dataLabelHeightChanged"]],template:function(p,g){1&p&&(h.TgZ(0,"ngx-charts-chart",0),h.NdJ("legendLabelActivate",function(N){return g.onActivate(N)})("legendLabelDeactivate",function(N){return g.onDeactivate(N)})("legendLabelClick",function(N){return g.onClick(N)}),h.O4$(),h.TgZ(1,"g",1),h._UZ(2,"g",2),h.YNc(3,O,1,7,"g",3),h.YNc(4,b,1,10,"g",4),h.YNc(5,w,1,16,"g",5),h.qZA()()),2&p&&(h.Q6J("view",h.WLB(14,y,g.width,g.height))("showLegend",g.legend)("legendOptions",g.legendOptions)("activeEntries",g.activeEntries)("animations",g.animations),h.xp6(1),h.uIk("transform",g.transform),h.xp6(1),h.Q6J("xScale",g.groupScale)("yScale",g.valueScale)("data",g.results)("dims",g.dims),h.xp6(1),h.Q6J("ngIf",g.xAxis),h.xp6(1),h.Q6J("ngIf",g.yAxis),h.xp6(1),h.Q6J("ngForOf",g.results)("ngForTrackBy",g.trackBy))},dependencies:[e.sg,e.O5,P.I,M.M,E.x,f.Y,k.A],styles:[".ngx-charts .refline-path{stroke:#a8b2c7;stroke-width:2}\n"],encapsulation:2,data:{animation:[(0,r.X$)("animationState",[(0,r.eR)(":leave",[(0,r.oB)({opacity:1,transform:"*"}),(0,r.jt)(500,(0,r.oB)({opacity:0,transform:"scale(0)"}))])])]},changeDetection:0}),x})()},34523:(G,Q,d)=>{d.d(Q,{o:()=>e});var r=d(38014),h=d(94650),F=d(36895);function H(P,M){if(1&P&&(h.TgZ(0,"li"),h._UZ(1,"span",2),h.TgZ(2,"span"),h._uU(3),h.qZA()()),2&P){const E=M.$implicit,f=M.index,k=h.oxw();h.xp6(1),h.Udp("background",E.color||k.colors[f]),h.xp6(2),h.Oqu(k.legendDisplay(E))}}function L(P){return`${P.value} ${P.name}`}let e=(()=>{class P{constructor(){this.colors=r.DMY,this.legendDisplay=L}ngOnInit(){!this.display||(this.legendDisplay=this.display)}}return P.\u0275fac=function(E){return new(E||P)},P.\u0275cmp=h.Xpm({type:P,selectors:[["app-chart-legend"]],inputs:{data:"data",colors:"colors",display:"display",horizontal:"horizontal"},decls:3,vars:2,consts:[[1,"st-chart-legend",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"st-chart-badge"]],template:function(E,f){1&E&&(h.TgZ(0,"div",0)(1,"ul"),h.YNc(2,H,4,3,"li",1),h.qZA()()),2&E&&(h.Q6J("ngClass",f.horizontal?"horizontal":""),h.xp6(2),h.Q6J("ngForOf",f.data))},dependencies:[F.mk,F.sg],encapsulation:2}),P})()},9389:(G,Q,d)=>{d.d(Q,{C:()=>t});var r=d(94650),h=d(38014),F=d(21837),H=d(36895),L=d(81558),e=d(8278),P=d(43056),M=d(69484);function E(x,U){if(1&x){const p=r.EpF();r.TgZ(0,"app-monthpicker-body",6),r.NdJ("select",function(D){r.CHM(p);const N=r.oxw();return r.KtG(N.submit(D))}),r.qZA()}if(2&x){const p=r.oxw();r.Q6J("data",p.value)}}let f=(()=>{class x{constructor(){this.select=new r.vpe}submit(p){this.select.emit(p),this.popup.hide()}get displayText(){return F.ou.fromJSDate(this.value).toLocaleString({month:"short",year:"numeric"})}ngOnInit(){}}return x.\u0275fac=function(p){return new(p||x)},x.\u0275cmp=r.Xpm({type:x,selectors:[["app-monthpicker"]],viewQuery:function(p,g){if(1&p&&r.Gf(P.k5,5),2&p){let D;r.iGM(D=r.CRH())&&(g.popup=D.first)}},inputs:{rounded:"rounded",value:"value"},outputs:{select:"select"},decls:8,vars:3,consts:[[1,"m-input-icon","m-input-icon--right","app-monthpicker",3,"ngClass"],["type","text","containerClass","popup-datepicker","placement","bottom","readonly","",1,"form-control","m-input",3,"popover","value"],["popup",""],[1,"m-input-icon__icon","m-input-icon__icon--right"],[1,"la","la-calendar"],["popTemplate",""],[3,"data","select"]],template:function(p,g){if(1&p&&(r.TgZ(0,"div",0),r._UZ(1,"input",1,2),r.TgZ(3,"span",3)(4,"span"),r._UZ(5,"i",4),r.qZA()()(),r.YNc(6,E,1,1,"ng-template",null,5,r.W1O)),2&p){const D=r.MAs(7);r.Q6J("ngClass",g.rounded?"rounded":""),r.xp6(1),r.Q6J("popover",D)("value",g.displayText)}},dependencies:[H.mk,P.k5,M.S],encapsulation:2}),x})();var k=d(84790);function Z(x,U){if(1&x){const p=r.EpF();r.TgZ(0,"app-yearpicker-body",6),r.NdJ("select",function(D){r.CHM(p);const N=r.oxw();return r.KtG(N.submit(D))}),r.qZA()}if(2&x){const p=r.oxw();r.Q6J("data",p.value)}}let O=(()=>{class x{constructor(){this.select=new r.vpe}submit(p){this.select.emit(p),this.popup.hide()}get displayText(){return this.value.getFullYear()}ngOnInit(){}}return x.\u0275fac=function(p){return new(p||x)},x.\u0275cmp=r.Xpm({type:x,selectors:[["app-yearpicker"]],viewQuery:function(p,g){if(1&p&&r.Gf(P.k5,5),2&p){let D;r.iGM(D=r.CRH())&&(g.popup=D.first)}},inputs:{rounded:"rounded",value:"value"},outputs:{select:"select"},decls:8,vars:3,consts:[[1,"m-input-icon","m-input-icon--right","app-yearpicker",3,"ngClass"],["type","text","containerClass","popup-datepicker","placement","bottom","readonly","",1,"form-control","m-input",3,"popover","value"],["popup",""],[1,"m-input-icon__icon","m-input-icon__icon--right"],[1,"la","la-calendar"],["popTemplate",""],[3,"data","select"]],template:function(p,g){if(1&p&&(r.TgZ(0,"div",0),r._UZ(1,"input",1,2),r.TgZ(3,"span",3)(4,"span"),r._UZ(5,"i",4),r.qZA()()(),r.YNc(6,Z,1,1,"ng-template",null,5,r.W1O)),2&p){const D=r.MAs(7);r.Q6J("ngClass",g.rounded?"rounded":""),r.xp6(1),r.Q6J("popover",D)("value",g.displayText)}},dependencies:[H.mk,P.k5,k.M],encapsulation:2}),x})();function b(x,U){if(1&x){const p=r.EpF();r.TgZ(0,"div")(1,"input",1),r.NdJ("bsValueChange",function(D){r.CHM(p);const N=r.oxw();return r.KtG(N.selectDate(D))}),r.qZA()()}if(2&x){const p=r.oxw();r.xp6(1),r.Q6J("bsConfig",p.bsConfig)("bsValue",p.data)}}function w(x,U){if(1&x){const p=r.EpF();r.TgZ(0,"div")(1,"app-monthpicker",2),r.NdJ("select",function(D){r.CHM(p);const N=r.oxw();return r.KtG(N.selectDate(D))}),r.qZA()()}if(2&x){const p=r.oxw();r.xp6(1),r.Q6J("value",p.data)("rounded",p.rounded)}}function y(x,U){if(1&x){const p=r.EpF();r.TgZ(0,"div")(1,"app-yearpicker",2),r.NdJ("select",function(D){r.CHM(p);const N=r.oxw();return r.KtG(N.selectDate(D))}),r.qZA()()}if(2&x){const p=r.oxw();r.xp6(1),r.Q6J("value",p.data)("rounded",p.rounded)}}let t=(()=>{class x{constructor(){this.type=h.Nxg.Day,this.data=new Date,this.select=new r.vpe,this.bsConfig={containerClass:"theme-light",showWeekNumbers:!1}}ngOnInit(){}get displayText(){switch(this.type){case h.Nxg.Month:return F.ou.fromJSDate(this.data).toLocaleString({month:"short",year:"numeric"});case h.Nxg.Year:return this.data.getFullYear()}}selectDate(p){let g;switch(this.type){case h.Nxg.Month:g=F.ou.fromJSDate(p).startOf("month").toJSDate();break;case h.Nxg.Year:g=F.ou.fromJSDate(p).startOf("year").toJSDate();break;default:g=p}this.data=g,this.select.emit(g)}}return x.\u0275fac=function(p){return new(p||x)},x.\u0275cmp=r.Xpm({type:x,selectors:[["app-datepicker"]],inputs:{containerClass:"containerClass",type:"type",data:"data",rounded:"rounded"},outputs:{select:"select"},decls:3,vars:3,consts:[[4,"ngIf"],["type","text","bsDatepicker","",1,"form-control",3,"bsConfig","bsValue","bsValueChange"],[3,"value","rounded","select"]],template:function(p,g){1&p&&(r.YNc(0,b,2,2,"div",0),r.YNc(1,w,2,2,"div",0),r.YNc(2,y,2,2,"div",0)),2&p&&(r.Q6J("ngIf","day"===g.type),r.xp6(1),r.Q6J("ngIf","month"===g.type),r.xp6(1),r.Q6J("ngIf","year"===g.type))},dependencies:[H.O5,L.N,e.Y,f,O],encapsulation:2}),x})()},95369:(G,Q,d)=>{d.d(Q,{J:()=>k});var r=d(94650),h=d(38014),F=d(36895),H=d(46080),L=d(34523);function e(Z,O){if(1&Z&&(r.TgZ(0,"div",9),r._uU(1),r.qZA()),2&Z){const b=r.oxw(2);r.xp6(1),r.hij(" ",b.name," ")}}function P(Z,O){1&Z&&r.GkF(0)}const M=function(Z){return{$implicit:Z}};function E(Z,O){if(1&Z&&(r.TgZ(0,"div",10),r.YNc(1,P,1,0,"ng-container",11),r.qZA()),2&Z){const b=r.oxw(2);r.xp6(1),r.Q6J("ngTemplateOutlet",b.selectedTemplate)("ngTemplateOutletContext",r.VKq(2,M,b.selected))}}function f(Z,O){if(1&Z){const b=r.EpF();r.TgZ(0,"div",1)(1,"div",2),r.YNc(2,e,2,1,"div",3),r.TgZ(3,"div",4)(4,"ngx-charts-pie-chart",5),r.NdJ("select",function(y){r.CHM(b);const t=r.oxw();return r.KtG(t.onSelect(y))}),r.qZA(),r.YNc(5,E,2,4,"div",6),r.qZA()(),r.TgZ(6,"div",7),r._UZ(7,"app-chart-legend",8),r.qZA()()}if(2&Z){const b=r.oxw();r.Q6J("ngClass",b.name?"has-name":""),r.xp6(2),r.Q6J("ngIf",b.name),r.xp6(1),r.Q6J("ngStyle",b.containerStyle),r.xp6(1),r.Q6J("animations",!0)("view",b.view)("scheme",b.scheme)("doughnut",!0)("results",b.results),r.xp6(1),r.Q6J("ngIf",b.selected),r.xp6(2),r.Q6J("display",b.displayLegend)("data",b.results)("colors",b.scheme.domain)}}let k=(()=>{class Z{constructor(){this.scheme={domain:h.DMY},this._view=null,this.containerStyle={}}get results(){return this._results||[]}set results(b){this._results=b,this.selected=b?b[0]:null}get view(){return this._view}set view(b){this._view=b,this.containerStyle={width:`${b[0]}px`,height:`${b[1]}px`,position:"relative"}}ngOnInit(){}onSelect(b){this.selected=b}}return Z.\u0275fac=function(b){return new(b||Z)},Z.\u0275cmp=r.Xpm({type:Z,selectors:[["app-pie-chart"]],contentQueries:function(b,w,y){if(1&b&&r.Suo(y,r.Rgc,5),2&b){let t;r.iGM(t=r.CRH())&&(w.selectedTemplate=t.first)}},inputs:{results:"results",name:"name",displayLegend:"displayLegend",scheme:"scheme",view:"view"},decls:1,vars:1,consts:[["class","row app-pie-chart m--padding-0",3,"ngClass",4,"ngIf"],[1,"row","app-pie-chart","m--padding-0",3,"ngClass"],[1,"col-sm-5","m--padding-left-5","m--padding-right-5"],["class","title text-center",4,"ngIf"],[3,"ngStyle"],[3,"animations","view","scheme","doughnut","results","select"],["class","pie-chart-center-info",4,"ngIf"],[1,"col-sm-7","m--padding-left-10","chart-legend-wrapper"],[3,"display","data","colors"],[1,"title","text-center"],[1,"pie-chart-center-info"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(b,w){1&b&&r.YNc(0,f,8,12,"div",0),2&b&&r.Q6J("ngIf",w.results)},dependencies:[F.mk,F.O5,F.tP,F.PC,H.J,L.o],encapsulation:2}),Z})()},53033:(G,Q,d)=>{d.d(Q,{Z:()=>F,e:()=>H});var r=d(36895),h=d(94650);let F=(()=>{class L extends r.H9{transform(P,M,E,f,k){if(!M)return"";switch(M.toUpperCase()){case"MMK":return`MMK ${P}`;case"SGD":return`$${P}`;default:return super.transform(P,M,E,f,k)}}}return L.\u0275fac=function(){let e;return function(M){return(e||(e=h.n5z(L)))(M||L)}}(),L.\u0275pipe=h.Yjl({name:"excurrency",type:L,pure:!0}),L})(),H=(()=>{class L{transform(P){return P/100}}return L.\u0275fac=function(P){return new(P||L)},L.\u0275pipe=h.Yjl({name:"cent2Dollar",type:L,pure:!0}),L})()},1176:(G,Q,d)=>{d.r(Q),d.d(Q,{DashboardModule:()=>Me,createTranslateLoader:()=>re});var r=d(36895),h=d(24006),F=d(34793),H=d(372),L=d(60097),e=d(77407),P=d(30329),M=d(88796),E=d(97640),f=d(20388),k=d(21532),Z=d(59501),O=d(38014),b=d(17489),w=d(21837),y=d(36053),t=d(94650),x=d(76916),U=d(9389),p=d(89383),g=d(34523),D=d(95369),N=d(28100),Y=d(80646),$=d(88711);function ce(m,A){if(1&m&&(t.TgZ(0,"div",28),t._uU(1),t.qZA()),2&m){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",i.name," ")}}function K(m,A){if(1&m&&(t.TgZ(0,"div",26),t.YNc(1,ce,2,1,"div",27),t.qZA()),2&m){const i=A.$implicit;t.xp6(1),t.Q6J("ngIf",i.name)}}function j(m,A){if(1&m&&(t.TgZ(0,"div",29),t._UZ(1,"app-pie-chart",30),t.qZA()),2&m){const i=A.$implicit,l=t.oxw();t.xp6(1),t.Q6J("view",l.chartView)("results",i.series)("displayLegend",l.displayPercentLegend)}}function le(m,A){if(1&m&&(t.TgZ(0,"div",28),t._uU(1),t.qZA()),2&m){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",i.name," ")}}function ee(m,A){if(1&m&&(t.TgZ(0,"div",26),t.YNc(1,le,2,1,"div",27),t.qZA()),2&m){const i=A.$implicit;t.xp6(1),t.Q6J("ngIf",i.name)}}function ie(m,A){if(1&m&&(t.TgZ(0,"div",31),t._UZ(1,"app-pie-chart",30),t.qZA()),2&m){const i=A.$implicit,l=t.oxw();t.xp6(1),t.Q6J("view",l.chartView)("results",i.series)("displayLegend",l.displayPercentLegend)}}function pe(m,A){if(1&m){const i=t.EpF();t.TgZ(0,"li",32)(1,"a",33),t.NdJ("click",function(){const T=t.CHM(i).$implicit,u=t.oxw();return t.KtG(u.parkingOccupancy.tab=T)}),t._uU(2),t.ALo(3,"titlecase"),t.qZA()()}if(2&m){const i=A.$implicit,l=t.oxw();t.xp6(1),t.Q6J("ngClass",i===l.parkingOccupancy.tab?"active":""),t.xp6(1),t.hij(" ",t.lcZ(3,2,i)," ")}}function de(m,A){if(1&m&&(t.TgZ(0,"div",45)(1,"span"),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&m){const i=A.$implicit,l=A.index,v=t.oxw(3);t.xp6(1),t.Udp("color",v.lineChartColorScheme.domain[l]),t.xp6(1),t.hij(" ",i.name," "),t.xp6(1),t.hij(": ",i.value," ")}}function he(m,A){if(1&m&&(t.TgZ(0,"div",42)(1,"div",43),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,de,4,4,"div",44),t.qZA()),2&m){const i=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,2,"Total Occupancy")," "),t.xp6(2),t.Q6J("ngForOf",i.parkingOccupancy.average[i.parkingOccupancy.tab][0].series)}}const ne=function(){return[]},V=function(m){return[150,m]};function me(m,A){if(1&m&&(t.TgZ(0,"div",34)(1,"div",35),t._UZ(2,"app-chart-legend",36),t.TgZ(3,"div",7)(4,"div",37),t._UZ(5,"ngx-charts-area-chart",38),t.qZA(),t.TgZ(6,"div",39)(7,"ngx-charts-bar-vertical-2d",40),t.YNc(8,he,5,4,"ng-template",null,41,t.W1O),t.qZA()()()()()),2&m){const i=t.oxw();t.xp6(2),t.Q6J("data",t.DdM(21,ne))("display",i.lineLegend)("horizontal",!0)("colors",i.lineChartColorScheme.domain),t.xp6(1),t.Udp("height",i.barChartHeight+"px"),t.xp6(2),t.Q6J("scheme",i.lineChartColorScheme)("results",i.parkingOccupancy.occupancy[i.parkingOccupancy.tab])("xAxis",!0)("yAxis",!0)("gradient",!0)("yScaleMax",i.parkingOccupancy.max[i.parkingOccupancy.tab]),t.xp6(2),t.Q6J("view",t.VKq(22,V,i.barChartHeight))("scheme",i.lineChartColorScheme)("results",i.parkingOccupancy.average[i.parkingOccupancy.tab])("xAxis",!0)("yAxis",!0)("yScaleMax",i.parkingOccupancy.max[i.parkingOccupancy.tab])("showYAxisLabel",!0)("barPadding",20)("groupPadding",30)}}function ge(m,A){if(1&m){const i=t.EpF();t.TgZ(0,"li",32)(1,"a",33),t.NdJ("click",function(){const T=t.CHM(i).$implicit,u=t.oxw();return t.KtG(u.parkingDailyOccupancy.tab=T)}),t._uU(2),t.ALo(3,"titlecase"),t.qZA()()}if(2&m){const i=A.$implicit,l=t.oxw();t.xp6(1),t.Q6J("ngClass",i===l.parkingDailyOccupancy.tab?"active":""),t.xp6(1),t.hij(" ",t.lcZ(3,2,i)," ")}}function ue(m,A){if(1&m&&(t.TgZ(0,"div",45)(1,"span"),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&m){const i=A.$implicit,l=A.index,v=t.oxw(3);t.xp6(1),t.Udp("color",v.lineChartColorScheme.domain[l]),t.xp6(1),t.hij(" ",i.name," "),t.xp6(1),t.hij(": ",i.value," ")}}function _e(m,A){if(1&m&&(t.TgZ(0,"div",42)(1,"div",43),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,ue,4,4,"div",44),t.qZA()),2&m){const i=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,2,"Total Occupancy")," "),t.xp6(2),t.Q6J("ngForOf",i.parkingDailyOccupancy.average[i.parkingDailyOccupancy.tab][0].series)}}function ve(m,A){if(1&m&&(t.TgZ(0,"div",34)(1,"div",35),t._UZ(2,"app-chart-legend",36),t.TgZ(3,"div",7)(4,"div",37),t._UZ(5,"ngx-charts-area-chart",38),t.qZA(),t.TgZ(6,"div",39)(7,"ngx-charts-bar-vertical-2d",40),t.YNc(8,_e,5,4,"ng-template",null,41,t.W1O),t.qZA()()()()()),2&m){const i=t.oxw();t.xp6(2),t.Q6J("data",t.DdM(21,ne))("display",i.lineLegend)("horizontal",!0)("colors",i.lineChartColorScheme.domain),t.xp6(1),t.Udp("height",i.barChartHeight+"px"),t.xp6(2),t.Q6J("scheme",i.lineChartColorScheme)("results",i.parkingDailyOccupancy.occupancy[i.parkingDailyOccupancy.tab])("xAxis",!0)("yAxis",!0)("gradient",!0)("yScaleMax",i.parkingDailyOccupancy.max[i.parkingDailyOccupancy.tab]),t.xp6(2),t.Q6J("view",t.VKq(22,V,i.barChartHeight))("scheme",i.lineChartColorScheme)("results",i.parkingDailyOccupancy.average[i.parkingDailyOccupancy.tab])("xAxis",!0)("yAxis",!0)("yScaleMax",i.parkingDailyOccupancy.max[i.parkingDailyOccupancy.tab])("showYAxisLabel",!0)("barPadding",20)("groupPadding",30)}}function xe(m,A){if(1&m&&(t.TgZ(0,"div",45)(1,"span"),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&m){const i=A.$implicit,l=A.index,v=t.oxw(3);t.xp6(1),t.Udp("color",v.colorScheme.domain[l]),t.xp6(1),t.hij(" ",i.name," "),t.xp6(1),t.hij(": ",i.value," ")}}function fe(m,A){if(1&m&&(t.TgZ(0,"div",42)(1,"div",43),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,xe,4,4,"div",44),t.qZA()),2&m){const i=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,2,"Total Occupancy")," "),t.xp6(2),t.Q6J("ngForOf",i.maxNormalSeasonalLots.average[0].series)}}function ye(m,A){if(1&m&&(t.TgZ(0,"div",34)(1,"div",35),t._UZ(2,"app-chart-legend",36),t.TgZ(3,"div",7)(4,"div",37),t._UZ(5,"app-charts-bar-vertical-2d",46),t.qZA(),t.TgZ(6,"div",39)(7,"app-charts-bar-vertical-2d",47),t.YNc(8,fe,5,4,"ng-template",null,41,t.W1O),t.qZA()()()()()),2&m){const i=t.oxw();t.xp6(2),t.Q6J("data",i.maxNormalSeasonalLots.legend)("display",i.lineLegend)("horizontal",!0)("colors",i.colorScheme.domain),t.xp6(1),t.Udp("height",i.barChartHeight+"px"),t.xp6(2),t.Q6J("scheme",i.colorScheme)("groupPadding",1)("barPadding",2)("results",i.maxNormalSeasonalLots.occupancy)("xAxis",!0)("yAxis",!0)("yScaleMax",i.maxNormalSeasonalLots.max)("showYAxisLabel",!0)("showRefLines",!0)("showRefLabels",!1)("referenceLines",i.maxNormalSeasonalLots.referenceLines),t.xp6(2),t.Q6J("view",t.VKq(28,V,i.barChartHeight))("scheme",i.colorScheme)("results",i.maxNormalSeasonalLots.average)("xAxis",!0)("yAxis",!0)("yScaleMax",i.maxNormalSeasonalLots.max)("showYAxisLabel",!0)("barPadding",2)("showRefLines",!0)("showRefLabels",!1)("referenceLines",i.maxNormalSeasonalLots.referenceLines)}}function be(m,A){if(1&m&&(t.TgZ(0,"div",45)(1,"span"),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&m){const i=A.$implicit,l=A.index,v=t.oxw(3);t.xp6(1),t.Udp("color",v.lineChartColorScheme.domain[l]),t.xp6(1),t.hij(" ",i.name," "),t.xp6(1),t.hij(": ",i.value," ")}}function Ce(m,A){if(1&m&&(t.TgZ(0,"div",42)(1,"div",43),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,be,4,4,"div",44),t.qZA()),2&m){const i=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,2,"Total Revenue")," "),t.xp6(2),t.Q6J("ngForOf",i.carParkRevenueAverage[0].series)}}function ke(m,A){if(1&m&&(t.TgZ(0,"div",34)(1,"div",35),t._UZ(2,"app-chart-legend",36),t.TgZ(3,"div",7)(4,"div",37),t._UZ(5,"ngx-charts-area-chart",48),t.qZA(),t.TgZ(6,"div",39)(7,"ngx-charts-bar-vertical-2d",40),t.YNc(8,Ce,5,4,"ng-template",null,41,t.W1O),t.qZA()()()()()),2&m){const i=t.oxw();t.xp6(2),t.Q6J("data",i.carParkRevenue)("display",i.lineLegend)("horizontal",!0)("colors",i.lineChartColorScheme.domain),t.xp6(1),t.Udp("height",i.barChartHeight+"px"),t.xp6(2),t.Q6J("scheme",i.lineChartColorScheme)("results",i.carParkRevenue)("gradient",!0)("xAxis",!0)("yAxis",!0)("showYAxisLabel",!0),t.xp6(2),t.Q6J("view",t.VKq(21,V,i.barChartHeight))("scheme",i.lineChartColorScheme)("results",i.carParkRevenueAverage)("xAxis",!0)("yAxis",!0)("yScaleMax",i.carParkRevenueMaxYAxis)("showYAxisLabel",!0)("barPadding",20)("groupPadding",30)}}function Te(m,A){if(1&m&&(t.TgZ(0,"div",45)(1,"span"),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&m){const i=A.$implicit,l=A.index,v=t.oxw(3);t.xp6(1),t.Udp("color",v.lineChartColorScheme.domain[l]),t.xp6(1),t.hij(" ",i.name," "),t.xp6(1),t.hij(": ",i.value," ")}}function De(m,A){if(1&m&&(t.TgZ(0,"div",42)(1,"div",43),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,Te,4,4,"div",44),t.qZA()),2&m){const i=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,2,"Total Transaction")," "),t.xp6(2),t.Q6J("ngForOf",i.carParkTransactionAverage[0].series)}}function Ne(m,A){if(1&m&&(t.TgZ(0,"div",34)(1,"div",35),t._UZ(2,"app-chart-legend",36),t.TgZ(3,"div",7)(4,"div",37),t._UZ(5,"ngx-charts-area-chart",49),t.qZA(),t.TgZ(6,"div",39)(7,"ngx-charts-bar-vertical-2d",40),t.YNc(8,De,5,4,"ng-template",null,41,t.W1O),t.qZA()()()()()),2&m){const i=t.oxw();t.xp6(2),t.Q6J("data",i.carParkTransactions)("display",i.lineLegend)("horizontal",!0)("colors",i.lineChartColorScheme.domain),t.xp6(1),t.Udp("height",i.barChartHeight+"px"),t.xp6(2),t.Q6J("scheme",i.lineChartColorScheme)("results",i.carParkTransactions)("gradient",!0)("xAxis",!0)("yAxis",!0),t.xp6(2),t.Q6J("view",t.VKq(20,V,i.barChartHeight))("scheme",i.lineChartColorScheme)("results",i.carParkTransactionAverage)("xAxis",!0)("yAxis",!0)("yScaleMax",i.carParkTransactionMaxYAxis)("showYAxisLabel",!0)("barPadding",20)("groupPadding",30)}}function Ee(m,A){if(1&m&&(t.TgZ(0,"div",45)(1,"span"),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&m){const i=A.$implicit,l=A.index,v=t.oxw(3);t.xp6(1),t.Udp("color",v.lineChartColorScheme.domain[l]),t.xp6(1),t.hij(" ",i.name," "),t.xp6(1),t.hij(": ",i.value," ")}}function Re(m,A){if(1&m&&(t.TgZ(0,"div",42)(1,"div",43),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,Ee,4,4,"div",44),t.qZA()),2&m){const i=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,2,"Total Faults")," "),t.xp6(2),t.Q6J("ngForOf",i.carParkFaultsAverage[0].series)}}function Ie(m,A){if(1&m&&(t.TgZ(0,"div",34)(1,"div",35),t._UZ(2,"app-chart-legend",36),t.TgZ(3,"div",7)(4,"div",37),t._UZ(5,"ngx-charts-area-chart",50),t.qZA(),t.TgZ(6,"div",39)(7,"ngx-charts-bar-vertical-2d",40),t.YNc(8,Re,5,4,"ng-template",null,41,t.W1O),t.qZA()()()()()),2&m){const i=t.oxw();t.xp6(2),t.Q6J("data",i.carParkFaults)("display",i.lineLegend)("horizontal",!0)("colors",i.lineChartColorScheme.domain),t.xp6(1),t.Udp("height",i.barChartHeight+"px"),t.xp6(2),t.Q6J("scheme",i.lineChartColorScheme)("results",i.carParkFaults)("gradient",!0)("xAxis",!0)("yAxis",!0)("yScaleMax",i.carParkFaultsMaxYAxis),t.xp6(2),t.Q6J("view",t.VKq(21,V,i.barChartHeight))("scheme",i.lineChartColorScheme)("results",i.carParkFaultsAverage)("xAxis",!0)("yAxis",!0)("yScaleMax",i.carParkFaultsMaxYAxis)("showYAxisLabel",!0)("barPadding",20)("groupPadding",30)}}var R=(()=>{return(m=R||(R={})).Total="total",m.Season="season",m.Normal="normal",R;var m})();const Ae=[R.Total,R.Season,R.Normal];let se=(()=>{class m{constructor(i){this.translate=i,this.barChartHeight=470,this.colorScheme={domain:O.DMY},this.lineChartColorScheme={domain:[O.Ms$,O.K8l]},this.faultChartColorScheme={domain:[O.cEj]},this.occupancyTabs=Ae,this.vehicleIcon=O.mts,this.displayPercentLegend=O.$lo,this.chartView=[140,140],this._parkingDurations=[],this._parkingVehicleTypes=[],this._parkingOccupancyRaw=[],this.parkingOccupancy={occupancy:null,average:null,tab:R.Normal,tabs:[R.Total,R.Season,R.Normal],max:null},this.parkingDailyOccupancy={occupancy:null,average:null,tab:R.Normal,tabs:[R.Total,R.Season,R.Normal],max:null},this.maxNormalSeasonalLots={occupancy:null,average:null,tab:R.Normal,tabs:[R.Total,R.Season,R.Normal],max:null,legend:null,referenceLines:[]},this.parkingOccupancyAverage=[],this.maxYAxisOccupancy=100,this._carParkTransactions=[],this.carParkTransactionAverage=[],this.carParkTransactionMaxYAxis=100,this._carParkRevenue=[],this.carParkRevenueAverage=[],this.carParkRevenueMaxYAxis=100,this._carParkFaults=[],this.carParkFaultsAverage=[],this.carParkFaultsMaxYAxis=100,this.occupancyTab=R.Total}get parkingDurations(){return this._parkingDurations}set parkingDurations(i){this._parkingDurations=i}get parkingVehicleTypes(){return this._parkingVehicleTypes}set parkingVehicleTypes(i){i.forEach(l=>{}),this._parkingVehicleTypes=i}set parkingOccupancyRaw(i){const l=this.calcOccupancyStats(i);this.parkingOccupancy={...this.parkingOccupancy,occupancy:l.occupancy,average:l.average,max:l.max}}set parkingDailyOccupancyRaw(i){const l=this.calcOccupancyStats(i);this.parkingDailyOccupancy={...this.parkingDailyOccupancy,occupancy:l.occupancy,average:l.average,max:l.max}}set maxNormalSeasonalLotsRaw(i){if(!i||!i.length)return;const l=(0,b.uniq)((0,b.map)([...i[0].parkingOccupancy,...i[1].parkingOccupancy],"title")).map(u=>{const S=i[0].parkingOccupancy.find(W=>W.title===u),J=i[1].parkingOccupancy.find(W=>W.title===u);return{series:[{name:`${i[0].carParkCode} Normal`,value:S?S.normal:0},{name:`${i[1].carParkCode} Normal`,value:J?J.normal:0},{name:`${i[0].carParkCode} Season`,value:S?S.season:0},{name:`${i[1].carParkCode} Season`,value:J?J.season:0}],name:u}}),v=[{name:`${i[0].carParkCode} Normal`,value:Math.ceil((0,b.meanBy)(i[0].parkingOccupancy,"normal"))||0},{name:`${i[1].carParkCode} Normal`,value:Math.ceil((0,b.meanBy)(i[1].parkingOccupancy,"normal"))||0},{name:`${i[0].carParkCode} Season`,value:Math.ceil((0,b.meanBy)(i[0].parkingOccupancy,"season"))||0},{name:`${i[1].carParkCode} Season`,value:Math.ceil((0,b.meanBy)(i[1].parkingOccupancy,"season"))||0}],T=Math.max(this.calcMaxYAxisOccupancy(l),i[0].slotNumberSeason,i[1].slotNumberSeason);this.maxNormalSeasonalLots={...this.maxNormalSeasonalLots,occupancy:l,max:T,average:[{name:"Average",series:v}],legend:[{name:`${i[0].carParkCode} Normal`},{name:`${i[1].carParkCode} Normal`},{name:`${i[0].carParkCode} Season`},{name:`${i[1].carParkCode} Season`}],referenceLines:(0,b.uniqBy)([{value:i[0].slotNumberSeason,color:O.cEj},{value:i[1].slotNumberSeason,color:O.K8l}],"value")}}get carParkTransactions(){return this._carParkTransactions}set carParkTransactions(i){this._carParkTransactions=i,this.carParkTransactionAverage=(0,O.Ayc)(this._carParkTransactions),this.carParkTransactionMaxYAxis=this.calcMaxYAxisOccupancy(this.carParkTransactions)}get carParkRevenue(){return this._carParkRevenue}set carParkRevenue(i){this._carParkRevenue=i,this.carParkRevenueAverage=(0,O.Ayc)(this._carParkRevenue),this.carParkRevenueMaxYAxis=this.calcMaxYAxisOccupancy(this.carParkRevenue)}get carParkFaults(){return this._carParkFaults}set carParkFaults(i){this._carParkFaults=i,this.carParkFaultsAverage=(0,O.Ayc)(this._carParkFaults),this.carParkFaultsMaxYAxis=this.calcMaxYAxisOccupancy(this.carParkFaults)}lineLegend(i){return i.name}selectOccupancy(i){this.occupancyTab!==i&&(this.occupancyTab=i)}calcMaxYAxisOccupancy(i){return 10*Math.ceil(Math.max(...(0,b.flatten)(i.map(l=>l.series)).map(l=>l.value))/10)}calcOccupancyStats(i){const l={[R.Total]:i.map((u,S)=>({name:`${S+1} - ${u.carParkCode}`,series:u.parkingOccupancy.map(J=>({name:J.title,value:J.normal+J.season}))})),[R.Normal]:i.map((u,S)=>({name:`${S+1} - ${u.carParkCode}`,series:u.parkingOccupancy.map(J=>({name:J.title,value:J.normal}))})),[R.Season]:i.map((u,S)=>({name:`${S+1} - ${u.carParkCode}`,series:u.parkingOccupancy.map(J=>({name:J.title,value:J.season}))}))},v={[R.Total]:[{name:"Average",series:l[R.Total].map(u=>({name:u.name,value:(0,b.round)(u.series.reduce((S,J)=>S+J.value,0)/(u.series.length||1),2)}))}],[R.Season]:[{name:"Average",series:l[R.Season].map(u=>({name:u.name,value:(0,b.round)(u.series.reduce((S,J)=>S+J.value,0)/(u.series.length||1),2)}))}],[R.Normal]:[{name:"Average",series:l[R.Normal].map(u=>({name:u.name,value:(0,b.round)(u.series.reduce((S,J)=>S+J.value,0)/(u.series.length||1),2)}))}]};return{occupancy:l,max:{[R.Normal]:this.calcMaxYAxisOccupancy(l[R.Normal]),[R.Season]:this.calcMaxYAxisOccupancy(l[R.Season]),[R.Total]:this.calcMaxYAxisOccupancy(l[R.Total])},average:v}}parkingOccupancyYAxisFormat(i){return i+"%"}ngOnInit(){this.translate.get(this.parkingOccupancy.tabs).subscribe(i=>{let l=[];for(let v in i)i.hasOwnProperty(v)&&l.push(i[v]);this.parkingOccupancy.tabs=l}),this.translate.get(this.parkingDailyOccupancy.tabs).subscribe(i=>{let l=[];for(let v in i)i.hasOwnProperty(v)&&l.push(i[v]);this.parkingDailyOccupancy.tabs=l})}}return m.\u0275fac=function(i){return new(i||m)(t.Y36(p.sK))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-dashboard-comparison-detail"]],inputs:{parkingDurations:"parkingDurations",parkingVehicleTypes:"parkingVehicleTypes",parkingOccupancyRaw:"parkingOccupancyRaw",parkingDailyOccupancyRaw:"parkingDailyOccupancyRaw",maxNormalSeasonalLotsRaw:"maxNormalSeasonalLotsRaw",carParkTransactions:"carParkTransactions",carParkRevenue:"carParkRevenue",carParkFaults:"carParkFaults"},decls:99,vars:54,consts:[[1,"row","general-statistics"],[1,"col-lg-6","m--padding-right-10"],[1,"m-portlet","m-portlet--bordered-semi","card-stats-compare","parking-type-chart"],[1,"m-portlet__head"],[1,"m-portlet__head-caption"],[1,"m-portlet__head-title"],[1,"m-portlet__head-text"],[1,"row"],["class","col-xl-6",4,"ngFor","ngForOf"],["class","col-xl-6 app-pie-chart",4,"ngFor","ngForOf"],[1,"col-lg-6","app-pie-chart","m--padding-right-10"],[1,"m-portlet","m-portlet--bordered-semi","card-stats-compare","parking-duration-chart"],["class","col-lg-6",4,"ngFor","ngForOf"],[1,"occupancy-statistics"],[1,"m-portlet","m-portlet--tabs"],[1,"m-portlet__head-tools"],["role","tablist",1,"nav","nav-tabs","m-tabs-line","m-tabs-line--right","m-tabs-line--success"],["class","nav-item m-tabs__item",4,"ngFor","ngForOf"],[1,"btn","btn-outline-main","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","m-btn--air","float-right","m--margin-top-20","m--margin-left-20",3,"click"],["class","m-portlet__body",4,"ngIf"],[1,"revenue-statistics"],[1,"m-portlet"],[1,"m-portlet__head-title","w-100"],[1,"btn","btn-outline-main","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","m-btn--air","float-right","m--margin-top-20",3,"click"],[1,"transaction-statistics"],[1,"fault-statistics"],[1,"col-xl-6"],["class","title",4,"ngIf"],[1,"title"],[1,"col-xl-6","app-pie-chart"],[3,"view","results","displayLegend"],[1,"col-lg-6"],[1,"nav-item","m-tabs__item"],[1,"nav-link","m-tabs__link",3,"ngClass","click"],[1,"m-portlet__body"],[1,"stats-chart-container"],[3,"data","display","horizontal","colors"],[1,"col-11"],[3,"scheme","results","xAxis","yAxis","gradient","yScaleMax"],[1,"col-1","compare-bar-chart-average"],[3,"view","scheme","results","xAxis","yAxis","yScaleMax","showYAxisLabel","barPadding","groupPadding"],["tooltipTemplate",""],[1,"area-tooltip-container"],[1,"tooltip-title","m-font-weight-600"],["class","tooltip-item",4,"ngFor","ngForOf"],[1,"tooltip-item"],[3,"scheme","groupPadding","barPadding","results","xAxis","yAxis","yScaleMax","showYAxisLabel","showRefLines","showRefLabels","referenceLines"],[3,"view","scheme","results","xAxis","yAxis","yScaleMax","showYAxisLabel","barPadding","showRefLines","showRefLabels","referenceLines"],["yAxisLabel","(S$)",3,"scheme","results","gradient","xAxis","yAxis","showYAxisLabel"],[3,"scheme","results","gradient","xAxis","yAxis"],[3,"scheme","results","gradient","xAxis","yAxis","yScaleMax"]],template:function(i,l){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),t._uU(7),t.ALo(8,"translate"),t.qZA()()()(),t.TgZ(9,"div")(10,"div",7),t.YNc(11,K,2,1,"div",8),t.qZA(),t.TgZ(12,"div",7),t.YNc(13,j,2,3,"div",9),t.qZA()()()(),t.TgZ(14,"div",10)(15,"div",11)(16,"div",3)(17,"div",4)(18,"div",5)(19,"h3",6),t._uU(20),t.ALo(21,"translate"),t.qZA()()()(),t.TgZ(22,"div")(23,"div",7),t.YNc(24,ee,2,1,"div",8),t.qZA(),t.TgZ(25,"div",7),t.YNc(26,ie,2,3,"div",12),t.qZA()()()()(),t.TgZ(27,"div",13)(28,"div",14)(29,"div",3)(30,"div",4)(31,"div",5)(32,"h3",6),t._uU(33),t.ALo(34,"translate"),t.qZA()()(),t.TgZ(35,"div",15)(36,"ul",16),t.YNc(37,pe,4,4,"li",17),t.qZA()(),t.TgZ(38,"button",18),t.NdJ("click",function(){return l.carParkOccupancyHidden=!l.carParkOccupancyHidden}),t._UZ(39,"i"),t.qZA()(),t.YNc(40,me,10,24,"div",19),t.qZA()(),t.TgZ(41,"div",13)(42,"div",14)(43,"div",3)(44,"div",4)(45,"div",5)(46,"h3",6),t._uU(47),t.ALo(48,"translate"),t.qZA()()(),t.TgZ(49,"div",15)(50,"ul",16),t.YNc(51,ge,4,4,"li",17),t.qZA()(),t.TgZ(52,"button",18),t.NdJ("click",function(){return l.carParkDailyOccupancyHidden=!l.carParkDailyOccupancyHidden}),t._UZ(53,"i"),t.qZA()(),t.YNc(54,ve,10,24,"div",19),t.qZA()(),t.TgZ(55,"div",13)(56,"div",14)(57,"div",3)(58,"div",4)(59,"div",5)(60,"h3",6),t._uU(61),t.ALo(62,"translate"),t.qZA()()(),t.TgZ(63,"button",18),t.NdJ("click",function(){return l.maxNormalSeasonalLotsHidden=!l.maxNormalSeasonalLotsHidden}),t._UZ(64,"i"),t.qZA()(),t.YNc(65,ye,10,30,"div",19),t.qZA()(),t.TgZ(66,"div",20)(67,"div",21)(68,"div",3)(69,"div",4)(70,"div",22)(71,"h3",6),t._uU(72),t.ALo(73,"translate"),t.qZA(),t.TgZ(74,"button",23),t.NdJ("click",function(){return l.carParkRevenueHidden=!l.carParkRevenueHidden}),t._UZ(75,"i"),t.qZA()()()(),t.YNc(76,ke,10,23,"div",19),t.qZA()(),t.TgZ(77,"div",24)(78,"div",21)(79,"div",3)(80,"div",4)(81,"div",22)(82,"h3",6),t._uU(83),t.ALo(84,"translate"),t.qZA(),t.TgZ(85,"button",23),t.NdJ("click",function(){return l.carParkTransactionsHidden=!l.carParkTransactionsHidden}),t._UZ(86,"i"),t.qZA()()()(),t.YNc(87,Ne,10,22,"div",19),t.qZA()(),t.TgZ(88,"div",25)(89,"div",21)(90,"div",3)(91,"div",4)(92,"div",22)(93,"h3",6),t._uU(94),t.ALo(95,"translate"),t.qZA(),t.TgZ(96,"button",23),t.NdJ("click",function(){return l.carParkFaultsHidden=!l.carParkFaultsHidden}),t._UZ(97,"i"),t.qZA()()()(),t.YNc(98,Ie,10,23,"div",19),t.qZA()()),2&i&&(t.xp6(7),t.hij(" ",t.lcZ(8,38,"Parking Vehicle Type")," "),t.xp6(4),t.Q6J("ngForOf",l.parkingVehicleTypes),t.xp6(2),t.Q6J("ngForOf",l.parkingVehicleTypes),t.xp6(7),t.hij(" ",t.lcZ(21,40,"Parking Duration")," "),t.xp6(4),t.Q6J("ngForOf",l.parkingDurations),t.xp6(2),t.Q6J("ngForOf",l.parkingDurations),t.xp6(7),t.hij(" ",t.lcZ(34,42,"Car Park Occupancy")," "),t.xp6(4),t.Q6J("ngForOf",l.parkingOccupancy.tabs),t.xp6(2),t.Gre("la ",l.carParkOccupancyHidden?"la-arrows":"la-minus-square",""),t.xp6(1),t.Q6J("ngIf",!l.carParkOccupancyHidden),t.xp6(7),t.hij(" ",t.lcZ(48,44,"Daily Opccupancy")," "),t.xp6(4),t.Q6J("ngForOf",l.parkingDailyOccupancy.tabs),t.xp6(2),t.Gre("la ",l.carParkDailyOccupancyHidden?"la-arrows":"la-minus-square",""),t.xp6(1),t.Q6J("ngIf",!l.carParkDailyOccupancyHidden),t.xp6(7),t.hij(" ",t.lcZ(62,46,"Max Normal/Seasonal Lots")," "),t.xp6(3),t.Gre("la ",l.maxNormalSeasonalLotsHidden?"la-arrows":"la-minus-square",""),t.xp6(1),t.Q6J("ngIf",!l.maxNormalSeasonalLotsHidden),t.xp6(7),t.hij(" ",t.lcZ(73,48,"Car Park Revenue")," "),t.xp6(3),t.Gre("la ",l.carParkRevenueHidden?"la-arrows":"la-minus-square",""),t.xp6(1),t.Q6J("ngIf",!l.carParkRevenueHidden),t.xp6(7),t.hij(" ",t.lcZ(84,50,"Car Park Transactions")," "),t.xp6(3),t.Gre("la ",l.carParkTransactionsHidden?"la-arrows":"la-minus-square",""),t.xp6(1),t.Q6J("ngIf",!l.carParkTransactionsHidden),t.xp6(7),t.hij(" ",t.lcZ(95,52,"Car Park Faults")," "),t.xp6(3),t.Gre("la ",l.carParkFaultsHidden?"la-arrows":"la-minus-square",""),t.xp6(1),t.Q6J("ngIf",!l.carParkFaultsHidden))},dependencies:[r.mk,r.sg,r.O5,g.o,D.J,N.b,Y.r,$.H,r.rS,p.X$],encapsulation:2}),m})(),Oe=(()=>{class m{constructor(i,l,v){this.statisticService=i,this.carparkService=l,this.route=v,this.rawCarParks=[],this.fromCarParks=[],this.fromCarParkId=null,this.rangeType=O.Nxg.Month,this.parkingDurations=[],this.parkingVehicleTypes=[],this.parkingOccupancyRaw=[],this.parkingDailyOccupancyRaw=[],this.maxNormalSeasonalLotsRaw=[],this.carParkTransactions=[],this.carParkRevenue=[],this.carParkFaults=[]}ngOnInit(){this.route.queryParams.subscribe(i=>{this.fromDate=w.ou.fromISO(i.fromDate).toJSDate(),this.toDate=w.ou.fromISO(i.toDate).toJSDate(),this.rangeType=i.rangeType||O.Nxg.Month,this.carparkService.getSimpleList().subscribe(l=>{this.rawCarParks=l,this.fromCarParkId=i.fromCarParkId?parseInt(i.fromCarParkId,10):this.rawCarParks[0].id,this.reloadData()})})}requestData(i){let l,v;switch(this.rangeType){case O.Nxg.Month:l=w.ou.fromJSDate(i).startOf("month").toISO(),v=w.ou.fromJSDate(i).endOf("month").toISO();break;case O.Nxg.Year:l=w.ou.fromJSDate(i).startOf("year").toISO(),v=w.ou.fromJSDate(i).endOf("year").toISO()}return{carParkIds:this.fromCarParkId,from:l,to:v,rangeType:this.rangeType}}parseDateString(i){const l=w.ou.fromFormat(i,"yyyyMMdd");switch(this.rangeType){case O.Nxg.Month:return l.day.toString();case O.Nxg.Year:return l.month.toString()}}parseStatisticDates(i){return i.map(l=>({name:l.name,series:this.applyTimeRangeResults(l.series.map(v=>({name:this.parseDateString(v.name),value:v.value})))}))}maxDayMonth(){return this.rangeType===O.Nxg.Year?12:Math.max(w.ou.fromJSDate(this.fromDate).daysInMonth,w.ou.fromJSDate(this.toDate).daysInMonth)}applyTimeRangeResults(i){const l=this.maxDayMonth(),v=i.map(u=>u.name),T=[];for(let u=1;u<=l;u++){const S=u.toString();-1===v.indexOf(S)&&T.push({name:S,value:0})}return T.concat(i).sort((u,S)=>u.name-S.name)}applyOccupancyTimeRangeResults(i){const l=this.maxDayMonth(),v=i.map(u=>u.title),T=[];for(let u=1;u<=l;u++){const S=u.toString();-1===v.indexOf(S)&&T.push({title:S,normal:0,season:0})}return T.concat(i).sort((u,S)=>u.title-S.title)}parseOccupancyDates(i){return this.applyOccupancyTimeRangeResults(i.map(l=>({...l,title:this.parseDateString(l.title)})))}displayDate(i){switch(this.rangeType){case O.Nxg.Month:return w.ou.fromJSDate(i).toLocaleString({month:"short",year:"numeric"});case O.Nxg.Year:return i.getFullYear().toString()}}reloadData(){const i=this.requestData(this.fromDate),l=this.requestData(this.toDate),v=[this.displayDate(this.fromDate),this.displayDate(this.toDate)];(0,y.aj)(this.statisticService.getDurationStatistics(i),this.statisticService.getDurationStatistics(l)).subscribe(T=>{this.parkingDurations=T.map((u,S)=>({name:v[S],series:(0,O.BF0)((0,O.dGr)(u.parkingDurations))})).filter(u=>u.series.length)}),(0,y.aj)(this.statisticService.getVehicleTypeStatistics(i),this.statisticService.getVehicleTypeStatistics(l)).subscribe(T=>{this.parkingVehicleTypes=T.map((u,S)=>({name:v[S],series:(0,O.BF0)((0,O.dGr)(u.parkingVehicleTypes))})).filter(u=>u.series.length)}),(0,y.aj)(this.statisticService.getOccupancyStatistics(i),this.statisticService.getOccupancyStatistics(l)).subscribe(T=>{this.parkingOccupancyRaw=T.map((u,S)=>({...u,carParkCode:v[S],parkingOccupancy:this.parseOccupancyDates(u.parkingOccupancy)})).filter(u=>u.parkingOccupancy.length)}),(0,y.aj)(this.statisticService.getDailyOccupancyStatistics({...i}),this.statisticService.getDailyOccupancyStatistics({...l})).subscribe(T=>{this.parkingDailyOccupancyRaw=T.map((u,S)=>({...u,carParkCode:v[S],parkingOccupancy:(0,b.range)(0,24).map(J=>{const X=u.parkingOccupancy.findIndex(W=>Number(W.title)===J);return X>-1?{title:J,season:u.parkingOccupancy[X].season,normal:u.parkingOccupancy[X].normal}:{title:J,season:0,normal:0}})})).filter(u=>u.parkingOccupancy.length)}),(0,y.aj)(this.statisticService.getMaxNormalSeasonalLotsStatistics(i),this.statisticService.getMaxNormalSeasonalLotsStatistics(l)).subscribe(T=>{this.maxNormalSeasonalLotsRaw=T.map((u,S)=>({...u,carParkCode:v[S],parkingOccupancy:this.parseOccupancyDates(u.parkingOccupancy)})).filter(u=>u.parkingOccupancy.length)}),(0,y.aj)(this.statisticService.getFaultStatistics(i),this.statisticService.getFaultStatistics(l)).subscribe(T=>{this.carParkFaults=this.parseStatisticDates(T.map((u,S)=>(0,O.XNF)(`${S} - ${v[S]}`,u.carParkFaults)).filter(u=>u.series.length))}),(0,y.aj)(this.statisticService.getRevenueStatistics(i),this.statisticService.getRevenueStatistics(l)).subscribe(T=>{this.carParkRevenue=this.parseStatisticDates(T.map((u,S)=>(0,O.XNF)(`${S} - ${v[S]}`,u.carParkRevenue.map(J=>({...J,value:J.value/100})))).filter(u=>u.series.length))}),(0,y.aj)(this.statisticService.getTransactionStatistics(i),this.statisticService.getTransactionStatistics(l)).subscribe(T=>{this.carParkTransactions=this.parseStatisticDates(T.map((u,S)=>(0,O.XNF)(`${S} - ${v[S]}`,u.carParkTransactions)).filter(u=>u.series.length))})}parkingOccupancyYAxisFormat(i){return i+"%"}changeFromDate(i){this.fromDate=i,this.reloadData()}changeToDate(i){this.toDate=i,this.reloadData()}changeCarPark(){this.reloadData()}}return m.\u0275fac=function(i){return new(i||m)(t.Y36(e.B),t.Y36(L.x),t.Y36(F.gz))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-dashboard-comparison"]],decls:19,vars:19,consts:[[1,"body-wrapper"],[1,"m-subheader"],[1,"align-items-center"],[1,"row","form-group","m-form__group"],[1,"col-lg-3"],["bindLabel","name","bindValue","id",1,"rounded",3,"items","ngModel","ngModelChange"],[1,"col-form-label","col-lg-1","col-sm-6","m--padding-left-0","m--padding-right-0"],[1,"col-lg-2","col-sm-6"],[3,"type","data","rounded","select"],[3,"type","rounded","data","select"],[1,"m-content"],[3,"parkingDurations","parkingVehicleTypes","parkingOccupancyRaw","parkingDailyOccupancyRaw","maxNormalSeasonalLotsRaw","carParkTransactions","carParkRevenue","carParkFaults"]],template:function(i,l){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"app-title-bar"),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"ng-select",5),t.NdJ("ngModelChange",function(T){return l.fromCarParkId=T})("ngModelChange",function(){return l.changeCarPark()}),t.qZA()(),t._UZ(7,"div",4),t.TgZ(8,"label",6),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"div",7)(12,"app-datepicker",8),t.NdJ("select",function(T){return l.changeFromDate(T)}),t.qZA()(),t.TgZ(13,"span"),t._uU(14,"vs"),t.qZA(),t.TgZ(15,"div",7)(16,"app-datepicker",9),t.NdJ("select",function(T){return l.changeToDate(T)}),t.qZA()()()()(),t.TgZ(17,"div",10),t._UZ(18,"app-dashboard-comparison-detail",11),t.qZA()()),2&i&&(t.xp6(6),t.Q6J("items",l.rawCarParks)("ngModel",l.fromCarParkId),t.xp6(3),t.hij(" ",t.lcZ(10,17,"Time Range"),": "),t.xp6(3),t.Q6J("type",l.rangeType)("data",l.fromDate)("rounded",!0),t.xp6(4),t.Q6J("type",l.rangeType)("rounded",!0)("data",l.toDate),t.xp6(2),t.Q6J("parkingDurations",l.parkingDurations)("parkingVehicleTypes",l.parkingVehicleTypes)("parkingOccupancyRaw",l.parkingOccupancyRaw)("parkingDailyOccupancyRaw",l.parkingDailyOccupancyRaw)("maxNormalSeasonalLotsRaw",l.maxNormalSeasonalLotsRaw)("carParkTransactions",l.carParkTransactions)("carParkRevenue",l.carParkRevenue)("carParkFaults",l.carParkFaults))},dependencies:[x.G,h.JJ,h.On,U.C,M.w9,se,p.X$],encapsulation:2}),m})();var Se=d(96599);let Pe=(()=>{class m{constructor(i,l,v,T){this.statisticService=i,this.carparkService=l,this.route=v,this.translate=T,this.rawCarParks=[],this.fromCarParks=[],this.toCarParks=[],this.fromCarParkId=null,this.toCarParkId=null,this.timeRange={value:[w.ou.local().minus({weeks:1}).toJSDate(),new Date],type:O.Nxg.Day},this.parkingDurations=[],this.parkingVehicleTypes=[],this.parkingOccupancyRaw=[],this.parkingDailyOccupancyRaw=[],this.maxNormalSeasonalLotsRaw=[],this.carParkTransactions=[],this.carParkRevenue=[],this.carParkFaults=[]}ngOnInit(){this.route.queryParams.subscribe(i=>{i.fromDate&&i.toDate&&(this.timeRange={value:[w.ou.fromISO(i.fromDate).startOf(i.rangeType).toJSDate(),w.ou.fromISO(i.fromDate).endOf(i.rangeType).toJSDate()],type:i.rangeType||O.Nxg.Day}),this.carparkService.getSimpleList().subscribe(l=>{this.rawCarParks=l,this.fromCarParkId=i.fromCarParkId?parseInt(i.fromCarParkId,10):this.rawCarParks[0].id,this.toCarParkId=i.toCarParkId?parseInt(i.toCarParkId,10):this.rawCarParks[1].id,this.reloadData(),this.reloadCarParkOptions()})})}reloadCarParkOptions(){this.fromCarParks=this.rawCarParks.filter(i=>i.id!==this.toCarParkId),this.toCarParks=this.rawCarParks.filter(i=>i.id!==this.fromCarParkId)}requestData(i){return{carParkIds:i,from:this.timeRange.value[0].toISOString(),to:this.timeRange.value[1].toISOString(),rangeType:this.timeRange.type}}reloadData(){const i=this.requestData(this.fromCarParkId),l=this.requestData(this.toCarParkId);(0,y.aj)(this.statisticService.getDurationStatistics(i),this.statisticService.getDurationStatistics(l)).subscribe(v=>{this.parkingDurations=v.map(T=>({name:T.carParkCode,series:(0,O.BF0)((0,O.dGr)(T.parkingDurations))}))}),(0,y.aj)(this.statisticService.getVehicleTypeStatistics(i),this.statisticService.getVehicleTypeStatistics(l)).subscribe(v=>{this.parkingVehicleTypes=v.map(T=>({name:T.carParkCode,series:(0,O.BF0)((0,O.dGr)(T.parkingVehicleTypes))}))}),(0,y.aj)(this.statisticService.getOccupancyStatistics(i),this.statisticService.getOccupancyStatistics(l)).subscribe(v=>{this.parkingOccupancyRaw=v}),(0,y.aj)(this.statisticService.getFaultStatistics(i),this.statisticService.getFaultStatistics(l)).subscribe(v=>{this.carParkFaults=v.map((T,u)=>(0,O.XNF)(`${u+1} ${T.carParkCode}`,T.carParkFaults))}),(0,y.aj)(this.statisticService.getRevenueStatistics(i),this.statisticService.getRevenueStatistics(l)).subscribe(v=>{this.carParkRevenue=v.map((T,u)=>(0,O.XNF)(`${u+1} ${T.carParkCode}`,T.carParkRevenue.map(S=>({...S,value:S.value/100}))))}),(0,y.aj)(this.statisticService.getTransactionStatistics(i),this.statisticService.getTransactionStatistics(l)).subscribe(v=>{this.carParkTransactions=v.map((T,u)=>(0,O.XNF)(`${u+1} ${T.carParkCode}`,T.carParkTransactions))}),(0,y.aj)(this.statisticService.getDailyOccupancyStatistics({...i}),this.statisticService.getDailyOccupancyStatistics({...l})).subscribe(v=>{this.parkingDailyOccupancyRaw=v}),(0,y.aj)(this.statisticService.getMaxNormalSeasonalLotsStatistics(i),this.statisticService.getMaxNormalSeasonalLotsStatistics(l)).subscribe(v=>{this.maxNormalSeasonalLotsRaw=v})}parkingOccupancyYAxisFormat(i){return i+"%"}changeDateRange(i){this.timeRange=i,this.reloadData()}changeCarPark(){this.reloadCarParkOptions(),this.reloadData()}}return m.\u0275fac=function(i){return new(i||m)(t.Y36(e.B),t.Y36(L.x),t.Y36(F.gz),t.Y36(p.sK))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-dashboard-comparison"]],decls:18,vars:13,consts:[[1,"body-wrapper"],[1,"m-subheader"],[1,"align-items-center"],[1,"row","form-group","m-form__group"],[1,"col-lg-2"],["bindLabel","name","bindValue","id",1,"rounded",3,"items","ngModel","ngModelChange"],[1,"col-form-label","col-md-1"],[1,"col-lg-3"],[1,"col-form-label","col-xl-1","col-lg-2","col-sm-6","m--padding-left-0","m--padding-right-0"],[1,"col-lg-3","col-sm-6"],[3,"data","select"],[1,"m-content"],[3,"parkingDurations","parkingVehicleTypes","parkingOccupancyRaw","parkingDailyOccupancyRaw","maxNormalSeasonalLotsRaw","carParkTransactions","carParkRevenue","carParkFaults"]],template:function(i,l){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"app-title-bar"),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"ng-select",5),t.NdJ("ngModelChange",function(T){return l.fromCarParkId=T})("ngModelChange",function(){return l.changeCarPark()}),t.qZA()(),t.TgZ(7,"label",6),t._uU(8," VS "),t.qZA(),t.TgZ(9,"div",4)(10,"ng-select",5),t.NdJ("ngModelChange",function(T){return l.toCarParkId=T})("ngModelChange",function(){return l.changeCarPark()}),t.qZA()(),t._UZ(11,"div",7),t.TgZ(12,"label",8),t._uU(13," Time Range "),t.qZA(),t.TgZ(14,"div",9)(15,"app-datepicker-tab",10),t.NdJ("select",function(T){return l.changeDateRange(T)}),t.qZA()()()()(),t.TgZ(16,"div",11),t._UZ(17,"app-dashboard-comparison-detail",12),t.qZA()()),2&i&&(t.xp6(6),t.Q6J("items",l.fromCarParks)("ngModel",l.fromCarParkId),t.xp6(4),t.Q6J("items",l.toCarParks)("ngModel",l.toCarParkId),t.xp6(5),t.Q6J("data",l.timeRange),t.xp6(2),t.Q6J("parkingDurations",l.parkingDurations)("parkingVehicleTypes",l.parkingVehicleTypes)("parkingOccupancyRaw",l.parkingOccupancyRaw)("parkingDailyOccupancyRaw",l.parkingDailyOccupancyRaw)("maxNormalSeasonalLotsRaw",l.maxNormalSeasonalLotsRaw)("carParkTransactions",l.carParkTransactions)("carParkRevenue",l.carParkRevenue)("carParkFaults",l.carParkFaults))},dependencies:[x.G,h.JJ,h.On,Se.K,M.w9,se],encapsulation:2}),m})();var Ze=d(36328),we=d(80529),Le=d(19832),te=d(34984);function re(m){return new Le.w(m,"../assets/i18n/",".json")}const oe=[{path:"",component:Z.f,children:[{path:"",component:Ze.M},{path:"comparison/carparks",component:Pe,data:{breadcrumb:{label:"Car Parks"}}},{path:"comparison/range",component:Oe,data:{breadcrumb:{label:"Range"}}}]}];let Me=(()=>{class m{}return m.\u0275fac=function(i){return new(i||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({providers:[e.B,L.x],imports:[r.ez,F.Bz.forChild(oe),k.x,h.u5,P.D,te.Ns.forRoot({echarts:()=>d.e(4734).then(d.bind(d,14734))}),E.a4,M.A0,H.kn,f.zk,p.aw.forChild({loader:{provide:p.Zw,useFactory:re,deps:[we.eN]}}),F.Bz]}),m})()},36328:(G,Q,d)=>{d.d(Q,{M:()=>kt});var r=d(38014),h=d(21837),F=d(8929),H=d(36053),L=d(72986),e=d(94650),P=d(60097),M=d(20388),E=d(89383),f=d(36895),k=d(24006),Z=d(9389),O=d(96599),b=d(88796);function w(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div",11)(1,"label",12)(2,"input",13),e.NdJ("click",function(){const c=e.CHM(a).$implicit,C=e.oxw();return e.KtG(C.changeComparisonType(c.value))}),e.qZA(),e._uU(3),e._UZ(4,"span"),e.qZA()()}if(2&o){const a=_.$implicit,n=e.oxw();e.xp6(2),e.Q6J("checked",a.value===n.comparisonType),e.xp6(1),e.hij(" ",a.text," ")}}function y(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div")(1,"div",5)(2,"div",14)(3,"label")(4,"span",15),e._uU(5,"*"),e.qZA(),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"ng-select",16),e.NdJ("ngModelChange",function(s){e.CHM(a);const c=e.oxw();return e.KtG(c.fromCarParkId=s)})("ngModelChange",function(s){e.CHM(a);const c=e.oxw();return e.KtG(c.changeCompareCarPark(s))}),e.qZA()(),e.TgZ(9,"div",14)(10,"label",17)(11,"span",15),e._uU(12,"*"),e.qZA(),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"ng-select",18),e.NdJ("ngModelChange",function(s){e.CHM(a);const c=e.oxw();return e.KtG(c.timeRangeType=s)}),e.qZA()()(),e.TgZ(16,"div",19)(17,"div",14)(18,"label")(19,"span",15),e._uU(20,"*"),e.qZA(),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"app-datepicker",20),e.NdJ("select",function(s){e.CHM(a);const c=e.oxw();return e.KtG(c.changeFromTime(s))}),e.qZA()(),e.TgZ(24,"div",14)(25,"label"),e._uU(26," \xa0 "),e.qZA(),e.TgZ(27,"app-datepicker",20),e.NdJ("select",function(s){e.CHM(a);const c=e.oxw();return e.KtG(c.changeToTime(s))}),e.qZA()()()()}if(2&o){const a=e.oxw();e.xp6(6),e.hij(" ",e.lcZ(7,13,"Car Park"),": "),e.xp6(2),e.Q6J("items",a.fromCarParks)("ngModel",a.fromCarParkId),e.xp6(5),e.hij(" ",e.lcZ(14,15,"View By"),": "),e.xp6(2),e.Q6J("items",a.timeRangeOptions)("clearable",!1)("searchable",!1)("ngModel",a.timeRangeType),e.xp6(6),e.hij(" ",e.lcZ(22,17,"Time Range"),": "),e.xp6(2),e.Q6J("type",a.timeRangeType)("data",a.timeRange.value[0]),e.xp6(4),e.Q6J("type",a.timeRangeType)("data",a.timeRange.value[1])}}function t(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div")(1,"div",5)(2,"div",14)(3,"label")(4,"span",15),e._uU(5,"*"),e.qZA(),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"ng-select",21),e.NdJ("ngModelChange",function(s){e.CHM(a);const c=e.oxw();return e.KtG(c.fromCarParkId=s)})("ngModelChange",function(s){e.CHM(a);const c=e.oxw();return e.KtG(c.changeCompareCarPark(s))}),e.qZA()(),e.TgZ(9,"div",14)(10,"label",17),e._uU(11," \xa0 "),e.qZA(),e.TgZ(12,"ng-select",21),e.NdJ("ngModelChange",function(s){e.CHM(a);const c=e.oxw();return e.KtG(c.toCarParkId=s)})("ngModelChange",function(s){e.CHM(a);const c=e.oxw();return e.KtG(c.changeCompareCarPark(s))}),e.qZA()()(),e.TgZ(13,"div",19)(14,"div",14)(15,"label")(16,"span",15),e._uU(17,"*"),e.qZA(),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"app-datepicker-tab",22),e.NdJ("select",function(s){e.CHM(a);const c=e.oxw();return e.KtG(c.changeTimeRange(s))}),e.qZA()()()()}if(2&o){const a=e.oxw();e.xp6(6),e.hij(" ",e.lcZ(7,7,"Car Parks"),": "),e.xp6(2),e.Q6J("items",a.fromCarParks)("ngModel",a.fromCarParkId),e.xp6(4),e.Q6J("items",a.toCarParks)("ngModel",a.toCarParkId),e.xp6(6),e.hij(" ",e.lcZ(19,9,"Time Range"),": "),e.xp6(2),e.Q6J("data",a.timeRange)}}var x=(()=>{return(o=x||(x={})).Time="time",o.CarPark="carpark",x;var o})();let U=(()=>{class o{constructor(a,n,s){this.carparkService=a,this.modalRef=n,this.translate=s,this.comparisonType=x.Time,this.carParks=[],this.cancel=new e.vpe,this.submit=new e.vpe,this.fromCarParkId=null,this.toCarParkId=null,this.timeRange={value:[h.ou.local().minus({months:1}).toJSDate(),new Date],type:r.Nxg.Month},this.comparisonTypeOptions=[{value:x.Time,text:"By Time"},{value:x.CarPark,text:"By Car Park"}],this.timeRangeOptions=r.e8f.slice(1)}get timeRangeType(){return this.timeRange.type}set timeRangeType(a){this.timeRange={...this.timeRange,type:a}}reloadCarParkOptions(){this.fromCarParks=this.carParks.filter(a=>a.id!==this.toCarParkId),this.toCarParks=this.carParks.filter(a=>a.id!==this.fromCarParkId)}changeCompareCarPark(){this.reloadCarParkOptions()}changeComparisonType(a){this.comparisonType=a}changeTimeRange(a){this.timeRange=a}changeFromTime(a){this.timeRange={type:this.timeRangeType,value:[a,this.timeRange.value[1]]}}changeToTime(a){this.timeRange={type:this.timeRangeType,value:[this.timeRange.value[0],a]}}onCancel(){this.cancel.emit()}onSubmit(){this.submit.emit({comparisonType:this.comparisonType,fromCarParkId:this.fromCarParkId,toCarParkId:this.toCarParkId,fromDate:this.timeRange.value[0].toISOString(),toDate:this.timeRange.value[1].toISOString(),rangeType:this.timeRange.type})}ngOnInit(){this.carparkService.getSimpleList().subscribe(s=>{this.carParks=s,this.fromCarParkId=this.carParks[0]?this.carParks[0].id:null,this.toCarParkId=this.carParks[1]?this.carParks[1].id:null,this.reloadCarParkOptions()});const a=this.timeRangeOptions.map(s=>s.text);this.translate.get(a).subscribe(s=>{this.timeRangeOptions.forEach(c=>{for(let C in s)s.hasOwnProperty(C)&&c.text===C&&(c.text=s[C])})});const n=this.comparisonTypeOptions.map(s=>s.text);this.translate.get(n).subscribe(s=>{this.comparisonTypeOptions.forEach(c=>{for(let C in s)s.hasOwnProperty(C)&&c.text===C&&(c.text=s[C])})})}}return o.\u0275fac=function(a){return new(a||o)(e.Y36(P.x),e.Y36(M.UZ),e.Y36(E.sK))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-compare-form"]],inputs:{comparisonType:"comparisonType",carParks:"carParks"},outputs:{cancel:"cancel",submit:"submit"},decls:19,vars:12,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","m-form__group","row"],["class","col-6",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"modal-body","text-right","border-top"],["type","reset",1,"btn","btn-outline-main",3,"click"],["type","reset",1,"btn","btn-main","m--margin-left-30",3,"click"],[1,"col-6"],[1,"m-radio","m-radio--state-brand"],["type","radio","name","compare-type",3,"checked","click"],[1,"col-lg-6"],[1,"m--font-danger"],["bindLabel","name","bindValue","id",3,"items","ngModel","ngModelChange"],[1,""],["bindLabel","text","bindValue","value",3,"items","clearable","searchable","ngModel","ngModelChange"],[1,"row"],[3,"type","data","select"],["bindLabel","name","bindValue","id",1,"rounded",3,"items","ngModel","ngModelChange"],["containerClass","m-input",3,"data","select"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return n.onCancel()}),e.TgZ(5,"span",3),e._uU(6,"\xd7"),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5),e.YNc(9,w,5,2,"div",6),e.qZA(),e.YNc(10,y,28,19,"div",7),e.YNc(11,t,21,11,"div",7),e.qZA(),e.TgZ(12,"div",8)(13,"button",9),e.NdJ("click",function(){return n.onCancel()}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"button",10),e.NdJ("click",function(){return n.onSubmit()}),e._uU(17),e.ALo(18,"translate"),e.qZA()()),2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,6,"Make Comparison")," "),e.xp6(7),e.Q6J("ngForOf",n.comparisonTypeOptions),e.xp6(1),e.Q6J("ngIf","time"==n.comparisonType),e.xp6(1),e.Q6J("ngIf","carpark"==n.comparisonType),e.xp6(3),e.hij(" ",e.lcZ(15,8,"Cancel")," "),e.xp6(3),e.hij(" ",e.lcZ(18,10,"Next")," "))},dependencies:[f.sg,f.O5,k.JJ,k.On,Z.C,O.K,b.w9,E.X$],encapsulation:2}),o})();var p=d(34793),g=d(77407),D=d(76916),N=d(38231),Y=d(40269),$=d(34523),ce=d(95369),K=d(37340),j=d(97640),le=d(29132),ee=d(10100),ie=d(58663),pe=d(53831),de=d(25141),he=d(53525),ne=d(68210),V=d(24657),me=d(65200),ge=d(44147),ue=d(85909);const _e=["tooltipTemplate"],ve=["seriesTooltipTemplate"];function xe(o,_){if(1&o){const a=e.EpF();e.O4$(),e.TgZ(0,"g",8),e.NdJ("dimensionsChanged",function(s){e.CHM(a);const c=e.oxw();return e.KtG(c.updateXAxisHeight(s))}),e.qZA()}if(2&o){const a=e.oxw();e.Q6J("xScale",a.xScale)("dims",a.dims)("showLabel",a.showXAxisLabel)("labelText",a.xAxisLabel)("tickFormatting",a.xAxisTickFormatting)}}function fe(o,_){if(1&o){const a=e.EpF();e.O4$(),e.TgZ(0,"g",9),e.NdJ("dimensionsChanged",function(s){e.CHM(a);const c=e.oxw();return e.KtG(c.updateYAxisWidth(s))}),e.qZA()}if(2&o){const a=e.oxw();e.Q6J("yScale",a.yScale)("dims",a.dims)("yOrient",a.yOrientLeft)("showGridLines",a.showGridLines)("showLabel",a.showYAxisLabel)("labelText",a.yAxisLabel)("tickFormatting",a.yAxisTickFormatting)}}function ye(o,_){if(1&o){const a=e.EpF();e.O4$(),e.TgZ(0,"g")(1,"g",10),e.NdJ("bandwidth",function(s){e.CHM(a);const c=e.oxw();return e.KtG(c.updateLineWidth(s))})("select",function(s){const C=e.CHM(a).$implicit,I=e.oxw();return e.KtG(I.onClick(s,C))})("activate",function(s){const C=e.CHM(a).$implicit,I=e.oxw();return e.KtG(I.onActivate(s,C))})("deactivate",function(s){const C=e.CHM(a).$implicit,I=e.oxw();return e.KtG(I.onDeactivate(s,C))})("dataLabelHeightChanged",function(s){const C=e.CHM(a).index,I=e.oxw();return e.KtG(I.onDataLabelMaxHeightChanged(s,C))}),e.qZA()()}if(2&o){const a=_.$implicit,n=e.oxw();e.Q6J("@animationState","active"),e.uIk("transform",n.groupTransform(a)),e.xp6(1),e.Q6J("xScale",n.xScale)("yScale",n.yScale)("activeEntries",n.activeEntries)("colors",n.colors)("series",a.series)("dims",n.dims)("gradient",n.gradient)("tooltipDisabled",n.tooltipDisabled)("tooltipTemplate",n.tooltipTemplate)("showDataLabel",n.showDataLabel)("dataLabelFormatting",n.dataLabelFormatting)("seriesName",a.name)("animations",n.animations)}}function be(o,_){if(1&o&&(e.O4$(),e.TgZ(0,"g"),e._UZ(1,"g",11),e.qZA()),2&o){const a=_.$implicit,n=e.oxw();e.xp6(1),e.Q6J("xScale",n.xScaleLine)("yScale",n.yScaleLine)("colors",n.colorsLine)("data",a)("activeEntries",n.activeEntries)("scaleType",n.scaleType)("curve",n.curve)("rangeFillOpacity",n.rangeFillOpacity)("animations",n.animations)}}function Ce(o,_){if(1&o){const a=e.EpF();e.O4$(),e.TgZ(0,"g",12),e.NdJ("hover",function(s){e.CHM(a);const c=e.oxw();return e.KtG(c.updateHoveredVertical(s))})("onClick",function(s){e.CHM(a);const c=e.oxw();return e.KtG(c.onClickTooltip(s))}),e.qZA()}if(2&o){const a=e.oxw();e.Q6J("dims",a.dims)("xSet",a.xSet)("xScale",a.xScaleLine)("yScale",a.yScaleLine)("results",a.combinedSeries)("colors",a.colorsLine)("tooltipDisabled",a.tooltipDisabled)}}function ke(o,_){if(1&o){const a=e.EpF();e.O4$(),e.TgZ(0,"g")(1,"g",13),e.NdJ("select",function(s){const C=e.CHM(a).$implicit,I=e.oxw();return e.KtG(I.onClick(s,C))})("activate",function(s){e.CHM(a);const c=e.oxw();return e.KtG(c.onActivate(s))})("deactivate",function(s){e.CHM(a);const c=e.oxw();return e.KtG(c.onDeactivate(s))}),e.qZA()()}if(2&o){const a=_.$implicit,n=e.oxw();e.xp6(1),e.Q6J("xScale",n.xScaleLine)("yScale",n.yScaleLine)("colors",n.colorsLine)("data",a)("scaleType",n.scaleType)("visibleValue",n.hoveredVertical)("activeEntries",n.activeEntries)("tooltipDisabled",n.tooltipDisabled)}}const Te=function(o,_){return[o,_]};let De=(()=>{class o extends j.ep{constructor(){super(...arguments),this.curve=pe.Z,this.legend=!1,this.legendTitle="Legend",this.tooltipDisabled=!1,this.showGridLines=!0,this.activeEntries=[],this.roundDomains=!1,this.animations=!0,this.barPadding=8,this.activate=new e.vpe,this.deactivate=new e.vpe,this.margin=[10,20,10,20],this.xAxisHeight=0,this.yAxisWidth=0,this.scaleType="linear",this.yOrientLeft="left",this.yOrientRight="right",this.legendSpacing=0}trackBy(a,n){return n.name}update(){super.update(),this.dims=(0,j.iG)({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.schemeType}),this.legendSpacing=this.yAxis?this.showYAxisLabel&&this.yAxis?100:40:0,this.groupDomain=this.getGroupDomain(),this.innerDomain=this.getInnerDomain(),this.valueDomain=this.getValueDomain(),this.xScale=this.getXScale(),this.yScale=this.getYScale(),this.xDomainLine=this.getXDomainLine(),this.filteredDomain&&(this.xDomainLine=this.filteredDomain),this.yDomainLine=this.getYDomainLine(),this.seriesDomain=this.getSeriesDomain(),this.xScaleLine=this.getXScaleLine(this.xDomainLine,this.dims.width),this.yScaleLine=this.yScale,this.setColors(),this.legendOptions=this.getLegendOptions(),this.transform=`translate(${this.dims.xOffset} , ${this.margin[0]})`}getGroupDomain(){const a=[];for(const n of this.results)a.includes(n.name)||a.push(n.name);return a}getInnerDomain(){const a=[];for(const n of this.results)for(const s of n.series)a.includes(s.name)||a.push(s.name);return a}getValueDomain(){const a=[];let n=0,s=0;for(const I of this.results){let z=0,ae=0;for(const q of I.series)q.value<0?z+=q.value:ae+=q.value,n=q.value<n?q.value:n,s=q.value>s?q.value:s;a.push(z),a.push(ae)}return a.push(n),a.push(s),[Math.min(0,...a),this.yScaleMax?Math.max(this.yScaleMax,...a):Math.max(...a)]}deactivateAll(){this.activeEntries=[...this.activeEntries];for(const a of this.activeEntries)this.deactivate.emit({value:a,entries:[]});this.activeEntries=[]}hideCircles(){this.hoveredVertical=null,this.deactivateAll()}updateHoveredVertical(a){this.hoveredVertical=a.value,this.deactivateAll()}updateDomain(a){this.filteredDomain=a,this.xDomainLine=this.filteredDomain,this.xScaleLine=this.getXScaleLine(this.xDomainLine,this.dims.width)}getSeriesDomain(){const a=this.results[0]?this.results[0].series.map(n=>({series:this.results.map(c=>{const C=c.series.find(I=>I.name===n.name);return{name:c.name,value:C?C.value:0}}),name:n.name})):[];return this.combinedSeries=this.lineChart.slice(0).concat(a),this.combinedSeries.map(n=>n.name)}isDate(a){return a instanceof Date}getScaleType(a){let n=!0,s=!0;for(const c of a)this.isDate(c)||(n=!1),"number"!=typeof c&&(s=!1);return n?"time":s?"linear":"ordinal"}getXDomainLine(){let a=[];for(const s of this.lineChart)for(const c of s.series)a.includes(c.name)||a.push(c.name);this.scaleType=this.getScaleType(a);let n=[];return"time"===this.scaleType?n=[Math.min(...a),Math.max(...a)]:"linear"===this.scaleType?(a=a.map(Number),n=[Math.min(...a),Math.max(...a)]):n=a,this.xSet=a,n}getYDomainLine(){const a=[];for(const c of this.lineChart)for(const C of c.series)a.indexOf(C.value)<0&&a.push(C.value),void 0!==C.min&&a.indexOf(C.min)<0&&a.push(C.min),void 0!==C.max&&a.indexOf(C.max)<0&&a.push(C.max);let n=Math.min(...a);const s=Math.max(...a);if(this.yRightAxisScaleFactor){const c=this.yRightAxisScaleFactor(n,s);return[Math.min(0,c.min),c.max]}return n=Math.min(0,n),[n,s]}getXScaleLine(a,n){let s;return void 0===this.bandwidth&&(this.bandwidth=this.dims.width-this.barPadding),"time"===this.scaleType?s=(0,le.Z)().range([0,n]).domain(a):"linear"===this.scaleType?(s=(0,ee.Z)().range([0,n]).domain(a),this.roundDomains&&(s=s.nice())):"ordinal"===this.scaleType&&(s=(0,ie.x)().range([this.bandwidth/2,n-this.bandwidth/2]).domain(a)),s}getYScaleLine(a,n){const s=(0,ee.Z)().range([n,0]).domain(a);return this.roundDomains?s.nice():s}getXScale(){const a=this.groupDomain.length/(this.dims.width/this.barPadding+1);return(0,ie.Z)().rangeRound([0,this.dims.width]).paddingInner(a).domain(this.groupDomain)}getYScale(){const a=(0,ee.Z)().range([this.dims.height,0]).domain(this.valueDomain);return this.roundDomains?a.nice():a}getXDomain(){return this.results.map(a=>a.name)}getYDomain(){const a=this.results.map(c=>c.value),n=Math.min(0,...a),s=Math.max(...a);if(this.yLeftAxisScaleFactor){const c=this.yLeftAxisScaleFactor(n,s);return[Math.min(0,c.min),c.max]}return[n,s]}onClick(a){this.select.emit(a)}setColors(){let a;a="ordinal"===this.schemeType?this.innerDomain:this.valueDomain,this.colors=new j.vH(this.scheme,this.schemeType,a,this.customColors),this.colorsLine=new j.vH(this.colorSchemeLine,this.schemeType,a,this.customColors)}getLegendOptions(){const a={scaleType:this.schemeType,colors:void 0,domain:[],title:void 0};return"ordinal"===a.scaleType?(a.domain=this.seriesDomain,a.colors=this.colorsLine,a.title=this.legendTitle):(a.domain=this.seriesDomain,a.colors=this.colors.scale),a}updateLineWidth(a){this.bandwidth=a}updateYAxisWidth({width:a}){this.yAxisWidth=a+20,this.update()}updateXAxisHeight({height:a}){this.xAxisHeight=a,this.update()}onActivate(a){this.activeEntries.findIndex(s=>s.name===a.name&&s.value===a.value&&s.series===a.series)>-1||(this.activeEntries=[a,...this.activeEntries],this.activate.emit({value:a,entries:this.activeEntries}))}onDeactivate(a){const n=this.activeEntries.findIndex(s=>s.name===a.name&&s.value===a.value&&s.series===a.series);this.activeEntries.splice(n,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:a,entries:this.activeEntries})}groupTransform(a){return`translate(${this.xScale(a.name)}, 0)`}onClickTooltip(a){this.select.emit({series:a})}}return o.\u0275fac=function(){let _;return function(n){return(_||(_=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["combo-chart-component"]],contentQueries:function(a,n,s){if(1&a&&(e.Suo(s,_e,5),e.Suo(s,ve,5)),2&a){let c;e.iGM(c=e.CRH())&&(n.tooltipTemplate=c.first),e.iGM(c=e.CRH())&&(n.seriesTooltipTemplate=c.first)}},viewQuery:function(a,n){if(1&a&&e.Gf(j.Bk,5),2&a){let s;e.iGM(s=e.CRH())&&(n.lineSeriesComponent=s.first)}},hostBindings:function(a,n){1&a&&e.NdJ("mouseleave",function(){return n.hideCircles()})},inputs:{curve:"curve",legend:"legend",legendTitle:"legendTitle",xAxis:"xAxis",yAxis:"yAxis",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",showRightYAxisLabel:"showRightYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",yAxisLabelRight:"yAxisLabelRight",tooltipDisabled:"tooltipDisabled",gradient:"gradient",showGridLines:"showGridLines",activeEntries:"activeEntries",schemeType:"schemeType",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",yRightAxisTickFormatting:"yRightAxisTickFormatting",roundDomains:"roundDomains",yScaleMax:"yScaleMax",colorSchemeLine:"colorSchemeLine",autoScale:"autoScale",lineChart:"lineChart",yLeftAxisScaleFactor:"yLeftAxisScaleFactor",yRightAxisScaleFactor:"yRightAxisScaleFactor",rangeFillOpacity:"rangeFillOpacity",animations:"animations",barPadding:"barPadding"},outputs:{activate:"activate",deactivate:"deactivate"},features:[e.qOj],decls:10,vars:18,consts:[[3,"view","showLegend","legendOptions","activeEntries","animations","legendLabelClick","legendLabelActivate","legendLabelDeactivate"],[1,"bar-chart","chart"],["ngx-charts-x-axis","",3,"xScale","dims","showLabel","labelText","tickFormatting","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","yOrient","showGridLines","showLabel","labelText","tickFormatting","dimensionsChanged",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"line-chart","chart"],["ngx-charts-tooltip-area","",3,"dims","xSet","xScale","yScale","results","colors","tooltipDisabled","hover","onClick",4,"ngIf"],[4,"ngFor","ngForOf"],["ngx-charts-x-axis","",3,"xScale","dims","showLabel","labelText","tickFormatting","dimensionsChanged"],["ngx-charts-y-axis","",3,"yScale","dims","yOrient","showGridLines","showLabel","labelText","tickFormatting","dimensionsChanged"],["ngx-charts-series-vertical","","type","stacked",3,"xScale","yScale","activeEntries","colors","series","dims","gradient","tooltipDisabled","tooltipTemplate","showDataLabel","dataLabelFormatting","seriesName","animations","bandwidth","select","activate","deactivate","dataLabelHeightChanged"],["ngx-charts-line-series","",3,"xScale","yScale","colors","data","activeEntries","scaleType","curve","rangeFillOpacity","animations"],["ngx-charts-tooltip-area","",3,"dims","xSet","xScale","yScale","results","colors","tooltipDisabled","hover","onClick"],["ngx-charts-circle-series","",3,"xScale","yScale","colors","data","scaleType","visibleValue","activeEntries","tooltipDisabled","select","activate","deactivate"]],template:function(a,n){1&a&&(e.TgZ(0,"ngx-charts-chart",0),e.NdJ("legendLabelClick",function(c){return n.onClick(c)})("legendLabelActivate",function(c){return n.onActivate(c)})("legendLabelDeactivate",function(c){return n.onDeactivate(c)}),e.O4$(),e.TgZ(1,"g",1),e.YNc(2,xe,1,5,"g",2),e.YNc(3,fe,1,7,"g",3),e.YNc(4,ye,2,15,"g",4),e.qZA(),e.TgZ(5,"g",5)(6,"g"),e.YNc(7,be,2,9,"g",4),e.YNc(8,Ce,1,7,"g",6),e.YNc(9,ke,2,8,"g",7),e.qZA()()()),2&a&&(e.Q6J("view",e.WLB(15,Te,n.width+n.legendSpacing,n.height))("showLegend",n.legend)("legendOptions",n.legendOptions)("activeEntries",n.activeEntries)("animations",n.animations),e.xp6(1),e.uIk("transform",n.transform),e.xp6(1),e.Q6J("ngIf",n.xAxis),e.xp6(1),e.Q6J("ngIf",n.yAxis),e.xp6(1),e.Q6J("ngForOf",n.results)("ngForTrackBy",n.trackBy),e.xp6(1),e.uIk("transform",n.transform),e.xp6(2),e.Q6J("ngForOf",n.lineChart)("ngForTrackBy",n.trackBy),e.xp6(1),e.Q6J("ngIf",!n.tooltipDisabled&&(null==n.combinedSeries?null:n.combinedSeries.length)),e.xp6(1),e.Q6J("ngForOf",n.lineChart))},dependencies:[f.sg,f.O5,de.I,he.M,ne.s,V.x,me.g,ge.A,ue.B],styles:[".ngx-charts{float:left;overflow:visible}.ngx-charts .circle,.ngx-charts .bar,.ngx-charts .arc{cursor:pointer}.ngx-charts .bar.active,.ngx-charts .bar:hover,.ngx-charts .cell.active,.ngx-charts .cell:hover,.ngx-charts .arc.active,.ngx-charts .arc:hover,.ngx-charts .card.active,.ngx-charts .card:hover{opacity:.8;transition:opacity .1s ease-in-out}.ngx-charts .bar:focus,.ngx-charts .cell:focus,.ngx-charts .arc:focus,.ngx-charts .card:focus{outline:none}.ngx-charts g:focus{outline:none}.ngx-charts .line-series.inactive,.ngx-charts .line-series-range.inactive,.ngx-charts .area-series.inactive{transition:opacity .1s ease-in-out;opacity:.2}.ngx-charts .line-highlight{display:none}.ngx-charts .line-highlight.active{display:block}.ngx-charts .area{opacity:.6}.ngx-charts .circle:hover{cursor:pointer}.ngx-charts .label{font-size:12px;font-weight:400}.ngx-charts .tooltip-anchor{fill:#000}.ngx-charts .gridline-path{stroke:#ddd;stroke-width:1;fill:none}.ngx-charts .grid-panel rect{fill:none}.ngx-charts .grid-panel.odd rect{fill:#0000000d}\n"],encapsulation:2,data:{animation:[(0,K.X$)("animationState",[(0,K.eR)(":leave",[(0,K.oB)({opacity:1,transform:"*"}),(0,K.jt)(500,(0,K.oB)({opacity:0,transform:"scale(0)"}))])])]},changeDetection:0}),o})();d(9419),d(41003);var Ae=d(28100),se=d(34984),Oe=d(80646),Se=d(45823),Pe=d(58259);function Ze(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div",6)(1,"div",7),e.NdJ("click",function(s){const C=e.CHM(a).$implicit,I=e.oxw();return e.KtG(I.checkItem(s,C))}),e._uU(2),e.qZA(),e.TgZ(3,"input",8),e.NdJ("click",function(s){const C=e.CHM(a).$implicit,I=e.oxw();return e.KtG(I.clickItem(s,C))}),e.qZA()()}if(2&o){const a=_.$implicit;e.xp6(2),e.Oqu(a.name),e.xp6(1),e.Q6J("checked",a.value)}}const we=function(o){return{selectOpen:o}};let Le=(()=>{class o{constructor(){this.selListOut=new e.vpe}ngOnInit(){this.selected=[],this.selectName=[],this.selectItemList=[],this.isSelectOpen=!1,this.selectedName="All";let a=this;document.addEventListener("click",n=>{0==Pe(n.target).closest(".select-checkbox-div").length&&(a.isSelectOpen=!1)}),console.log(this.itemList)}clickSelect(){this.isSelectOpen=!this.isSelectOpen}checkItem(a,n){this.updateSelected(a.target.previousElementSibling.firstElementChild.checked?"remove":"add",n)}clickItem(a,n){this.updateSelected(a.target.checked?"add":"remove",n)}isCheck(a){return this.selected.findIndex(n=>n==a.id)>=0}updateSelected(a,n){"add"==a&&-1==this.selected.findIndex(s=>s==n.id)&&(this.selected.push(n.id),this.selectName.push(n.name)),"remove"==a&&-1!=this.selected.findIndex(s=>s==n.id)&&(this.selectName.splice(this.selected.findIndex(s=>s==n.id),1),this.selected.splice(this.selected.findIndex(s=>s==n.id),1)),this.selectedName=0===this.selectName.length?"All":this.selectName.join(","),this.selListOut.emit(n)}}return o.\u0275fac=function(a){return new(a||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["show-dashboard"]],inputs:{itemList:"itemList"},outputs:{selListOut:"selListOut"},decls:8,vars:4,consts:[[1,"select-checkbox-div",3,"ngClass"],[1,"select-checkbox-show","clear-float",3,"click"],[1,"fa-select"],[1,"select-checkbox-content"],[1,"select-checkbox-list"],["class","select-checkbox-item",4,"ngFor","ngForOf"],[1,"select-checkbox-item"],[1,"item-name",3,"click"],["type","checkbox",3,"checked","click"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){return n.clickSelect()}),e.TgZ(2,"span"),e._uU(3,"Show Dashbord"),e.qZA(),e._UZ(4,"i",2),e.qZA(),e.TgZ(5,"div",3)(6,"div",4),e.YNc(7,Ze,4,2,"div",5),e.qZA()()()),2&a&&(e.Q6J("ngClass",e.VKq(2,we,n.isSelectOpen)),e.xp6(7),e.Q6J("ngForOf",n.itemList))},dependencies:[f.mk,f.sg],styles:['input[type=radio][_ngcontent-%COMP%], input[type=checkbox][_ngcontent-%COMP%]{margin:0}.clear-float[_ngcontent-%COMP%]:after{content:"";display:block;clear:both}.select-checkbox-item[_ngcontent-%COMP%]:hover{background-color:#eee}.select-checkbox-item[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin:0 10px}.input-checkbox-div[_ngcontent-%COMP%]{float:left;height:18px;box-sizing:content-box}.input-checkbox-div[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{outline:none!important;-webkit-appearance:none;-moz-appearance:none;line-height:18px;vertical-align:top;margin:0;padding:10px}.input-checkbox-div[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:before{display:block}.input-checkbox-div[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked:before{display:block}.item-name[_ngcontent-%COMP%]{line-height:18px;padding:10px 0}.check-item[_ngcontent-%COMP%]{float:left;padding:1px 0 1px 10px;position:relative;border:1px solid #ccc;border-radius:4px;margin-right:5px}.check-close[_ngcontent-%COMP%]{float:right;width:20px;height:20px;line-height:1;padding:2px;box-sizing:border-box;background-color:#fff;cursor:pointer;text-align:center}.select-checkbox-div[_ngcontent-%COMP%]{width:200px;height:40px;background-color:#fff;border-radius:20px;position:relative}.select-checkbox-content[_ngcontent-%COMP%]{display:none;position:absolute;left:0;right:0;top:34px;max-height:300px;overflow-y:auto;overflow-x:hidden;background-color:#fff;border-color:#ccc;border-width:0 1px 1px 1px;border-style:solid;border-radius:0 0 4px 4px;z-index:10}.selectOpen[_ngcontent-%COMP%]   .select-checkbox-content[_ngcontent-%COMP%]{display:block}.selectOpen[_ngcontent-%COMP%]   .select-checkbox-show[_ngcontent-%COMP%]{border-width:1px 1px 0 1px;border-radius:20px 20px 0 0;border:1px solid #ccc}.select-checkbox-show[_ngcontent-%COMP%]{padding:6px 18px 6px 10px;border:none;border-radius:4px;width:100%;height:42px;position:relative;text-align:center;line-height:32px;cursor:pointer;-webkit-user-select:none;user-select:none}.fa-select[_ngcontent-%COMP%]{display:block;border-color:#888 transparent transparent transparent;border-style:solid;border-width:6px 5px 0 5px;right:5px;top:17px;position:absolute;z-index:10}.show-data[_ngcontent-%COMP%]{width:100%;overflow-y:hidden;overflow-x:auto;white-space:nowrap}.show-data[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;height:6px}.show-data[_ngcontent-%COMP%]::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,0);background-color:#00000003}.show-data[_ngcontent-%COMP%]::-webkit-scrollbar-track:hover{background-color:#00000003}.show-data[_ngcontent-%COMP%]::-webkit-scrollbar-track:active{background-color:#0000000d}.show-data[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#0003}.show-data[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{background-color:#0003}.show-data[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#0006}.show-data[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:active{background:rgba(0,0,0,.6)}.select-checkbox-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;height:6px}.select-checkbox-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,0);background-color:#00000003}.select-checkbox-content[_ngcontent-%COMP%]::-webkit-scrollbar-track:hover{background-color:#00000003}.select-checkbox-content[_ngcontent-%COMP%]::-webkit-scrollbar-track:active{background-color:#0000000d}.select-checkbox-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#0003}.select-checkbox-content[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{background-color:#0003}.select-checkbox-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#0006}.select-checkbox-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:active{background:rgba(0,0,0,.6)}']}),o})();var te=d(3927),re=d(27221),oe=d(26245),Me=d(80529),m=d(28555),A=d(91599);let i=(()=>{class o extends te.su{constructor(a,n,s){super(a,n),this.http=a,this.store=n,this.modelName="asset",this.baseUrl="scp-mg-devicemgt/status_tracking/findStatusTrackingByParam",this.handleError=s.createHandleError(`${this.modelName}Service`)}filterModel(a,n){const s=(0,oe.U8)(`${this.baseUrl}`,{...a,...(0,oe.jq)(n)});return this.get(this.getUrl(s)).pipe((0,re.K)(this.handleError(`${this.modelName}Filter`,{}))).map(c=>Array.isArray(c)?(0,te.eC)(c):(0,te.O7)(c))}}return o.\u0275fac=function(a){return new(a||o)(e.LFG(Me.eN),e.LFG(m.yh),e.LFG(A.k))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var l=d(52746),v=d(35635);function T(o,_){if(1&o&&e._uU(0),2&o){const a=_.range;e.lnq(" ",a[0],"-",a[1]," of ",_.$implicit," items ")}}function u(o,_){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&o){const a=_.$implicit;e.xp6(1),e.Oqu(a.text)}}function S(o,_){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA()()),2&o){const a=_.$implicit;e.ekj("ant-table-row-odd",_.index%2==1),e.xp6(2),e.Oqu(a.relKey),e.xp6(2),e.Oqu(a.status),e.xp6(2),e.Oqu(a.startTime),e.xp6(2),e.Oqu(a.endTime)}}let J=(()=>{class o extends l.t{constructor(a){super(),this.trackingService=a,this.tableHeaders=[{text:"RelKey",column:"relKey",width:"150px"},{text:"Status",column:"status",width:"150px"},{text:"StartTime",column:"startTime",width:"200px"},{text:"EndTime",column:"endTime",width:"200px"}],this.stake=""}get filterParams(){return{stake:this.stake}}ngOnInit(){this.reloadData()}pageChanged(a){this.pagination=a,this.reloadData()}reloadData(){this.reloadDataService(this.trackingService)}getTrackingData(a){this.stake=a,this.reloadData()}}return o.\u0275fac=function(a){return new(a||o)(e.Y36(i))},o.\u0275cmp=e.Xpm({type:o,selectors:[["downtime-tracking"]],features:[e._Bn([i]),e.qOj],decls:17,vars:11,consts:[[1,"m-portlet__frame"],[1,"form-group"],[1,"m-portlet__filter"],[1,"col-form-label","col-form-label-nowrap"],[1,"m-input-icon","m-input-icon--left"],["type","text","nz-input","","placeholder","Stake Key",3,"ngModel","ngModelChange"],["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowSizeChanger","nzShowTotal","nzQueryParams"],["basicTable",""],[4,"ngFor","ngForOf"],[3,"ant-table-row-odd",4,"ngFor","ngForOf"]],template:function(a,n){if(1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3)(4,"h5"),e._uU(5,"Stake Key:"),e.qZA()(),e.TgZ(6,"div",4)(7,"input",5),e.NdJ("ngModelChange",function(c){return n.stake=c})("ngModelChange",function(c){return n.getTrackingData(c)}),e.qZA()()()(),e.YNc(8,T,1,3,"ng-template",null,6,e.W1O),e.TgZ(10,"nz-table",7,8),e.NdJ("nzQueryParams",function(c){return n.onQueryParamsChange(c)}),e.TgZ(12,"thead")(13,"tr"),e.YNc(14,u,2,1,"th",9),e.qZA()(),e.TgZ(15,"tbody"),e.YNc(16,S,9,6,"tr",10),e.qZA()()()),2&a){const s=e.MAs(9),c=e.MAs(11);e.xp6(7),e.Q6J("ngModel",n.stake),e.xp6(3),e.Q6J("nzData",n.listData)("nzFrontPagination",!1)("nzLoading",n.loading)("nzTotal",n.pagination.totalCount)("nzPageSize",n.pagination.rowsPerPage)("nzPageIndex",n.pagination.page)("nzShowSizeChanger",!0)("nzShowTotal",s),e.xp6(4),e.Q6J("ngForOf",n.tableHeaders),e.xp6(2),e.Q6J("ngForOf",c.data)}},dependencies:[f.sg,v.Zp,Y.N8,Y.Uo,Y._C,Y.Om,Y.p0,Y.$Z,k.Fj,k.JJ,k.On]}),o})();var X=d(53033);const W=["barChartElement"];function Qe(o,_){if(1&o&&e._UZ(0,"nz-option",27),2&o){const a=_.$implicit;e.Q6J("nzValue",a.id)("nzLabel",a.name)}}function qe(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div")(1,"div",28)(2,"button",29),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.showItem("totalBoard",s.showDashbord.totalBoard))}),e._UZ(3,"i",30),e.qZA()(),e.TgZ(4,"div",31)(5,"div",32)(6,"div",33)(7,"div",34)(8,"div",35)(9,"div",36),e._uU(10," Total Transactions "),e.qZA(),e.TgZ(11,"div",37),e._uU(12),e.qZA()()()()(),e.TgZ(13,"div",38)(14,"div",33)(15,"div",34)(16,"div",35)(17,"div",36),e._uU(18," Total Revenue "),e.qZA(),e.TgZ(19,"div",39),e._uU(20),e.ALo(21,"excurrency"),e.ALo(22,"number"),e.qZA()()()()(),e.TgZ(23,"div",32)(24,"div",19)(25,"div",34)(26,"div",35)(27,"div",36),e._uU(28," Average Occupancy "),e.qZA(),e.TgZ(29,"div",40),e._uU(30),e.ALo(31,"number"),e.qZA()()()()(),e.TgZ(32,"div",38)(33,"div",19)(34,"div",41)(35,"div",35)(36,"div",42),e._uU(37," Hourly Revenue "),e.qZA(),e.TgZ(38,"div",39),e._uU(39),e.ALo(40,"excurrency"),e.ALo(41,"number"),e.qZA(),e.TgZ(42,"div",42),e._uU(43," Season Revenue "),e.qZA(),e.TgZ(44,"div",37),e._uU(45),e.ALo(46,"excurrency"),e.ALo(47,"number"),e.qZA()()()()()()()}if(2&o){const a=e.oxw();e.Gre("m--padding-right-10 flex-column ",a.showDashbord.parking?"col-lg-6":"col-lg-12",""),e.xp6(12),e.hij(" ",a.overallStatistic?a.overallStatistic.totalTransactions:0," "),e.xp6(8),e.hij(" ",a.overallStatistic?e.xi3(21,8,e.xi3(22,11,a.overallStatistic.totalRevenue.amount,"1.2"),a.overallStatistic.totalRevenue.currency):0," "),e.xp6(10),e.hij(" ",a.overallStatistic?e.lcZ(31,14,a.overallStatistic.averageOccupancy):0," % "),e.xp6(9),e.hij(" ",a.overallStatistic?e.xi3(40,16,e.xi3(41,19,a.overallStatistic.hourlyRevenue.amount,"1.2"),a.overallStatistic.hourlyRevenue.currency):0," "),e.xp6(6),e.hij(" ",a.overallStatistic?e.xi3(46,22,e.xi3(47,25,a.overallStatistic.seasonRevenue.amount,"1.2"),a.overallStatistic.seasonRevenue.currency):0," ")}}function ze(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div")(1,"div",28)(2,"button",29),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.showItem("parking",s.showDashbord.parking))}),e._UZ(3,"i",30),e.qZA()(),e.TgZ(4,"div",31)(5,"div",43)(6,"div",44)(7,"div",20)(8,"div",21)(9,"div",45)(10,"h3",23),e._uU(11," Parking Vehicle Type "),e.qZA()()()(),e.TgZ(12,"div"),e._UZ(13,"app-pie-chart",46),e.qZA()()(),e.TgZ(14,"div",43)(15,"div",47)(16,"div",20)(17,"div",21)(18,"div",45)(19,"h3",23),e._uU(20," Parking Duration "),e.qZA()()()(),e.TgZ(21,"div"),e._UZ(22,"app-pie-chart",46),e.qZA()()()()()}if(2&o){const a=e.oxw();e.Gre("",a.showDashbord.totalBoard?"col-lg-6":"col-lg-12"," flex-column"),e.xp6(13),e.Q6J("view",a.chartView)("results",a.parkingVehicleTypes)("displayLegend",a.displayPercentLegend),e.xp6(9),e.Q6J("view",a.chartView)("results",a.parkingDurations)("displayLegend",a.displayPercentLegend)}}function $e(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div")(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"h3",48),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",24),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.showItem("status",s.showDashbord.status))}),e._UZ(9,"i",30),e.qZA()()()(),e.TgZ(10,"div",34)(11,"div",49),e._UZ(12,"div",50),e.qZA()()()()}if(2&o){const a=e.oxw();e.Gre("",a.showDashbord.analysis?"col-lg-6":"col-lg-12"," m--padding-right-10"),e.xp6(6),e.hij(" ",e.lcZ(7,5,"EV Charging Status")," "),e.xp6(6),e.Q6J("options",a.option)}}function Ge(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div")(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"h3",23),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",24),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.showItem("analysis",s.showDashbord.analysis))}),e._UZ(9,"i",30),e.qZA()()()(),e.TgZ(10,"div",34)(11,"div",49)(12,"div",51),e._UZ(13,"div",50),e.qZA()()()()()}if(2&o){const a=e.oxw();e.Gre("",a.showDashbord.status?"col-lg-6":"col-lg-12"," m--padding-right-10"),e.xp6(6),e.hij(" ",e.lcZ(7,5,"EV Charging Analysis")," "),e.xp6(7),e.Q6J("options",a.analysisOption)}}function Be(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div")(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"h3",48),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",24),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.showItem("status",s.showDashbord.status))}),e._UZ(9,"i",30),e.qZA()()()(),e.TgZ(10,"div",34)(11,"div",49),e._UZ(12,"div",50),e.qZA()()()()}if(2&o){const a=e.oxw();e.Gre("",a.showDashbord.analysis?"col-lg-6":"col-lg-12"," m--padding-right-10"),e.xp6(6),e.hij(" ",e.lcZ(7,5,"Top 5 Carparks with Most Parking Defaulters")," "),e.xp6(6),e.Q6J("options",a.defaultersOption)}}function Ve(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div")(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"h3",23),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",24),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.showItem("analysis",s.showDashbord.analysis))}),e._UZ(9,"i",30),e.qZA()()()(),e.TgZ(10,"div",34)(11,"div",49)(12,"div",51),e._UZ(13,"div",50),e.qZA()()()()()}if(2&o){const a=e.oxw();e.Gre("",a.showDashbord.status?"col-lg-6":"col-lg-12"," m--padding-right-10"),e.xp6(6),e.hij(" ",e.lcZ(7,5,"Top 10 Carpark with Highest Revenue leakages")," "),e.xp6(7),e.Q6J("options",a.leakageOption)}}function Ke(o,_){if(1&o&&(e.ynx(0),e.TgZ(1,"tr",63)(2,"td",64),e._uU(3),e.qZA(),e.TgZ(4,"td",65),e._uU(5),e.qZA(),e.TgZ(6,"td",65),e._uU(7),e.qZA()(),e.BQk()),2&o){const a=_.$implicit;e.xp6(3),e.hij(" ",a.timestamp," "),e.xp6(2),e.hij(" ",a.vehicle," "),e.xp6(2),e.hij(" ",a.Frequented," ")}}function je(o,_){if(1&o&&(e.TgZ(0,"div",57)(1,"div",49)(2,"table",58)(3,"thead",59)(4,"tr",60)(5,"th",61),e._uU(6," Timestamp "),e.qZA(),e.TgZ(7,"th",61),e._uU(8," Vehicle Plate "),e.qZA(),e.TgZ(9,"th",61),e._uU(10," Frequented "),e.qZA()()(),e.TgZ(11,"tbody"),e.YNc(12,Ke,8,3,"ng-container",62),e.qZA()()()()),2&o){const a=e.oxw(2);e.xp6(12),e.Q6J("ngForOf",a.watchlist)}}function We(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div",52)(1,"div",53)(2,"div",54)(3,"div",21)(4,"div",22)(5,"h3",23),e._uU(6," Top 10 Vehicle in Watchlist "),e.qZA(),e.TgZ(7,"button",55),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.showItem("carparkOccupancy",s.showDashbord.carparkOccupancy))}),e._UZ(8,"i",30),e.qZA(),e.TgZ(9,"button",24),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.parkingOccupancy.hidden=!s.parkingOccupancy.hidden)}),e._UZ(10,"i"),e.qZA()()()(),e.YNc(11,je,13,1,"div",56),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(10),e.Gre("la ",a.parkingOccupancy.hidden?"la-arrows":"la-minus-square",""),e.xp6(1),e.Q6J("ngIf",!a.parkingOccupancy.hidden)}}function Xe(o,_){if(1&o&&e._UZ(0,"app-chart-legend",73),2&o){const a=e.oxw(3);e.Q6J("data",a.occupancyLegend)("display",a.lineLegend)("horizontal",!0)("colors",a.occupancyColorScheme.domain)}}function et(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"combo-chart-component",74),e.NdJ("select",function(s){e.CHM(a);const c=e.oxw(3);return e.KtG(c.selectOccupancy(s))}),e.qZA()}if(2&o){const a=e.oxw(3);e.Q6J("scheme",a.occupancyColorScheme)("results",a.parkingOccupancy.parkingOccupancy)("lineChart",a.parkingOccupancy.lines)("colorSchemeLine",a.parkingOccupancy.lineSchema)("gradient",!1)("xAxis",!0)("yAxis",!0)("barPadding",a.parkingOccupancy.barPadding)("yScaleMax",a.parkingOccupancy.maxYAxisOccupancy)}}function tt(o,_){if(1&o&&e._UZ(0,"ngx-charts-bar-vertical-stacked",75),2&o){const a=e.oxw(3);e.Q6J("scheme",a.occupancyColorScheme)("results",a.parkingOccupancy.parkingOccupancyAverage)("gradient",!1)("xAxis",!0)("yAxis",!0)("barPadding",a.parkingOccupancy.barPadding)("yScaleMax",a.parkingOccupancy.maxYAxisOccupancy)}}function at(o,_){if(1&o&&(e.TgZ(0,"div",34)(1,"div",49),e.YNc(2,Xe,1,4,"app-chart-legend",67),e.TgZ(3,"div",68)(4,"div",51,69),e.YNc(6,et,1,9,"combo-chart-component",70),e.qZA(),e.TgZ(7,"div",71),e.YNc(8,tt,1,7,"ngx-charts-bar-vertical-stacked",72),e.qZA()()()()),2&o){const a=e.oxw(2);e.xp6(2),e.Q6J("ngIf",a.parkingOccupancy.parkingOccupancy),e.xp6(4),e.Q6J("ngIf",a.parkingOccupancy.parkingOccupancy),e.xp6(2),e.Q6J("ngIf",a.parkingOccupancy.parkingOccupancyAverage)}}function it(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div",66)(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"h3",23),e._uU(6," Car Park Occupancy "),e.qZA(),e.TgZ(7,"button",55),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.showItem("carparkOccupancy",s.showDashbord.carparkOccupancy))}),e._UZ(8,"i",30),e.qZA(),e.TgZ(9,"button",24),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.parkingOccupancy.hidden=!s.parkingOccupancy.hidden)}),e._UZ(10,"i"),e.qZA()()()(),e.YNc(11,at,9,3,"div",25),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(10),e.Gre("la ",a.parkingOccupancy.hidden?"la-arrows":"la-minus-square",""),e.xp6(1),e.Q6J("ngIf",!a.parkingOccupancy.hidden)}}function nt(o,_){if(1&o&&e._UZ(0,"app-chart-legend",73),2&o){const a=e.oxw(3);e.Q6J("data",a.dailyOccupancyLegend)("display",a.lineLegend)("horizontal",!0)("colors",a.occupancyColorScheme.domain)}}function st(o,_){if(1&o&&e._UZ(0,"combo-chart-component",77),2&o){const a=e.oxw(3);e.Q6J("scheme",a.occupancyColorScheme)("results",a.dailyOccupancy.parkingOccupancy)("lineChart",a.dailyOccupancy.lines)("colorSchemeLine",a.dailyOccupancy.lineSchema)("gradient",!1)("xAxis",!0)("yAxis",!0)("barPadding",a.dailyOccupancy.barPadding)("yScaleMax",a.dailyOccupancy.maxYAxisOccupancy)}}function rt(o,_){if(1&o&&e._UZ(0,"ngx-charts-bar-vertical-stacked",75),2&o){const a=e.oxw(3);e.Q6J("scheme",a.occupancyColorScheme)("results",a.dailyOccupancy.parkingOccupancyAverage)("gradient",!1)("xAxis",!0)("yAxis",!0)("barPadding",a.dailyOccupancy.barPadding)("yScaleMax",a.dailyOccupancy.maxYAxisOccupancy)}}function ot(o,_){if(1&o&&(e.TgZ(0,"div",34)(1,"div",49),e.YNc(2,nt,1,4,"app-chart-legend",67),e.TgZ(3,"div",68)(4,"div",51),e.YNc(5,st,1,9,"combo-chart-component",76),e.qZA(),e.TgZ(6,"div",71),e.YNc(7,rt,1,7,"ngx-charts-bar-vertical-stacked",72),e.qZA()()()()),2&o){const a=e.oxw(2);e.xp6(2),e.Q6J("ngIf",a.dailyOccupancy.parkingOccupancy),e.xp6(3),e.Q6J("ngIf",null==a.dailyOccupancy.parkingOccupancy?null:a.dailyOccupancy.parkingOccupancy.length),e.xp6(2),e.Q6J("ngIf",null==a.dailyOccupancy.parkingOccupancyAverage?null:a.dailyOccupancy.parkingOccupancyAverage.length)}}function ct(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div",66)(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"h3",23),e._uU(6),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"button",55),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.showItem("dailyOccupancy",s.showDashbord.dailyOccupancy))}),e._UZ(9,"i",30),e.qZA(),e.TgZ(10,"button",24),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.dailyOccupancy.hidden=!s.dailyOccupancy.hidden)}),e._UZ(11,"i"),e.qZA()()()(),e.YNc(12,ot,8,3,"div",25),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(6),e.hij(" Daily Occupancy - ",e.xi3(7,5,a.dailyOccupancy.date,"d MMM")," "),e.xp6(5),e.Gre("la ",a.dailyOccupancy.hidden?"la-arrows":"la-minus-square",""),e.xp6(1),e.Q6J("ngIf",!a.dailyOccupancy.hidden)}}function lt(o,_){if(1&o&&e._UZ(0,"app-chart-legend",73),2&o){const a=e.oxw(3);e.Q6J("data",a.maxNormalSeasonalLots.occupancyLegend)("display",a.lineLegend)("horizontal",!0)("colors",a.occupancyColorScheme.domain)}}function pt(o,_){if(1&o&&e._UZ(0,"app-charts-bar-vertical-2d",80),2&o){const a=e.oxw(3);e.Q6J("scheme",a.occupancyColorScheme)("results",a.maxNormalSeasonalLots.parkingOccupancy)("gradient",!1)("xAxis",!0)("groupPadding",3)("yScaleMax",a.maxNormalSeasonalLots.maxYAxisOccupancy)("yAxis",!0)("showRefLines",!0)("showRefLabels",!1)("referenceLines",a.maxNormalSeasonalLots.referenceLines)}}function dt(o,_){if(1&o&&e._UZ(0,"app-charts-bar-vertical-2d",81),2&o){const a=e.oxw(3);e.Q6J("scheme",a.occupancyColorScheme)("results",a.maxNormalSeasonalLots.parkingOccupancyAverage)("gradient",!1)("xAxis",!0)("yAxis",!0)("groupPadding",a.maxNormalSeasonalLots.barPadding)("yScaleMax",a.maxNormalSeasonalLots.maxYAxisOccupancy)("showRefLines",!0)("showRefLabels",!1)("referenceLines",a.maxNormalSeasonalLots.referenceLines)}}function ht(o,_){if(1&o&&(e.TgZ(0,"div",34)(1,"div",49),e.YNc(2,lt,1,4,"app-chart-legend",67),e.TgZ(3,"div",68)(4,"div",51),e.YNc(5,pt,1,10,"app-charts-bar-vertical-2d",78),e.qZA(),e.TgZ(6,"div",71),e.YNc(7,dt,1,10,"app-charts-bar-vertical-2d",79),e.qZA()()()()),2&o){const a=e.oxw(2);e.xp6(2),e.Q6J("ngIf",a.maxNormalSeasonalLots.parkingOccupancy),e.xp6(3),e.Q6J("ngIf",null==a.maxNormalSeasonalLots.parkingOccupancy?null:a.maxNormalSeasonalLots.parkingOccupancy.length),e.xp6(2),e.Q6J("ngIf",null==a.maxNormalSeasonalLots.parkingOccupancyAverage?null:a.maxNormalSeasonalLots.parkingOccupancyAverage.length)}}function mt(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div",66)(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"h3",23),e._uU(6," Max Normal/Seasonal Lots Occupancy "),e.qZA(),e.TgZ(7,"button",55),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.showItem("seasonal",s.showDashbord.seasonal))}),e._UZ(8,"i",30),e.qZA(),e.TgZ(9,"button",24),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.maxNormalSeasonalLots.hidden=!s.maxNormalSeasonalLots.hidden)}),e._UZ(10,"i"),e.qZA()()()(),e.YNc(11,ht,8,3,"div",25),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(10),e.Gre("la ",a.maxNormalSeasonalLots.hidden?"la-arrows":"la-minus-square",""),e.xp6(1),e.Q6J("ngIf",!a.maxNormalSeasonalLots.hidden)}}function gt(o,_){if(1&o&&(e.TgZ(0,"div",49),e._UZ(1,"ngx-charts-area-chart",84),e.qZA()),2&o){const a=e.oxw(3);e.xp6(1),e.Q6J("scheme",a.lineChartVioletScheme)("results",a.carParkRevenue)("gradient",!0)("xAxis",!0)("yAxis",!0)("showYAxisLabel",!0)}}function ut(o,_){if(1&o&&(e.TgZ(0,"div",34),e.YNc(1,gt,2,6,"div",83),e.qZA()),2&o){const a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",a.carParkRevenue)}}function _t(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div",82)(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"h3",23),e._uU(6," Car Park Revenue "),e.qZA(),e.TgZ(7,"button",55),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.showItem("revenue",s.showDashbord.revenue))}),e._UZ(8,"i",30),e.qZA(),e.TgZ(9,"button",24),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.carParkRevenueHidden=!s.carParkRevenueHidden)}),e._UZ(10,"i"),e.qZA()()()(),e.YNc(11,ut,2,1,"div",25),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(10),e.Gre("la ",a.carParkRevenueHidden?"la-arrows":"la-minus-square",""),e.xp6(1),e.Q6J("ngIf",!a.carParkRevenueHidden)}}function vt(o,_){if(1&o&&(e.TgZ(0,"div",49),e._UZ(1,"ngx-charts-area-chart",86),e.qZA()),2&o){const a=e.oxw(3);e.xp6(1),e.Q6J("scheme",a.lineChartColorScheme)("results",a.carParkTransactions)("gradient",!0)("xAxis",!0)("yAxis",!0)}}function xt(o,_){if(1&o&&(e.TgZ(0,"div",34),e.YNc(1,vt,2,5,"div",83),e.qZA()),2&o){const a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",a.carParkTransactions)}}function ft(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div",85)(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"h3",23),e._uU(6," Car Park Transactions "),e.qZA(),e.TgZ(7,"button",55),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.showItem("transactions",s.showDashbord.transactions))}),e._UZ(8,"i",30),e.qZA(),e.TgZ(9,"button",24),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.carParkTransactionsHidden=!s.carParkTransactionsHidden)}),e._UZ(10,"i"),e.qZA()()()(),e.YNc(11,xt,2,1,"div",25),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(10),e.Gre("la ",a.carParkTransactionsHidden?"la-arrows":"la-minus-square",""),e.xp6(1),e.Q6J("ngIf",!a.carParkTransactionsHidden)}}function yt(o,_){if(1&o&&(e.TgZ(0,"div",85)(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"h3",23),e._uU(6," Heat Map "),e.qZA(),e.TgZ(7,"button",87),e._UZ(8,"i",30),e.qZA(),e.TgZ(9,"button",88),e._UZ(10,"i"),e.qZA()()()(),e.TgZ(11,"div",34)(12,"div",49),e._UZ(13,"div",89),e.qZA()()()()),2&o){const a=e.oxw();e.xp6(10),e.Gre("la ",a.carParkTransactionsHidden?"la-arrows":"la-minus-square","")}}function bt(o,_){1&o&&(e.TgZ(0,"div",34)(1,"div",49),e._UZ(2,"downtime-tracking"),e.qZA()())}function Ct(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"app-compare-form",90),e.NdJ("cancel",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.modalRef.hide())})("submit",function(s){e.CHM(a);const c=e.oxw();return e.KtG(c.goCompare(s))}),e.qZA()}if(2&o){const a=e.oxw();e.Q6J("carParks",a.carparks)}}let kt=(()=>{class o{constructor(a,n,s,c,C){this.router=a,this.statisticService=n,this.carparkService=s,this.translate=c,this.modalService=C,this.resizeEvent$=new F.xQ,this.selectedCarParkId=null,this.timeRange={value:[h.ou.local().minus({weeks:1}).toJSDate(),new Date],type:r.Nxg.Day},this.barPadding=30,this.barDefaultWidth=12,this.fromCarParks=[],this.toCarParks=[],this.fromCarParkId=null,this.toCarParkId=null,this.dashBoardItem=null,this.compareTimeRange={value:[new Date,new Date],type:r.Nxg.Month},this.displayPercentLegend=r.$lo,this.colorScheme={domain:r.DMY},this.occupancyColorScheme={domain:[r.F1,r.Ms$]},this.lineChartColorScheme={domain:[r.Ms$]},this.lineChartVioletScheme={domain:[r.F1]},this.faultChartColorScheme={domain:[r.cEj]},this.occupancyLegend=[{name:"Hourly",color:r.Ms$},{name:"Season",color:r.F1}],this.dailyOccupancyLegend=[{name:"Hourly",color:r.Ms$},{name:"Season",color:r.F1}],this.maxYAxisOccupancy=100,this.chartView=[140,140],this.bsConfig={containerClass:"theme-light",showWeekNumbers:!1},this.vehicleIcon=r.mts,this.overallStatistic=null,this.parkingDurations=null,this.parkingVehicleTypes=null,this.carParkTransactions=null,this.carParkRevenue=null,this.carParkFaults=null,this.parkingOccupancy={parkingOccupancyAverage:null,parkingOccupancy:null,maxYAxisOccupancy:null,barPadding:30,lines:[],lineSchema:{domain:[r.F1,r.Ms$,r.K8l]},hidden:!1},this.dailyOccupancy={date:this.timeRange.value[1],parkingOccupancyAverage:null,parkingOccupancy:null,maxYAxisOccupancy:null,barPadding:30,lines:[],lineSchema:{domain:[r.F1,r.Ms$,r.K8l,r.cEj]},hidden:!1},this.maxNormalSeasonalLots={parkingOccupancyAverage:null,parkingOccupancy:null,maxYAxisOccupancy:null,barPadding:30,loading:!1,occupancyLegend:[{name:"Hourly",color:r.Ms$},{name:"Season",color:r.F1}],referenceLines:[],hidden:!1},this.showDashbord={totalBoard:!0,parking:!0,status:!0,analysis:!0,transactions:!0,revenue:!0,seasonal:!0,dailyOccupancy:!0,carparkOccupancy:!0},this.selectList=[],this.trackingTimeHidden=!1,this.content={stakeStatus:{chargingCnt:1,freeCnt:0,notAvailable:49}},this.watchlist=[{timestamp:"2021-04-25T23:00:00.816253Z",vehicle:"CR01240",Frequented:1},{timestamp:"2021-04-25T23:00:00.816253Z",vehicle:"CR01241",Frequented:2},{timestamp:"2021-04-25T23:00:00.816253Z",vehicle:"CR01242",Frequented:1},{timestamp:"2021-04-25T23:00:00.816253Z",vehicle:"CR01243",Frequented:3},{timestamp:"2021-04-25T23:00:00.816253Z",vehicle:"CR01244",Frequented:1},{timestamp:"2021-04-25T23:00:00.816253Z",vehicle:"CR01245",Frequented:4},{timestamp:"2021-04-25T23:00:00.816253Z",vehicle:"CR01246",Frequented:5},{timestamp:"2021-04-25T23:00:00.816253Z",vehicle:"CR01247",Frequented:1},{timestamp:"2021-04-25T23:00:00.816253Z",vehicle:"CR01248",Frequented:6},{timestamp:"2021-04-25T23:00:00.816253Z",vehicle:"CR01249",Frequented:1}],this.carparkOptions$=s.getSimpleList()}get params(){return{carParkIds:this.selectedCarParkId?this.selectedCarParkId:0,from:this.timeRange.value[0].toISOString(),to:this.timeRange.value[1].toISOString(),rangeType:this.timeRange.type}}onResize(a){this.resizeEvent$.next(a)}lineLegend(a){return a.name}calcBarPadding(a){return a?this.barChartElement.nativeElement.clientWidth/a-this.barDefaultWidth:0}calcMaxYAxisOccupancy(a){return 10*Math.ceil(Math.max(...a.map(n=>n.season+n.normal))/10)}reloadData(){this.statisticService.getOverallStatistics(this.params).subscribe(a=>{this.overallStatistic={...a,totalRevenue:{amount:a.totalRevenue.amount/100,currency:a.totalRevenue.currency},hourlyRevenue:{amount:a.hourlyRevenue.amount/100,currency:a.hourlyRevenue.currency},seasonRevenue:{amount:a.seasonRevenue.amount/100,currency:a.seasonRevenue.currency}}}),this.statisticService.getDurationStatistics(this.params).subscribe(a=>{this.parkingDurations=(0,r.BF0)((0,r.dGr)(a.parkingDurations))}),this.statisticService.getFaultStatistics(this.params).subscribe(a=>{this.carParkFaults=[(0,r.XNF)("Faults",a.carParkFaults)]}),this.statisticService.getRevenueStatistics(this.params).subscribe(a=>{const n=a.carParkRevenue.map(s=>({...s,value:s.value/100}));this.carParkRevenue=[(0,r.XNF)("Revenue",n)]}),this.statisticService.getTransactionStatistics(this.params).subscribe(a=>{this.carParkTransactions=[(0,r.XNF)("Transactions",a.carParkTransactions)]}),this.statisticService.getVehicleTypeStatistics(this.params).subscribe(a=>{this.parkingVehicleTypes=(0,r.BF0)((0,r.dGr)(a.parkingVehicleTypes))}),this.statisticService.getDailyOccupancyStatistics({...this.params,rangeType:r.Nxg.Month,to:this.dailyOccupancy.date.toISOString()}).pipe((0,L.q)(1)).subscribe(a=>{const n=(0,r._lv)(a.parkingOccupancy);this.dailyOccupancy.parkingOccupancyAverage=(0,r.ktj)(a.parkingOccupancy),this.dailyOccupancy.parkingOccupancy=n,this.dailyOccupancy.lines=[{name:"In",series:a.parkingInOut.map(s=>({name:s.title,value:s.in}))},{name:"Out",series:a.parkingInOut.map(s=>({name:s.title,value:s.out}))}],this.dailyOccupancy.maxYAxisOccupancy=this.calcMaxYAxisOccupancy(a.parkingOccupancy),this.dailyOccupancy.barPadding=this.calcBarPadding(a.parkingOccupancy.length)}),this.statisticService.getMaxNormalSeasonalLotsStatistics(this.params).pipe((0,L.q)(1)).subscribe(a=>{const n=(0,r._lv)(a.parkingOccupancy);this.maxNormalSeasonalLots.parkingOccupancyAverage=(0,r.ktj)(a.parkingOccupancy),this.maxNormalSeasonalLots.parkingOccupancy=n,this.maxNormalSeasonalLots.maxYAxisOccupancy=this.calcMaxYAxisOccupancy(a.parkingOccupancy),this.maxNormalSeasonalLots.barPadding=this.calcBarPadding(a.parkingOccupancy.length),this.maxNormalSeasonalLots.referenceLines=[{value:a.slotNumberSeason,name:"Current Season Lots Settings"}]}),(0,H.aj)(this.statisticService.getOccupancyStatistics(this.params).pipe((0,L.q)(1)),this.statisticService.getOccupancyPrediction(this.params).pipe((0,L.q)(1))).subscribe(a=>{const n=(0,r._lv)(a[0].parkingOccupancy);this.parkingOccupancy.parkingOccupancyAverage=(0,r.ktj)(a[0].parkingOccupancy),this.parkingOccupancy.parkingOccupancy=n,this.parkingOccupancy.lines=[{name:"Prediction",series:a[0].parkingOccupancy.map(s=>{const c=a[1].parkingPrediction.findIndex(C=>C.title===s.title);return{name:s.title,value:c>-1?a[1].parkingPrediction[c].season+a[1].parkingPrediction[c].normal:0}})}],this.parkingOccupancy.maxYAxisOccupancy=this.calcMaxYAxisOccupancy([...a[0].parkingOccupancy,...a[1].parkingPrediction]),this.parkingOccupancy.barPadding=this.calcBarPadding(a[0].parkingOccupancy.length)})}goCompare(a){this.router.navigate([a.comparisonType===x.CarPark?"/dashboard/comparison/carparks":"/dashboard/comparison/range"],{queryParams:a}),this.modalRef.hide()}parkingOccupancyYAxisFormat(a){return a+"%"}changeDateRange(a){Array.isArray(a)||(this.timeRange=a,this.dailyOccupancy.date=a.value[1],this.reloadData())}changeCompareDateRange(a){this.compareTimeRange=a}openModal(a){this.modalRef=this.modalService.show(a,{class:"modal-compare"})}getChargingAnalysis(){this.statisticService.dashboardGetData().subscribe(a=>{if("10"===a.messageCode.slice(0,2)){this.content=a.data;const n=[],s=[],c=[],C=[],I=[],z=this.content.chargeAnalyze,ae=["Charging","Idle","Unavailable"],q=["Power consumption","Charging Degree","Charging Amount","Charging Time"];for(let B=0;B<z.length;B++)n.push(z[B].xaxis),s.push(z[B].chargeCostAmount),C.push(z[B].chargeEnergy),c.push(z[B].chargeCount),I.push(z[B].chargeTime);const{chargingCnt:Ue,freeCnt:Je,notAvailable:Ye}=this.content.stakeStatus,Fe=[{name:q[0],type:"line",data:c},{name:q[1],type:"line",data:C},{name:q[2],type:"line",data:s},{name:q[3],type:"line",data:I}];this.option={color:["#2EC7C9","#5AB1EF","#D87A80"],legend:{orient:"horizontal",itemGap:70,itemHeight:6,top:0,bottom:20,data:ae,height:50,textStyle:{fontFamily:"Poppins",fontSize:13,color:"#868aa8"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)",textStyle:{fontFamily:"Poppins"}},series:[{name:"Evc Pile Status",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:Ue,name:"Charging"},{value:Je,name:"Idle"},{value:Ye,name:"Unavailable"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},normal:{label:{textStyle:{fontFamily:"Poppins"}}}},label:{normal:{formatter:"{b} : {c} ({d}%)"}}}]},this.analysisOption={tooltip:{trigger:"axis"},legend:{data:q},toolbox:{show:!0},xAxis:{type:"category",boundaryGap:!1,data:n},yAxis:{type:"value"},series:Fe}}},()=>{this.getChargingAnalysis_mock()})}getChargingAnalysis_mock(){const n=["Power Consumption","Charging Amount","Charging Time"],s=[{name:n[0],type:"line",data:[8,5,6,9]},{name:n[1],type:"line",data:[30,40,20,50]},{name:n[2],type:"line",data:[100,150,70,90]}];this.option={color:["#2EC7C9","#5AB1EF","#D87A80"],legend:{orient:"horizontal",itemGap:70,itemHeight:6,top:0,bottom:20,data:["Charging","Idle","Unavailable"],height:50,textStyle:{fontFamily:"Poppins",fontSize:13,color:"#868aa8"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)",textStyle:{fontFamily:"Poppins"}},series:[{name:"Evc Pile Status",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:10,name:"Charging"},{value:11,name:"Idle"},{value:12,name:"Unavailable"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},normal:{label:{textStyle:{fontFamily:"Poppins"}}}},label:{normal:{formatter:"{b} : {c} ({d}%)"}}}]},this.analysisOption={tooltip:{trigger:"axis"},legend:{data:n},toolbox:{show:!0},xAxis:{type:"category",boundaryGap:!1,data:["2021-02-15","2021-02-16","2021-02-17","2021-02-18"]},yAxis:{type:"value"},series:s}}getDefaultersOption(){const a=["Car Rark A","Car Rark B","Car Rark C","NIE","One-North"];this.defaultersOption={color:["#007082","#008ea5","#01b3cf","#5cd3e6","#84e1ef"],legend:{orient:"vertical",right:10,top:10},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)",textStyle:{fontFamily:"Poppins"}},series:[{name:"Top 5* for carparks",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:20,name:a[0]},{value:21,name:a[1]},{value:22,name:a[2]},{value:25,name:a[3]},{value:20,name:a[4]}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},normal:{label:{textStyle:{fontFamily:"Poppins"}}}},label:{normal:{show:!1,position:"inside",formatter:"{b} : {c} ({d}%)"}}}]}}getLeakageOption(){this.leakageOption={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:["Car Park A","Car Park B","Car Park C","NIE","One-North","Car Park D","Car Park E","Car Park F","NTU","Car Park"],axisTick:{alignWithLabel:!0},axisLabel:{interval:0,rotate:30}}],yAxis:[{type:"value"}],series:[{name:"Top 10 Carpark with Highest Revenue leakages",type:"bar",barWidth:"60%",data:[28,29,30,35,36,38,40,40,40,45]}]}}ngOnInit(){this.getChargingAnalysis(),this.reloadData(),this.hotmap(),this.statisticService.getDashboardFlag().subscribe(c=>{c.dashboardConfig&&(this.showDashbord=JSON.parse(c.dashboardConfig));for(let C in this.showDashbord)this.selectList.push({name:C,value:this.showDashbord[C]})});const a=this.occupancyLegend.map(c=>c.name);this.translate.get(a).subscribe(c=>{this.occupancyLegend.forEach(C=>{for(let I in c)c.hasOwnProperty(I)&&C.name===I&&(C.name=c[I])})});const n=this.dailyOccupancyLegend.map(c=>c.name);this.translate.get(n).subscribe(c=>{this.dailyOccupancyLegend.forEach(C=>{for(let I in c)c.hasOwnProperty(I)&&C.name===I&&(C.name=c[I])})});const s=this.maxNormalSeasonalLots.occupancyLegend.map(c=>c.name);this.translate.get(s).subscribe(c=>{this.maxNormalSeasonalLots.occupancyLegend.forEach(C=>{for(let I in c)c.hasOwnProperty(I)&&C.name===I&&(C.name=c[I])})}),this.getDefaultersOption(),this.getLeakageOption()}ngAfterViewInit(){}showItem(a,n){let s=this.showDashbord;s[a]=!n;const c=JSON.stringify(s);this.statisticService.putDashboardFlag({dashboardConfig:c}).subscribe(I=>{this.showDashbord=JSON.parse(c),this.selectList.map(z=>{z.name===a&&(z.value=s[a])})})}selectOccupancy(a){this.dailyOccupancy.date=h.ou.fromFormat(a.series,"yyyyMMdd").toJSDate(),this.statisticService.getDailyOccupancyStatistics({...this.params,rangeType:r.Nxg.Month,to:this.dailyOccupancy.date.toISOString()}).pipe((0,L.q)(1)).subscribe(n=>{const s=(0,r._lv)(n.parkingOccupancy);this.dailyOccupancy.parkingOccupancyAverage=(0,r.ktj)(n.parkingOccupancy),this.dailyOccupancy.parkingOccupancy=s,this.dailyOccupancy.lines=[{name:"In",series:n.parkingInOut.map(c=>({name:c.title,value:c.in}))},{name:"Out",series:n.parkingInOut.map(c=>({name:c.title,value:c.out}))}],this.dailyOccupancy.maxYAxisOccupancy=this.calcMaxYAxisOccupancy(n.parkingOccupancy),this.dailyOccupancy.barPadding=this.calcBarPadding(n.parkingOccupancy.length)})}hotmap(){this.carparkService.filterModel({},{totalCount:0,rowsPerPage:999999,page:1,sortBy:null,descending:!0,totalPages:1}).subscribe(a=>{setTimeout(()=>{var n=new google.maps.Map(document.getElementById("HOT_MAPS"),{zoom:14,center:{lat:1.346987,lng:103.714679}});let s=a.data.map(c=>({location:new google.maps.LatLng(c.geopoint.lat,c.geopoint.lng),weight:(c.live?c.totalLots-c.live.availableLots-c.seasonLots:0)<=0?0:c.totalLots-c.live.availableLots-c.seasonLots}));new google.maps.visualization.HeatmapLayer({data:s,map:n,radius:30,maxIntensity:20})},1e3)})}}return o.\u0275fac=function(a){return new(a||o)(e.Y36(p.F0),e.Y36(g.B),e.Y36(P.x),e.Y36(E.sK),e.Y36(M.tT))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-dashboard"]],viewQuery:function(a,n){if(1&a&&e.Gf(W,5),2&a){let s;e.iGM(s=e.CRH())&&(n.barChartElement=s.first)}},hostBindings:function(a,n){1&a&&e.NdJ("resize",function(c){return n.onResize(c)},!1,e.Jf7)},decls:45,vars:24,consts:[[1,"body-wrapper"],[1,"m-subheader"],[1,"align-items-center"],[1,"row","form-group","m-form__group"],[1,"col-form-label","col-lg-1","col-sm-6"],[1,"col-lg-2"],["nzSize","large","nzPlaceHolder","Please Select",1,"rounded",2,"width","100%",3,"ngModel","nzDropdownMatchSelectWidth","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[1,"col-form-label","col-xl-1","col-lg-2","col-sm-6","m--padding-right-0"],[1,"col-lg-3","col-sm-6"],[3,"data","select"],[3,"itemList","selListOut"],[1,"m-content"],[1,"row","general-statistics"],[3,"class",4,"ngIf"],["class","occupancy-statistics background-transparent",4,"ngIf"],["class","occupancy-statistics",4,"ngIf"],["class","revenue-statistics",4,"ngIf"],["class","transaction-statistics",4,"ngIf"],[1,"m-portlet"],[1,"m-portlet__head"],[1,"m-portlet__head-caption"],[1,"m-portlet__head-title","w-100"],[1,"m-portlet__head-text"],[1,"btn","btn-outline-main","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","m-btn--air","float-right","m--margin-top-20",3,"click"],["class","m-portlet__body",4,"ngIf"],["modal",""],[3,"nzValue","nzLabel"],[1,"felx-right"],[1,"btn","btn-outline-main","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","m-btn--air","float-right","m--margin-top-20","m--margin-right-20",3,"click"],[1,"fa","fa-times"],[1,"row"],[1,"col-sm-6","m--padding-left-10","m--padding-right-10"],[1,"m-portlet","m--margin-bottom-20"],[1,"m-portlet__body"],[1,"card-statistics"],[1,"stats-title"],[1,"stats-value","text-main"],[1,"col-sm-6","m--padding-left-10"],[1,"stats-value","text-f1"],[1,"stats-value","text-f4"],[1,"stats-revenue-box"],[1,"stats-title-revenue"],[1,"col-sm-6","m--padding-right-10"],[1,"m-portlet","m-portlet--bordered-semi","card-stats-chart","parking-vehicle-chart"],[1,"m-portlet__head-title"],[3,"view","results","displayLegend"],[1,"m-portlet","m-portlet--bordered-semi","card-stats-chart","parking-duration-chart"],[1,"m-portlet__head-text","col-6"],[1,"stats-chart-container"],["echarts","",1,"demo-chart",3,"options"],[1,"col-10"],[1,"occupancy-statistics","background-transparent"],[1,"m-portlet","background-transparent"],[1,"m-portlet__head",2,"border-bottom","none"],[1,"btn","btn-outline-main","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","m-btn--air","float-right","m--margin-top-20","m--margin-left-20",3,"click"],["class","m-portlet__body","style","padding: 0;",4,"ngIf"],[1,"m-portlet__body",2,"padding","0"],[1,"table","table-striped",2,"border-collapse","separate","border-spacing","0px 10px"],[1,"",2,"color","#b6b9bd"],[1,"text-center"],["scope","col"],[4,"ngFor","ngForOf"],[1,"text-center","bg-white"],["scope","row",1,"py-4"],[1,"py-4"],[1,"occupancy-statistics"],[3,"data","display","horizontal","colors",4,"ngIf"],[1,"row","states-chart"],["barChartElement",""],[3,"scheme","results","lineChart","colorSchemeLine","gradient","xAxis","yAxis","barPadding","yScaleMax","select",4,"ngIf"],[1,"col-2","m--padding-0","bar-chart-avg"],[3,"scheme","results","gradient","xAxis","yAxis","barPadding","yScaleMax",4,"ngIf"],[3,"data","display","horizontal","colors"],[3,"scheme","results","lineChart","colorSchemeLine","gradient","xAxis","yAxis","barPadding","yScaleMax","select"],[3,"scheme","results","gradient","xAxis","yAxis","barPadding","yScaleMax"],[3,"scheme","results","lineChart","colorSchemeLine","gradient","xAxis","yAxis","barPadding","yScaleMax",4,"ngIf"],[3,"scheme","results","lineChart","colorSchemeLine","gradient","xAxis","yAxis","barPadding","yScaleMax"],[3,"scheme","results","gradient","xAxis","groupPadding","yScaleMax","yAxis","showRefLines","showRefLabels","referenceLines",4,"ngIf"],[3,"scheme","results","gradient","xAxis","yAxis","groupPadding","yScaleMax","showRefLines","showRefLabels","referenceLines",4,"ngIf"],[3,"scheme","results","gradient","xAxis","groupPadding","yScaleMax","yAxis","showRefLines","showRefLabels","referenceLines"],[3,"scheme","results","gradient","xAxis","yAxis","groupPadding","yScaleMax","showRefLines","showRefLabels","referenceLines"],[1,"revenue-statistics"],["class","stats-chart-container",4,"ngIf"],["yAxisLabel","(S$)",3,"scheme","results","gradient","xAxis","yAxis","showYAxisLabel"],[1,"transaction-statistics"],[3,"scheme","results","gradient","xAxis","yAxis"],[1,"btn","btn-outline-main","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","m-btn--air","float-right","m--margin-top-20","m--margin-left-20"],[1,"btn","btn-outline-main","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","m-btn--air","float-right","m--margin-top-20"],["id","HOT_MAPS",2,"width","100%","height","800px"],[3,"carParks","cancel","submit"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0),e._UZ(1,"app-title-bar"),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"label",4),e._uU(6," Car Park1 "),e.qZA(),e.TgZ(7,"div",5)(8,"nz-select",6),e.NdJ("ngModelChange",function(c){return n.selectedCarParkId=c})("ngModelChange",function(){return n.reloadData()}),e.YNc(9,Qe,1,2,"nz-option",7),e.ALo(10,"async"),e.qZA()(),e.TgZ(11,"label",8),e._uU(12," Time Range "),e.qZA(),e.TgZ(13,"div",9)(14,"app-datepicker-tab",10),e.NdJ("select",function(c){return n.changeDateRange(c)}),e.qZA()(),e.TgZ(15,"show-dashboard",11),e.NdJ("selListOut",function(c){return n.showItem(c.name,c.value)}),e.qZA()()()(),e.TgZ(16,"div",12)(17,"div",13),e.YNc(18,qe,48,28,"div",14),e.YNc(19,ze,23,9,"div",14),e.qZA(),e.TgZ(20,"div",13),e.YNc(21,$e,13,7,"div",14),e.YNc(22,Ge,14,7,"div",14),e.qZA(),e.TgZ(23,"div",13),e.YNc(24,Be,13,7,"div",14),e.YNc(25,Ve,14,7,"div",14),e.qZA(),e.YNc(26,We,12,4,"div",15),e.YNc(27,it,12,4,"div",16),e.YNc(28,ct,13,8,"div",16),e.YNc(29,mt,12,4,"div",16),e.YNc(30,_t,12,4,"div",17),e.YNc(31,ft,12,4,"div",18),e.YNc(32,yt,14,3,"div",18),e.TgZ(33,"div")(34,"div",19)(35,"div",20)(36,"div",21)(37,"div",22)(38,"h3",23),e._uU(39," DownTime Tracking "),e.qZA(),e.TgZ(40,"button",24),e.NdJ("click",function(){return n.trackingTimeHidden=!n.trackingTimeHidden}),e._UZ(41,"i"),e.qZA()()()(),e.YNc(42,bt,3,0,"div",25),e.qZA()()()(),e.YNc(43,Ct,1,1,"ng-template",null,26,e.W1O)),2&a&&(e.xp6(8),e.Q6J("ngModel",n.selectedCarParkId)("nzDropdownMatchSelectWidth",!1),e.xp6(1),e.Q6J("ngForOf",e.lcZ(10,22,n.carparkOptions$)),e.xp6(5),e.Q6J("data",n.timeRange),e.xp6(1),e.Q6J("itemList",n.selectList),e.xp6(3),e.Q6J("ngIf",n.showDashbord.totalBoard),e.xp6(1),e.Q6J("ngIf",n.showDashbord.parking),e.xp6(2),e.Q6J("ngIf",n.showDashbord.status),e.xp6(1),e.Q6J("ngIf",n.showDashbord.analysis),e.xp6(2),e.Q6J("ngIf",n.showDashbord.status),e.xp6(1),e.Q6J("ngIf",n.showDashbord.analysis),e.xp6(1),e.Q6J("ngIf",n.showDashbord.carparkOccupancy),e.xp6(1),e.Q6J("ngIf",n.showDashbord.carparkOccupancy),e.xp6(1),e.Q6J("ngIf",n.showDashbord.dailyOccupancy),e.xp6(1),e.Q6J("ngIf",n.showDashbord.seasonal),e.xp6(1),e.Q6J("ngIf",n.showDashbord.revenue),e.xp6(1),e.Q6J("ngIf",n.showDashbord.transactions),e.xp6(1),e.Q6J("ngIf",n.showDashbord.transactions),e.xp6(9),e.Gre("la ",n.trackingTimeHidden?"la-arrows":"la-minus-square",""),e.xp6(1),e.Q6J("ngIf",!n.trackingTimeHidden))},dependencies:[f.sg,f.O5,D.G,N.Ip,N.Vq,Y.Uo,Y._C,Y.Om,Y.p0,Y.$Z,k.JJ,k.On,$.o,O.K,ce.J,De,Ae.b,se._w,Oe.r,Se.X,U,Le,J,f.Ov,f.JJ,f.uU,X.Z,E.X$],styles:[".states-chart[_ngcontent-%COMP%]{height:470px}.stats-revenue-box[_ngcontent-%COMP%]{padding-top:12px;padding-bottom:10px;padding-left:35px}.demo-chart[_ngcontent-%COMP%]{height:400px}.flex-column[_ngcontent-%COMP%]{display:flex;flex-direction:column}.felx-right[_ngcontent-%COMP%]{margin-bottom:10px;justify-content:flex-end;visibility:hidden}.flex-column[_ngcontent-%COMP%]:hover   .felx-right[_ngcontent-%COMP%]{visibility:visible}.background-transparent[_ngcontent-%COMP%]{background:transparent;box-shadow:none}[_nghost-%COMP%]     .ant-select-single.ant-select-lg:not(.ant-select-customize-input) .ant-select-selector{border-radius:30px}"]}),o})()},34984:(G,Q,d)=>{d.d(Q,{Ns:()=>O,_w:()=>Z});var r=d(15861),h=d(94650),F=d(21086),H=d(68896),L=d(8929),e=d(20353),P=d(34202),M=d(66753),E=d(87545);class f{constructor(w){this.changes=w}static of(w){return new f(w)}notEmpty(w){if(this.changes[w]){const y=this.changes[w].currentValue;if(null!=y)return(0,F.of)(y)}return H.E}has(w){return this.changes[w]?(0,F.of)(this.changes[w].currentValue):H.E}notFirst(w){return this.changes[w]&&!this.changes[w].isFirstChange()?(0,F.of)(this.changes[w].currentValue):H.E}notFirstAndEmpty(w){if(this.changes[w]&&!this.changes[w].isFirstChange()){const y=this.changes[w].currentValue;if(null!=y)return(0,F.of)(y)}return H.E}}const k=new h.OlP("NGX_ECHARTS_CONFIG");let Z=(()=>{class b{constructor(y,t,x){this.el=t,this.ngZone=x,this.autoResize=!0,this.loadingType="default",this.chartInit=new h.vpe,this.optionsError=new h.vpe,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartPieSelectChanged=this.createLazyEvent("pieselectchanged"),this.chartPieSelected=this.createLazyEvent("pieselected"),this.chartPieUnselected=this.createLazyEvent("pieunselected"),this.chartMapSelectChanged=this.createLazyEvent("mapselectchanged"),this.chartMapSelected=this.createLazyEvent("mapselected"),this.chartMapUnselected=this.createLazyEvent("mapunselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartFocusNodeAdjacency=this.createLazyEvent("focusnodeadjacency"),this.chartUnfocusNodeAdjacency=this.createLazyEvent("unfocusnodeadjacency"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.resize$=new L.xQ,this.echarts=y.echarts}ngOnChanges(y){const t=f.of(y);t.notFirstAndEmpty("options").subscribe(x=>this.onOptionsChange(x)),t.notFirstAndEmpty("merge").subscribe(x=>this.setOption(x)),t.has("loading").subscribe(x=>this.toggleLoading(!!x)),t.notFirst("theme").subscribe(()=>this.refreshChart())}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe((0,M.p)(100,e.z,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(()=>{this.animationFrameID=window.requestAnimationFrame(()=>this.resize$.next())})),this.resizeOb.observe(this.el.nativeElement))}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(y){this.chart&&(y?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading())}setOption(y,t){if(this.chart)try{this.chart.setOption(y,t)}catch(x){console.error(x),this.optionsError.emit(x)}}refreshChart(){var y=this;return(0,r.Z)(function*(){y.dispose(),yield y.initChart()})()}createChart(){const y=this.el.nativeElement;if(window&&window.getComputedStyle){const t=window.getComputedStyle(y,null).getPropertyValue("height");(!t||"0px"===t)&&(!y.style.height||"0px"===y.style.height)&&(y.style.height="400px")}return this.ngZone.runOutsideAngular(()=>("function"==typeof this.echarts?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:x})=>x(y,this.theme,this.initOpts)))}initChart(){var y=this;return(0,r.Z)(function*(){yield y.onOptionsChange(y.options),y.merge&&y.chart&&y.setOption(y.merge)})()}onOptionsChange(y){var t=this;return(0,r.Z)(function*(){!y||(t.chart||(t.chart=yield t.createChart(),t.chartInit.emit(t.chart)),t.setOption(t.options,!0))})()}createLazyEvent(y){return this.chartInit.pipe((0,E.w)(t=>new P.y(x=>(t.on(y,U=>this.ngZone.run(()=>x.next(U))),()=>{this.chart&&(this.chart.isDisposed()||t.off(y))}))))}}return b.\u0275fac=function(y){return new(y||b)(h.Y36(k),h.Y36(h.SBq),h.Y36(h.R0b))},b.\u0275dir=h.lG2({type:b,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",loading:"loading",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartPieSelectChanged:"chartPieSelectChanged",chartPieSelected:"chartPieSelected",chartPieUnselected:"chartPieUnselected",chartMapSelectChanged:"chartMapSelectChanged",chartMapSelected:"chartMapSelected",chartMapUnselected:"chartMapUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartFocusNodeAdjacency:"chartFocusNodeAdjacency",chartUnfocusNodeAdjacency:"chartUnfocusNodeAdjacency",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],features:[h.TTD]}),b})(),O=(()=>{class b{static forRoot(y){return{ngModule:b,providers:[{provide:k,useValue:y}]}}static forChild(){return{ngModule:b}}}return b.\u0275fac=function(y){return new(y||b)},b.\u0275mod=h.oAB({type:b}),b.\u0275inj=h.cJS({}),b})()}}]);