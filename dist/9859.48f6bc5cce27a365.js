(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[9859],{69859:(Z,z,n)=>{"use strict";n.r(z),n.d(z,{WatchListModule:()=>Y});var x=n(36895),T=n(8929),w=n(94327),h=n(52746),t=n(94650),v=n(32883),p=n(89383),A=n(76916),y=n(9215),e=n(35635),i=n(47423),d=n(73325),r=n(29562),c=n(66616),_=n(47044),M=n(21811),f=n(40269),g=n(24006),C=n(59245);const b=["confirmModal"],O=["inputfile"];function P(l,u){1&l&&(t.TgZ(0,"div",25),t._uU(1," success! "),t.qZA())}function D(l,u){1&l&&t._UZ(0,"span",26)}function N(l,u){if(1&l&&t._uU(0),2&l){const o=u.range;t.lnq(" ",o[0],"-",o[1]," of ",u.$implicit," items ")}}function E(l,u){if(1&l&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&l){const o=u.$implicit;t.xp6(1),t.Oqu(o.text)}}function U(l,u){if(1&l){const o=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td")(14,"div",27)(15,"button",28),t._UZ(16,"i",29),t.qZA(),t.TgZ(17,"nz-dropdown-menu",null,30)(19,"ul",31)(20,"li",32),t.NdJ("click",function(){const m=t.CHM(o).$implicit,L=t.oxw();return t.KtG(L.DeleteData(m))}),t._UZ(21,"i",33),t.TgZ(22,"span"),t._uU(23,"Delete"),t.qZA()()()()()()()}if(2&l){const o=u.$implicit,a=u.index,s=t.MAs(18);t.ekj("ant-table-row-odd",a%2==1),t.xp6(2),t.Oqu(o.plateNumber),t.xp6(2),t.Oqu(o.iuNumber),t.xp6(2),t.Oqu(o.reason),t.xp6(2),t.Oqu(o.assignedAt),t.xp6(2),t.Oqu(o.status),t.xp6(2),t.Oqu(o.carParkOperatorId),t.xp6(3),t.Q6J("nzDropdownMenu",s)("nzPlacement","topCenter")}}let W=(()=>{class l extends h.t{constructor(o,a){super(),this.watchListService=o,this.translate=a,this.carPlateNo="",this.carPlateNo$=new T.xQ,this.iuNumber="",this.iuNumber$=new T.xQ,this.successShow=!1,this.tableHeaders=[{text:"Plate Number",column:"",width:"150px"},{text:"Iu Number",column:"",width:"200px"},{text:"Reason",column:"",width:"150px"},{text:"Assigned At",column:"",width:"220px"},{text:"Status",column:"",width:"100px"},{text:"Carark Operator Id",column:"",width:"200px"},{text:"Actions",width:"100px"}],this.loading=!1,this.data=[]}get filterParams(){return{sort:"id,desc",carPlateNo:this.carPlateNo,iuNumber:this.iuNumber}}reloadData(){this.reloadDataService(this.watchListService)}pageChanged(o){this.pagination=o,this.reloadData()}ngOnInit(){this.reloadData()}createOneData(){}cancelHandle(){this.reloadData()}exportExcel(){this.watchListService.exportCondo(this.filterParams,this.pagination).subscribe(o=>{(0,w.saveAs)(o,"watchList.csv")})}importExcel(){this.inputfile.nativeElement.click()}importMembers(o){const a=new FormData;a.append("file",o),this.watchListService.importCondo(a).subscribe(s=>{s.total&&(this.successShow=!0,setTimeout(()=>{this.successShow=!1},2e3))})}DeleteData(o){this.watchListService.deleteOne(o.id).subscribe(a=>{this.reloadDataService(this.watchListService)})}}return l.\u0275fac=function(o){return new(o||l)(t.Y36(v.b),t.Y36(p.sK))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-watch-list"]],viewQuery:function(o,a){if(1&o&&(t.Gf(b,5),t.Gf(O,5)),2&o){let s;t.iGM(s=t.CRH())&&(a.confirmModal=s.first),t.iGM(s=t.CRH())&&(a.inputfile=s.first)}},features:[t.qOj],decls:40,vars:18,consts:[[1,"body-wrapper"],["class","alert alert-success col-12","role","alert","style","display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 0 auto;",4,"ngIf"],[1,"m-content"],[1,"m-portlet","m-portlet--tabs"],[1,"m-portlet__body","m-portlet__body--scrollable"],[1,"form-group","m-form__group","m-portlet__filters"],[1,"m-portlet__filter","col-4"],[1,"col-form-label","col-form-label-nowrap"],[1,"m-input-icon","m-input-icon--left"],[3,"nzPrefix"],["type","text","nz-input","","placeholder","Enter Plate Number",3,"ngModel","debounce","ngModelChange","onDebounce"],["prefixTemplateUser",""],["type","text","nz-input","","placeholder","Enter Iu Number",3,"ngModel","debounce","ngModelChange","onDebounce"],[1,"m-portlet__filter","col-3"],[1,"right-btn"],["type","file","accept",".csv,audio/*,video/*,image/*",2,"display","none",3,"change"],["inputfile",""],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","import"],["nz-icon","","nzType","export"],["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzShowTotal","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzQueryParams"],["basicTable",""],[4,"ngFor","ngForOf"],[3,"ant-table-row-odd",4,"ngFor","ngForOf"],["role","alert",1,"alert","alert-success","col-12",2,"display","flex","justify-content","center","align-items","center","margin","0 auto"],["nz-icon","","nzType","search"],["dropdown","","placement","bottom right"],["nz-dropdown","","nzTrigger","click",1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--outline-2x","m-btn--pill","no-border",3,"nzDropdownMenu","nzPlacement"],[1,"la","la-ellipsis-h"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"click"],[1,"la","la-trash",2,"margin-right","4px"]],template:function(o,a){if(1&o&&(t.TgZ(0,"div",0),t._UZ(1,"app-title-bar"),t.YNc(2,P,2,0,"div",1),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),t._uU(9),t.qZA(),t.TgZ(10,"div",8)(11,"nz-input-group",9)(12,"input",10),t.NdJ("ngModelChange",function(m){return a.carPlateNo=m})("onDebounce",function(){return a.reloadData()}),t.qZA()(),t.YNc(13,D,1,0,"ng-template",null,11,t.W1O),t.qZA()(),t.TgZ(15,"div",6)(16,"label",7),t._uU(17),t.qZA(),t.TgZ(18,"div",8)(19,"nz-input-group",9)(20,"input",12),t.NdJ("ngModelChange",function(m){return a.iuNumber=m})("onDebounce",function(){return a.reloadData()}),t.qZA()()()(),t.TgZ(21,"div",13)(22,"div",14)(23,"input",15,16),t.NdJ("change",function(m){return a.importMembers(m.target.files[0])}),t.qZA(),t.TgZ(25,"button",17),t.NdJ("click",function(){return a.importExcel()}),t._UZ(26,"span",18),t._uU(27,"import"),t.qZA(),t.TgZ(28,"button",17),t.NdJ("click",function(){return a.exportExcel()}),t._UZ(29,"span",19),t._uU(30,"export"),t.qZA()()()(),t.YNc(31,N,1,3,"ng-template",null,20,t.W1O),t.TgZ(33,"nz-table",21,22),t.NdJ("nzQueryParams",function(m){return a.onQueryParamsChange(m)}),t.TgZ(35,"thead")(36,"tr"),t.YNc(37,E,2,1,"th",23),t.qZA()(),t.TgZ(38,"tbody"),t.YNc(39,U,24,10,"tr",24),t.qZA()()()()()()),2&o){const s=t.MAs(14),m=t.MAs(32),L=t.MAs(34);t.xp6(2),t.Q6J("ngIf",a.successShow),t.xp6(7),t.hij(" ","Plate Number",": "),t.xp6(2),t.Q6J("nzPrefix",s),t.xp6(1),t.Q6J("ngModel",a.carPlateNo)("debounce",500),t.xp6(5),t.hij(" ","Iu Number",": "),t.xp6(2),t.Q6J("nzPrefix",s),t.xp6(1),t.Q6J("ngModel",a.iuNumber)("debounce",500),t.xp6(13),t.Q6J("nzData",a.listData)("nzFrontPagination",!1)("nzShowTotal",m)("nzLoading",a.loading)("nzTotal",a.pagination.totalCount)("nzPageSize",a.pagination.rowsPerPage)("nzPageIndex",a.pagination.page),t.xp6(4),t.Q6J("ngForOf",a.tableHeaders),t.xp6(2),t.Q6J("ngForOf",L.data)}},dependencies:[x.sg,x.O5,A.G,y.q,e.Zp,e.gB,e.ke,i.Ls,d.wO,d.r9,r.cm,r.RR,c.ix,_.w,M.dQ,f.N8,f.Uo,f._C,f.Om,f.p0,f.$Z,g.Fj,g.JJ,g.On,C.TO],styles:[".form-group[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;flex-wrap:wrap}.m-portlet__filter[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}  .ng-select-container{border:1px solid #ebedf2!important}.create-btn[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.m-input[_ngcontent-%COMP%]{border:1px solid #ebedf2!important}.m-portlet__filter[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:70%}.form-control[_ngcontent-%COMP%]{border:1px solid black;background-color:#fff}.right-btn[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:#00bdb5}.right-btn[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#fff;color:#00bdb5}.right-btn[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}"]}),l})();var S=n(59501),j=n(34793),F=n(21532),R=n(88796),J=n(30329),Q=n(372),I=n(71636),B=n(34984);const H=[{path:"",component:S.f,children:[{path:"",component:W}]}];let Y=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({providers:[I.w,v.b],imports:[x.ez,F.x,j.Bz.forChild(H),R.A0,g.u5,g.UX,J.D,Q.kn,C.mr,B.Ns.forRoot({echarts:()=>n.e(4734).then(n.bind(n,14734))})]}),l})()},94327:function(Z,z){var T;void 0!==(T=function(){"use strict";function h(e,i,d){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){y(r.response,i,d)},r.onerror=function(){console.error("could not download file")},r.send()}function t(e){var i=new XMLHttpRequest;i.open("HEAD",e,!1);try{i.send()}catch{}return 200<=i.status&&299>=i.status}function v(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(i)}}var p="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,A=p.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),y=p.saveAs||("object"!=typeof window||window!==p?function(){}:"download"in HTMLAnchorElement.prototype&&!A?function(e,i,d){var r=p.URL||p.webkitURL,c=document.createElement("a");c.download=i=i||e.name||"download",c.rel="noopener","string"==typeof e?(c.href=e,c.origin===location.origin?v(c):t(c.href)?h(e,i,d):v(c,c.target="_blank")):(c.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(c.href)},4e4),setTimeout(function(){v(c)},0))}:"msSaveOrOpenBlob"in navigator?function(e,i,d){if(i=i||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function w(e,i){return typeof i>"u"?i={autoBom:!1}:"object"!=typeof i&&(console.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,d),i);else if(t(e))h(e,i,d);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){v(r)})}}:function(e,i,d,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return h(e,i,d);var c="application/octet-stream"===e.type,_=/constructor/i.test(p.HTMLElement)||p.safari,M=/CriOS\/[\d]+/.test(navigator.userAgent);if((M||c&&_||A)&&typeof FileReader<"u"){var f=new FileReader;f.onloadend=function(){var b=f.result;b=M?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=b:location=b,r=null},f.readAsDataURL(e)}else{var g=p.URL||p.webkitURL,C=g.createObjectURL(e);r?r.location=C:location.href=C,r=null,setTimeout(function(){g.revokeObjectURL(C)},4e4)}});p.saveAs=y.saveAs=y,Z.exports=y}.apply(z,[]))&&(Z.exports=T)}}]);