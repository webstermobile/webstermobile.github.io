(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[3416,9226],{80601:(N,y,r)=>{"use strict";r.d(y,{N:()=>z});var T=r(3927),h=r(86181),g=r(27221),s=r(94650),C=r(80529),A=r(28555),d=r(91599);let z=(()=>{class M extends T.su{constructor(p,Z,u){super(p,Z),this.http=p,this.store=Z,this.modelName="ParkingMemberService",this.handleError=u.createHandleError(`${this.modelName}Service`)}getParkingMember(p,Z){const u=this.getUrl((0,h.U8)("carpark/api/parking-members-page",{...p,...(0,h.jq)(Z)}));return this.get(u).pipe((0,g.K)(this.handleError(`${this.modelName}Filter`,{})))}getParkingMemberItems(p,Z,u){const v=this.getUrl((0,h.U8)(`carpark/api/parking-members/${p}/items-page`,{...Z,...(0,h.jq)(u)}));return this.get(v).pipe((0,g.K)(this.handleError(`${this.modelName}Filter`,{})))}createParkingMember(p){const Z=this.getUrl("carpark/api/parking-members");return this.post(Z,p)}addParkingMemberItem(p,Z){const u=this.getUrl(`carpark/api/parking-members/${Z}`);return this.post(u,p)}removeParkingMemberItem(p,Z){const u=this.getUrl(`carpark/api/parking-members/${p}/items/remove/${Z}`);return this.post(u)}getDriverCode(p){const Z=this.getUrl(`carpark/api/drivers/${p}/driverCode`);return this.get(Z)}getAllvehicle(){const p=this.getUrl("carpark/api/vehicle/get-vehicles");return this.get(p)}getZoneCodeList(){const p=this.getUrl("carpark/api/zone-polygons");return this.get(p)}}return M.\u0275fac=function(p){return new(p||M)(s.LFG(C.eN),s.LFG(A.yh),s.LFG(d.k))},M.\u0275prov=s.Yz7({token:M,factory:M.\u0275fac}),M})()},71942:(N,y,r)=>{"use strict";r.d(y,{f:()=>Z});var T=r(38014),h=r(3927),g=r(86181),s=r(21086),C=r(27221),A=r(66708),d=r(94650),z=r(60097),M=r(80529),_=r(28555),p=r(91599);let Z=(()=>{class u extends h.su{constructor(m,c,e,b){super(c,e),this.carparkService=m,this.http=c,this.store=e,this.modelName="Vehicle",this.handleError=b.createHandleError(`${this.modelName}Service`),this.handleDynamicUrl()}ngOnInit(){}handleDynamicUrl(){const m=JSON.parse(localStorage.getItem("user")).login;this.baseUrl=this.carparkService.isMotorist()&&A.Z.isNotNull(m)?`carpark/api/drivers/${m}/vehicles`:"carpark/api/vehicle/get-vehicles"}getTelList(m,c){console.log(m);const e=this.getUrl((0,g.U8)("carpark/api/vehicle/vehicles",{...m,...(0,g.jq)(c)}));return this.get(e)}filterModel(m,c){const e=this.getUrl((0,g.U8)(this.baseUrl,{...m,...(0,g.jq)(c)}));return this.get(e).pipe((0,C.K)(this.handleError(`${this.modelName}Filter`,{}))).map(b=>Array.isArray(b)?(0,h.eC)(b):(0,h.O7)(b))}updateVehicle(m){const c=this.getUrl(`carpark/api/drivers/${m.driverCode}/vehicles/${m.vehicleId}`);return this.patch(c,m.vehicle).pipe((0,C.K)(this.handleError(`${this.modelName}Update`,{})))}getModel(m){const c=this.getUrl(`carpark/api/vehicle/${m}`);return this.get(c).pipe((0,C.K)(this.handleError(`${this.modelName}Get`,{})))}deleteModel(m,c){const e=this.getUrl(`carpark/api/drivers/${m}/vehicles/${c}`);return this.delete(e).pipe((0,C.K)(this.handleError(`${this.modelName}Delete`)))}deleteAdminModel(m){const c=this.getUrl(`carpark/api/admin/vehicle/${m}`);return this.delete(c).pipe((0,C.K)(this.handleError(`${this.modelName}Delete`)))}createVehicle(m,c){const e=this.getUrl(`carpark/api/drivers/${m}/vehicles`);return this.post(e,c)}putUpdateVehicle(m,c){const e=this.getUrl(`carpark/api/drivers/${m}/vehicles/${c.id}`);return this.put(e,c)}getDriverCode(m){const c=this.getUrl(`carpark/api/drivers/${m}/driverCode`);return this.get(c)}createModel(m,c){const e=this.getUrl(`carpark/api/drivers/${m}/vehicles`);return this.post(e,c).pipe((0,C.K)(this.handleError(`${this.modelName}Create`,{})))}createVehicleAdmin(m){const c=this.getUrl(`carpark/api/admin/vehicles/${m.mobile}`);return this.post(c,m).pipe((0,C.K)(this.handleError(`${this.modelName}Create`,{})))}updateModel(m){const c=this.getUrl("carpark/api/admin/vehicle-changes");return this.post(c,m).pipe((0,C.K)(this.handleError(`${this.modelName}Update`,{})))}getSimpleList(){const m=this.getUrl("carpark/api/vehicle/simple-vehicles-list");return this.get(m).pipe((0,C.K)(this.handleError(`${this.modelName}SimpleList`,{})))}filterModelByDriver(m){const c=this.getUrl(`carpark/api/drivers/${m}/vehicles`);return this.get(c).pipe((0,C.K)(()=>(0,s.of)([])))}isOperator(){const m=JSON.parse(localStorage.getItem("user-roles"));return!(!A.Z.isNotNull(m)||!m.includes(T.i44.Operator))}getUserVehicle(m,c){this.baseUrl=`carpark/api/drivers/${m}/vehicles`;const e=this.getUrl((0,g.U8)(this.baseUrl,{...(0,g.jq)(c)}));return this.get(e).pipe((0,C.K)(this.handleError(`${this.modelName}Filter`,{}))).map(b=>Array.isArray(b)?(0,h.eC)(b):(0,h.O7)(b))}}return u.\u0275fac=function(m){return new(m||u)(d.LFG(z.x),d.LFG(M.eN),d.LFG(_.yh),d.LFG(p.k))},u.\u0275prov=d.Yz7({token:u,factory:u.\u0275fac}),u})()},52746:(N,y,r)=>{"use strict";r.d(y,{t:()=>s});var T=r(72986),h=r(591),g=r(94650);let s=(()=>{class C{constructor(){this.loading=!1,this.pagination={totalCount:0,rowsPerPage:20,page:1,sortBy:null,descending:!0,totalPages:1},this.listData=[],this.hadGetData$=new h.X(!1)}get hadGetData(){return this.hadGetData$.getValue()}get filterParams(){return this._filterParams}set filterParams(d){this._filterParams=d}reloadDataService(d,z="filterModel"){this.loading=!0,this.hadGetData$.next(!1),d[z](this.filterParams,this.pagination).pipe((0,T.q)(1)).subscribe(M=>{if(M.pagination.page>M.pagination.totalPages)return this.pagination={...this.pagination,page:M.pagination.totalPages},this.reloadDataService(d);this.loading=!1,this.pagination={...this.pagination,totalCount:M.pagination.totalCount||M.pagination.totalElements},this.listData=M.data,this.hadGetData$.next(!0)},()=>{this.loading=!1,this.listData=[],this.pagination={...this.pagination,totalCount:0}})}onQueryParamsChange(d){const{pageSize:z,pageIndex:M}=d;this.pagination={...this.pagination,rowsPerPage:z,page:M},this.reloadData()}reloadData(){}ngOnInit(){}}return C.\u0275fac=function(d){return new(d||C)},C.\u0275cmp=g.Xpm({type:C,selectors:[["ng-component"]],decls:0,vars:0,template:function(d,z){},encapsulation:2}),C})()},76916:(N,y,r)=>{"use strict";r.d(y,{G:()=>u});var T=r(34793),h=r(92198),g=r(38014),s=r(94650),C=r(89383),A=r(60097),d=r(36895);function z(v,m){if(1&v&&(s.TgZ(0,"a",14)(1,"span",15),s._uU(2),s.ALo(3,"translate"),s.qZA()()),2&v){const c=s.oxw().$implicit;s.xp6(2),s.hij(" ",s.lcZ(3,1,c.label)," ")}}function M(v,m){if(1&v&&(s.TgZ(0,"a",16)(1,"span",15),s._uU(2),s.ALo(3,"translate"),s.qZA()()),2&v){const c=s.oxw(),e=c.$implicit,b=c.last,f=s.oxw(2);s.Q6J("routerLink",e.url)("queryParams",b&&f.route.snapshot.queryParams),s.xp6(2),s.hij(" ",s.lcZ(3,3,e.label)," ")}}function _(v,m){if(1&v&&(s.ynx(0),s.TgZ(1,"li",10)(2,"span"),s._uU(3," > "),s.qZA()(),s.TgZ(4,"li",11),s.YNc(5,z,4,3,"a",12),s.YNc(6,M,4,5,"a",13),s.qZA(),s.BQk()),2&v){const c=m.first;s.xp6(5),s.Q6J("ngIf",c),s.xp6(1),s.Q6J("ngIf",!c)}}function p(v,m){if(1&v){const c=s.EpF();s.TgZ(0,"div",1)(1,"div",2)(2,"div",3),s._UZ(3,"h3",4),s.TgZ(4,"ul",5)(5,"li",6)(6,"a",7),s.NdJ("click",function(){s.CHM(c);const b=s.oxw();return s.KtG(b.jumpHome())}),s._UZ(7,"i",8),s.qZA()(),s.YNc(8,_,7,2,"ng-container",9),s.qZA()(),s.TgZ(9,"div"),s.Hsn(10),s.qZA()()()}if(2&v){const c=s.oxw();s.xp6(3),s.Q6J("innerHTML",c.title,s.oJD),s.xp6(5),s.Q6J("ngForOf",c.breads)}}const Z=["*"];let u=(()=>{class v{constructor(c,e,b,f){this.router=c,this.route=e,this.translate=b,this._carparkService=f,this.breads=[],this.loginUser=""}ngOnInit(){let c=JSON.parse(localStorage.getItem("user-roles"))[0];this.loginUser=c,console.log(this.loginUser,"\u4fe1\u606f"),this.breads=this.buildBreadCrumb(this.route.root),this.translate.get(this.breads[0].label).subscribe(b=>{this.label=b}),this.router.events.pipe((0,h.h)(b=>b instanceof T.m2)).subscribe(()=>{this.breads=this.buildBreadCrumb(this.route.root)})}buildBreadCrumb(c,e=[""],b=[]){const f=c.snapshot.url[0]&&c.snapshot.url[0].path,P=[...e,f],L={...this.extractBreadcrumb(c),url:P},F=f&&L.label?[...b,L]:b;return this.title=L.title||this.title||"",this.isMotorist&&"My Vehicle(s)"===L.label&&(this.title="My Vehicle(s)"),c.firstChild?f?this.buildBreadCrumb(c.firstChild,P,F):this.buildBreadCrumb(c.firstChild,e,b):(this.translate.get(this.title).subscribe(S=>{this.title=S}),F)}get isMotorist(){return this._carparkService.isMotorist()}extractBreadcrumb(c){return c.snapshot.data.breadcrumb instanceof Function?c.snapshot.data.breadcrumb(c):c.snapshot.data.breadcrumb}jumpHome(){let c=JSON.parse(localStorage.getItem("user-roles"))[0]??"";this.router.navigate(c.length?[g.gpL[c]]:["/"])}}return v.\u0275fac=function(c){return new(c||v)(s.Y36(T.F0),s.Y36(T.gz),s.Y36(C.sK),s.Y36(A.x))},v.\u0275cmp=s.Xpm({type:v,selectors:[["app-title-bar"]],ngContentSelectors:Z,decls:1,vars:1,consts:[["class","m-subheader",4,"ngIf"],[1,"m-subheader"],[1,"d-flex","align-items-center"],[1,"mr-auto"],[1,"m-subheader__title","m-subheader__title--separator","text-main",3,"innerHTML"],[1,"m-subheader__breadcrumbs","m-nav","m-nav--inline"],[1,"m-nav__item","m-nav__item--home"],[1,"m-nav__link","m-nav__link--icon",3,"click"],[1,"m-nav__link-icon","la","la-home"],[4,"ngFor","ngForOf"],[1,"m-nav__separator"],[1,"m-nav__item"],["class","m-nav__link",4,"ngIf"],["class","m-nav__link",3,"routerLink","queryParams",4,"ngIf"],[1,"m-nav__link"],[1,"m-nav__link-text"],[1,"m-nav__link",3,"routerLink","queryParams"]],template:function(c,e){1&c&&(s.F$t(),s.YNc(0,p,11,2,"div",0)),2&c&&s.Q6J("ngIf","ROLE_TPO_PARTNER"!==e.loginUser)},dependencies:[d.sg,d.O5,T.yS,C.X$],encapsulation:2}),v})()},93416:(N,y,r)=>{"use strict";r.r(y),r.d(y,{VisitorManagementModule:()=>nt,createTranslateLoader:()=>ie});var T=r(36895),h=r(24006),g=r(34793),s=r(372),C=r(15128),A=r(87026),d=r(60097),z=r(36511),M=r(91599),_=r(42684),p=r(71942),Z=r(457),u=r(30329),v=r(21532),m=r(74564),c=r(59501),e=r(94650),b=r(76916),f=r(38014),P=r(8929),L=r(1059),F=r(80013),S=r(75778),O=r(2994),D=r(87545),j=r(88117),ae=r(72986),U=r(89383),I=r(35635),J=r(66616),q=r(47044),B=r(21811),w=r(38231),E=r(834);function oe(i,l){if(1&i&&(e.TgZ(0,"div",37)(1,"div",38)(2,"div",39)(3,"h3",40),e._uU(4),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(4),e.hij(" ",t.form.id," ")}}function re(i,l){if(1&i&&e._UZ(0,"nz-option",41),2&i){const t=l.$implicit;e.Q6J("nzValue",t.id)("nzLabel",t.name)}}function le(i,l){if(1&i&&(e._UZ(0,"nz-option",41),e.ALo(1,"titlecase")),2&i){const t=l.$implicit;e.Q6J("nzValue",t.id)("nzLabel",e.lcZ(1,2,t.value))}}function se(i,l){if(1&i&&(e.TgZ(0,"div",42),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,t.vehicleNoMessage)," ")}}function ce(i,l){1&i&&(e.TgZ(0,"div",42),e._uU(1," Numeric characters only. "),e.qZA())}function pe(i,l){1&i&&(e.TgZ(0,"div",42),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function de(i,l){1&i&&(e.TgZ(0,"div",42),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function me(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._UZ(1,"i",43),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Delete")," "))}let Y=(()=>{class i{constructor(t,n,a,o,x){this.router=t,this.vehicleService=n,this.carParkService=a,this.codeTablesService=o,this.translate=x,this.form=(0,f.tN9)(),this.canceled=new e.vpe,this.deleted=new e.vpe,this.submitted=new e.vpe,this.visitorTypes=f.Zm$,this.carParkInput$=new P.xQ,this.vehicleNoMessage=f.vwt.VehicleNo,this.vehicleNumberErrMsg=!1,this.iuNumberErrMsg=!1}ngOnInit(){this.carParks$=this.carParkInput$.pipe((0,L.O)(""),(0,F.b)(200),(0,S.x)(),(0,O.b)(()=>this.carParkLoading=!0),(0,D.w)(t=>this.carParkService.getSimpleList(t).pipe((0,O.b)(()=>this.carParkLoading=!1))),(0,j.B)()),this.carParks$.pipe((0,ae.q)(1)).subscribe(t=>{this.form.carParkId=this.form.carParkId||t[0]&&t[0].id}),this.vehicleTypes$=this.codeTablesService.filterModelByType(f.BcL.VehicleType).map(t=>(this.form.vehicleType=this.form.vehicleType||t[0]&&t[0].id,t))}vehicleChanged(t){this.selectedVehicle=t}get vehicleType(){return this.selectedVehicle?f.php.filter(t=>t.value===this.selectedVehicle.vehicleType).map(t=>t.text)[0]:""}delete(){this.deleted.emit()}cancel(){this.canceled.emit()}submit(){this.submitted.emit({...this.form})}changeVehicleInfo(t){"iuNumber"==t&&(this.iuNumberErrMsg=!1),"vehicleNumber"==t&&(this.vehicleNumberErrMsg=!1)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.F0),e.Y36(p.f),e.Y36(d.x),e.Y36(z.I),e.Y36(U.sK))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vehicles-form-blacklist"]],inputs:{form:"form"},outputs:{canceled:"canceled",deleted:"deleted",submitted:"submitted"},decls:108,vars:71,consts:[[1,"m-form","m-form--fit","m-form--label-align-right"],[1,"m-portlet"],["class","m-portlet__head",4,"ngIf"],[1,"m-portlet__body"],[1,"row","form-group","m-form__group"],[1,"col-form-label","col-lg-2","col-sm-12"],[1,"m--font-danger"],[1,"col-lg-4","col-sm-12"],["nzPlaceHolder","Please Select","name","carParkId",2,"width","100%",3,"ngModel","nzLoading","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["name","startTime",2,"width","100%",3,"ngModel","nzShowTime","ngModelChange"],["name","endTime",2,"width","100%",3,"ngModel","nzShowTime","ngModelChange"],["nzPlaceHolder","Please Select","name","vehicleType",2,"width","100%",3,"ngModel","ngModelChange"],["type","text","nz-input","","maxlength","8","pattern","^[A-Z0-9]+$","name","vehicleNumber",3,"ngModel","ngModelChange"],["vehicleNumber","ngModel"],["class","form-control-feedback",4,"ngIf"],["nz-input","","type","text","name","iuNumber","pattern","^[0-9]+$","digitOnly","","inputmode","numeric","placeholder","","maxlength","10","required","",3,"ngModel","ngModelChange","change"],["iuNumber","ngModel"],["nz-input","","type","text","name","firstName","required","",3,"ngModel","ngModelChange"],["firstName","ngModel"],["nz-input","","type","text","name","lastName","required","",3,"ngModel","ngModelChange"],["lastName","ngModel"],["nzPlaceHolder","Please Select","name","entry",2,"width","100%",3,"ngModel","ngModelChange"],["nzValue","1",3,"nzLabel"],["nzValue","0",3,"nzLabel"],[1,"col-lg-10","col-sm-12"],["nz-input","","type","text","name","showingMessage","required","",3,"ngModel","ngModelChange"],["showingMessage","ngModel"],["nz-input","","type","text","name","remark","required","",3,"ngModel","ngModelChange"],["remark","ngModel"],[1,"m-portlet__foot","bg-light-gray"],[1,"row"],[1,"m-form__actions","col"],["nz-button","","nzType","primary","nzSize","large","class","btn-form-ops","nzGhost","",3,"click",4,"ngIf"],[1,"m-form__actions","m-form__actions--right","row"],["nz-button","","nzType","primary","nzSize","large","nzGhost","",1,"btn-form-ops",3,"click"],["nz-button","","nzType","primary","nzSize","large",1,"btn-form-ops","m--margin-left-30",3,"click"],[1,"m-portlet__head"],[1,"m-portlet__head-caption"],[1,"m-portlet__head-title"],[1,"m-portlet__head-text"],[3,"nzValue","nzLabel"],[1,"form-control-feedback"],[1,"la","la-trash"]],template:function(t,n){if(1&t&&(e.TgZ(0,"form",0)(1,"div",1),e.YNc(2,oe,5,1,"div",2),e.TgZ(3,"div",3)(4,"div",4)(5,"label",5)(6,"span",6),e._uU(7,"*"),e.qZA(),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"div",7)(11,"nz-select",8),e.NdJ("ngModelChange",function(o){return n.form.carParkId=o}),e.YNc(12,re,1,2,"nz-option",9),e.ALo(13,"async"),e.qZA()()(),e.TgZ(14,"div",4)(15,"label",5)(16,"span",6),e._uU(17,"*"),e.qZA(),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"div",7)(21,"nz-date-picker",10),e.NdJ("ngModelChange",function(o){return n.form.startTime=o}),e.qZA()(),e.TgZ(22,"label",5)(23,"span",6),e._uU(24,"*"),e.qZA(),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"div",7)(28,"nz-date-picker",11),e.NdJ("ngModelChange",function(o){return n.form.endTime=o}),e.qZA()()(),e._UZ(29,"hr"),e.TgZ(30,"div",4)(31,"label",5),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"div",7)(35,"nz-select",12),e.NdJ("ngModelChange",function(o){return n.form.vehicleType=o}),e.YNc(36,le,2,4,"nz-option",9),e.ALo(37,"async"),e.qZA()(),e.TgZ(38,"label",5),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"div",7)(42,"input",13,14),e.NdJ("ngModelChange",function(o){return n.form.carPlateNo=o}),e.qZA(),e.YNc(44,se,3,3,"div",15),e.qZA()(),e.TgZ(45,"div",4)(46,"label",5)(47,"span",6),e._uU(48,"*"),e.qZA(),e._uU(49),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"div",7)(52,"input",16,17),e.NdJ("ngModelChange",function(o){return n.form.iuNumber=o})("change",function(){return n.changeVehicleInfo("iuNumber")}),e.qZA(),e.YNc(54,ce,2,0,"div",15),e.qZA()(),e._UZ(55,"hr"),e.TgZ(56,"div",4)(57,"label",5),e._uU(58),e.ALo(59,"translate"),e.qZA(),e.TgZ(60,"div",7)(61,"input",18,19),e.NdJ("ngModelChange",function(o){return n.form.firstName=o}),e.qZA(),e.YNc(63,pe,3,3,"div",15),e.qZA(),e.TgZ(64,"label",5),e._uU(65),e.ALo(66,"translate"),e.qZA(),e.TgZ(67,"div",7)(68,"input",20,21),e.NdJ("ngModelChange",function(o){return n.form.lastName=o}),e.qZA(),e.YNc(70,de,3,3,"div",15),e.qZA()(),e.TgZ(71,"div",4)(72,"label",5)(73,"span",6),e._uU(74,"*"),e.qZA(),e._uU(75),e.ALo(76,"translate"),e.qZA(),e.TgZ(77,"div",7)(78,"nz-select",22),e.NdJ("ngModelChange",function(o){return n.form.blackListFlag=o}),e._UZ(79,"nz-option",23),e.ALo(80,"translate"),e._UZ(81,"nz-option",24),e.ALo(82,"translate"),e.qZA()()(),e.TgZ(83,"div",4)(84,"label",5),e._uU(85),e.ALo(86,"translate"),e.qZA(),e.TgZ(87,"div",25)(88,"input",26,27),e.NdJ("ngModelChange",function(o){return n.form.showingMessage=o}),e.qZA()()(),e.TgZ(90,"div",4)(91,"label",5),e._uU(92),e.ALo(93,"translate"),e.qZA(),e.TgZ(94,"div",25)(95,"input",28,29),e.NdJ("ngModelChange",function(o){return n.form.remark=o}),e.qZA()()()(),e.TgZ(97,"div",30)(98,"div",31)(99,"div",32),e.YNc(100,me,4,3,"button",33),e.qZA(),e.TgZ(101,"div",34)(102,"button",35),e.NdJ("click",function(){return n.cancel()}),e._uU(103),e.ALo(104,"translate"),e.qZA(),e.TgZ(105,"button",36),e.NdJ("click",function(){return n.submit()}),e._uU(106),e.ALo(107,"translate"),e.qZA()()()()()()),2&t){const a=e.MAs(43),o=e.MAs(53),x=e.MAs(62),V=e.MAs(69);e.xp6(2),e.Q6J("ngIf",n.form.id),e.xp6(6),e.hij(" ",e.lcZ(9,37,"Car Park"),": "),e.xp6(3),e.Q6J("ngModel",n.form.carParkId)("nzLoading",n.carParkLoading),e.xp6(1),e.Q6J("ngForOf",e.lcZ(13,39,n.carParks$)),e.xp6(6),e.hij(" ",e.lcZ(19,41,"Start Date"),": "),e.xp6(3),e.Q6J("ngModel",n.form.startTime)("nzShowTime",!0),e.xp6(4),e.hij(" ",e.lcZ(26,43,"End Date"),": "),e.xp6(3),e.Q6J("ngModel",n.form.endTime)("nzShowTime",!0),e.xp6(4),e.hij(" ",e.lcZ(33,45,"Vehicle Type"),": "),e.xp6(3),e.Q6J("ngModel",n.form.vehicleType),e.xp6(1),e.Q6J("ngForOf",e.lcZ(37,47,n.vehicleTypes$)),e.xp6(3),e.hij(" ",e.lcZ(40,49,"Vehicle No."),": "),e.xp6(3),e.Q6J("ngModel",n.form.carPlateNo),e.xp6(2),e.Q6J("ngIf",a.invalid&&(a.dirty||a.touched)),e.xp6(5),e.hij(" ",e.lcZ(50,51,"IU No."),": "),e.xp6(3),e.Q6J("ngModel",n.form.iuNumber),e.xp6(2),e.Q6J("ngIf",o.invalid&&(o.dirty||o.touched)),e.xp6(4),e.hij(" ",e.lcZ(59,53,"First Name"),": "),e.xp6(3),e.Q6J("ngModel",n.form.firstName),e.xp6(2),e.Q6J("ngIf",x.invalid&&(x.dirty||x.touched)),e.xp6(2),e.hij(" ",e.lcZ(66,55,"Last Name"),": "),e.xp6(3),e.Q6J("ngModel",n.form.lastName),e.xp6(2),e.Q6J("ngIf",V.invalid&&(V.dirty||V.touched)),e.xp6(5),e.hij(" ",e.lcZ(76,57,"Allow Entry?")," "),e.xp6(3),e.Q6J("ngModel",n.form.blackListFlag),e.xp6(1),e.Q6J("nzLabel",e.lcZ(80,59,"Yes")),e.xp6(2),e.Q6J("nzLabel",e.lcZ(82,61,"No")),e.xp6(4),e.hij(" ",e.lcZ(86,63,"Screen Display"),": "),e.xp6(3),e.Q6J("ngModel",n.form.showingMessage),e.xp6(4),e.hij(" ",e.lcZ(93,65,"Remark"),": "),e.xp6(3),e.Q6J("ngModel",n.form.remark),e.xp6(5),e.Q6J("ngIf",n.form.id),e.xp6(3),e.hij(" ",e.lcZ(104,67,"Cancel")," "),e.xp6(3),e.hij(" ",e.lcZ(107,69,"Submit")," ")}},dependencies:[T.sg,T.O5,I.Zp,J.ix,q.w,B.dQ,w.Ip,w.Vq,E.uw,h._Y,h.Fj,h.JJ,h.JL,h.Q7,h.nD,h.c5,h.On,h.F,T.Ov,T.rS,U.X$],encapsulation:2}),i})(),he=(()=>{class i{constructor(t,n){this.router=t,this.blacklistVehicleService=n}ngOnInit(){}cancel(){this.router.navigate(["/visitor-management/blacklist"])}submit(t){this.blacklistVehicleService.createModel(t).subscribe(()=>{this.router.navigate(["/visitor-management/blacklist"])})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.F0),e.Y36(A.R))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vehicle-create-blacklist"]],decls:4,vars:0,consts:[[1,"body-wrapper"],[1,"m-content"],[3,"canceled","submitted"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-title-bar"),e.TgZ(2,"div",1)(3,"app-vehicles-form-blacklist",2),e.NdJ("canceled",function(){return n.cancel()})("submitted",function(o){return n.submit(o)}),e.qZA()()())},dependencies:[b.G,Y],encapsulation:2}),i})(),ue=(()=>{class i{constructor(t,n,a,o){this.router=t,this.route=n,this.vehicleService=a,this.blacklistVehicleService=o}ngOnInit(){const t=this.route.snapshot.data.item;this.item={...t,startTime:new Date(t.startTime),endTime:new Date(t.endTime)}}onDeleted(){this.blacklistVehicleService.deleteModel(this.item.id).subscribe(()=>{this.router.navigate(["/visitor-management/blacklist"])})}onCanceled(){this.router.navigate(["/visitor-management/blacklist"])}onSubmitted(t){this.blacklistVehicleService.updateModel(null,t).subscribe(()=>{this.router.navigate(["/visitor-management/blacklist"])})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.F0),e.Y36(g.gz),e.Y36(p.f),e.Y36(A.R))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vehicle-blacklist-update"]],decls:4,vars:1,consts:[[1,"body-wrapper"],[1,"m-content"],[3,"form","deleted","canceled","submitted"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-title-bar"),e.TgZ(2,"div",1)(3,"app-vehicles-form-blacklist",2),e.NdJ("deleted",function(){return n.onDeleted()})("canceled",function(){return n.onCanceled()})("submitted",function(o){return n.onSubmitted(o)}),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("form",n.item))},dependencies:[b.G,Y],encapsulation:2}),i})();var ge=r(79118),R=r(86181),K=r(52746),W=r(9215),k=r(40269);function _e(i,l){if(1&i&&e._UZ(0,"nz-option",17),2&i){const t=l.$implicit;e.Q6J("nzValue",t.id)("nzLabel",t.name)}}function ve(i,l){if(1&i&&e._UZ(0,"nz-option",17),2&i){const t=l.$implicit;e.Q6J("nzValue",t.value)("nzLabel",t.text)}}function fe(i,l){if(1&i&&e._UZ(0,"nz-option",17),2&i){const t=l.$implicit;e.Q6J("nzValue",t.value)("nzLabel",t.text)}}function Ze(i,l){if(1&i&&e._uU(0),2&i){const t=l.range;e.lnq(" ",t[0],"-",t[1]," of ",l.$implicit," items\n")}}function Te(i,l){if(1&i&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Oqu(t.text)}}const Ce=function(i){return["..","edit","blacklist",i]};function be(i,l){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr")(2,"td",18),e.NdJ("nzExpandChange",function(a){const x=e.CHM(t).$implicit,V=e.oxw();return e.KtG(V.onExpandChange(x.id,a))}),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"span"),e._UZ(7,"img",19),e.qZA(),e.TgZ(8,"span"),e._uU(9),e.qZA()(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.ALo(18,"date"),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.ALo(21,"date"),e.qZA(),e.TgZ(22,"td"),e._uU(23),e.qZA(),e.TgZ(24,"td")(25,"a",20),e._UZ(26,"i",21),e.qZA()()(),e.TgZ(27,"tr",22)(28,"nz-table",23)(29,"thead")(30,"tr")(31,"th"),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"th"),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"th"),e._uU(38),e.ALo(39,"translate"),e.qZA()()(),e.TgZ(40,"tbody")(41,"tr")(42,"td"),e._uU(43),e.qZA(),e.TgZ(44,"td"),e._uU(45),e.ALo(46,"date"),e.qZA(),e.TgZ(47,"td"),e._uU(48),e.qZA()()()()(),e.BQk()}if(2&i){const t=l.$implicit,n=l.index,a=e.oxw();e.xp6(1),e.ekj("ant-table-row-odd",n%2==1),e.xp6(1),e.Q6J("nzExpand",a.expandSet.has(t.id)),e.xp6(2),e.Oqu(t.id),e.xp6(3),e.Q6J("src",a.vehicleTypeLogo(t.vehicleType),e.LSH),e.xp6(2),e.Oqu(t.carPlateNo),e.xp6(2),e.Oqu(t.iuNumber),e.xp6(2),e.AsE("",t.firstName," ",t.lastName,""),e.xp6(2),e.Oqu(t.carParkName),e.xp6(2),e.Oqu(e.xi3(18,22,t.startTime,"medium")),e.xp6(3),e.Oqu(e.xi3(21,25,t.endTime,"medium")),e.xp6(3),e.Oqu(t.blackListFlag?"Yes":"No"),e.xp6(2),e.Q6J("routerLink",e.VKq(37,Ce,t.id)),e.xp6(2),e.Q6J("nzExpand",a.expandSet.has(t.id)),e.xp6(1),e.Q6J("nzShowPagination",!1),e.xp6(4),e.Oqu(e.lcZ(33,28,"Screen Display")),e.xp6(3),e.Oqu(e.lcZ(36,30,"Date Created")),e.xp6(3),e.Oqu(e.lcZ(39,32,"Remark")),e.xp6(5),e.Oqu(t.showingMessage||"-"),e.xp6(2),e.Oqu(e.xi3(46,34,t.createddate,"d LLL yyyy")),e.xp6(3),e.Oqu(t.remark||"-")}}let Me=(()=>{class i extends K.t{constructor(t,n,a,o,x,V){super(),this.router=t,this.blacklistService=n,this.carParkService=a,this.route=o,this.vehicleService=x,this.translate=V,this.tableHeaders=[{text:"ID",column:"id",width:"30px"},{text:"Vehicle",column:"vehiclePlateNo",width:"150px"},{text:"IU No.",column:"iuNumber",width:"150px"},{text:"Driver",column:"driverId",width:"120px"},{text:"Car Park",column:"carParkId",width:"200px"},{text:"Start Date",width:"120px"},{text:"End Date",width:"120px"},{text:"Allow Entry?",column:"entry",width:"120px"},{text:"Actions",width:"100px"}],this.expandSet=new Set,this.loading=!1,this.pagination=(0,R.f$)(),this.vehicleTypes=f.php,this.statusOptions=f.FXS,this.keyword="",this.status="",this.allowEntry="",this.dateRange=null,this.data=[],this.carParkInput$=new P.xQ,this.getVisitorType=f.e$2,this.allowEntryOptions=f.UkJ}carParkCodes(t){return t.carParks?t.carParks.map(n=>n.code).join(", "):""}vehicleTypeLogo(t){return(0,f.e9Z)(f.php,t,"icon")}displayName(t){return(0,f.ssW)(t)}getStatusOption(t,n){return t?f.FXS.filter(a=>a.value===t.status).map(a=>a[n])[0]:""}get filterParams(){return{carPark:this.carParkId,vehicle:this.vehicle,status:this.status,from:this.dateRange&&this.dateRange.length?this.dateRange[0].toISOString():void 0,to:this.dateRange&&this.dateRange.length>1?this.dateRange[1].toISOString():void 0,keyword:this.keyword}}reloadData(){this.reloadDataService(this.blacklistService)}pageChanged(t){this.pagination=t,this.reloadData()}ngOnInit(){this.reloadData(),this.carParks$=this.carParkInput$.pipe((0,L.O)(""),(0,F.b)(200),(0,S.x)(),(0,O.b)(()=>this.carParkLoading=!0),(0,D.w)(n=>this.carParkService.getSimpleList(n).pipe((0,O.b)(()=>this.carParkLoading=!1)))),this.vehicles$=this.vehicleService.getSimpleList().map(n=>n.map(a=>a.vehicleNumber));const t=this.tableHeaders.map(n=>n.text);this.translate.get(t).subscribe(n=>{this.tableHeaders.forEach(a=>{for(let o in n)n.hasOwnProperty(o)&&a.text===o&&(a.text=n[o])})})}onExpandChange(t,n){n?this.expandSet.add(t):this.expandSet.delete(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.F0),e.Y36(A.R),e.Y36(d.x),e.Y36(g.gz),e.Y36(p.f),e.Y36(U.sK))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vehicle-blacklist"]],features:[e.qOj],decls:51,vars:41,consts:[[1,"form-group","m-form__group","m-portlet__filters"],["nz-button","","nzType","primary","nzShape","round",2,"position","absolute","right","30px","top","-60px",3,"click"],[1,"la","la-plus"],[1,"m-portlet__filter"],[1,"col-form-label"],["nzPlaceHolder","Please Select",2,"width","160px",3,"ngModel","nzLoading","nzDropdownMatchSelectWidth","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],[1,"col-form-label","col-form-label-nowrap"],[1,"m-input-icon","m-input-icon--left"],["type","text","nz-input","","placeholder","",3,"ngModel","debounce","ngModelChange","onDebounce"],["nzPlaceHolder","Please Select",2,"width","160px",3,"ngModel","ngModelChange"],["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowSizeChanger","nzShowTotal","nzQueryParams"],["basicTable",""],["nzWidth","60px"],[4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],[3,"nzExpand","nzExpandChange"],["alt","",3,"src"],[1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","no-border",3,"routerLink"],[1,"la","la-edit"],[3,"nzExpand"],["nzSize","middle","nzTemplateMode","",3,"nzShowPagination"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return n.router.navigate(["../create/blacklist"],{relativeTo:n.route})}),e.TgZ(2,"span"),e._UZ(3,"i",2),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"translate"),e.qZA()()(),e.TgZ(7,"div",3)(8,"label",4),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"div")(12,"nz-select",5),e.NdJ("ngModelChange",function(o){return n.carParkId=o})("ngModelChange",function(){return n.reloadData()}),e.YNc(13,_e,1,2,"nz-option",6),e.ALo(14,"async"),e.qZA()()(),e.TgZ(15,"div",3)(16,"label",4),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"div")(20,"nz-range-picker",7),e.NdJ("ngModelChange",function(o){return n.dateRange=o})("ngModelChange",function(){return n.reloadData()}),e.qZA()()(),e.TgZ(21,"div",3)(22,"label",8),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"div",9)(26,"input",10),e.NdJ("ngModelChange",function(o){return n.keyword=o})("onDebounce",function(){return n.reloadData()}),e.qZA()()(),e.TgZ(27,"div",3)(28,"label",4),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"div")(32,"nz-select",11),e.NdJ("ngModelChange",function(o){return n.allowEntry=o})("ngModelChange",function(){return n.reloadData()}),e.YNc(33,ve,1,2,"nz-option",6),e.qZA()()(),e.TgZ(34,"div",3)(35,"label",4),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"div")(39,"nz-select",11),e.NdJ("ngModelChange",function(o){return n.status=o})("ngModelChange",function(){return n.reloadData()}),e.YNc(40,fe,1,2,"nz-option",6),e.qZA()()()(),e.YNc(41,Ze,1,3,"ng-template",null,12,e.W1O),e.TgZ(43,"nz-table",13,14),e.NdJ("nzQueryParams",function(o){return n.onQueryParamsChange(o)}),e.TgZ(45,"thead")(46,"tr"),e._UZ(47,"th",15),e.YNc(48,Te,2,1,"th",16),e.qZA()(),e.TgZ(49,"tbody"),e.YNc(50,be,49,39,"ng-container",16),e.qZA()()),2&t){const a=e.MAs(42),o=e.MAs(44);e.xp6(5),e.hij(" ",e.lcZ(6,27,"Create Blacklist")," "),e.xp6(4),e.hij(" ",e.lcZ(10,29,"Car Park"),": "),e.xp6(3),e.Q6J("ngModel",n.carParkId)("nzLoading",n.carParkLoading)("nzDropdownMatchSelectWidth",!1),e.xp6(1),e.Q6J("ngForOf",e.lcZ(14,31,n.carParks$)),e.xp6(4),e.hij(" ",e.lcZ(18,33,"Date Range"),": "),e.xp6(3),e.Q6J("ngModel",n.dateRange),e.xp6(3),e.hij(" ",e.lcZ(24,35,"Vehicle No."),": "),e.xp6(3),e.Q6J("ngModel",n.keyword)("debounce",500),e.xp6(3),e.hij(" ",e.lcZ(30,37,"Allow Entry"),": "),e.xp6(3),e.Q6J("ngModel",n.allowEntry),e.xp6(1),e.Q6J("ngForOf",n.statusOptions),e.xp6(3),e.hij(" ",e.lcZ(37,39,"Status"),": "),e.xp6(3),e.Q6J("ngModel",n.status),e.xp6(1),e.Q6J("ngForOf",n.statusOptions),e.xp6(3),e.Q6J("nzData",n.listData)("nzFrontPagination",!1)("nzLoading",n.loading)("nzTotal",n.pagination.totalCount)("nzPageSize",n.pagination.rowsPerPage)("nzPageIndex",n.pagination.page)("nzShowSizeChanger",!0)("nzShowTotal",a),e.xp6(5),e.Q6J("ngForOf",n.tableHeaders),e.xp6(2),e.Q6J("ngForOf",o.data)}},dependencies:[T.sg,h.Fj,h.JJ,h.On,g.yS,W.q,I.Zp,J.ix,q.w,B.dQ,w.Ip,w.Vq,E.uw,E.wS,k.N8,k.Uo,k._C,k.h7,k.Om,k.p0,k.$Z,k.d3,k.Vk,T.Ov,T.uU,U.X$],encapsulation:2}),i})();var H=r(88796),G=r(59245),X=r(80529),ee=r(19832),te=r(80601);function Ae(i){return new ee.w(i,"../assets/i18n/",".json")}let ze=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[te.N],imports:[g.Bz,T.ez,v.x,h.u5,u.D,G.mr,s.kn,H.A0,h.UX,U.aw.forChild({loader:{provide:U.Zw,useFactory:Ae,deps:[X.eN]}})]}),i})();var xe=r(24850);const ke=["formVehicle"];function Ve(i,l){if(1&i&&(e.TgZ(0,"div",38)(1,"div",39)(2,"div",40)(3,"h3",41),e._uU(4),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(4),e.hij(" ",t.form.id," ")}}function ye(i,l){if(1&i&&e._UZ(0,"nz-option",42),2&i){const t=l.$implicit;e.Q6J("nzValue",t.id)("nzLabel",t.name)}}function Pe(i,l){if(1&i&&e._UZ(0,"nz-option",42),2&i){const t=l.$implicit;e.Q6J("nzValue",t.code)("nzLabel",t.name)}}function Ue(i,l){1&i&&(e.TgZ(0,"div",43),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function Le(i,l){if(1&i&&e._UZ(0,"nz-option",42),2&i){const t=l.$implicit;e.Q6J("nzValue",t.value)("nzLabel",t.text)}}function Ne(i,l){if(1&i&&(e._UZ(0,"nz-option",42),e.ALo(1,"titlecase")),2&i){const t=l.$implicit;e.Q6J("nzValue",t.id)("nzLabel",e.lcZ(1,2,t.value))}}function Oe(i,l){if(1&i&&(e.TgZ(0,"div",43),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,t.vehicleNoMessage)," ")}}function we(i,l){1&i&&(e.TgZ(0,"div",43),e._uU(1," Numeric characters only. "),e.qZA())}function Fe(i,l){1&i&&(e.TgZ(0,"div",43),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function Se(i,l){1&i&&(e.TgZ(0,"div",43),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Field is required.")," "))}function Ee(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._UZ(1,"i",44),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Delete")," "))}let Q=(()=>{class i{constructor(t,n,a,o,x,V){this.router=t,this.vehicleService=n,this.carParkService=a,this.codeTablesService=o,this.translate=x,this.parkingMemberService=V,this.deleted=new e.vpe,this.canceled=new e.vpe,this.submitted=new e.vpe,this.form=(0,f.Xau)(),this.vehicleTypes=f.php,this.visitorTypes=f.Zm$,this.carParkInput$=new P.xQ,this.vehicleNoMessage=f.vwt.VehicleNo,this.vehicleNumberErrMsg=!1,this.iuNumberErrMsg=!1}ngOnInit(){this.listZone$=this.parkingMemberService.getZoneCodeList(),this.carParks$=this.carParkInput$.pipe((0,L.O)(""),(0,F.b)(200),(0,S.x)(),(0,O.b)(()=>this.carParkLoading=!0),(0,D.w)(n=>this.carParkService.getSimpleList(n).pipe((0,xe.U)(a=>a),(0,O.b)(()=>this.carParkLoading=!1))),(0,j.B)()),this.vehicleTypes$=this.codeTablesService.filterModelByType(f.BcL.VehicleType).map(n=>(this.form.vehicleType=this.form.vehicleType||n[0]&&n[0].id,n));const t=this.visitorTypes.map(n=>n.text);this.translate.get(t).subscribe(n=>{this.visitorTypes.forEach(a=>{for(let o in n)n.hasOwnProperty(o)&&a.text===o&&(a.text=n[o])})})}carParkChanged(){}delete(){this.deleted.emit()}cancel(){this.canceled.emit()}submit(){this.submitted.emit({...this.form})}resetForm(){this.form=(0,f.Xau)(),this.formVehicle.reset()}changeVehicleInfo(t){"iuNumber"==t&&(this.iuNumberErrMsg=!1),"vehicleNumber"==t&&(this.vehicleNumberErrMsg=!1)}zoneOrCarparkChanged(t){"carpark"===t&&this.form.zoneCode&&(this.form.zoneCode=null),"zone"===t&&this.form.carParkId&&(this.form.carParkId=null)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.F0),e.Y36(p.f),e.Y36(d.x),e.Y36(z.I),e.Y36(U.sK),e.Y36(te.N))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vehicles-form-vip"]],viewQuery:function(t,n){if(1&t&&e.Gf(ke,5),2&t){let a;e.iGM(a=e.CRH())&&(n.formVehicle=a.first)}},inputs:{form:"form"},outputs:{deleted:"deleted",canceled:"canceled",submitted:"submitted"},decls:118,vars:74,consts:[[1,"m-form","m-form--fit","m-form--label-align-right"],["formVehicle","ngForm"],[1,"m-portlet"],["class","m-portlet__head",4,"ngIf"],[1,"m-portlet__body"],[1,"row","form-group","m-form__group"],[1,"col-form-label","col-lg-2","col-sm-12"],[1,"col-lg-4","col-sm-12"],["nzPlaceHolder","Please Select","name","carParkId",2,"width","100%",3,"ngModel","nzLoading","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[1,"m--font-danger"],["nzPlaceHolder","Please Select","name","zoneCode",2,"width","100%",3,"ngModel","ngModelChange"],["zoneCode","ngModel"],["class","form-control-feedback",4,"ngIf"],["nzPlaceHolder","Please Select","name","type",2,"width","100%",3,"ngModel","ngModelChange"],["name","startTime",2,"width","100%",3,"ngModel","nzShowTime","ngModelChange"],["name","endTime",2,"width","100%",3,"ngModel","nzShowTime","ngModelChange"],["nzPlaceHolder","Please Select","name","vehicleType",2,"width","100%",3,"ngModel","ngModelChange"],["type","text","nz-input","","maxlength","8","pattern","^[A-Z0-9]+$","name","vehicleNumber",3,"ngModel","ngModelChange"],["vehicleNumber","ngModel"],["nz-input","","type","text","name","iuNumber","pattern","^[0-9]+$","digitOnly","","inputmode","numeric","placeholder","","maxlength","10",3,"ngModel","ngModelChange","change"],["iuNumber","ngModel"],["nz-input","","type","text","name","firstName","required","",3,"ngModel","ngModelChange"],["firstName","ngModel"],["nz-input","","type","text","name","lastName","required","",3,"ngModel","ngModelChange"],["lastName","ngModel"],[1,"col-lg-10","col-sm-12"],["nz-input","","type","text","name","screenDisplay","required","",3,"ngModel","ngModelChange"],["screenDisplay","ngModel"],["nz-input","","type","text","name","remark","required","",3,"ngModel","ngModelChange"],["remark","ngModel"],[1,"m-portlet__foot","bg-light-gray"],[1,"row"],[1,"m-form__actions","col"],["nz-button","","nzType","primary","nzSize","large","class","btn-form-ops","nzGhost","",3,"click",4,"ngIf"],[1,"m-form__actions","m-form__actions--right","row"],["nz-button","","nzType","primary","nzSize","large","nzGhost","",1,"btn-form-ops",3,"click"],["nz-button","","nzType","primary","nzSize","large",1,"btn-form-ops","m--margin-left-30",3,"click"],[1,"m-portlet__head"],[1,"m-portlet__head-caption"],[1,"m-portlet__head-title"],[1,"m-portlet__head-text"],[3,"nzValue","nzLabel"],[1,"form-control-feedback"],[1,"la","la-trash"]],template:function(t,n){if(1&t&&(e.TgZ(0,"form",0,1)(2,"div",2),e.YNc(3,Ve,5,1,"div",3),e.TgZ(4,"div",4)(5,"div",5)(6,"label",6),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"div",7)(10,"nz-select",8),e.NdJ("ngModelChange",function(o){return n.form.carParkId=o})("ngModelChange",function(){return n.zoneOrCarparkChanged("carpark")}),e.YNc(11,ye,1,2,"nz-option",9),e.ALo(12,"async"),e.qZA()(),e.TgZ(13,"label",6),e._UZ(14,"span",10),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"div",7)(18,"nz-select",11,12),e.NdJ("ngModelChange",function(o){return n.form.zoneCode=o})("ngModelChange",function(){return n.zoneOrCarparkChanged("zone")}),e.YNc(20,Pe,1,2,"nz-option",9),e.ALo(21,"async"),e.qZA(),e.YNc(22,Ue,3,3,"div",13),e.qZA()(),e.TgZ(23,"div",5)(24,"label",6)(25,"span",10),e._uU(26,"*"),e.qZA(),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"div",7)(30,"nz-select",14),e.NdJ("ngModelChange",function(o){return n.form.status=o}),e.YNc(31,Le,1,2,"nz-option",9),e.qZA()()(),e.TgZ(32,"div",5)(33,"label",6)(34,"span",10),e._uU(35,"*"),e.qZA(),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"div",7)(39,"nz-date-picker",15),e.NdJ("ngModelChange",function(o){return n.form.startTime=o}),e.qZA()(),e.TgZ(40,"label",6)(41,"span",10),e._uU(42,"*"),e.qZA(),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.TgZ(45,"div",7)(46,"nz-date-picker",16),e.NdJ("ngModelChange",function(o){return n.form.endTime=o}),e.qZA()()(),e._UZ(47,"hr"),e.TgZ(48,"div",5)(49,"label",6),e._uU(50),e.ALo(51,"translate"),e.qZA(),e.TgZ(52,"div",7)(53,"nz-select",17),e.NdJ("ngModelChange",function(o){return n.form.vehicleType=o}),e.YNc(54,Ne,2,4,"nz-option",9),e.ALo(55,"async"),e.qZA()(),e.TgZ(56,"label",6)(57,"span",10),e._uU(58,"*"),e.qZA(),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.TgZ(61,"div",7)(62,"input",18,19),e.NdJ("ngModelChange",function(o){return n.form.carPlateNo=o}),e.qZA(),e.YNc(64,Oe,3,3,"div",13),e.qZA()(),e.TgZ(65,"div",5),e._UZ(66,"label",6)(67,"div",7),e.TgZ(68,"label",6)(69,"span",10),e._uU(70,"*"),e.qZA(),e._uU(71),e.ALo(72,"translate"),e.qZA(),e.TgZ(73,"div",7)(74,"input",20,21),e.NdJ("ngModelChange",function(o){return n.form.iuNumber=o})("change",function(){return n.changeVehicleInfo("iuNumber")}),e.qZA(),e.YNc(76,we,2,0,"div",13),e.qZA()(),e._UZ(77,"hr"),e.TgZ(78,"div",5)(79,"label",6),e._uU(80),e.ALo(81,"translate"),e.qZA(),e.TgZ(82,"div",7)(83,"input",22,23),e.NdJ("ngModelChange",function(o){return n.form.firstName=o}),e.qZA(),e.YNc(85,Fe,3,3,"div",13),e.qZA(),e.TgZ(86,"label",6),e._uU(87),e.ALo(88,"translate"),e.qZA(),e.TgZ(89,"div",7)(90,"input",24,25),e.NdJ("ngModelChange",function(o){return n.form.lastName=o}),e.qZA(),e.YNc(92,Se,3,3,"div",13),e.qZA()(),e.TgZ(93,"div",5)(94,"label",6),e._uU(95),e.ALo(96,"translate"),e.qZA(),e.TgZ(97,"div",26)(98,"input",27,28),e.NdJ("ngModelChange",function(o){return n.form.showingMessage=o}),e.qZA()()(),e.TgZ(100,"div",5)(101,"label",6),e._uU(102),e.ALo(103,"translate"),e.qZA(),e.TgZ(104,"div",26)(105,"input",29,30),e.NdJ("ngModelChange",function(o){return n.form.remark=o}),e.qZA()()()(),e.TgZ(107,"div",31)(108,"div",32)(109,"div",33),e.YNc(110,Ee,4,3,"button",34),e.qZA(),e.TgZ(111,"div",35)(112,"button",36),e.NdJ("click",function(){return n.cancel()}),e._uU(113),e.ALo(114,"translate"),e.qZA(),e.TgZ(115,"button",37),e.NdJ("click",function(){return n.submit()}),e._uU(116),e.ALo(117,"translate"),e.qZA()()()()()()),2&t){const a=e.MAs(19),o=e.MAs(63),x=e.MAs(75),V=e.MAs(84),$=e.MAs(91);e.xp6(3),e.Q6J("ngIf",n.form.id),e.xp6(4),e.hij(" ",e.lcZ(8,40,"Car Park"),": "),e.xp6(3),e.Q6J("ngModel",n.form.carParkId)("nzLoading",n.carParkLoading),e.xp6(1),e.Q6J("ngForOf",e.lcZ(12,42,n.carParks$)),e.xp6(4),e.hij(" ",e.lcZ(16,44,"Zone"),": "),e.xp6(3),e.Q6J("ngModel",n.form.zoneCode),e.xp6(2),e.Q6J("ngForOf",e.lcZ(21,46,n.listZone$)),e.xp6(2),e.Q6J("ngIf",a.invalid&&(a.dirty||a.touched)),e.xp6(5),e.hij(" ",e.lcZ(28,48,"Visitor Type"),": "),e.xp6(3),e.Q6J("ngModel",n.form.status),e.xp6(1),e.Q6J("ngForOf",n.visitorTypes),e.xp6(5),e.hij(" ",e.lcZ(37,50,"Start Date"),": "),e.xp6(3),e.Q6J("ngModel",n.form.startTime)("nzShowTime",!0),e.xp6(4),e.hij(" ",e.lcZ(44,52,"End Date"),": "),e.xp6(3),e.Q6J("ngModel",n.form.endTime)("nzShowTime",!0),e.xp6(4),e.hij(" ",e.lcZ(51,54,"Vehicle Type"),": "),e.xp6(3),e.Q6J("ngModel",n.form.vehicleType),e.xp6(1),e.Q6J("ngForOf",e.lcZ(55,56,n.vehicleTypes$)),e.xp6(5),e.hij(" ",e.lcZ(60,58,"Vehicle No."),": "),e.xp6(3),e.Q6J("ngModel",n.form.carPlateNo),e.xp6(2),e.Q6J("ngIf",o.invalid&&(o.dirty||o.touched)),e.xp6(7),e.hij(" ",e.lcZ(72,60,"IU No."),": "),e.xp6(3),e.Q6J("ngModel",n.form.iuNumber),e.xp6(2),e.Q6J("ngIf",x.invalid&&(x.dirty||x.touched)),e.xp6(4),e.hij(" ",e.lcZ(81,62,"First Name"),": "),e.xp6(3),e.Q6J("ngModel",n.form.firstName),e.xp6(2),e.Q6J("ngIf",V.invalid&&(V.dirty||V.touched)),e.xp6(2),e.hij(" ",e.lcZ(88,64,"Last Name"),": "),e.xp6(3),e.Q6J("ngModel",n.form.lastName),e.xp6(2),e.Q6J("ngIf",$.invalid&&($.dirty||$.touched)),e.xp6(3),e.hij(" ",e.lcZ(96,66,"Screen Display"),": "),e.xp6(3),e.Q6J("ngModel",n.form.showingMessage),e.xp6(4),e.hij(" ",e.lcZ(103,68,"Remark"),": "),e.xp6(3),e.Q6J("ngModel",n.form.remark),e.xp6(5),e.Q6J("ngIf",n.form.id),e.xp6(3),e.hij(" ",e.lcZ(114,70,"Cancel")," "),e.xp6(3),e.hij(" ",e.lcZ(117,72,"Submit")," ")}},dependencies:[T.sg,T.O5,I.Zp,J.ix,q.w,B.dQ,w.Ip,w.Vq,E.uw,h._Y,h.Fj,h.JJ,h.JL,h.Q7,h.nD,h.c5,h.On,h.F,T.Ov,T.rS,U.X$],encapsulation:2}),i})(),De=(()=>{class i{constructor(t,n){this.router=t,this.whitelistVehicleService=n}ngOnInit(){}cancel(){this.vipForm.resetForm(),this.router.navigate(["/visitor-management"])}submit(t){this.whitelistVehicleService.createModel(t).subscribe(()=>{this.vipForm.resetForm(),this.router.navigate(["/visitor-management"])})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.F0),e.Y36(Z.Y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vehicle-create"]],viewQuery:function(t,n){if(1&t&&e.Gf(Q,5),2&t){let a;e.iGM(a=e.CRH())&&(n.vipForm=a.first)}},decls:2,vars:0,consts:[[3,"canceled","submitted"],["vipForm",""]],template:function(t,n){1&t&&(e.TgZ(0,"app-vehicles-form-vip",0,1),e.NdJ("canceled",function(){return n.cancel()})("submitted",function(o){return n.submit(o)}),e.qZA())},dependencies:[Q],encapsulation:2}),i})();const Ie=function(){return["create"]},Je=function(){return["overview"]},qe=function(){return["blacklist"]};let Be=(()=>{class i{constructor(t,n){this.router=t,this.translate=n}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.F0),e.Y36(U.sK))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-visitor-home"]],decls:19,vars:9,consts:[[1,"body-wrapper"],[1,"m-content"],[1,"m-portlet","m-portlet--tabs"],[1,"m-portlet__head"],[1,"m-portlet__head-tools"],["role","tablist",1,"nav","nav-tabs","m-tabs-line","m-tabs-line--primary","m-tabs-line--2x"],[1,"nav-item","m-tabs__item"],[1,"nav-link","m-tabs__link",3,"routerLink","routerLinkActive"],[1,"m-portlet__body","m-portlet__body--scrollable"],[1,"m-portlet__frame"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-title-bar"),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"ul",5)(7,"li",6)(8,"a",7),e._uU(9," Create Visitor "),e.qZA()(),e.TgZ(10,"li",6)(11,"a",7),e._uU(12," Visitor Overview "),e.qZA()(),e.TgZ(13,"li",6)(14,"a",7),e._uU(15," Blacklist "),e.qZA()()()()(),e.TgZ(16,"div",8)(17,"div",9),e._UZ(18,"router-outlet"),e.qZA()()()()()),2&t&&(e.xp6(8),e.Q6J("routerLink",e.DdM(6,Ie))("routerLinkActive","active"),e.xp6(3),e.Q6J("routerLink",e.DdM(7,Je))("routerLinkActive","active"),e.xp6(3),e.Q6J("routerLink",e.DdM(8,qe))("routerLinkActive","active"))},dependencies:[g.lC,g.yS,g.Od,b.G],encapsulation:2}),i})();var ne=r(15035),Qe=r(94327);function $e(i,l){if(1&i&&e._UZ(0,"nz-option",18),2&i){const t=l.$implicit;e.Q6J("nzValue",t.id)("nzLabel",t.name)}}function je(i,l){if(1&i&&e._uU(0),2&i){const t=l.range;e.lnq(" ",t[0],"-",t[1]," of ",l.$implicit," items\n")}}function Ye(i,l){if(1&i&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Oqu(t.text)}}function Re(i,l){if(1&i&&(e.TgZ(0,"span",26),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();let a;e.xp6(1),e.hij(" ",null==(a=n.getVisitorType(t.status))?null:a.text," ")}}const Ke=function(i){return["..","edit",i]};function We(i,l){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr")(2,"td",19),e.NdJ("nzExpandChange",function(a){const x=e.CHM(t).$implicit,V=e.oxw();return e.KtG(V.onExpandChange(x.id,a))}),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"span"),e._UZ(7,"img",20),e.qZA(),e.TgZ(8,"span"),e._uU(9),e.qZA()(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.ALo(20,"date"),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.ALo(23,"date"),e.qZA(),e.TgZ(24,"td"),e.YNc(25,Re,2,1,"span",21),e.qZA(),e.TgZ(26,"td"),e._uU(27),e.qZA(),e.TgZ(28,"td")(29,"a",22),e._UZ(30,"i",23),e.qZA()()(),e.TgZ(31,"tr",24)(32,"nz-table",25)(33,"thead")(34,"tr")(35,"th"),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"th"),e._uU(39),e.ALo(40,"translate"),e.qZA()()(),e.TgZ(41,"tbody")(42,"tr")(43,"td"),e._uU(44),e.qZA(),e.TgZ(45,"td"),e._uU(46),e.ALo(47,"date"),e.qZA()()()()(),e.BQk()}if(2&i){const t=l.$implicit,n=l.index,a=e.oxw();e.xp6(1),e.ekj("ant-table-row-odd",n%2==1),e.xp6(1),e.Q6J("nzExpand",a.expandSet.has(t.id)),e.xp6(2),e.Oqu(t.id),e.xp6(3),e.Q6J("src",a.vehicleTypeLogo(t.vehicleType),e.LSH),e.xp6(2),e.Oqu(t.carPlateNo),e.xp6(2),e.Oqu(t.iuNumber),e.xp6(2),e.AsE("",t.firstName," ",t.lastName,""),e.xp6(2),e.Oqu(t.carParkName),e.xp6(2),e.Oqu(t.zoneCode),e.xp6(2),e.Oqu(e.xi3(20,22,t.startTime,"d LLL yyyy")),e.xp6(3),e.Oqu(e.xi3(23,25,t.endTime,"d LLL yyyy")),e.xp6(3),e.Q6J("ngIf",t.status),e.xp6(2),e.Oqu(t.remark),e.xp6(2),e.Q6J("routerLink",e.VKq(35,Ke,t.id)),e.xp6(2),e.Q6J("nzExpand",a.expandSet.has(t.id)),e.xp6(1),e.Q6J("nzShowPagination",!1),e.xp6(4),e.Oqu(e.lcZ(37,28,"Screen Display")),e.xp6(3),e.Oqu(e.lcZ(40,30,"Date Created")),e.xp6(5),e.Oqu(t.showingMessage||"-"),e.xp6(2),e.Oqu(e.xi3(47,32,t.createddate,"d LLL yyyy"))}}const He=function(){return["../create"]};let Ge=(()=>{class i extends K.t{constructor(t,n,a,o,x){super(),this.router=t,this.whilelistService=n,this.route=a,this.carParkService=o,this.translate=x,this.tableHeaders=[{text:"ID",column:"id",width:"80px"},{text:"Vehicle",column:"vehiclePlateNo",width:"150px"},{text:"IU No.",column:"iuNumber",width:"150px"},{text:"Driver",column:"driverId",width:"120px"},{text:"Car Park",column:"carParkId",width:"120px"},{text:"Zone",column:"Zone",width:"120px"},{text:"Start Date",column:"startDate",width:"120px"},{text:"End Date",column:"endDate",width:"120px"},{text:"Visitor Type",column:"status",width:"120px"},{text:"Remark",column:"remark",width:"120px"},{text:"Actions",width:"100px"}],this.expandSet=new Set,this.loading=!1,this.pagination=(0,R.f$)(),this.vehicleTypes=f.php,this.statusOptions=f.FXS,this.keyword="",this.status="",this.dateRange=[],this.carParkInput$=new P.xQ,this.getVisitorType=f.e$2,this.data=[]}expandedRowClass(t,n){return[n%2>0?ge._h:"",t?"m-datatable__row show":""].join(" ")}carParkCodes(t){return t.carParks?t.carParks.map(n=>n.code).join(", "):""}vehicleTypeLogo(t){return(0,f.e9Z)(f.php,t,"icon")}displayName(t){return(0,f.ssW)(t)}get filterParams(){return{carPark:this.carParkId,status:this.status,from:this.dateRange[0]&&(0,ne.W8)(this.dateRange[0]),to:this.dateRange[1]&&(0,ne.W8)(this.dateRange[1]),keyword:this.keyword}}reloadData(){this.reloadDataService(this.whilelistService)}pageChanged(t){this.pagination=t,this.reloadData()}ngOnInit(){this.reloadData(),this.carParks$=this.carParkInput$.pipe((0,L.O)(""),(0,F.b)(200),(0,S.x)(),(0,O.b)(()=>this.carParkLoading=!0),(0,D.w)(n=>this.carParkService.getSimpleList(n).pipe((0,O.b)(()=>this.carParkLoading=!1))));const t=this.tableHeaders.map(n=>n.text);this.translate.get(t).subscribe(n=>{this.tableHeaders.forEach(a=>{for(let o in n)n.hasOwnProperty(o)&&a.text===o&&(a.text=n[o])})})}export(){this.whilelistService.getPdf(this.filterParams,this.pagination).subscribe(t=>{(0,Qe.saveAs)(t,"whitelist.pdf")})}onExpandChange(t,n){n?this.expandSet.add(t):this.expandSet.delete(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.F0),e.Y36(Z.Y),e.Y36(g.gz),e.Y36(d.x),e.Y36(U.sK))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vehicle-overview"]],features:[e.qOj],decls:45,vars:36,consts:[[1,"form-group","m-form__group","m-portlet__filters"],[1,"m-portlet__filter"],[1,"col-form-label"],["nzPlaceHolder","Please Select",2,"width","160px",3,"ngModel","nzLoading","nzDropdownMatchSelectWidth","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],[1,"col-form-label","col-form-label-nowrap"],[1,"m-input-icon","m-input-icon--left"],["type","text","nz-input","","placeholder","",3,"ngModel","debounce","ngModelChange"],["nz-button","","nzType","primary","nzShape","round",3,"click"],[1,"la","la-download"],["nz-button","","nzType","primary","nzShape","round",3,"routerLink"],[1,"la","la-plus"],["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowSizeChanger","nzShowTotal","nzQueryParams"],["basicTable",""],["nzWidth","60px"],[4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],[3,"nzExpand","nzExpandChange"],["alt","",3,"src"],["class","m-badge m-badge--wide",4,"ngIf"],[1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","no-border",3,"routerLink"],[1,"la","la-edit"],[3,"nzExpand"],["nzSize","middle","nzTemplateMode","",3,"nzShowPagination"],[1,"m-badge","m-badge--wide"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"label",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div")(6,"nz-select",3),e.NdJ("ngModelChange",function(o){return n.carParkId=o})("ngModelChange",function(){return n.reloadData()}),e.YNc(7,$e,1,2,"nz-option",4),e.ALo(8,"async"),e.qZA()()(),e.TgZ(9,"div",1)(10,"label",2),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div")(14,"nz-range-picker",5),e.NdJ("ngModelChange",function(o){return n.dateRange=o})("ngModelChange",function(){return n.reloadData()}),e.qZA()()(),e.TgZ(15,"div",1)(16,"label",6),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"div",7)(20,"input",8),e.NdJ("ngModelChange",function(o){return n.keyword=o})("ngModelChange",function(){return n.reloadData()}),e.qZA()()(),e.TgZ(21,"div",1)(22,"button",9),e.NdJ("click",function(){return n.export()}),e.TgZ(23,"span"),e._UZ(24,"i",10),e.TgZ(25,"span"),e._uU(26),e.ALo(27,"translate"),e.qZA()()()(),e.TgZ(28,"div",1)(29,"button",11)(30,"span"),e._UZ(31,"i",12),e.TgZ(32,"span"),e._uU(33),e.ALo(34,"translate"),e.qZA()()()()(),e.YNc(35,je,1,3,"ng-template",null,13,e.W1O),e.TgZ(37,"nz-table",14,15),e.NdJ("nzQueryParams",function(o){return n.onQueryParamsChange(o)}),e.TgZ(39,"thead")(40,"tr"),e._UZ(41,"th",16),e.YNc(42,Ye,2,1,"th",17),e.qZA()(),e.TgZ(43,"tbody"),e.YNc(44,We,48,37,"ng-container",17),e.qZA()()),2&t){const a=e.MAs(36),o=e.MAs(38);e.xp6(3),e.hij(" ",e.lcZ(4,23,"Car Park"),": "),e.xp6(3),e.Q6J("ngModel",n.carParkId)("nzLoading",n.carParkLoading)("nzDropdownMatchSelectWidth",!1),e.xp6(1),e.Q6J("ngForOf",e.lcZ(8,25,n.carParks$)),e.xp6(4),e.hij(" ",e.lcZ(12,27,"Date Range"),": "),e.xp6(3),e.Q6J("ngModel",n.dateRange),e.xp6(3),e.hij(" ",e.lcZ(18,29,"Vehicle No."),": "),e.xp6(3),e.Q6J("ngModel",n.keyword)("debounce",500),e.xp6(6),e.hij(" ",e.lcZ(27,31,"Export")," "),e.xp6(3),e.Q6J("routerLink",e.DdM(35,He)),e.xp6(4),e.hij(" ",e.lcZ(34,33,"Create Visitor")," "),e.xp6(4),e.Q6J("nzData",n.listData)("nzFrontPagination",!1)("nzLoading",n.loading)("nzTotal",n.pagination.totalCount)("nzPageSize",n.pagination.rowsPerPage)("nzPageIndex",n.pagination.page)("nzShowSizeChanger",!0)("nzShowTotal",a),e.xp6(5),e.Q6J("ngForOf",n.tableHeaders),e.xp6(2),e.Q6J("ngForOf",o.data)}},dependencies:[T.sg,T.O5,h.Fj,h.JJ,h.On,g.rH,g.yS,W.q,I.Zp,J.ix,q.w,B.dQ,w.Ip,w.Vq,E.uw,E.wS,k.N8,k.Uo,k._C,k.h7,k.Om,k.p0,k.$Z,k.d3,k.Vk,T.Ov,T.uU,U.X$],encapsulation:2}),i})(),Xe=(()=>{class i{constructor(t,n,a,o){this.router=t,this.route=n,this.vehicleService=a,this.whitelistVehicleService=o}ngOnInit(){const t=this.route.snapshot.data.item;this.item={...t,startTime:new Date(t.startTime),endTime:new Date(t.endTime)}}onDeleted(){this.whitelistVehicleService.deleteModel(this.item.id).subscribe(()=>{this.router.navigate(["/visitor-management/overview"])})}onCanceled(){this.router.navigate(["/visitor-management/overview"])}onSubmitted(t){this.whitelistVehicleService.updateModel(t.id,t).subscribe(()=>{this.router.navigate(["/visitor-management/overview"])})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.F0),e.Y36(g.gz),e.Y36(p.f),e.Y36(Z.Y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vehicle-update"]],decls:4,vars:1,consts:[[1,"body-wrapper"],[1,"m-content"],[3,"form","deleted","canceled","submitted"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-title-bar"),e.TgZ(2,"div",1)(3,"app-vehicles-form-vip",2),e.NdJ("deleted",function(){return n.onDeleted()})("canceled",function(){return n.onCanceled()})("submitted",function(o){return n.onSubmitted(o)}),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("form",n.item))},dependencies:[b.G,Q],encapsulation:2}),i})();function ie(i){return new ee.w(i,"../assets/i18n/",".json")}const tt=[{path:"",component:c.f,children:[{path:"",component:Be,children:[{path:"",redirectTo:"create",pathMatch:"full"},{path:"create",component:De,data:{breadcrumb:{label:"Create Visitor"}}},{path:"overview",component:Ge,data:{breadcrumb:{label:"Visitor Overview"}}},{path:"blacklist",component:Me,data:{breadcrumb:{label:"Blacklist"}}},{path:"watchlist",component:(()=>{class i{constructor(t,n){this.router=t,this.whitelistVehicleService=n}ngOnInit(){}cancel(){this.vipForm.resetForm(),this.router.navigate(["/visitor-management"])}submit(t){this.whitelistVehicleService.createModel(t).subscribe(()=>{this.vipForm.resetForm(),this.router.navigate(["/visitor-management"])})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.F0),e.Y36(Z.Y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vehicle-watchlist"]],viewQuery:function(t,n){if(1&t&&e.Gf(Q,5),2&t){let a;e.iGM(a=e.CRH())&&(n.vipForm=a.first)}},decls:2,vars:0,template:function(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1," \u65b0\u9875\u9762 watch list\u9875\u9762\n"),e.qZA())},encapsulation:2}),i})(),data:{breadcrumb:{label:"Watchlist"}}}]},{path:"create/blacklist",component:he,data:{breadcrumb:{label:"Create Blacklist"}}},{path:"edit",component:m.O,children:[{path:":id",component:Xe,data:{breadcrumb:{label:"Edit Visitor"}},resolve:{item:C.Nb}},{path:"blacklist/:id",component:ue,data:{breadcrumb:{label:"Edit Blacklist"}},resolve:{item:C.aE}}]}]}];let nt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[M.k,_.e,Z.Y,A.R,d.x,p.f,C.Nb,C.aE,z.I],imports:[T.ez,h.u5,g.Bz.forChild(tt),v.x,u.D,G.mr,s.kn,H.A0,ze,U.aw.forChild({loader:{provide:U.Zw,useFactory:ie,deps:[X.eN]}}),g.Bz]}),i})()},15035:(N,y,r)=>{"use strict";r.d(y,{W8:()=>A});var T=r(21837),h=(()=>((h||(h={})).Med="yyyy-LL-dd",h))();function A(d,z=h.Med){return d?T.ou.fromJSDate(d).toFormat(z):null}},94327:function(N,y){var h;void 0!==(h=function(){"use strict";function s(_,p,Z){var u=new XMLHttpRequest;u.open("GET",_),u.responseType="blob",u.onload=function(){M(u.response,p,Z)},u.onerror=function(){console.error("could not download file")},u.send()}function C(_){var p=new XMLHttpRequest;p.open("HEAD",_,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function A(_){try{_.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),_.dispatchEvent(p)}}var d="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,z=d.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),M=d.saveAs||("object"!=typeof window||window!==d?function(){}:"download"in HTMLAnchorElement.prototype&&!z?function(_,p,Z){var u=d.URL||d.webkitURL,v=document.createElement("a");v.download=p=p||_.name||"download",v.rel="noopener","string"==typeof _?(v.href=_,v.origin===location.origin?A(v):C(v.href)?s(_,p,Z):A(v,v.target="_blank")):(v.href=u.createObjectURL(_),setTimeout(function(){u.revokeObjectURL(v.href)},4e4),setTimeout(function(){A(v)},0))}:"msSaveOrOpenBlob"in navigator?function(_,p,Z){if(p=p||_.name||"download","string"!=typeof _)navigator.msSaveOrOpenBlob(function g(_,p){return typeof p>"u"?p={autoBom:!1}:"object"!=typeof p&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(_.type)?new Blob(["\ufeff",_],{type:_.type}):_}(_,Z),p);else if(C(_))s(_,p,Z);else{var u=document.createElement("a");u.href=_,u.target="_blank",setTimeout(function(){A(u)})}}:function(_,p,Z,u){if((u=u||open("","_blank"))&&(u.document.title=u.document.body.innerText="downloading..."),"string"==typeof _)return s(_,p,Z);var v="application/octet-stream"===_.type,m=/constructor/i.test(d.HTMLElement)||d.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||v&&m||z)&&typeof FileReader<"u"){var e=new FileReader;e.onloadend=function(){var P=e.result;P=c?P:P.replace(/^data:[^;]*;/,"data:attachment/file;"),u?u.location.href=P:location=P,u=null},e.readAsDataURL(_)}else{var b=d.URL||d.webkitURL,f=b.createObjectURL(_);u?u.location=f:location.href=f,u=null,setTimeout(function(){b.revokeObjectURL(f)},4e4)}});d.saveAs=M.saveAs=M,N.exports=M}.apply(y,[]))&&(N.exports=h)}}]);