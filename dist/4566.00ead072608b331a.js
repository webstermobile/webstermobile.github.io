(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[4566,9226],{71636:(x,M,n)=>{"use strict";n.d(M,{w:()=>C}),n(38014);var d=n(3927),a=n(27221),g=n(26245),f=n(94650),t=n(80529),m=n(28555),T=n(91599);let C=(()=>{class o extends d.su{constructor(s,e,c){super(s,e),this.http=s,this.store=e,this.modelName="newTransaction",this.baseUrl="maintenance/api/transaction",this.handleError=c.createHandleError(`${this.modelName}Service`)}filterModel(s,e){const c=(0,g.U8)(`${this.baseUrl}/queryByParam`,{...s,...(0,g.jq)(e)});return this.get(this.getUrl(c)).pipe((0,a.K)(this.handleError(`${this.modelName}Filter`,{}))).map(i=>Array.isArray(i)?(0,d.eC)(i):(0,d.O7)(i))}clearHandle(s){const e=this.getUrl(`maintenance/api/transaction?id=${s||""}`);return console.log(e,"\u8def\u5f84"),this.delete(e)}exportCondo(s,e){const c=(0,g.U8)(`${this.baseUrl}/export`,{...s,...(0,g.jq)(e)});return this.get(this.getUrl(c),{responseType:"blob"})}getCitySelect(){const s=this.getUrl("maintenance/api/station/city");return this.get(s)}getTrainLineSelect(s){const e=this.getUrl("maintenance/api/station/lineCode");return this.post(e,s)}getStationSelect(s){const e=this.getUrl("maintenance/api/station/stationName");return this.post(e,s)}instationLocationSelect(s){const e=this.getUrl("maintenance/api/station/inStationLocation");return this.post(e,s)}doorWaySelect(s){const e=this.getUrl("maintenance/api/station/doorwayNumber");return this.post(e,s)}systemSelect(){const s=this.getUrl("maintenance/api/asset/getByParamWithoutStation");return this.get(s)}subSystemSelect(s){const e=this.getUrl(`maintenance/api/asset/getByParamWithoutStation?${s}`);return this.get(e)}itemOptionsSelect(s){const e=this.getUrl(`maintenance/api/asset/getByParamWithoutStation?${s}`);return this.get(e)}}return o.\u0275fac=function(s){return new(s||o)(f.LFG(t.eN),f.LFG(m.yh),f.LFG(T.k))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac}),o})()},92935:(x,M,n)=>{"use strict";n.d(M,{$:()=>C}),n(38014);var d=n(3927),a=n(27221),g=n(26245),f=n(94650),t=n(80529),m=n(28555),T=n(91599);let C=(()=>{class o extends d.su{constructor(s,e,c){super(s,e),this.http=s,this.store=e,this.modelName="WalkInRecord",this.baseUrl="carpark/api/condo/queryVisitorWalkIn",this.handleError=c.createHandleError(`${this.modelName}Service`)}filterModel(s,e){const c=(0,g.U8)(`${this.baseUrl}`,{...s,...(0,g.jq)(e)});return this.get(this.getUrl(c)).pipe((0,a.K)(this.handleError(`${this.modelName}Filter`,{}))).map(i=>Array.isArray(i)?(0,d.eC)(i):(0,d.O7)(i))}clearHandle(s){const e=this.getUrl(`maintenance/api/transaction?id=${s||""}`);return console.log(e,"\u8def\u5f84"),this.delete(e)}exportEecel(s,e){const c=(0,g.U8)("carpark/api/condo/exportWalkIn",{...s,...(0,g.jq)(e)});return this.get(this.getUrl(c),{responseType:"blob"})}}return o.\u0275fac=function(s){return new(s||o)(f.LFG(t.eN),f.LFG(m.yh),f.LFG(T.k))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac}),o})()},76916:(x,M,n)=>{"use strict";n.d(M,{G:()=>s});var E=n(34793),d=n(92198),a=n(94650),g=n(89383),f=n(60097),t=n(36895);function m(e,c){if(1&e&&(a.TgZ(0,"a",14)(1,"span",15),a._uU(2),a.ALo(3,"translate"),a.qZA()()),2&e){const i=a.oxw().$implicit;a.xp6(2),a.hij(" ",a.lcZ(3,1,i.label)," ")}}function T(e,c){if(1&e&&(a.TgZ(0,"a",16)(1,"span",15),a._uU(2),a.ALo(3,"translate"),a.qZA()()),2&e){const i=a.oxw(),r=i.$implicit,h=i.last,p=a.oxw(2);a.Q6J("routerLink",r.url)("queryParams",h&&p.route.snapshot.queryParams),a.xp6(2),a.hij(" ",a.lcZ(3,3,r.label)," ")}}function C(e,c){if(1&e&&(a.ynx(0),a.TgZ(1,"li",10)(2,"span"),a._uU(3," > "),a.qZA()(),a.TgZ(4,"li",11),a.YNc(5,m,4,3,"a",12),a.YNc(6,T,4,5,"a",13),a.qZA(),a.BQk()),2&e){const i=c.first;a.xp6(5),a.Q6J("ngIf",i),a.xp6(1),a.Q6J("ngIf",!i)}}function o(e,c){if(1&e&&(a.TgZ(0,"div",1)(1,"div",2)(2,"div",3),a._UZ(3,"h3",4),a.TgZ(4,"ul",5)(5,"li",6)(6,"a",7),a._UZ(7,"i",8),a.qZA()(),a.YNc(8,C,7,2,"ng-container",9),a.qZA()(),a.TgZ(9,"div"),a.Hsn(10),a.qZA()()()),2&e){const i=a.oxw();a.xp6(3),a.Q6J("innerHTML",i.title,a.oJD),a.xp6(5),a.Q6J("ngForOf",i.breads)}}const l=["*"];let s=(()=>{class e{constructor(i,r,h,p){this.router=i,this.route=r,this.translate=h,this._carparkService=p,this.breads=[],this.loginUser=""}ngOnInit(){let i=JSON.parse(localStorage.getItem("user-roles"))[0];this.loginUser=i,console.log(this.loginUser,"\u4fe1\u606f"),this.breads=this.buildBreadCrumb(this.route.root),this.translate.get(this.breads[0].label).subscribe(h=>{this.label=h}),this.router.events.pipe((0,d.h)(h=>h instanceof E.m2)).subscribe(()=>{this.breads=this.buildBreadCrumb(this.route.root)})}buildBreadCrumb(i,r=[""],h=[]){const p=i.snapshot.url[0]&&i.snapshot.url[0].path,b=[...r,p],D={...this.extractBreadcrumb(i),url:b},U=p&&D.label?[...h,D]:h;return this.title=D.title||this.title||"",this.isMotorist&&"My Vehicle(s)"===D.label&&(this.title="My Vehicle(s)"),i.firstChild?p?this.buildBreadCrumb(i.firstChild,b,U):this.buildBreadCrumb(i.firstChild,r,h):(this.translate.get(this.title).subscribe(L=>{this.title=L}),U)}get isMotorist(){return this._carparkService.isMotorist()}extractBreadcrumb(i){return i.snapshot.data.breadcrumb instanceof Function?i.snapshot.data.breadcrumb(i):i.snapshot.data.breadcrumb}}return e.\u0275fac=function(i){return new(i||e)(a.Y36(E.F0),a.Y36(E.gz),a.Y36(g.sK),a.Y36(f.x))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-title-bar"]],ngContentSelectors:l,decls:1,vars:1,consts:[["class","m-subheader",4,"ngIf"],[1,"m-subheader"],[1,"d-flex","align-items-center"],[1,"mr-auto"],[1,"m-subheader__title","m-subheader__title--separator","text-main",3,"innerHTML"],[1,"m-subheader__breadcrumbs","m-nav","m-nav--inline"],[1,"m-nav__item","m-nav__item--home"],["routerLink","/",1,"m-nav__link","m-nav__link--icon"],[1,"m-nav__link-icon","la","la-home"],[4,"ngFor","ngForOf"],[1,"m-nav__separator"],[1,"m-nav__item"],["class","m-nav__link",4,"ngIf"],["class","m-nav__link",3,"routerLink","queryParams",4,"ngIf"],[1,"m-nav__link"],[1,"m-nav__link-text"],[1,"m-nav__link",3,"routerLink","queryParams"]],template:function(i,r){1&i&&(a.F$t(),a.YNc(0,o,11,2,"div",0)),2&i&&a.Q6J("ngIf","ROLE_TPO_PARTNER"!==r.loginUser)},dependencies:[t.sg,t.O5,E.yS,g.X$],encapsulation:2}),e})()},84566:(x,M,n)=>{"use strict";n.r(M),n.d(M,{WalkInRecordModule:()=>Z});var E=n(36895),d=n(79118),g=(n(26245),n(15439)),f=n(94327),t=n(94650),m=n(92935),T=n(76916),C=n(9215),o=n(40269),l=n(24006),s=n(71198),e=n(87501);const c=["confirmModal"],i=["inputfile"];function r(y,A){1&y&&(t.TgZ(0,"div",21),t._uU(1," success! "),t.qZA())}function h(y,A){if(1&y){const u=t.EpF();t.TgZ(0,"td",22),t.NdJ("click",function(){const O=t.CHM(u).index;t.oxw();const W=t.MAs(37);return t.KtG(W.toggleItem(O))}),t.TgZ(1,"span"),t._UZ(2,"i",23),t.qZA()(),t.TgZ(3,"td",24)(4,"span"),t._uU(5),t.qZA()(),t.TgZ(6,"td",24)(7,"span"),t._uU(8),t.qZA()(),t.TgZ(9,"td",24)(10,"span"),t._uU(11),t.qZA()(),t.TgZ(12,"td",24)(13,"span"),t._uU(14),t.qZA()(),t.TgZ(15,"td",24)(16,"span"),t._uU(17),t.qZA()(),t.TgZ(18,"td",24)(19,"span"),t._uU(20),t.qZA()()}if(2&y){const u=A.$implicit,_=A.expanded,v=t.oxw();t.xp6(1),t.Udp("width",v.tableHeaders[0].width),t.xp6(1),t.Q6J("ngClass",_?"fa-caret-down":"fa-caret-right"),t.xp6(2),t.Udp("width",v.tableHeaders[1].width),t.xp6(1),t.hij(" ",u.carPark.carParkCode," "),t.xp6(2),t.Udp("width",v.tableHeaders[2].width),t.xp6(1),t.lnq(" ",u.blk," - ",u.level," - ",u.unit," "),t.xp6(2),t.Udp("width",v.tableHeaders[3].width),t.xp6(1),t.hij(" ",u.entryType," "),t.xp6(2),t.Udp("width",v.tableHeaders[4].width),t.xp6(1),t.hij(" ",u.visitDate," "),t.xp6(2),t.Udp("width",v.tableHeaders[5].width),t.xp6(1),t.hij(" ",u.companyName," "),t.xp6(2),t.Udp("width",v.tableHeaders[6].width),t.xp6(1),t.hij(" ",u.hpNumber," ")}}let p=(()=>{class y extends d.Gw{constructor(u){super(),this.walkInRecordService=u,this.timeRange=[],this.entryType="",this.blkArr="",this.blk="",this.level="",this.unit="",this.visitDate="",this.successShow=!1,this.tableHeaders=[{text:"",width:"20px"},{text:"Carpark",column:"",width:"150px"},{text:"Blk/Unit#",column:"",width:"200px"},{text:"Entry Type",column:"",width:"200x"},{text:"Entry Time",column:"",width:"220px"},{text:"Company Name",column:"",width:"150px"},{text:"Phone Num",column:"",width:"200px"}],this.loading=!1,this.data=[]}get filterParams(){return{sort:"id,desc",entryType:this.entryType,blk:this.blk,level:this.level,unit:this.unit,visitDate:this.visitDate}}reloadData(){this.reloadDataService(this.walkInRecordService)}pageChanged(u){this.pagination=u,this.reloadData()}ngOnInit(){this.reloadData()}entryChange(){this.pagination.page=1,this.reloadData()}inputChange(){this.blk=this.blkArr.split("-")[0],this.level=this.blkArr.split("-")[1],this.unit=this.blkArr.split("-")[2],this.pagination.page=1,this.reloadData()}getVisitDate(u){this.pagination.page=1,this.visitDate=g(u[0]).format("YYYY-MM-DD")+" - "+g(u[1]).format("YYYY-MM-DD"),this.reloadData()}exportExcel(){this.walkInRecordService.exportEecel(this.filterParams,this.pagination).subscribe(u=>{(0,f.saveAs)(u,"walkInRecord.csv")})}importExcel(){this.inputfile.nativeElement.click()}}return y.\u0275fac=function(u){return new(u||y)(t.Y36(m.$))},y.\u0275cmp=t.Xpm({type:y,selectors:[["app-walk-in-record"]],viewQuery:function(u,_){if(1&u&&(t.Gf(c,5),t.Gf(i,5)),2&u){let v;t.iGM(v=t.CRH())&&(_.confirmModal=v.first),t.iGM(v=t.CRH())&&(_.inputfile=v.first)}},features:[t.qOj],decls:40,vars:12,consts:[[1,"body-wrapper"],["class","alert alert-success col-12","role","alert","style","display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 0 auto;",4,"ngIf"],[1,"m-content"],[1,"m-portlet","m-portlet--tabs"],[1,"m-portlet__body","m-portlet__body--scrollable"],[1,"form-group","m-form__group","m-portlet__filters","col-12"],[1,"m-portlet__filter","col-3"],[1,"col-form-label","col-form-label-nowrap"],[1,"m-input-icon","m-input-icon--left"],["type","text","placeholder","",1,"form-control","m-input",3,"ngModel","debounce","ngModelChange","onDebounce"],[1,"m-input-icon__icon","m-input-icon__icon--left"],[1,"la","la-search"],["type","text","placeholder","172-2-6",1,"form-control","m-input",3,"ngModel","debounce","ngModelChange","onDebounce"],["bsDaterangepicker","",1,"form-control",3,"ngModel","ngModelChange"],["drp","bsDaterangepicker"],[1,"m-portlet__filter","col-2"],[1,"right-btn"],["type","button",1,"btn","btn-default","exportBtn",3,"click"],[3,"headers","items","pagination","pageChanged"],["driverTable",""],["rowTemplate",""],["role","alert",1,"alert","alert-success","col-12",2,"display","flex","justify-content","center","align-items","center","margin","0 auto"],[1,"m-datatable__cell","text-center",3,"click"],[1,"fa","text-primary",3,"ngClass"],[1,"m-datatable__cell"]],template:function(u,_){1&u&&(t.TgZ(0,"div",0),t._UZ(1,"app-title-bar"),t.YNc(2,r,2,0,"div",1),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),t._uU(9),t.qZA(),t.TgZ(10,"div",8)(11,"input",9),t.NdJ("ngModelChange",function(O){return _.entryType=O})("onDebounce",function(){return _.entryChange()}),t.qZA(),t.TgZ(12,"span",10)(13,"span"),t._UZ(14,"i",11),t.qZA()()()(),t.TgZ(15,"div",6)(16,"label",7),t._uU(17),t.qZA(),t.TgZ(18,"div",8)(19,"input",12),t.NdJ("ngModelChange",function(O){return _.blkArr=O})("onDebounce",function(){return _.inputChange()}),t.qZA(),t.TgZ(20,"span",10)(21,"span"),t._UZ(22,"i",11),t.qZA()()()(),t.TgZ(23,"div",6)(24,"label",7),t._uU(25),t.qZA(),t.TgZ(26,"div",8)(27,"input",13,14),t.NdJ("ngModelChange",function(O){return _.timeRange=O})("ngModelChange",function(O){return _.getVisitDate(O)}),t.qZA(),t.TgZ(29,"span",10)(30,"span"),t._UZ(31,"i",11),t.qZA()()()(),t.TgZ(32,"div",15)(33,"div",16)(34,"button",17),t.NdJ("click",function(){return _.exportExcel()}),t._uU(35," export"),t.qZA()()()(),t.TgZ(36,"app-datatable",18,19),t.NdJ("pageChanged",function(O){return _.pageChanged(O)}),t.YNc(38,h,21,23,"ng-template",null,20,t.W1O),t.qZA()()()()()),2&u&&(t.xp6(2),t.Q6J("ngIf",_.successShow),t.xp6(7),t.hij(" ","Entry Type",": "),t.xp6(2),t.Q6J("ngModel",_.entryType)("debounce",500),t.xp6(6),t.hij(" ","Blk/Unit#",": "),t.xp6(2),t.Q6J("ngModel",_.blkArr)("debounce",2e3),t.xp6(6),t.hij(" ","Entry Time",": "),t.xp6(2),t.Q6J("ngModel",_.timeRange),t.xp6(9),t.Q6J("headers",_.tableHeaders)("items",_.data)("pagination",_.pagination))},dependencies:[E.mk,E.O5,T.G,C.q,o.Uo,l.Fj,l.JJ,l.On,d.nE,s.T,e.F]}),y})();var b=n(59501),D=n(34793),U=n(21532),L=n(88796),R=n(30329),P=n(372),I=n(59245),S=n(71636),w=n(34984);const B=[{path:"",component:b.f,children:[{path:"",component:p}]}];let Z=(()=>{class y{}return y.\u0275fac=function(u){return new(u||y)},y.\u0275mod=t.oAB({type:y}),y.\u0275inj=t.cJS({providers:[S.w,m.$],imports:[E.ez,U.x,D.Bz.forChild(B),L.A0,l.u5,l.UX,R.D,P.kn,I.mr,w.Ns.forRoot({echarts:()=>n.e(4734).then(n.bind(n,14734))})]}),y})()},94327:function(x,M){var d;void 0!==(d=function(){"use strict";function g(o,l,s){var e=new XMLHttpRequest;e.open("GET",o),e.responseType="blob",e.onload=function(){C(e.response,l,s)},e.onerror=function(){console.error("could not download file")},e.send()}function f(o){var l=new XMLHttpRequest;l.open("HEAD",o,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function t(o){try{o.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),o.dispatchEvent(l)}}var m="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,T=m.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),C=m.saveAs||("object"!=typeof window||window!==m?function(){}:"download"in HTMLAnchorElement.prototype&&!T?function(o,l,s){var e=m.URL||m.webkitURL,c=document.createElement("a");c.download=l=l||o.name||"download",c.rel="noopener","string"==typeof o?(c.href=o,c.origin===location.origin?t(c):f(c.href)?g(o,l,s):t(c,c.target="_blank")):(c.href=e.createObjectURL(o),setTimeout(function(){e.revokeObjectURL(c.href)},4e4),setTimeout(function(){t(c)},0))}:"msSaveOrOpenBlob"in navigator?function(o,l,s){if(l=l||o.name||"download","string"!=typeof o)navigator.msSaveOrOpenBlob(function a(o,l){return typeof l>"u"?l={autoBom:!1}:"object"!=typeof l&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\ufeff",o],{type:o.type}):o}(o,s),l);else if(f(o))g(o,l,s);else{var e=document.createElement("a");e.href=o,e.target="_blank",setTimeout(function(){t(e)})}}:function(o,l,s,e){if((e=e||open("","_blank"))&&(e.document.title=e.document.body.innerText="downloading..."),"string"==typeof o)return g(o,l,s);var c="application/octet-stream"===o.type,i=/constructor/i.test(m.HTMLElement)||m.safari,r=/CriOS\/[\d]+/.test(navigator.userAgent);if((r||c&&i||T)&&typeof FileReader<"u"){var h=new FileReader;h.onloadend=function(){var D=h.result;D=r?D:D.replace(/^data:[^;]*;/,"data:attachment/file;"),e?e.location.href=D:location=D,e=null},h.readAsDataURL(o)}else{var p=m.URL||m.webkitURL,b=p.createObjectURL(o);e?e.location=b:location.href=b,e=null,setTimeout(function(){p.revokeObjectURL(b)},4e4)}});m.saveAs=C.saveAs=C,x.exports=C}.apply(M,[]))&&(x.exports=d)},34984:(x,M,n)=>{"use strict";n.d(M,{Ns:()=>e,_w:()=>s});var E=n(15861),d=n(94650),a=n(21086),g=n(68896),f=n(8929),t=n(20353),m=n(34202),T=n(66753),C=n(87545);class o{constructor(i){this.changes=i}static of(i){return new o(i)}notEmpty(i){if(this.changes[i]){const r=this.changes[i].currentValue;if(null!=r)return(0,a.of)(r)}return g.E}has(i){return this.changes[i]?(0,a.of)(this.changes[i].currentValue):g.E}notFirst(i){return this.changes[i]&&!this.changes[i].isFirstChange()?(0,a.of)(this.changes[i].currentValue):g.E}notFirstAndEmpty(i){if(this.changes[i]&&!this.changes[i].isFirstChange()){const r=this.changes[i].currentValue;if(null!=r)return(0,a.of)(r)}return g.E}}const l=new d.OlP("NGX_ECHARTS_CONFIG");let s=(()=>{class c{constructor(r,h,p){this.el=h,this.ngZone=p,this.autoResize=!0,this.loadingType="default",this.chartInit=new d.vpe,this.optionsError=new d.vpe,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartPieSelectChanged=this.createLazyEvent("pieselectchanged"),this.chartPieSelected=this.createLazyEvent("pieselected"),this.chartPieUnselected=this.createLazyEvent("pieunselected"),this.chartMapSelectChanged=this.createLazyEvent("mapselectchanged"),this.chartMapSelected=this.createLazyEvent("mapselected"),this.chartMapUnselected=this.createLazyEvent("mapunselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartFocusNodeAdjacency=this.createLazyEvent("focusnodeadjacency"),this.chartUnfocusNodeAdjacency=this.createLazyEvent("unfocusnodeadjacency"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.resize$=new f.xQ,this.echarts=r.echarts}ngOnChanges(r){const h=o.of(r);h.notFirstAndEmpty("options").subscribe(p=>this.onOptionsChange(p)),h.notFirstAndEmpty("merge").subscribe(p=>this.setOption(p)),h.has("loading").subscribe(p=>this.toggleLoading(!!p)),h.notFirst("theme").subscribe(()=>this.refreshChart())}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe((0,T.p)(100,t.z,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(()=>{this.animationFrameID=window.requestAnimationFrame(()=>this.resize$.next())})),this.resizeOb.observe(this.el.nativeElement))}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(r){this.chart&&(r?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading())}setOption(r,h){if(this.chart)try{this.chart.setOption(r,h)}catch(p){console.error(p),this.optionsError.emit(p)}}refreshChart(){var r=this;return(0,E.Z)(function*(){r.dispose(),yield r.initChart()})()}createChart(){const r=this.el.nativeElement;if(window&&window.getComputedStyle){const h=window.getComputedStyle(r,null).getPropertyValue("height");(!h||"0px"===h)&&(!r.style.height||"0px"===r.style.height)&&(r.style.height="400px")}return this.ngZone.runOutsideAngular(()=>("function"==typeof this.echarts?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:p})=>p(r,this.theme,this.initOpts)))}initChart(){var r=this;return(0,E.Z)(function*(){yield r.onOptionsChange(r.options),r.merge&&r.chart&&r.setOption(r.merge)})()}onOptionsChange(r){var h=this;return(0,E.Z)(function*(){!r||(h.chart||(h.chart=yield h.createChart(),h.chartInit.emit(h.chart)),h.setOption(h.options,!0))})()}createLazyEvent(r){return this.chartInit.pipe((0,C.w)(h=>new m.y(p=>(h.on(r,b=>this.ngZone.run(()=>p.next(b))),()=>{this.chart&&(this.chart.isDisposed()||h.off(r))}))))}}return c.\u0275fac=function(r){return new(r||c)(d.Y36(l),d.Y36(d.SBq),d.Y36(d.R0b))},c.\u0275dir=d.lG2({type:c,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",loading:"loading",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartPieSelectChanged:"chartPieSelectChanged",chartPieSelected:"chartPieSelected",chartPieUnselected:"chartPieUnselected",chartMapSelectChanged:"chartMapSelectChanged",chartMapSelected:"chartMapSelected",chartMapUnselected:"chartMapUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartFocusNodeAdjacency:"chartFocusNodeAdjacency",chartUnfocusNodeAdjacency:"chartUnfocusNodeAdjacency",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],features:[d.TTD]}),c})(),e=(()=>{class c{static forRoot(r){return{ngModule:c,providers:[{provide:l,useValue:r}]}}static forChild(){return{ngModule:c}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=d.oAB({type:c}),c.\u0275inj=d.cJS({}),c})()}}]);