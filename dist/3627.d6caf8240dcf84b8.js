"use strict";(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[3627],{76284:(z,E,n)=>{n.d(E,{z:()=>M});var i=n(3927),_=n(94650),T=n(80529),a=n(28555),C=n(11481),y=n(91599);let M=(()=>{class e extends i.su{constructor(l,v,o,f){super(l,v),this.http=l,this.store=v,this.sanitizer=o,this.modelName="User",this.baseUrl="",this.handleError=f.createHandleError(`${this.modelName}Service`)}uploadImage(l){const v=this.getUrl("carpark/api/assets/img"),o=new FormData;return o.append("file",l,l.name),this.post(v,o).map(({uuid:f})=>this.getImage(f))}getImage(l){return this.getUrl(`carpark/api/resources/${l}`)}getImageByUuid(l,v){return this.get(this.getUrl(`carpark/api/resources/${l}`),{responseType:"blob"}).map(o=>v?this._getSafeFileUrl(o):this.getSafeFileUrl(o))}getSafeFileUrl(l){return this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(l))}_getSafeFileUrl(l){return{imgUrl:this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(l)),type:l.type}}requestSessionImage(l,v){const o=this.getUrl(`carpark/api/anpr/request/${l}/${v}`);return this.get(o,{responseType:"text"})}getSessionImage(l){return this.get(this.getUrl(`carpark/api/anpr/assets/${l}/1`),{responseType:"blob"}).map(v=>this.getSafeFileUrl(v))}}return e.\u0275fac=function(l){return new(l||e)(_.LFG(T.eN),_.LFG(a.yh),_.LFG(C.H7),_.LFG(y.k))},e.\u0275prov=_.Yz7({token:e,factory:e.\u0275fac}),e})()},92935:(z,E,n)=>{n.d(E,{$:()=>x}),n(38014);var _=n(3927),T=n(27221),a=n(86181),C=n(94650),y=n(80529),M=n(28555),e=n(91599);let x=(()=>{class l extends _.su{constructor(o,f,s){super(o,f),this.http=o,this.store=f,this.modelName="WalkInRecord",this.baseUrl="carpark/api/condo/queryVisitorWalkIn",this.handleError=s.createHandleError(`${this.modelName}Service`)}filterModel(o,f){const s=(0,a.U8)(`${this.baseUrl}`,{...o,...(0,a.jq)(f)});return this.get(this.getUrl(s)).pipe((0,T.K)(this.handleError(`${this.modelName}Filter`,{}))).map(p=>Array.isArray(p)?(0,_.eC)(p):(0,_.O7)(p))}clearHandle(o){const f=this.getUrl(`maintenance/api/transaction?id=${o||""}`);return console.log(f,"\u8def\u5f84"),this.delete(f)}exportEecel(o,f){const s=(0,a.U8)("carpark/api/condo/exportWalkIn",{...o,...(0,a.jq)(f)});return this.get(this.getUrl(s),{responseType:"blob"})}}return l.\u0275fac=function(o){return new(o||l)(C.LFG(y.eN),C.LFG(M.yh),C.LFG(e.k))},l.\u0275prov=C.Yz7({token:l,factory:l.\u0275fac}),l})()},52746:(z,E,n)=>{n.d(E,{t:()=>a});var i=n(72986),_=n(591),T=n(94650);let a=(()=>{class C{constructor(){this.loading=!1,this.pagination={totalCount:0,rowsPerPage:20,page:1,sortBy:null,descending:!0,totalPages:1},this.listData=[],this.hadGetData$=new _.X(!1)}get hadGetData(){return this.hadGetData$.getValue()}get filterParams(){return this._filterParams}set filterParams(M){this._filterParams=M}reloadDataService(M,e="filterModel"){this.loading=!0,this.hadGetData$.next(!1),M[e](this.filterParams,this.pagination).pipe((0,i.q)(1)).subscribe(x=>{if(x.pagination.page>x.pagination.totalPages)return this.pagination={...this.pagination,page:x.pagination.totalPages},this.reloadDataService(M);this.loading=!1,this.pagination={...this.pagination,totalCount:x.pagination.totalCount||x.pagination.totalElements},this.listData=x.data,this.hadGetData$.next(!0)},()=>{this.loading=!1,this.listData=[],this.pagination={...this.pagination,totalCount:0}})}onQueryParamsChange(M){const{pageSize:e,pageIndex:x}=M;this.pagination={...this.pagination,rowsPerPage:e,page:x},this.reloadData()}reloadData(){}ngOnInit(){}}return C.\u0275fac=function(M){return new(M||C)},C.\u0275cmp=T.Xpm({type:C,selectors:[["ng-component"]],decls:0,vars:0,template:function(M,e){},encapsulation:2}),C})()},67869:(z,E,n)=>{n.d(E,{F:()=>x});var i=n(94650),_=n(8929),T=n(11481),a=n(76284),C=n(36895),y=n(89383);function M(l,v){if(1&l&&(i.TgZ(0,"div",5)(1,"h3",6),i._uU(2),i.ALo(3,"translate"),i.qZA(),i.TgZ(4,"span",7),i._uU(5),i.ALo(6,"translate"),i.qZA()()),2&l){const o=i.oxw();i.xp6(2),i.hij("",i.lcZ(3,2,o.textWaysUploading),"."),i.xp6(3),i.hij(" ",i.lcZ(6,4,o.textImageAllowed)," ")}}function e(l,v){if(1&l&&(i.TgZ(0,"div"),i._UZ(1,"img",8),i.qZA()),2&l){const o=i.oxw();i.xp6(1),i.Q6J("src",o.fileToUploadUrl,i.LSH)}}let x=(()=>{class l{constructor(o,f){this.sanitizer=o,this.assetsService=f,this.disableTextDefault=!1,this.checkImage=!1,this.imageChanged=new i.vpe,this.errorMsg=new i.vpe,this.fileToUpload=null,this.dragEvent$=new _.xQ,this.textWaysUploading="Drop files here or click to upload.",this.textImageAllowed="Only image files are allowed for upload",this.limitImage={minWidth:465,maxWidth:480,minHeight:310,maxHeight:320}}ngOnInit(){this.fileToUploadUrl=this.image,this.disableTextDefault&&(this.textWaysUploading="",this.textImageAllowed="")}handleFileInput(o){if(this.fileToUpload=o.item(0),!this.checkImage)return this.fileToUploadUrl=this.fileToUpload?this.assetsService.getSafeFileUrl(this.fileToUpload):this.fileToUpload,void this.imageChanged.emit(this.fileToUpload);this.checkImageDimensions()}onDrop(o){if(o.preventDefault(),this.fileToUpload=o.dataTransfer.files.item(0),!this.checkImage)return this.fileToUploadUrl=this.fileToUpload?this.assetsService.getSafeFileUrl(this.fileToUpload):this.fileToUpload,void this.imageChanged.emit(this.fileToUpload);this.checkImageDimensions()}onDragOver(o){o.stopPropagation(),o.preventDefault()}checkImageDimensions(){if(this.fileToUpload){let o=new FileReader;o.readAsDataURL(this.fileToUpload),o.onload=f=>{const s=new Image;s.src=o.result,s.onload=()=>{const p=s.naturalHeight,t=s.naturalWidth;t>=this.limitImage.minWidth&&t<=this.limitImage.maxWidth&&p>=this.limitImage.minHeight&&p<=this.limitImage.maxHeight?(this.fileToUploadUrl=this.fileToUpload?this.assetsService.getSafeFileUrl(this.fileToUpload):this.fileToUpload,this.imageChanged.emit(this.fileToUpload)):this.errorMsg.emit(!0)}}}}}return l.\u0275fac=function(o){return new(o||l)(i.Y36(T.H7),i.Y36(a.z))},l.\u0275cmp=i.Xpm({type:l,selectors:[["app-image-input"]],inputs:{image:"image",disableTextDefault:"disableTextDefault",checkImage:"checkImage"},outputs:{imageChanged:"imageChanged",errorMsg:"errorMsg"},decls:6,vars:2,consts:[[1,"m-dropzone","m-dropzone--success","dz-clickable","m--padding-0",3,"click","drop","dragover"],["class","m-dropzone__msg dz-message m--margin-50",4,"ngIf","ngIfElse"],["imageTpl",""],["type","file","accept","image/*",3,"change"],["file",""],[1,"m-dropzone__msg","dz-message","m--margin-50"],[1,"m-dropzone__msg-title"],[1,"m-dropzone__msg-desc"],[2,"height","140px","width","auto",3,"src"]],template:function(o,f){if(1&o){const s=i.EpF();i.TgZ(0,"div",0),i.NdJ("click",function(){i.CHM(s);const t=i.MAs(5);return i.KtG(t.click())})("drop",function(t){return f.onDrop(t)})("dragover",function(t){return f.onDragOver(t)}),i.YNc(1,M,7,6,"div",1),i.YNc(2,e,2,1,"ng-template",null,2,i.W1O),i.TgZ(4,"input",3,4),i.NdJ("change",function(t){return f.handleFileInput(t.target.files)}),i.qZA()()}if(2&o){const s=i.MAs(3);i.xp6(1),i.Q6J("ngIf",!f.fileToUploadUrl)("ngIfElse",s)}},dependencies:[C.O5,y.X$],styles:["input[_ngcontent-%COMP%]{display:none}img[_ngcontent-%COMP%]{width:100%}"]}),l})()},76916:(z,E,n)=>{n.d(E,{G:()=>f});var i=n(34793),_=n(92198),T=n(38014),a=n(94650),C=n(89383),y=n(60097),M=n(36895);function e(s,p){if(1&s&&(a.TgZ(0,"a",14)(1,"span",15),a._uU(2),a.ALo(3,"translate"),a.qZA()()),2&s){const t=a.oxw().$implicit;a.xp6(2),a.hij(" ",a.lcZ(3,1,t.label)," ")}}function x(s,p){if(1&s&&(a.TgZ(0,"a",16)(1,"span",15),a._uU(2),a.ALo(3,"translate"),a.qZA()()),2&s){const t=a.oxw(),g=t.$implicit,m=t.last,P=a.oxw(2);a.Q6J("routerLink",g.url)("queryParams",m&&P.route.snapshot.queryParams),a.xp6(2),a.hij(" ",a.lcZ(3,3,g.label)," ")}}function l(s,p){if(1&s&&(a.ynx(0),a.TgZ(1,"li",10)(2,"span"),a._uU(3," > "),a.qZA()(),a.TgZ(4,"li",11),a.YNc(5,e,4,3,"a",12),a.YNc(6,x,4,5,"a",13),a.qZA(),a.BQk()),2&s){const t=p.first;a.xp6(5),a.Q6J("ngIf",t),a.xp6(1),a.Q6J("ngIf",!t)}}function v(s,p){if(1&s){const t=a.EpF();a.TgZ(0,"div",1)(1,"div",2)(2,"div",3),a._UZ(3,"h3",4),a.TgZ(4,"ul",5)(5,"li",6)(6,"a",7),a.NdJ("click",function(){a.CHM(t);const m=a.oxw();return a.KtG(m.jumpHome())}),a._UZ(7,"i",8),a.qZA()(),a.YNc(8,l,7,2,"ng-container",9),a.qZA()(),a.TgZ(9,"div"),a.Hsn(10),a.qZA()()()}if(2&s){const t=a.oxw();a.xp6(3),a.Q6J("innerHTML",t.title,a.oJD),a.xp6(5),a.Q6J("ngForOf",t.breads)}}const o=["*"];let f=(()=>{class s{constructor(t,g,m,P){this.router=t,this.route=g,this.translate=m,this._carparkService=P,this.breads=[],this.loginUser=""}ngOnInit(){let t=JSON.parse(localStorage.getItem("user-roles"))[0];this.loginUser=t,console.log(this.loginUser,"\u4fe1\u606f"),this.breads=this.buildBreadCrumb(this.route.root),this.translate.get(this.breads[0].label).subscribe(m=>{this.label=m}),this.router.events.pipe((0,_.h)(m=>m instanceof i.m2)).subscribe(()=>{this.breads=this.buildBreadCrumb(this.route.root)})}buildBreadCrumb(t,g=[""],m=[]){const P=t.snapshot.url[0]&&t.snapshot.url[0].path,Z=[...g,P],U={...this.extractBreadcrumb(t),url:Z},b=P&&U.label?[...m,U]:m;return this.title=U.title||this.title||"",this.isMotorist&&"My Vehicle(s)"===U.label&&(this.title="My Vehicle(s)"),t.firstChild?P?this.buildBreadCrumb(t.firstChild,Z,b):this.buildBreadCrumb(t.firstChild,g,m):(this.translate.get(this.title).subscribe(L=>{this.title=L}),b)}get isMotorist(){return this._carparkService.isMotorist()}extractBreadcrumb(t){return t.snapshot.data.breadcrumb instanceof Function?t.snapshot.data.breadcrumb(t):t.snapshot.data.breadcrumb}jumpHome(){let t=JSON.parse(localStorage.getItem("user-roles"))[0]??"";this.router.navigate(t.length?[T.gpL[t]]:["/"])}}return s.\u0275fac=function(t){return new(t||s)(a.Y36(i.F0),a.Y36(i.gz),a.Y36(C.sK),a.Y36(y.x))},s.\u0275cmp=a.Xpm({type:s,selectors:[["app-title-bar"]],ngContentSelectors:o,decls:1,vars:1,consts:[["class","m-subheader",4,"ngIf"],[1,"m-subheader"],[1,"d-flex","align-items-center"],[1,"mr-auto"],[1,"m-subheader__title","m-subheader__title--separator","text-main",3,"innerHTML"],[1,"m-subheader__breadcrumbs","m-nav","m-nav--inline"],[1,"m-nav__item","m-nav__item--home"],[1,"m-nav__link","m-nav__link--icon",3,"click"],[1,"m-nav__link-icon","la","la-home"],[4,"ngFor","ngForOf"],[1,"m-nav__separator"],[1,"m-nav__item"],["class","m-nav__link",4,"ngIf"],["class","m-nav__link",3,"routerLink","queryParams",4,"ngIf"],[1,"m-nav__link"],[1,"m-nav__link-text"],[1,"m-nav__link",3,"routerLink","queryParams"]],template:function(t,g){1&t&&(a.F$t(),a.YNc(0,v,11,2,"div",0)),2&t&&a.Q6J("ngIf","ROLE_TPO_PARTNER"!==g.loginUser)},dependencies:[M.sg,M.O5,i.yS,C.X$],encapsulation:2}),s})()},93627:(z,E,n)=>{n.r(E),n.d(E,{OperatorProfileModule:()=>ie});var i=n(36895),_=n(59501),T=n(21532),a=n(34793),C=n(52746),y=n(8929),M=n(38014),e=n(94650),x=n(92935),l=n(89383),v=n(76284),o=n(3927),f=n(27221),s=n(86181),p=n(80529),t=n(28555),g=n(91599);let m=(()=>{class u extends o.su{constructor(r,c,h){super(r,c),this.http=r,this.store=c,this.modelName="operator-profile",this.baseUrl="carpark/api/publicEvOperator",this.handleError=h.createHandleError(`${this.modelName}Service`)}filterModel(r,c){const h=(0,s.U8)(`${this.baseUrl}/list`,{...r,...(0,s.jq)(c)});return this.get(this.getUrl(h)).pipe((0,f.K)(this.handleError(`${this.modelName}Filter`,{}))).map(d=>Array.isArray(d)?(0,o.eC)(d):(0,o.O7)(d))}addHandle(r){const c=this.getUrl("carpark/api/publicEvOperator/insert");return this.post(c,r)}deleteOne(r){const c=this.getUrl(`carpark/api/publicEvOperator/delete/${r}`);return this.delete(c)}editHandle(r){const c=this.getUrl("carpark/api/publicEvOperator/update");return this.put(c,r)}}return u.\u0275fac=function(r){return new(r||u)(e.LFG(p.eN),e.LFG(t.yh),e.LFG(g.k))},u.\u0275prov=e.Yz7({token:u,factory:u.\u0275fac}),u})();var P=n(50007),Z=n(49651),U=n(76916),b=n(35635),L=n(47423),N=n(73325),S=n(29562),B=n(66616),H=n(47044),K=n(21811),R=n(38231),w=n(48521),D=n(40269),A=n(24006),J=n(67869);function W(u,O){1&u&&e._UZ(0,"span",25)}function G(u,O){if(1&u&&e._uU(0),2&u){const r=O.range;e.lnq(" ",r[0],"-",r[1]," of ",O.$implicit," items ")}}function j(u,O){if(1&u&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&u){const r=O.$implicit;e.xp6(1),e.Oqu(r.text)}}function Q(u,O){if(1&u){const r=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td")(12,"button",26),e._UZ(13,"i",27),e.qZA(),e.TgZ(14,"nz-dropdown-menu",null,28)(16,"ul",29)(17,"li",30),e.NdJ("click",function(){const d=e.CHM(r).$implicit,I=e.oxw(2);return e.KtG(I.editOneData(d))}),e._UZ(18,"span",31),e._uU(19," Edit "),e.qZA(),e.TgZ(20,"li",30),e.NdJ("click",function(){const d=e.CHM(r).$implicit,I=e.oxw(2);return e.KtG(I.deleteHandle(d))}),e._UZ(21,"span",32),e._uU(22," Delete "),e.qZA()()()()()}if(2&u){const r=O.$implicit,c=O.index,h=e.MAs(15);e.ekj("ant-table-row-odd",c%2==1),e.xp6(2),e.Oqu(c+1),e.xp6(2),e.Oqu(r.operatorName),e.xp6(2),e.Oqu(r.companyName),e.xp6(2),e.Oqu(r.hotline),e.xp6(2),e.Oqu(r.email),e.xp6(2),e.Q6J("nzDropdownMenu",h)("nzPlacement","topCenter")}}const F=function(){return["overview"]};function $(u,O){if(1&u){const r=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"ul",6)(5,"li",7)(6,"a",8),e._uU(7),e.qZA()()()()(),e.TgZ(8,"div",9)(9,"div",10)(10,"div",11)(11,"label",12),e._uU(12),e.qZA(),e.TgZ(13,"div",13)(14,"nz-input-group",14)(15,"input",15),e.NdJ("ngModelChange",function(h){e.CHM(r);const d=e.oxw();return e.KtG(d.keyword=h)})("ngModelChange",function(h){e.CHM(r);const d=e.oxw();return e.KtG(d.keyword$.next(h))}),e.qZA()(),e.YNc(16,W,1,0,"ng-template",null,16,e.W1O),e.qZA()(),e.TgZ(18,"div",17)(19,"button",18),e.NdJ("click",function(){e.CHM(r);const h=e.oxw();return e.KtG(h.addDataHandle())}),e._UZ(20,"span",19),e._uU(21,"New Operator"),e.qZA()()(),e.YNc(22,G,1,3,"ng-template",null,20,e.W1O),e.TgZ(24,"nz-table",21,22),e.NdJ("nzQueryParams",function(h){e.CHM(r);const d=e.oxw();return e.KtG(d.onQueryParamsChange(h))}),e.TgZ(26,"thead")(27,"tr"),e.YNc(28,j,2,1,"th",23),e.qZA()(),e.TgZ(29,"tbody"),e.YNc(30,Q,23,9,"tr",24),e.qZA()()()()()}if(2&u){const r=e.MAs(17),c=e.MAs(23),h=e.MAs(25),d=e.oxw();e.xp6(6),e.Q6J("routerLink",e.DdM(15,F))("routerLinkActive","active"),e.xp6(1),e.hij(" ","Operator Profile"," "),e.xp6(5),e.hij(" ","Operator",": "),e.xp6(2),e.Q6J("nzPrefix",r),e.xp6(1),e.Q6J("ngModel",d.keyword),e.xp6(9),e.Q6J("nzData",d.listData)("nzFrontPagination",!1)("nzLoading",d.loading)("nzTotal",d.pagination.totalCount)("nzPageSize",d.pagination.rowsPerPage)("nzPageIndex",d.pagination.page)("nzShowTotal",c),e.xp6(4),e.Q6J("ngForOf",d.tableHeaders),e.xp6(2),e.Q6J("ngForOf",h.data)}}function Y(u,O){if(1&u&&e._UZ(0,"nz-option",59),2&u){const r=O.$implicit;e.Q6J("nzValue",r)("nzLabel",r)}}function k(u,O){1&u&&(e.TgZ(0,"span",35),e._uU(1,"*"),e.qZA())}function V(u,O){if(1&u){const r=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"ul",6)(5,"li",7)(6,"a",8),e._uU(7),e.qZA()()()()(),e.TgZ(8,"div",9)(9,"div",33)(10,"label",34)(11,"span",35),e._uU(12,"*"),e.qZA(),e._uU(13),e.qZA(),e.TgZ(14,"div",36)(15,"app-image-input",37),e.NdJ("imageChanged",function(h){e.CHM(r);const d=e.oxw();return e.KtG(d.onImageChanged(h))}),e.qZA()()(),e.TgZ(16,"div",38)(17,"div",39)(18,"span",40)(19,"span",35),e._uU(20,"*"),e.qZA(),e._uU(21," Business:"),e.qZA(),e.TgZ(22,"nz-select",41),e.NdJ("ngModelChange",function(h){e.CHM(r);const d=e.oxw();return e.KtG(d.upform.business=h)}),e.YNc(23,Y,1,2,"nz-option",42),e.qZA()(),e.TgZ(24,"div",39)(25,"span",40)(26,"span",35),e._uU(27,"*"),e.qZA(),e._uU(28," Company Full Name:"),e.qZA(),e.TgZ(29,"input",43),e.NdJ("ngModelChange",function(h){e.CHM(r);const d=e.oxw();return e.KtG(d.upform.companyName=h)}),e.qZA()()(),e.TgZ(30,"div",38)(31,"div",39)(32,"span",40)(33,"span",35),e._uU(34,"*"),e.qZA(),e._uU(35," UEN No.:"),e.qZA(),e.TgZ(36,"input",44),e.NdJ("ngModelChange",function(h){e.CHM(r);const d=e.oxw();return e.KtG(d.upform.uenNo=h)}),e.qZA()(),e.TgZ(37,"div",39)(38,"span",40)(39,"span",35),e._uU(40,"*"),e.qZA(),e._uU(41," Operator Name:"),e.qZA(),e.TgZ(42,"input",45),e.NdJ("ngModelChange",function(h){e.CHM(r);const d=e.oxw();return e.KtG(d.upform.operatorName=h)}),e.qZA()()(),e.TgZ(43,"div",38)(44,"div",39)(45,"span",40)(46,"span",35),e._uU(47,"*"),e.qZA(),e._uU(48," GST Registered:"),e.qZA(),e.TgZ(49,"span",46)(50,"nz-radio-group",47),e.NdJ("ngModelChange",function(h){e.CHM(r);const d=e.oxw();return e.KtG(d.upform.gstRegistered=h)}),e.TgZ(51,"label",48),e._uU(52,"Yes"),e.qZA(),e.TgZ(53,"label",49),e._uU(54,"NO"),e.qZA()()()(),e.TgZ(55,"div",39)(56,"span",40),e.YNc(57,k,2,0,"span",50),e._uU(58," GST Reg NO.:"),e.qZA(),e.TgZ(59,"input",51),e.NdJ("ngModelChange",function(h){e.CHM(r);const d=e.oxw();return e.KtG(d.upform.gstRegNo=h)}),e.qZA()()(),e.TgZ(60,"div",38)(61,"div",39)(62,"span",40),e._uU(63," Hotline:"),e.qZA(),e.TgZ(64,"input",52),e.NdJ("ngModelChange",function(h){e.CHM(r);const d=e.oxw();return e.KtG(d.upform.hotline=h)}),e.qZA()(),e.TgZ(65,"div",39)(66,"span",40),e._uU(67,"Hotline Operating Hours:"),e.qZA(),e.TgZ(68,"input",53),e.NdJ("ngModelChange",function(h){e.CHM(r);const d=e.oxw();return e.KtG(d.upform.hotlineOperatingHours=h)}),e.qZA()()(),e.TgZ(69,"div",38)(70,"div",39)(71,"span",40),e._uU(72," Email:"),e.qZA(),e.TgZ(73,"input",54),e.NdJ("ngModelChange",function(h){e.CHM(r);const d=e.oxw();return e.KtG(d.upform.email=h)}),e.qZA()(),e.TgZ(74,"div",39)(75,"span",40)(76,"span",35),e._uU(77,"*"),e.qZA(),e._uU(78," Website:"),e.qZA(),e.TgZ(79,"input",55),e.NdJ("ngModelChange",function(h){e.CHM(r);const d=e.oxw();return e.KtG(d.upform.website=h)}),e.qZA()()(),e.TgZ(80,"div",56)(81,"button",57),e.NdJ("click",function(){e.CHM(r);const h=e.oxw();return e.KtG(h.cancelHandle())}),e._uU(82,"\u2190 Cancel"),e.qZA(),e.TgZ(83,"button",58),e.NdJ("click",function(){e.CHM(r);const h=e.oxw();return e.KtG(h.submitHandle())}),e._uU(84,"Submit"),e.qZA()()()()()}if(2&u){const r=e.oxw();e.xp6(6),e.Q6J("routerLink",e.DdM(17,F))("routerLinkActive","active"),e.xp6(1),e.hij(" ","Operator Information"," "),e.xp6(6),e.hij(" ","Company Logo",": "),e.xp6(2),e.Q6J("image",r.upform.logo),e.xp6(7),e.Q6J("ngModel",r.upform.business),e.xp6(1),e.Q6J("ngForOf",r.businessArr),e.xp6(6),e.Q6J("ngModel",r.upform.companyName),e.xp6(7),e.Q6J("ngModel",r.upform.uenNo),e.xp6(6),e.Q6J("ngModel",r.upform.operatorName),e.xp6(8),e.Q6J("ngModel",r.upform.gstRegistered),e.xp6(7),e.Q6J("ngIf","yes"==r.upform.gstRegistered),e.xp6(2),e.Q6J("ngModel",r.upform.gstRegNo),e.xp6(5),e.Q6J("ngModel",r.upform.hotline),e.xp6(4),e.Q6J("ngModel",r.upform.hotlineOperatingHours),e.xp6(5),e.Q6J("ngModel",r.upform.email),e.xp6(6),e.Q6J("ngModel",r.upform.website)}}let q=(()=>{class u extends C.t{constructor(r,c,h,d,I,oe){super(),this.walkInRecordService=r,this.translate=c,this.assetsService=h,this.operatorProfileService=d,this.nzModalService=I,this.nzMessageService=oe,this.keyword="",this.keyword$=new y.xQ,this.upform={operatorId:"",business:"",companyName:"",uenNo:"",operatorName:"",gstRegistered:"",gstRegNo:"",hotline:"",hotlineOperatingHours:"",email:"",website:"",logo:""},this.errMsg="",this.dataOrAdd=!0,this.businessArr=["EV Charging","Parking"],this.actionData={},this.form=(0,M.aq7)(),this.tableHeaders=[{text:"#",width:"100px"},{text:"Name",column:"",width:"200px"},{text:"Company",column:"",width:"200px"},{text:"Hotline",column:"",width:"200px"},{text:"Email",column:"",width:"200px"},{text:"Actions",width:"100px"}],this.keyword$.debounceTime(500).subscribe(()=>{this.reloadData()})}get filterParams(){return{operatorName:this.keyword}}addDataHandle(){this.dataOrAdd=!1}insearchHandle(r){console.log(r,"\u8f93\u5165\u7684\u503c"),this.reloadData()}ngOnInit(){this.reloadData()}reloadData(){this.reloadDataService(this.operatorProfileService)}pageChanged(){}lostDialog(){}onImageChanged(r){this.assetsService.uploadImage(r).subscribe(c=>{this.upform.logo=`/proxy${c}`})}cancelHandle(){this.dataOrAdd=!0,this.upform={operatorId:"",business:"",companyName:"",uenNo:"",operatorName:"",gstRegistered:"",gstRegNo:"",hotline:"",hotlineOperatingHours:"",email:"",website:"",logo:""},this.reloadData()}submitHandle(){this.upform.operatorId?"yes"==this.upform.gstRegistered?this.upform.logo&&this.upform.business&&this.upform.companyName&&this.upform.uenNo&&this.upform.operatorName&&this.upform.gstRegNo&&this.upform.website?this.operatorProfileService.editHandle(this.upform).subscribe(r=>{this.errMsg="Success !",this.nzMessageService.success(this.errMsg),this.upform={operatorId:"",business:"",companyName:"",uenNo:"",operatorName:"",gstRegistered:"",gstRegNo:"",hotline:"",hotlineOperatingHours:"",email:"",website:"",logo:""}}):(this.errMsg="Required fields are missing",this.nzMessageService.warning(this.errMsg)):"no"==this.upform.gstRegistered&&this.upform.logo&&this.upform.business&&this.upform.companyName&&this.upform.uenNo&&this.upform.operatorName&&this.upform.website?this.operatorProfileService.editHandle(this.upform).subscribe(r=>{this.errMsg="Success !",this.nzMessageService.success(this.errMsg),this.upform={operatorId:"",business:"",companyName:"",uenNo:"",operatorName:"",gstRegistered:"",gstRegNo:"",hotline:"",hotlineOperatingHours:"",email:"",website:"",logo:""}}):(this.errMsg="Required fields are missing",this.nzMessageService.warning(this.errMsg)):"yes"==this.upform.gstRegistered?this.upform.logo&&this.upform.business&&this.upform.companyName&&this.upform.uenNo&&this.upform.operatorName&&this.upform.gstRegNo&&this.upform.website?this.operatorProfileService.addHandle(this.upform).subscribe(r=>{this.errMsg="Success !",this.nzMessageService.success(this.errMsg),this.upform={operatorId:"",business:"",companyName:"",uenNo:"",operatorName:"",gstRegistered:"",gstRegNo:"",hotline:"",hotlineOperatingHours:"",email:"",website:"",logo:""}}):(this.errMsg="Required fields are missing",this.nzMessageService.warning(this.errMsg)):"no"==this.upform.gstRegistered&&this.upform.logo&&this.upform.business&&this.upform.companyName&&this.upform.uenNo&&this.upform.operatorName&&this.upform.website?this.operatorProfileService.addHandle(this.upform).subscribe(r=>{this.errMsg="Success !",this.nzMessageService.success(this.errMsg),this.upform={operatorId:"",business:"",companyName:"",uenNo:"",operatorName:"",gstRegistered:"",gstRegNo:"",hotline:"",hotlineOperatingHours:"",email:"",website:"",logo:""}}):(this.errMsg="Required fields are missing",this.nzMessageService.warning(this.errMsg))}deleteHandle(r){this.nzModalService.confirm({nzTitle:"<i>Are you sure you want to delete it?</i>",nzContent:`name: ${r.operatorName}`,nzOnOk:()=>this.sureDelete(r)})}sureDelete(r){this.operatorProfileService.deleteOne(r.operatorId).subscribe(c=>{this.errMsg="Delete Success !",this.nzMessageService.success(this.errMsg),this.reloadData()},c=>{this.nzMessageService.error(c)})}editOneData(r){this.upform=r,this.dataOrAdd=!1}}return u.\u0275fac=function(r){return new(r||u)(e.Y36(x.$),e.Y36(l.sK),e.Y36(v.z),e.Y36(m),e.Y36(P.Sf),e.Y36(Z.dD))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-oparator-profile"]],inputs:{form:"form"},features:[e.qOj],decls:4,vars:2,consts:[[1,"body-wrapper"],["class","m-content",4,"ngIf"],[1,"m-content"],[1,"m-portlet","m-portlet--tabs"],[1,"m-portlet__head"],[1,"m-portlet__head-tools"],["role","tablist",1,"nav","nav-tabs","m-tabs-line","m-tabs-line--primary","m-tabs-line--2x"],[1,"nav-item","m-tabs__item"],[1,"nav-link","m-tabs__link",2,"border-bottom","3px solid #00bdb5",3,"routerLink","routerLinkActive"],[1,"m-portlet__body","m-portlet__body--scrollable"],[1,"search-line"],[1,"m-portlet__filter","search-line50"],[1,"col-form-label","col-form-label-nowrap"],[1,"m-input-icon","m-input-icon--left","inputSearchBox"],[3,"nzPrefix"],["nz-input","","type","text","placeholder","Please Enter Operator",3,"ngModel","ngModelChange"],["suffixIconSearch",""],[1,"search-line50","search-line50Right"],["nz-button","","nzShape","round","nzType","primary",3,"click"],["nz-icon","","nzType","plus"],["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowTotal","nzQueryParams"],["basicTable",""],[4,"ngFor","ngForOf"],[3,"ant-table-row-odd",4,"ngFor","ngForOf"],["nz-icon","","nzType","search"],["nz-dropdown","","nzTrigger","click",1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--outline-2x","m-btn--pill","no-border",3,"nzDropdownMenu","nzPlacement"],[1,"la","la-ellipsis-h"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline",2,"margin-right","4px"],["nz-icon","","nzType","delete","nzTheme","outline",2,"margin-right","4px"],[1,"form-group","m-form__group","row"],[1,"col-form-label","col-lg-2","col-sm-12"],[2,"color","red"],[1,"col-md-10","col-sm-12","addImage"],[3,"image","imageChanged"],[1,"every-line"],[1,"half50"],[1,"everyName"],["id","business","name","business","nzPlaceHolder","Please Select",2,"width","100%",3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-input","","type","text","placeholder","Please Enter Company Full Name",3,"ngModel","ngModelChange"],["nz-input","","type","text","placeholder","Please Enter UEN No.",3,"ngModel","ngModelChange"],["nz-input","","type","text","placeholder","Please Enter Operator Name",3,"ngModel","ngModelChange"],[2,"width","100%","text-align","center"],["nzSize","large",3,"ngModel","ngModelChange"],["nz-radio","","nzValue","yes"],["nz-radio","","nzValue","no"],["style","color: red;",4,"ngIf"],["nz-input","","type","text","placeholder","Please Enter GST Reg NO.",3,"ngModel","ngModelChange"],["nz-input","","type","text","placeholder","Please Enter Hotline",3,"ngModel","ngModelChange"],["nz-input","","type","text","placeholder","Please Enter Hotline Operating Hours",3,"ngModel","ngModelChange"],["nz-input","","type","text","placeholder","Please Enter Email",3,"ngModel","ngModelChange"],["nz-input","","type","text","placeholder","Please Enter Website",3,"ngModel","ngModelChange"],[1,"actionBtn"],["nz-button","","nzType","primary","nzSize","large","nzGhost","",1,"btn-form-ops",3,"click"],["nz-button","","nzType","primary","nzSize","large",1,"btn-form-ops",2,"margin-left","30px",3,"click"],[3,"nzValue","nzLabel"]],template:function(r,c){1&r&&(e.TgZ(0,"div",0),e._UZ(1,"app-title-bar"),e.YNc(2,$,31,16,"div",1),e.YNc(3,V,85,18,"div",1),e.qZA()),2&r&&(e.xp6(2),e.Q6J("ngIf",c.dataOrAdd),e.xp6(1),e.Q6J("ngIf",!c.dataOrAdd))},dependencies:[i.sg,i.O5,U.G,b.Zp,b.gB,b.ke,L.Ls,N.wO,N.r9,S.cm,S.RR,B.ix,H.w,K.dQ,R.Ip,R.Vq,w.Of,w.Dg,D.N8,D.Uo,D._C,D.Om,D.p0,D.$Z,a.yS,a.Od,A.Fj,A.JJ,A.On,J.F],styles:[".search-line[_ngcontent-%COMP%]{display:flex;margin-bottom:40px}.search-line50[_ngcontent-%COMP%]{width:50%;display:flex;align-items:center}.inputSearchBox[_ngcontent-%COMP%]{width:50%;margin-left:10px}.search-line50Right[_ngcontent-%COMP%]{justify-content:flex-end}.form-control[_ngcontent-%COMP%]{padding:.4rem 1rem!important}.addOneData[_ngcontent-%COMP%]{background-color:#00bdb5;color:#fff;font-weight:500;cursor:pointer;height:40px;display:flex;justify-content:center;align-items:center;width:200px;border-radius:20px}.every-line[_ngcontent-%COMP%]{display:flex;margin:16px -16px 16px auto}.half50[_ngcontent-%COMP%]{display:flex;align-items:center;width:50%;justify-content:space-between;padding-right:16px;box-sizing:border-box}.radio-area[_ngcontent-%COMP%]{width:70%;display:flex;justify-content:space-evenly}.radioInput[_ngcontent-%COMP%]{margin-right:16px;width:20px;height:20px}.everyName[_ngcontent-%COMP%]{width:30%;margin:0 10px}.half50-input[_ngcontent-%COMP%]{display:flex;align-items:center;width:60%}.actionBtn[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.submit[_ngcontent-%COMP%]{margin-left:20px;width:140px;height:40px;border:2px solid #00bdb5;border-radius:5px;display:flex;justify-content:center;align-items:center;cursor:pointer;color:#fff;background-color:#00bdb5}.cancel[_ngcontent-%COMP%]{background-color:#fff;color:#00bdb5}"]}),u})();var X=n(88796),ee=n(30329),te=n(372),ne=n(59245),re=n(34984);const ae=[{path:"",component:_.f,children:[{path:"",component:q}]}];let ie=(()=>{class u{}return u.\u0275fac=function(r){return new(r||u)},u.\u0275mod=e.oAB({type:u}),u.\u0275inj=e.cJS({providers:[x.$,l.sK,v.z,m],imports:[i.ez,T.x,a.Bz.forChild(ae),X.A0,A.u5,A.UX,ee.D,te.kn,ne.mr,re.Ns.forRoot({echarts:()=>n.e(4734).then(n.bind(n,14734))})]}),u})()},34984:(z,E,n)=>{n.d(E,{Ns:()=>f,_w:()=>o});var i=n(15861),_=n(94650),T=n(21086),a=n(68896),C=n(8929),y=n(20353),M=n(34202),e=n(66753),x=n(87545);class l{constructor(p){this.changes=p}static of(p){return new l(p)}notEmpty(p){if(this.changes[p]){const t=this.changes[p].currentValue;if(null!=t)return(0,T.of)(t)}return a.E}has(p){return this.changes[p]?(0,T.of)(this.changes[p].currentValue):a.E}notFirst(p){return this.changes[p]&&!this.changes[p].isFirstChange()?(0,T.of)(this.changes[p].currentValue):a.E}notFirstAndEmpty(p){if(this.changes[p]&&!this.changes[p].isFirstChange()){const t=this.changes[p].currentValue;if(null!=t)return(0,T.of)(t)}return a.E}}const v=new _.OlP("NGX_ECHARTS_CONFIG");let o=(()=>{class s{constructor(t,g,m){this.el=g,this.ngZone=m,this.autoResize=!0,this.loadingType="default",this.chartInit=new _.vpe,this.optionsError=new _.vpe,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartPieSelectChanged=this.createLazyEvent("pieselectchanged"),this.chartPieSelected=this.createLazyEvent("pieselected"),this.chartPieUnselected=this.createLazyEvent("pieunselected"),this.chartMapSelectChanged=this.createLazyEvent("mapselectchanged"),this.chartMapSelected=this.createLazyEvent("mapselected"),this.chartMapUnselected=this.createLazyEvent("mapunselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartFocusNodeAdjacency=this.createLazyEvent("focusnodeadjacency"),this.chartUnfocusNodeAdjacency=this.createLazyEvent("unfocusnodeadjacency"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.resize$=new C.xQ,this.echarts=t.echarts}ngOnChanges(t){const g=l.of(t);g.notFirstAndEmpty("options").subscribe(m=>this.onOptionsChange(m)),g.notFirstAndEmpty("merge").subscribe(m=>this.setOption(m)),g.has("loading").subscribe(m=>this.toggleLoading(!!m)),g.notFirst("theme").subscribe(()=>this.refreshChart())}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe((0,e.p)(100,y.z,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(()=>{this.animationFrameID=window.requestAnimationFrame(()=>this.resize$.next())})),this.resizeOb.observe(this.el.nativeElement))}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(t){this.chart&&(t?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading())}setOption(t,g){if(this.chart)try{this.chart.setOption(t,g)}catch(m){console.error(m),this.optionsError.emit(m)}}refreshChart(){var t=this;return(0,i.Z)(function*(){t.dispose(),yield t.initChart()})()}createChart(){const t=this.el.nativeElement;if(window&&window.getComputedStyle){const g=window.getComputedStyle(t,null).getPropertyValue("height");(!g||"0px"===g)&&(!t.style.height||"0px"===t.style.height)&&(t.style.height="400px")}return this.ngZone.runOutsideAngular(()=>("function"==typeof this.echarts?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:m})=>m(t,this.theme,this.initOpts)))}initChart(){var t=this;return(0,i.Z)(function*(){yield t.onOptionsChange(t.options),t.merge&&t.chart&&t.setOption(t.merge)})()}onOptionsChange(t){var g=this;return(0,i.Z)(function*(){!t||(g.chart||(g.chart=yield g.createChart(),g.chartInit.emit(g.chart)),g.setOption(g.options,!0))})()}createLazyEvent(t){return this.chartInit.pipe((0,x.w)(g=>new M.y(m=>(g.on(t,P=>this.ngZone.run(()=>m.next(P))),()=>{this.chart&&(this.chart.isDisposed()||g.off(t))}))))}}return s.\u0275fac=function(t){return new(t||s)(_.Y36(v),_.Y36(_.SBq),_.Y36(_.R0b))},s.\u0275dir=_.lG2({type:s,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",loading:"loading",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartPieSelectChanged:"chartPieSelectChanged",chartPieSelected:"chartPieSelected",chartPieUnselected:"chartPieUnselected",chartMapSelectChanged:"chartMapSelectChanged",chartMapSelected:"chartMapSelected",chartMapUnselected:"chartMapUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartFocusNodeAdjacency:"chartFocusNodeAdjacency",chartUnfocusNodeAdjacency:"chartUnfocusNodeAdjacency",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],features:[_.TTD]}),s})(),f=(()=>{class s{static forRoot(t){return{ngModule:s,providers:[{provide:v,useValue:t}]}}static forChild(){return{ngModule:s}}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=_.oAB({type:s}),s.\u0275inj=_.cJS({}),s})()}}]);