"use strict";(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[1176,2946],{77407:(G,Q,p)=>{p.d(Q,{B:()=>Z});var r=p(65136),h=p(92340),F=p(94650),H=p(80529),w=p(28555),e=p(91599);let Z=(()=>{class M extends r.b{constructor(y,b,P){super(y,b),this.http=y,this.store=b,this.baseUrl="carpark/api/dashboard-statistics",this.baseUrl02="batchservice/api/dashboard-statistics",this.baseUr3="carpark/api/evDashboard",this.handleError=P.createHandleError("StatisticService")}getOverallStatistics(y){const b=this.getUrl(`${this.baseUrl02}/overall-statistics`);return this.post(b,y)}getDurationStatistics(y){const b=this.getUrl(`${this.baseUrl02}/overall-statistics`);return this.post(b,y)}getFaultStatistics(y){const b=this.getUrl(`${this.baseUrl}/fault`);return this.post(b,y)}getOccupancyStatistics(y){const b=this.getUrl(`${this.baseUrl02}/occupancy`);return this.post(b,y)}getOccupancyPrediction(y){const b=this.getUrl(`${this.baseUrl}/occupancy-prediction`);return this.post(b,y)}getDailyOccupancyStatistics(y){const b=this.getUrl(`${this.baseUrl02}/occupancy-per-day`);return this.post(b,y)}getMaxNormalSeasonalLotsStatistics(y){const b=this.getUrl(`${this.baseUrl02}/max-normal-seasonal-slots`);return this.post(b,y)}getRevenueStatistics(y){const b=this.getUrl(`${this.baseUrl02}/revenue`);return this.post(b,y).map(P=>({carParkId:P.carParkId,carParkCode:P.carParkCode,carParkRevenue:P.carParkRevenue}))}getTransactionStatistics(y){const b=this.getUrl(`${this.baseUrl02}/transaction`);return this.post(b,y)}getVehicleTypeStatistics(y){const b=this.getUrl(`${this.baseUrl02}/overall-statistics`);return this.post(b,y)}dashboardGetData(){return this.get(`${h.N.apiHost}/scp-mg-report/report/report/getHomePageReport`)}getDashboardFlag(){return this.get(`${h.N.apiHost}/carpark/api/userDashboardConfig`)}putDashboardFlag(y){return this.put(`${h.N.apiHost}/carpark/api/userDashboardConfig`,y)}getTransactionsEnergyRevenue(y,b){const P=this.getUrl(`carpark/api/evDashboard/totalAnalysisTransactionsEnergyRevenue?endDate=${b}&startDate=${y}`);return this.get(P)}getChargersUpDown(y,b){const P=this.getUrl(`carpark/api/evDashboard/totalAnalysisChargersUpDown?endDate=${b}&startDate=${y}`);return this.get(P)}getConnectorsTotalAvailableInuseDown(y,b){const P=this.getUrl(`carpark/api/evDashboard/totalAnalysisConnectorsTotalAvailableInuseDown?endDate=${b}&startDate=${y}`);return this.get(P)}getgetAverageFirst(y,b){const P=this.getUrl(`carpark/api/evDashboard/averageAnalysisEnergyRevenueOfSession?endDate=${b}&startDate=${y}`);return this.get(P)}getevRevenueAnalysis(y,b){const P=this.getUrl(`carpark/api/evDashboard/evRevenueAnalysis?endDate=${b}&startDate=${y}`);return this.get(P)}top10CarparwithHighest(y,b){const P=this.getUrl(`carpark/api/evDashboard/top10CarParkWithHighestRevenue?endDate=${b}&startDate=${y}`);return this.get(P)}}return M.\u0275fac=function(y){return new(y||M)(F.LFG(H.eN),F.LFG(w.yh),F.LFG(e.k))},M.\u0275prov=F.Yz7({token:M,factory:M.\u0275fac}),M})()},52746:(G,Q,p)=>{p.d(Q,{t:()=>H});var r=p(72986),h=p(591),F=p(94650);let H=(()=>{class w{constructor(){this.loading=!1,this.pagination={totalCount:0,rowsPerPage:20,page:1,sortBy:null,descending:!0,totalPages:1},this.listData=[],this.hadGetData$=new h.X(!1)}get hadGetData(){return this.hadGetData$.getValue()}get filterParams(){return this._filterParams}set filterParams(Z){this._filterParams=Z}reloadDataService(Z,M="filterModel"){this.loading=!0,this.hadGetData$.next(!1),Z[M](this.filterParams,this.pagination).pipe((0,r.q)(1)).subscribe(R=>{if(R.pagination.page>R.pagination.totalPages)return this.pagination={...this.pagination,page:R.pagination.totalPages},this.reloadDataService(Z);this.loading=!1,this.pagination={...this.pagination,totalCount:R.pagination.totalCount||R.pagination.totalElements},this.listData=R.data,this.hadGetData$.next(!0)},()=>{this.loading=!1,this.listData=[],this.pagination={...this.pagination,totalCount:0}})}onQueryParamsChange(Z){const{pageSize:M,pageIndex:R}=Z;this.pagination={...this.pagination,rowsPerPage:M,page:R},this.reloadData()}reloadData(){}ngOnInit(){}}return w.\u0275fac=function(Z){return new(Z||w)},w.\u0275cmp=F.Xpm({type:w,selectors:[["ng-component"]],decls:0,vars:0,template:function(Z,M){},encapsulation:2}),w})()},28100:(G,Q,p)=>{p.d(Q,{b:()=>t});var r=p(37340),h=p(94650),F=p(58663),H=p(10100),w=p(97640),e=p(36895),Z=p(25141),M=p(53525),R=p(24657),y=p(52178),b=p(44147);const P=["tooltipTemplate"];function S(x,U){if(1&x){const d=h.EpF();h.O4$(),h.TgZ(0,"g",6),h.NdJ("dimensionsChanged",function(k){h.CHM(d);const E=h.oxw();return h.KtG(E.updateXAxisHeight(k))}),h.qZA()}if(2&x){const d=h.oxw();h.Q6J("xScale",d.groupScale)("dims",d.dims)("showLabel",d.showXAxisLabel)("labelText",d.xAxisLabel)("tickFormatting",d.xAxisTickFormatting)("ticks",d.xAxisTicks)("xAxisOffset",d.dataLabelMaxHeight.negative)}}function C(x,U){if(1&x){const d=h.EpF();h.O4$(),h.TgZ(0,"g",7),h.NdJ("dimensionsChanged",function(k){h.CHM(d);const E=h.oxw();return h.KtG(E.updateYAxisWidth(k))}),h.qZA()}if(2&x){const d=h.oxw();h.Q6J("yScale",d.valueScale)("dims",d.dims)("showGridLines",d.showGridLines)("showLabel",d.showYAxisLabel)("labelText",d.yAxisLabel)("tickFormatting",d.yAxisTickFormatting)("ticks",d.yAxisTicks)("referenceLines",d.referenceLines)("showRefLines",d.showRefLines)("showRefLabels",d.showRefLabels)}}function L(x,U){if(1&x){const d=h.EpF();h.O4$(),h.TgZ(0,"g",8),h.NdJ("select",function(k){const I=h.CHM(d).$implicit,$=h.oxw();return h.KtG($.onClick(k,I))})("activate",function(k){const I=h.CHM(d).$implicit,$=h.oxw();return h.KtG($.onActivate(k,I))})("deactivate",function(k){const I=h.CHM(d).$implicit,$=h.oxw();return h.KtG($.onDeactivate(k,I))})("dataLabelHeightChanged",function(k){const I=h.CHM(d).index,$=h.oxw();return h.KtG($.onDataLabelMaxHeightChanged(k,I))}),h.qZA()}if(2&x){const d=U.$implicit,g=h.oxw();h.Q6J("@animationState","active")("activeEntries",g.activeEntries)("xScale",g.innerScale)("yScale",g.valueScale)("colors",g.colors)("series",d.series)("dims",g.dims)("gradient",g.gradient)("tooltipDisabled",g.tooltipDisabled)("tooltipTemplate",g.tooltipTemplate)("showDataLabel",g.showDataLabel)("dataLabelFormatting",g.dataLabelFormatting)("seriesName",d.name)("roundEdges",g.roundEdges)("animations",g.animations),h.uIk("transform",g.groupTransform(d))}}const f=function(x,U){return[x,U]};let t=(()=>{class x extends w.ep{constructor(){super(...arguments),this.legend=!1,this.legendTitle="Legend",this.tooltipDisabled=!1,this.scaleType="ordinal",this.showGridLines=!0,this.activeEntries=[],this.groupPadding=16,this.barPadding=8,this.roundDomains=!1,this.roundEdges=!0,this.showDataLabel=!1,this.showRefLines=!1,this.showRefLabels=!0,this.activate=new h.vpe,this.deactivate=new h.vpe,this.margin=[10,20,10,20],this.xAxisHeight=0,this.yAxisWidth=0,this.dataLabelMaxHeight={negative:0,positive:0}}update(){super.update(),this.showDataLabel||(this.dataLabelMaxHeight={negative:0,positive:0}),this.margin=[10+this.dataLabelMaxHeight.positive,20,10+this.dataLabelMaxHeight.negative,20],this.dims=(0,w.iG)({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.schemeType}),this.showDataLabel&&(this.dims.height-=this.dataLabelMaxHeight.negative),this.formatDates(),this.groupDomain=this.getGroupDomain(),this.innerDomain=this.getInnerDomain(),this.valuesDomain=this.getValueDomain(),this.groupScale=this.getGroupScale(),this.innerScale=this.getInnerScale(),this.valueScale=this.getValueScale(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.transform=`translate(${this.dims.xOffset} , ${this.margin[0]+this.dataLabelMaxHeight.negative})`}onDataLabelMaxHeightChanged(d,g){d.size.negative?this.dataLabelMaxHeight.negative=Math.max(this.dataLabelMaxHeight.negative,d.size.height):this.dataLabelMaxHeight.positive=Math.max(this.dataLabelMaxHeight.positive,d.size.height),g===this.results.length-1&&setTimeout(()=>this.update())}getGroupScale(){const d=this.groupDomain.length/(this.dims.height/this.groupPadding+1);return(0,F.Z)().rangeRound([0,this.dims.width]).paddingInner(d).paddingOuter(d/2).domain(this.groupDomain)}getInnerScale(){const d=this.groupScale.bandwidth(),g=this.innerDomain.length/(d/this.barPadding+1);return(0,F.Z)().rangeRound([0,d]).paddingInner(g).domain(this.innerDomain)}getValueScale(){const d=(0,H.Z)().range([this.dims.height,0]).domain(this.valuesDomain);return this.roundDomains?d.nice():d}getGroupDomain(){const d=[];for(const g of this.results)d.includes(g.name)||d.push(g.name);return d}getInnerDomain(){const d=[];for(const g of this.results)for(const k of g.series)d.includes(k.name)||d.push(k.name);return d}getValueDomain(){const d=[];for(const E of this.results)for(const I of E.series)d.includes(I.value)||d.push(I.value);return[Math.min(0,...d),this.yScaleMax?Math.max(this.yScaleMax,...d):Math.max(...d)]}groupTransform(d){return`translate(${this.groupScale(d.name)}, 0)`}onClick(d,g){g&&(d.series=g.name),this.select.emit(d)}trackBy(d,g){return g.name}setColors(){let d;d="ordinal"===this.schemeType?this.innerDomain:this.valuesDomain,this.colors=new w.vH(this.scheme,this.schemeType,d,this.customColors)}getLegendOptions(){const d={scaleType:this.schemeType,colors:void 0,domain:[],title:void 0};return"ordinal"===d.scaleType?(d.domain=this.innerDomain,d.colors=this.colors,d.title=this.legendTitle):(d.domain=this.valuesDomain,d.colors=this.colors.scale),d}updateYAxisWidth({width:d}){this.yAxisWidth=d,this.update()}updateXAxisHeight({height:d}){this.xAxisHeight=d,this.update()}onActivate(d,g){const k={...d};g&&(k.series=g.name),!(this.activeEntries.findIndex(I=>I.name===k.name&&I.value===k.value&&I.series===k.series)>-1)&&(this.activeEntries=[k,...this.activeEntries],this.activate.emit({value:k,entries:this.activeEntries}))}onDeactivate(d,g){const k={...d};g&&(k.series=g.name);const E=this.activeEntries.findIndex(I=>I.name===k.name&&I.value===k.value&&I.series===k.series);this.activeEntries.splice(E,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:k,entries:this.activeEntries})}}return x.\u0275fac=function(){let U;return function(g){return(U||(U=h.n5z(x)))(g||x)}}(),x.\u0275cmp=h.Xpm({type:x,selectors:[["app-charts-bar-vertical-2d"]],contentQueries:function(d,g,k){if(1&d&&h.Suo(k,P,5),2&d){let E;h.iGM(E=h.CRH())&&(g.tooltipTemplate=E.first)}},inputs:{legend:"legend",legendTitle:"legendTitle",xAxis:"xAxis",yAxis:"yAxis",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",tooltipDisabled:"tooltipDisabled",scaleType:"scaleType",gradient:"gradient",showGridLines:"showGridLines",activeEntries:"activeEntries",schemeType:"schemeType",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",xAxisTicks:"xAxisTicks",yAxisTicks:"yAxisTicks",groupPadding:"groupPadding",barPadding:"barPadding",roundDomains:"roundDomains",roundEdges:"roundEdges",yScaleMax:"yScaleMax",showDataLabel:"showDataLabel",dataLabelFormatting:"dataLabelFormatting",showRefLines:"showRefLines",referenceLines:"referenceLines",showRefLabels:"showRefLabels"},outputs:{activate:"activate",deactivate:"deactivate"},features:[h.qOj],decls:6,vars:17,consts:[[3,"view","showLegend","legendOptions","activeEntries","animations","legendLabelActivate","legendLabelDeactivate","legendLabelClick"],[1,"bar-chart","chart"],["ngx-charts-grid-panel-series","","orient","vertical",3,"xScale","yScale","data","dims"],["ngx-charts-x-axis","",3,"xScale","dims","showLabel","labelText","tickFormatting","ticks","xAxisOffset","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","tickFormatting","ticks","referenceLines","showRefLines","showRefLabels","dimensionsChanged",4,"ngIf"],["ngx-charts-series-vertical","",3,"activeEntries","xScale","yScale","colors","series","dims","gradient","tooltipDisabled","tooltipTemplate","showDataLabel","dataLabelFormatting","seriesName","roundEdges","animations","select","activate","deactivate","dataLabelHeightChanged",4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-x-axis","",3,"xScale","dims","showLabel","labelText","tickFormatting","ticks","xAxisOffset","dimensionsChanged"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","tickFormatting","ticks","referenceLines","showRefLines","showRefLabels","dimensionsChanged"],["ngx-charts-series-vertical","",3,"activeEntries","xScale","yScale","colors","series","dims","gradient","tooltipDisabled","tooltipTemplate","showDataLabel","dataLabelFormatting","seriesName","roundEdges","animations","select","activate","deactivate","dataLabelHeightChanged"]],template:function(d,g){1&d&&(h.TgZ(0,"ngx-charts-chart",0),h.NdJ("legendLabelActivate",function(E){return g.onActivate(E)})("legendLabelDeactivate",function(E){return g.onDeactivate(E)})("legendLabelClick",function(E){return g.onClick(E)}),h.O4$(),h.TgZ(1,"g",1),h._UZ(2,"g",2),h.YNc(3,S,1,7,"g",3),h.YNc(4,C,1,10,"g",4),h.YNc(5,L,1,16,"g",5),h.qZA()()),2&d&&(h.Q6J("view",h.WLB(14,f,g.width,g.height))("showLegend",g.legend)("legendOptions",g.legendOptions)("activeEntries",g.activeEntries)("animations",g.animations),h.xp6(1),h.uIk("transform",g.transform),h.xp6(1),h.Q6J("xScale",g.groupScale)("yScale",g.valueScale)("data",g.results)("dims",g.dims),h.xp6(1),h.Q6J("ngIf",g.xAxis),h.xp6(1),h.Q6J("ngIf",g.yAxis),h.xp6(1),h.Q6J("ngForOf",g.results)("ngForTrackBy",g.trackBy))},dependencies:[e.sg,e.O5,Z.I,M.M,R.x,y.Y,b.A],styles:[".ngx-charts .refline-path{stroke:#a8b2c7;stroke-width:2}\n"],encapsulation:2,data:{animation:[(0,r.X$)("animationState",[(0,r.eR)(":leave",[(0,r.oB)({opacity:1,transform:"*"}),(0,r.jt)(500,(0,r.oB)({opacity:0,transform:"scale(0)"}))])])]},changeDetection:0}),x})()},34523:(G,Q,p)=>{p.d(Q,{o:()=>e});var r=p(38014),h=p(94650),F=p(36895);function H(Z,M){if(1&Z&&(h.TgZ(0,"li"),h._UZ(1,"span",2),h.TgZ(2,"span"),h._uU(3),h.qZA()()),2&Z){const R=M.$implicit,y=M.index,b=h.oxw();h.xp6(1),h.Udp("background",R.color||b.colors[y]),h.xp6(2),h.Oqu(b.legendDisplay(R))}}function w(Z){return`${Z.value} ${Z.name}`}let e=(()=>{class Z{constructor(){this.colors=r.DMY,this.legendDisplay=w}ngOnInit(){!this.display||(this.legendDisplay=this.display)}}return Z.\u0275fac=function(R){return new(R||Z)},Z.\u0275cmp=h.Xpm({type:Z,selectors:[["app-chart-legend"]],inputs:{data:"data",colors:"colors",display:"display",horizontal:"horizontal"},decls:3,vars:2,consts:[[1,"st-chart-legend",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"st-chart-badge"]],template:function(R,y){1&R&&(h.TgZ(0,"div",0)(1,"ul"),h.YNc(2,H,4,3,"li",1),h.qZA()()),2&R&&(h.Q6J("ngClass",y.horizontal?"horizontal":""),h.xp6(2),h.Q6J("ngForOf",y.data))},dependencies:[F.mk,F.sg],encapsulation:2}),Z})()},9389:(G,Q,p)=>{p.d(Q,{C:()=>t});var r=p(94650),h=p(38014),F=p(21837),H=p(36895),w=p(81558),e=p(8278),Z=p(43056),M=p(69484);function R(x,U){if(1&x){const d=r.EpF();r.TgZ(0,"app-monthpicker-body",6),r.NdJ("select",function(k){r.CHM(d);const E=r.oxw();return r.KtG(E.submit(k))}),r.qZA()}if(2&x){const d=r.oxw();r.Q6J("data",d.value)}}let y=(()=>{class x{constructor(){this.select=new r.vpe}submit(d){this.select.emit(d),this.popup.hide()}get displayText(){return F.ou.fromJSDate(this.value).toLocaleString({month:"short",year:"numeric"})}ngOnInit(){}}return x.\u0275fac=function(d){return new(d||x)},x.\u0275cmp=r.Xpm({type:x,selectors:[["app-monthpicker"]],viewQuery:function(d,g){if(1&d&&r.Gf(Z.k5,5),2&d){let k;r.iGM(k=r.CRH())&&(g.popup=k.first)}},inputs:{rounded:"rounded",value:"value"},outputs:{select:"select"},decls:8,vars:3,consts:[[1,"m-input-icon","m-input-icon--right","app-monthpicker",3,"ngClass"],["type","text","containerClass","popup-datepicker","placement","bottom","readonly","",1,"form-control","m-input",3,"popover","value"],["popup",""],[1,"m-input-icon__icon","m-input-icon__icon--right"],[1,"la","la-calendar"],["popTemplate",""],[3,"data","select"]],template:function(d,g){if(1&d&&(r.TgZ(0,"div",0),r._UZ(1,"input",1,2),r.TgZ(3,"span",3)(4,"span"),r._UZ(5,"i",4),r.qZA()()(),r.YNc(6,R,1,1,"ng-template",null,5,r.W1O)),2&d){const k=r.MAs(7);r.Q6J("ngClass",g.rounded?"rounded":""),r.xp6(1),r.Q6J("popover",k)("value",g.displayText)}},dependencies:[H.mk,Z.k5,M.S],encapsulation:2}),x})();var b=p(84790);function P(x,U){if(1&x){const d=r.EpF();r.TgZ(0,"app-yearpicker-body",6),r.NdJ("select",function(k){r.CHM(d);const E=r.oxw();return r.KtG(E.submit(k))}),r.qZA()}if(2&x){const d=r.oxw();r.Q6J("data",d.value)}}let S=(()=>{class x{constructor(){this.select=new r.vpe}submit(d){this.select.emit(d),this.popup.hide()}get displayText(){return this.value.getFullYear()}ngOnInit(){}}return x.\u0275fac=function(d){return new(d||x)},x.\u0275cmp=r.Xpm({type:x,selectors:[["app-yearpicker"]],viewQuery:function(d,g){if(1&d&&r.Gf(Z.k5,5),2&d){let k;r.iGM(k=r.CRH())&&(g.popup=k.first)}},inputs:{rounded:"rounded",value:"value"},outputs:{select:"select"},decls:8,vars:3,consts:[[1,"m-input-icon","m-input-icon--right","app-yearpicker",3,"ngClass"],["type","text","containerClass","popup-datepicker","placement","bottom","readonly","",1,"form-control","m-input",3,"popover","value"],["popup",""],[1,"m-input-icon__icon","m-input-icon__icon--right"],[1,"la","la-calendar"],["popTemplate",""],[3,"data","select"]],template:function(d,g){if(1&d&&(r.TgZ(0,"div",0),r._UZ(1,"input",1,2),r.TgZ(3,"span",3)(4,"span"),r._UZ(5,"i",4),r.qZA()()(),r.YNc(6,P,1,1,"ng-template",null,5,r.W1O)),2&d){const k=r.MAs(7);r.Q6J("ngClass",g.rounded?"rounded":""),r.xp6(1),r.Q6J("popover",k)("value",g.displayText)}},dependencies:[H.mk,Z.k5,b.M],encapsulation:2}),x})();function C(x,U){if(1&x){const d=r.EpF();r.TgZ(0,"div")(1,"input",1),r.NdJ("bsValueChange",function(k){r.CHM(d);const E=r.oxw();return r.KtG(E.selectDate(k))}),r.qZA()()}if(2&x){const d=r.oxw();r.xp6(1),r.Q6J("bsConfig",d.bsConfig)("bsValue",d.data)}}function L(x,U){if(1&x){const d=r.EpF();r.TgZ(0,"div")(1,"app-monthpicker",2),r.NdJ("select",function(k){r.CHM(d);const E=r.oxw();return r.KtG(E.selectDate(k))}),r.qZA()()}if(2&x){const d=r.oxw();r.xp6(1),r.Q6J("value",d.data)("rounded",d.rounded)}}function f(x,U){if(1&x){const d=r.EpF();r.TgZ(0,"div")(1,"app-yearpicker",2),r.NdJ("select",function(k){r.CHM(d);const E=r.oxw();return r.KtG(E.selectDate(k))}),r.qZA()()}if(2&x){const d=r.oxw();r.xp6(1),r.Q6J("value",d.data)("rounded",d.rounded)}}let t=(()=>{class x{constructor(){this.type=h.Nxg.Day,this.data=new Date,this.select=new r.vpe,this.bsConfig={containerClass:"theme-light",showWeekNumbers:!1}}ngOnInit(){}get displayText(){switch(this.type){case h.Nxg.Month:return F.ou.fromJSDate(this.data).toLocaleString({month:"short",year:"numeric"});case h.Nxg.Year:return this.data.getFullYear()}}selectDate(d){let g;switch(this.type){case h.Nxg.Month:g=F.ou.fromJSDate(d).startOf("month").toJSDate();break;case h.Nxg.Year:g=F.ou.fromJSDate(d).startOf("year").toJSDate();break;default:g=d}this.data=g,this.select.emit(g)}}return x.\u0275fac=function(d){return new(d||x)},x.\u0275cmp=r.Xpm({type:x,selectors:[["app-datepicker"]],inputs:{containerClass:"containerClass",type:"type",data:"data",rounded:"rounded"},outputs:{select:"select"},decls:3,vars:3,consts:[[4,"ngIf"],["type","text","bsDatepicker","",1,"form-control",3,"bsConfig","bsValue","bsValueChange"],[3,"value","rounded","select"]],template:function(d,g){1&d&&(r.YNc(0,C,2,2,"div",0),r.YNc(1,L,2,2,"div",0),r.YNc(2,f,2,2,"div",0)),2&d&&(r.Q6J("ngIf","day"===g.type),r.xp6(1),r.Q6J("ngIf","month"===g.type),r.xp6(1),r.Q6J("ngIf","year"===g.type))},dependencies:[H.O5,w.N,e.Y,y,S],encapsulation:2}),x})()},95369:(G,Q,p)=>{p.d(Q,{J:()=>b});var r=p(94650),h=p(38014),F=p(36895),H=p(46080),w=p(34523);function e(P,S){if(1&P&&(r.TgZ(0,"div",9),r._uU(1),r.qZA()),2&P){const C=r.oxw(2);r.xp6(1),r.hij(" ",C.name," ")}}function Z(P,S){1&P&&r.GkF(0)}const M=function(P){return{$implicit:P}};function R(P,S){if(1&P&&(r.TgZ(0,"div",10),r.YNc(1,Z,1,0,"ng-container",11),r.qZA()),2&P){const C=r.oxw(2);r.xp6(1),r.Q6J("ngTemplateOutlet",C.selectedTemplate)("ngTemplateOutletContext",r.VKq(2,M,C.selected))}}function y(P,S){if(1&P){const C=r.EpF();r.TgZ(0,"div",1)(1,"div",2),r.YNc(2,e,2,1,"div",3),r.TgZ(3,"div",4)(4,"ngx-charts-pie-chart",5),r.NdJ("select",function(f){r.CHM(C);const t=r.oxw();return r.KtG(t.onSelect(f))}),r.qZA(),r.YNc(5,R,2,4,"div",6),r.qZA()(),r.TgZ(6,"div",7),r._UZ(7,"app-chart-legend",8),r.qZA()()}if(2&P){const C=r.oxw();r.Q6J("ngClass",C.name?"has-name":""),r.xp6(2),r.Q6J("ngIf",C.name),r.xp6(1),r.Q6J("ngStyle",C.containerStyle),r.xp6(1),r.Q6J("animations",!0)("view",C.view)("scheme",C.scheme)("doughnut",!0)("results",C.results),r.xp6(1),r.Q6J("ngIf",C.selected),r.xp6(2),r.Q6J("display",C.displayLegend)("data",C.results)("colors",C.scheme.domain)}}let b=(()=>{class P{constructor(){this.scheme={domain:h.DMY},this._view=null,this.containerStyle={}}get results(){return this._results||[]}set results(C){this._results=C,this.selected=C?C[0]:null}get view(){return this._view}set view(C){this._view=C,this.containerStyle={width:`${C[0]}px`,height:`${C[1]}px`,position:"relative"}}ngOnInit(){}onSelect(C){this.selected=C}}return P.\u0275fac=function(C){return new(C||P)},P.\u0275cmp=r.Xpm({type:P,selectors:[["app-pie-chart"]],contentQueries:function(C,L,f){if(1&C&&r.Suo(f,r.Rgc,5),2&C){let t;r.iGM(t=r.CRH())&&(L.selectedTemplate=t.first)}},inputs:{results:"results",name:"name",displayLegend:"displayLegend",scheme:"scheme",view:"view"},decls:1,vars:1,consts:[["class","row app-pie-chart m--padding-0",3,"ngClass",4,"ngIf"],[1,"row","app-pie-chart","m--padding-0",3,"ngClass"],[1,"col-sm-5","m--padding-left-5","m--padding-right-5"],["class","title text-center",4,"ngIf"],[3,"ngStyle"],[3,"animations","view","scheme","doughnut","results","select"],["class","pie-chart-center-info",4,"ngIf"],[1,"col-sm-7","m--padding-left-10","chart-legend-wrapper"],[3,"display","data","colors"],[1,"title","text-center"],[1,"pie-chart-center-info"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(C,L){1&C&&r.YNc(0,y,8,12,"div",0),2&C&&r.Q6J("ngIf",L.results)},dependencies:[F.mk,F.O5,F.tP,F.PC,H.J,w.o],encapsulation:2}),P})()},53033:(G,Q,p)=>{p.d(Q,{Z:()=>F,e:()=>H});var r=p(36895),h=p(94650);let F=(()=>{class w extends r.H9{transform(Z,M,R,y,b){if(!M)return"";switch(M.toUpperCase()){case"MMK":return`MMK ${Z}`;case"SGD":return`$${Z}`;default:return super.transform(Z,M,R,y,b)}}}return w.\u0275fac=function(){let e;return function(M){return(e||(e=h.n5z(w)))(M||w)}}(),w.\u0275pipe=h.Yjl({name:"excurrency",type:w,pure:!0}),w})(),H=(()=>{class w{transform(Z){return Z/100}}return w.\u0275fac=function(Z){return new(Z||w)},w.\u0275pipe=h.Yjl({name:"cent2Dollar",type:w,pure:!0}),w})()},1176:(G,Q,p)=>{p.r(Q),p.d(Q,{DashboardModule:()=>Me,createTranslateLoader:()=>oe});var r=p(36895),h=p(24006),F=p(34793),H=p(372),w=p(60097),e=p(77407),Z=p(30329),M=p(88796),R=p(97640),y=p(20388),b=p(21532),P=p(59501),S=p(38014),C=p(17489),L=p(21837),f=p(36053),t=p(94650),x=p(76916),U=p(9389),d=p(89383),g=p(34523),k=p(95369),E=p(28100),I=p(80646),$=p(88711);function ce(m,A){if(1&m&&(t.TgZ(0,"div",28),t._uU(1),t.qZA()),2&m){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",i.name," ")}}function K(m,A){if(1&m&&(t.TgZ(0,"div",26),t.YNc(1,ce,2,1,"div",27),t.qZA()),2&m){const i=A.$implicit;t.xp6(1),t.Q6J("ngIf",i.name)}}function j(m,A){if(1&m&&(t.TgZ(0,"div",29),t._UZ(1,"app-pie-chart",30),t.qZA()),2&m){const i=A.$implicit,c=t.oxw();t.xp6(1),t.Q6J("view",c.chartView)("results",i.series)("displayLegend",c.displayPercentLegend)}}function le(m,A){if(1&m&&(t.TgZ(0,"div",28),t._uU(1),t.qZA()),2&m){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",i.name," ")}}function ee(m,A){if(1&m&&(t.TgZ(0,"div",26),t.YNc(1,le,2,1,"div",27),t.qZA()),2&m){const i=A.$implicit;t.xp6(1),t.Q6J("ngIf",i.name)}}function ie(m,A){if(1&m&&(t.TgZ(0,"div",31),t._UZ(1,"app-pie-chart",30),t.qZA()),2&m){const i=A.$implicit,c=t.oxw();t.xp6(1),t.Q6J("view",c.chartView)("results",i.series)("displayLegend",c.displayPercentLegend)}}function pe(m,A){if(1&m){const i=t.EpF();t.TgZ(0,"li",32)(1,"a",33),t.NdJ("click",function(){const T=t.CHM(i).$implicit,u=t.oxw();return t.KtG(u.parkingOccupancy.tab=T)}),t._uU(2),t.ALo(3,"titlecase"),t.qZA()()}if(2&m){const i=A.$implicit,c=t.oxw();t.xp6(1),t.Q6J("ngClass",i===c.parkingOccupancy.tab?"active":""),t.xp6(1),t.hij(" ",t.lcZ(3,2,i)," ")}}function de(m,A){if(1&m&&(t.TgZ(0,"div",45)(1,"span"),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&m){const i=A.$implicit,c=A.index,v=t.oxw(3);t.xp6(1),t.Udp("color",v.lineChartColorScheme.domain[c]),t.xp6(1),t.hij(" ",i.name," "),t.xp6(1),t.hij(": ",i.value," ")}}function he(m,A){if(1&m&&(t.TgZ(0,"div",42)(1,"div",43),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,de,4,4,"div",44),t.qZA()),2&m){const i=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,2,"Total Occupancy")," "),t.xp6(2),t.Q6J("ngForOf",i.parkingOccupancy.average[i.parkingOccupancy.tab][0].series)}}const ne=function(){return[]},V=function(m){return[150,m]};function me(m,A){if(1&m&&(t.TgZ(0,"div",34)(1,"div",35),t._UZ(2,"app-chart-legend",36),t.TgZ(3,"div",7)(4,"div",37),t._UZ(5,"ngx-charts-area-chart",38),t.qZA(),t.TgZ(6,"div",39)(7,"ngx-charts-bar-vertical-2d",40),t.YNc(8,he,5,4,"ng-template",null,41,t.W1O),t.qZA()()()()()),2&m){const i=t.oxw();t.xp6(2),t.Q6J("data",t.DdM(21,ne))("display",i.lineLegend)("horizontal",!0)("colors",i.lineChartColorScheme.domain),t.xp6(1),t.Udp("height",i.barChartHeight+"px"),t.xp6(2),t.Q6J("scheme",i.lineChartColorScheme)("results",i.parkingOccupancy.occupancy[i.parkingOccupancy.tab])("xAxis",!0)("yAxis",!0)("gradient",!0)("yScaleMax",i.parkingOccupancy.max[i.parkingOccupancy.tab]),t.xp6(2),t.Q6J("view",t.VKq(22,V,i.barChartHeight))("scheme",i.lineChartColorScheme)("results",i.parkingOccupancy.average[i.parkingOccupancy.tab])("xAxis",!0)("yAxis",!0)("yScaleMax",i.parkingOccupancy.max[i.parkingOccupancy.tab])("showYAxisLabel",!0)("barPadding",20)("groupPadding",30)}}function ge(m,A){if(1&m){const i=t.EpF();t.TgZ(0,"li",32)(1,"a",33),t.NdJ("click",function(){const T=t.CHM(i).$implicit,u=t.oxw();return t.KtG(u.parkingDailyOccupancy.tab=T)}),t._uU(2),t.ALo(3,"titlecase"),t.qZA()()}if(2&m){const i=A.$implicit,c=t.oxw();t.xp6(1),t.Q6J("ngClass",i===c.parkingDailyOccupancy.tab?"active":""),t.xp6(1),t.hij(" ",t.lcZ(3,2,i)," ")}}function ue(m,A){if(1&m&&(t.TgZ(0,"div",45)(1,"span"),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&m){const i=A.$implicit,c=A.index,v=t.oxw(3);t.xp6(1),t.Udp("color",v.lineChartColorScheme.domain[c]),t.xp6(1),t.hij(" ",i.name," "),t.xp6(1),t.hij(": ",i.value," ")}}function _e(m,A){if(1&m&&(t.TgZ(0,"div",42)(1,"div",43),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,ue,4,4,"div",44),t.qZA()),2&m){const i=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,2,"Total Occupancy")," "),t.xp6(2),t.Q6J("ngForOf",i.parkingDailyOccupancy.average[i.parkingDailyOccupancy.tab][0].series)}}function ve(m,A){if(1&m&&(t.TgZ(0,"div",34)(1,"div",35),t._UZ(2,"app-chart-legend",36),t.TgZ(3,"div",7)(4,"div",37),t._UZ(5,"ngx-charts-area-chart",38),t.qZA(),t.TgZ(6,"div",39)(7,"ngx-charts-bar-vertical-2d",40),t.YNc(8,_e,5,4,"ng-template",null,41,t.W1O),t.qZA()()()()()),2&m){const i=t.oxw();t.xp6(2),t.Q6J("data",t.DdM(21,ne))("display",i.lineLegend)("horizontal",!0)("colors",i.lineChartColorScheme.domain),t.xp6(1),t.Udp("height",i.barChartHeight+"px"),t.xp6(2),t.Q6J("scheme",i.lineChartColorScheme)("results",i.parkingDailyOccupancy.occupancy[i.parkingDailyOccupancy.tab])("xAxis",!0)("yAxis",!0)("gradient",!0)("yScaleMax",i.parkingDailyOccupancy.max[i.parkingDailyOccupancy.tab]),t.xp6(2),t.Q6J("view",t.VKq(22,V,i.barChartHeight))("scheme",i.lineChartColorScheme)("results",i.parkingDailyOccupancy.average[i.parkingDailyOccupancy.tab])("xAxis",!0)("yAxis",!0)("yScaleMax",i.parkingDailyOccupancy.max[i.parkingDailyOccupancy.tab])("showYAxisLabel",!0)("barPadding",20)("groupPadding",30)}}function xe(m,A){if(1&m&&(t.TgZ(0,"div",45)(1,"span"),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&m){const i=A.$implicit,c=A.index,v=t.oxw(3);t.xp6(1),t.Udp("color",v.colorScheme.domain[c]),t.xp6(1),t.hij(" ",i.name," "),t.xp6(1),t.hij(": ",i.value," ")}}function ye(m,A){if(1&m&&(t.TgZ(0,"div",42)(1,"div",43),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,xe,4,4,"div",44),t.qZA()),2&m){const i=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,2,"Total Occupancy")," "),t.xp6(2),t.Q6J("ngForOf",i.maxNormalSeasonalLots.average[0].series)}}function fe(m,A){if(1&m&&(t.TgZ(0,"div",34)(1,"div",35),t._UZ(2,"app-chart-legend",36),t.TgZ(3,"div",7)(4,"div",37),t._UZ(5,"app-charts-bar-vertical-2d",46),t.qZA(),t.TgZ(6,"div",39)(7,"app-charts-bar-vertical-2d",47),t.YNc(8,ye,5,4,"ng-template",null,41,t.W1O),t.qZA()()()()()),2&m){const i=t.oxw();t.xp6(2),t.Q6J("data",i.maxNormalSeasonalLots.legend)("display",i.lineLegend)("horizontal",!0)("colors",i.colorScheme.domain),t.xp6(1),t.Udp("height",i.barChartHeight+"px"),t.xp6(2),t.Q6J("scheme",i.colorScheme)("groupPadding",1)("barPadding",2)("results",i.maxNormalSeasonalLots.occupancy)("xAxis",!0)("yAxis",!0)("yScaleMax",i.maxNormalSeasonalLots.max)("showYAxisLabel",!0)("showRefLines",!0)("showRefLabels",!1)("referenceLines",i.maxNormalSeasonalLots.referenceLines),t.xp6(2),t.Q6J("view",t.VKq(28,V,i.barChartHeight))("scheme",i.colorScheme)("results",i.maxNormalSeasonalLots.average)("xAxis",!0)("yAxis",!0)("yScaleMax",i.maxNormalSeasonalLots.max)("showYAxisLabel",!0)("barPadding",2)("showRefLines",!0)("showRefLabels",!1)("referenceLines",i.maxNormalSeasonalLots.referenceLines)}}function Ce(m,A){if(1&m&&(t.TgZ(0,"div",45)(1,"span"),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&m){const i=A.$implicit,c=A.index,v=t.oxw(3);t.xp6(1),t.Udp("color",v.lineChartColorScheme.domain[c]),t.xp6(1),t.hij(" ",i.name," "),t.xp6(1),t.hij(": ",i.value," ")}}function be(m,A){if(1&m&&(t.TgZ(0,"div",42)(1,"div",43),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,Ce,4,4,"div",44),t.qZA()),2&m){const i=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,2,"Total Revenue")," "),t.xp6(2),t.Q6J("ngForOf",i.carParkRevenueAverage[0].series)}}function Te(m,A){if(1&m&&(t.TgZ(0,"div",34)(1,"div",35),t._UZ(2,"app-chart-legend",36),t.TgZ(3,"div",7)(4,"div",37),t._UZ(5,"ngx-charts-area-chart",48),t.qZA(),t.TgZ(6,"div",39)(7,"ngx-charts-bar-vertical-2d",40),t.YNc(8,be,5,4,"ng-template",null,41,t.W1O),t.qZA()()()()()),2&m){const i=t.oxw();t.xp6(2),t.Q6J("data",i.carParkRevenue)("display",i.lineLegend)("horizontal",!0)("colors",i.lineChartColorScheme.domain),t.xp6(1),t.Udp("height",i.barChartHeight+"px"),t.xp6(2),t.Q6J("scheme",i.lineChartColorScheme)("results",i.carParkRevenue)("gradient",!0)("xAxis",!0)("yAxis",!0)("showYAxisLabel",!0),t.xp6(2),t.Q6J("view",t.VKq(21,V,i.barChartHeight))("scheme",i.lineChartColorScheme)("results",i.carParkRevenueAverage)("xAxis",!0)("yAxis",!0)("yScaleMax",i.carParkRevenueMaxYAxis)("showYAxisLabel",!0)("barPadding",20)("groupPadding",30)}}function De(m,A){if(1&m&&(t.TgZ(0,"div",45)(1,"span"),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&m){const i=A.$implicit,c=A.index,v=t.oxw(3);t.xp6(1),t.Udp("color",v.lineChartColorScheme.domain[c]),t.xp6(1),t.hij(" ",i.name," "),t.xp6(1),t.hij(": ",i.value," ")}}function ke(m,A){if(1&m&&(t.TgZ(0,"div",42)(1,"div",43),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,De,4,4,"div",44),t.qZA()),2&m){const i=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,2,"Total Transaction")," "),t.xp6(2),t.Q6J("ngForOf",i.carParkTransactionAverage[0].series)}}function Ee(m,A){if(1&m&&(t.TgZ(0,"div",34)(1,"div",35),t._UZ(2,"app-chart-legend",36),t.TgZ(3,"div",7)(4,"div",37),t._UZ(5,"ngx-charts-area-chart",49),t.qZA(),t.TgZ(6,"div",39)(7,"ngx-charts-bar-vertical-2d",40),t.YNc(8,ke,5,4,"ng-template",null,41,t.W1O),t.qZA()()()()()),2&m){const i=t.oxw();t.xp6(2),t.Q6J("data",i.carParkTransactions)("display",i.lineLegend)("horizontal",!0)("colors",i.lineChartColorScheme.domain),t.xp6(1),t.Udp("height",i.barChartHeight+"px"),t.xp6(2),t.Q6J("scheme",i.lineChartColorScheme)("results",i.carParkTransactions)("gradient",!0)("xAxis",!0)("yAxis",!0),t.xp6(2),t.Q6J("view",t.VKq(20,V,i.barChartHeight))("scheme",i.lineChartColorScheme)("results",i.carParkTransactionAverage)("xAxis",!0)("yAxis",!0)("yScaleMax",i.carParkTransactionMaxYAxis)("showYAxisLabel",!0)("barPadding",20)("groupPadding",30)}}function Re(m,A){if(1&m&&(t.TgZ(0,"div",45)(1,"span"),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&m){const i=A.$implicit,c=A.index,v=t.oxw(3);t.xp6(1),t.Udp("color",v.lineChartColorScheme.domain[c]),t.xp6(1),t.hij(" ",i.name," "),t.xp6(1),t.hij(": ",i.value," ")}}function Ne(m,A){if(1&m&&(t.TgZ(0,"div",42)(1,"div",43),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,Re,4,4,"div",44),t.qZA()),2&m){const i=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,2,"Total Faults")," "),t.xp6(2),t.Q6J("ngForOf",i.carParkFaultsAverage[0].series)}}function Ue(m,A){if(1&m&&(t.TgZ(0,"div",34)(1,"div",35),t._UZ(2,"app-chart-legend",36),t.TgZ(3,"div",7)(4,"div",37),t._UZ(5,"ngx-charts-area-chart",50),t.qZA(),t.TgZ(6,"div",39)(7,"ngx-charts-bar-vertical-2d",40),t.YNc(8,Ne,5,4,"ng-template",null,41,t.W1O),t.qZA()()()()()),2&m){const i=t.oxw();t.xp6(2),t.Q6J("data",i.carParkFaults)("display",i.lineLegend)("horizontal",!0)("colors",i.lineChartColorScheme.domain),t.xp6(1),t.Udp("height",i.barChartHeight+"px"),t.xp6(2),t.Q6J("scheme",i.lineChartColorScheme)("results",i.carParkFaults)("gradient",!0)("xAxis",!0)("yAxis",!0)("yScaleMax",i.carParkFaultsMaxYAxis),t.xp6(2),t.Q6J("view",t.VKq(21,V,i.barChartHeight))("scheme",i.lineChartColorScheme)("results",i.carParkFaultsAverage)("xAxis",!0)("yAxis",!0)("yScaleMax",i.carParkFaultsMaxYAxis)("showYAxisLabel",!0)("barPadding",20)("groupPadding",30)}}var N=(()=>{return(m=N||(N={})).Total="total",m.Season="season",m.Normal="normal",N;var m})();const Ae=[N.Total,N.Season,N.Normal];let se=(()=>{class m{constructor(i){this.translate=i,this.barChartHeight=470,this.colorScheme={domain:S.DMY},this.lineChartColorScheme={domain:[S.Ms$,S.K8l]},this.faultChartColorScheme={domain:[S.cEj]},this.occupancyTabs=Ae,this.vehicleIcon=S.mts,this.displayPercentLegend=S.$lo,this.chartView=[140,140],this._parkingDurations=[],this._parkingVehicleTypes=[],this._parkingOccupancyRaw=[],this.parkingOccupancy={occupancy:null,average:null,tab:N.Normal,tabs:[N.Total,N.Season,N.Normal],max:null},this.parkingDailyOccupancy={occupancy:null,average:null,tab:N.Normal,tabs:[N.Total,N.Season,N.Normal],max:null},this.maxNormalSeasonalLots={occupancy:null,average:null,tab:N.Normal,tabs:[N.Total,N.Season,N.Normal],max:null,legend:null,referenceLines:[]},this.parkingOccupancyAverage=[],this.maxYAxisOccupancy=100,this._carParkTransactions=[],this.carParkTransactionAverage=[],this.carParkTransactionMaxYAxis=100,this._carParkRevenue=[],this.carParkRevenueAverage=[],this.carParkRevenueMaxYAxis=100,this._carParkFaults=[],this.carParkFaultsAverage=[],this.carParkFaultsMaxYAxis=100,this.occupancyTab=N.Total}get parkingDurations(){return this._parkingDurations}set parkingDurations(i){this._parkingDurations=i}get parkingVehicleTypes(){return this._parkingVehicleTypes}set parkingVehicleTypes(i){i.forEach(c=>{}),this._parkingVehicleTypes=i}set parkingOccupancyRaw(i){const c=this.calcOccupancyStats(i);this.parkingOccupancy={...this.parkingOccupancy,occupancy:c.occupancy,average:c.average,max:c.max}}set parkingDailyOccupancyRaw(i){const c=this.calcOccupancyStats(i);this.parkingDailyOccupancy={...this.parkingDailyOccupancy,occupancy:c.occupancy,average:c.average,max:c.max}}set maxNormalSeasonalLotsRaw(i){if(!i||!i.length)return;const c=(0,C.uniq)((0,C.map)([...i[0].parkingOccupancy,...i[1].parkingOccupancy],"title")).map(u=>{const O=i[0].parkingOccupancy.find(W=>W.title===u),J=i[1].parkingOccupancy.find(W=>W.title===u);return{series:[{name:`${i[0].carParkCode} Normal`,value:O?O.normal:0},{name:`${i[1].carParkCode} Normal`,value:J?J.normal:0},{name:`${i[0].carParkCode} Season`,value:O?O.season:0},{name:`${i[1].carParkCode} Season`,value:J?J.season:0}],name:u}}),v=[{name:`${i[0].carParkCode} Normal`,value:Math.ceil((0,C.meanBy)(i[0].parkingOccupancy,"normal"))||0},{name:`${i[1].carParkCode} Normal`,value:Math.ceil((0,C.meanBy)(i[1].parkingOccupancy,"normal"))||0},{name:`${i[0].carParkCode} Season`,value:Math.ceil((0,C.meanBy)(i[0].parkingOccupancy,"season"))||0},{name:`${i[1].carParkCode} Season`,value:Math.ceil((0,C.meanBy)(i[1].parkingOccupancy,"season"))||0}],T=Math.max(this.calcMaxYAxisOccupancy(c),i[0].slotNumberSeason,i[1].slotNumberSeason);this.maxNormalSeasonalLots={...this.maxNormalSeasonalLots,occupancy:c,max:T,average:[{name:"Average",series:v}],legend:[{name:`${i[0].carParkCode} Normal`},{name:`${i[1].carParkCode} Normal`},{name:`${i[0].carParkCode} Season`},{name:`${i[1].carParkCode} Season`}],referenceLines:(0,C.uniqBy)([{value:i[0].slotNumberSeason,color:S.cEj},{value:i[1].slotNumberSeason,color:S.K8l}],"value")}}get carParkTransactions(){return this._carParkTransactions}set carParkTransactions(i){this._carParkTransactions=i,this.carParkTransactionAverage=(0,S.Ayc)(this._carParkTransactions),this.carParkTransactionMaxYAxis=this.calcMaxYAxisOccupancy(this.carParkTransactions)}get carParkRevenue(){return this._carParkRevenue}set carParkRevenue(i){this._carParkRevenue=i,this.carParkRevenueAverage=(0,S.Ayc)(this._carParkRevenue),this.carParkRevenueMaxYAxis=this.calcMaxYAxisOccupancy(this.carParkRevenue)}get carParkFaults(){return this._carParkFaults}set carParkFaults(i){this._carParkFaults=i,this.carParkFaultsAverage=(0,S.Ayc)(this._carParkFaults),this.carParkFaultsMaxYAxis=this.calcMaxYAxisOccupancy(this.carParkFaults)}lineLegend(i){return i.name}selectOccupancy(i){this.occupancyTab!==i&&(this.occupancyTab=i)}calcMaxYAxisOccupancy(i){return 10*Math.ceil(Math.max(...(0,C.flatten)(i.map(c=>c.series)).map(c=>c.value))/10)}calcOccupancyStats(i){const c={[N.Total]:i.map((u,O)=>({name:`${O+1} - ${u.carParkCode}`,series:u.parkingOccupancy.map(J=>({name:J.title,value:J.normal+J.season}))})),[N.Normal]:i.map((u,O)=>({name:`${O+1} - ${u.carParkCode}`,series:u.parkingOccupancy.map(J=>({name:J.title,value:J.normal}))})),[N.Season]:i.map((u,O)=>({name:`${O+1} - ${u.carParkCode}`,series:u.parkingOccupancy.map(J=>({name:J.title,value:J.season}))}))},v={[N.Total]:[{name:"Average",series:c[N.Total].map(u=>({name:u.name,value:(0,C.round)(u.series.reduce((O,J)=>O+J.value,0)/(u.series.length||1),2)}))}],[N.Season]:[{name:"Average",series:c[N.Season].map(u=>({name:u.name,value:(0,C.round)(u.series.reduce((O,J)=>O+J.value,0)/(u.series.length||1),2)}))}],[N.Normal]:[{name:"Average",series:c[N.Normal].map(u=>({name:u.name,value:(0,C.round)(u.series.reduce((O,J)=>O+J.value,0)/(u.series.length||1),2)}))}]};return{occupancy:c,max:{[N.Normal]:this.calcMaxYAxisOccupancy(c[N.Normal]),[N.Season]:this.calcMaxYAxisOccupancy(c[N.Season]),[N.Total]:this.calcMaxYAxisOccupancy(c[N.Total])},average:v}}parkingOccupancyYAxisFormat(i){return i+"%"}ngOnInit(){this.translate.get(this.parkingOccupancy.tabs).subscribe(i=>{let c=[];for(let v in i)i.hasOwnProperty(v)&&c.push(i[v]);this.parkingOccupancy.tabs=c}),this.translate.get(this.parkingDailyOccupancy.tabs).subscribe(i=>{let c=[];for(let v in i)i.hasOwnProperty(v)&&c.push(i[v]);this.parkingDailyOccupancy.tabs=c})}}return m.\u0275fac=function(i){return new(i||m)(t.Y36(d.sK))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-dashboard-comparison-detail"]],inputs:{parkingDurations:"parkingDurations",parkingVehicleTypes:"parkingVehicleTypes",parkingOccupancyRaw:"parkingOccupancyRaw",parkingDailyOccupancyRaw:"parkingDailyOccupancyRaw",maxNormalSeasonalLotsRaw:"maxNormalSeasonalLotsRaw",carParkTransactions:"carParkTransactions",carParkRevenue:"carParkRevenue",carParkFaults:"carParkFaults"},decls:99,vars:54,consts:[[1,"row","general-statistics"],[1,"col-lg-6","m--padding-right-10"],[1,"m-portlet","m-portlet--bordered-semi","card-stats-compare","parking-type-chart"],[1,"m-portlet__head"],[1,"m-portlet__head-caption"],[1,"m-portlet__head-title"],[1,"m-portlet__head-text"],[1,"row"],["class","col-xl-6",4,"ngFor","ngForOf"],["class","col-xl-6 app-pie-chart",4,"ngFor","ngForOf"],[1,"col-lg-6","app-pie-chart","m--padding-right-10"],[1,"m-portlet","m-portlet--bordered-semi","card-stats-compare","parking-duration-chart"],["class","col-lg-6",4,"ngFor","ngForOf"],[1,"occupancy-statistics"],[1,"m-portlet","m-portlet--tabs"],[1,"m-portlet__head-tools"],["role","tablist",1,"nav","nav-tabs","m-tabs-line","m-tabs-line--right","m-tabs-line--success"],["class","nav-item m-tabs__item",4,"ngFor","ngForOf"],[1,"btn","btn-outline-main","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","m-btn--air","float-right","m--margin-top-20","m--margin-left-20",3,"click"],["class","m-portlet__body",4,"ngIf"],[1,"revenue-statistics"],[1,"m-portlet"],[1,"m-portlet__head-title","w-100"],[1,"btn","btn-outline-main","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","m-btn--air","float-right","m--margin-top-20",3,"click"],[1,"transaction-statistics"],[1,"fault-statistics"],[1,"col-xl-6"],["class","title",4,"ngIf"],[1,"title"],[1,"col-xl-6","app-pie-chart"],[3,"view","results","displayLegend"],[1,"col-lg-6"],[1,"nav-item","m-tabs__item"],[1,"nav-link","m-tabs__link",3,"ngClass","click"],[1,"m-portlet__body"],[1,"stats-chart-container"],[3,"data","display","horizontal","colors"],[1,"col-11"],[3,"scheme","results","xAxis","yAxis","gradient","yScaleMax"],[1,"col-1","compare-bar-chart-average"],[3,"view","scheme","results","xAxis","yAxis","yScaleMax","showYAxisLabel","barPadding","groupPadding"],["tooltipTemplate",""],[1,"area-tooltip-container"],[1,"tooltip-title","m-font-weight-600"],["class","tooltip-item",4,"ngFor","ngForOf"],[1,"tooltip-item"],[3,"scheme","groupPadding","barPadding","results","xAxis","yAxis","yScaleMax","showYAxisLabel","showRefLines","showRefLabels","referenceLines"],[3,"view","scheme","results","xAxis","yAxis","yScaleMax","showYAxisLabel","barPadding","showRefLines","showRefLabels","referenceLines"],["yAxisLabel","(S$)",3,"scheme","results","gradient","xAxis","yAxis","showYAxisLabel"],[3,"scheme","results","gradient","xAxis","yAxis"],[3,"scheme","results","gradient","xAxis","yAxis","yScaleMax"]],template:function(i,c){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),t._uU(7),t.ALo(8,"translate"),t.qZA()()()(),t.TgZ(9,"div")(10,"div",7),t.YNc(11,K,2,1,"div",8),t.qZA(),t.TgZ(12,"div",7),t.YNc(13,j,2,3,"div",9),t.qZA()()()(),t.TgZ(14,"div",10)(15,"div",11)(16,"div",3)(17,"div",4)(18,"div",5)(19,"h3",6),t._uU(20),t.ALo(21,"translate"),t.qZA()()()(),t.TgZ(22,"div")(23,"div",7),t.YNc(24,ee,2,1,"div",8),t.qZA(),t.TgZ(25,"div",7),t.YNc(26,ie,2,3,"div",12),t.qZA()()()()(),t.TgZ(27,"div",13)(28,"div",14)(29,"div",3)(30,"div",4)(31,"div",5)(32,"h3",6),t._uU(33),t.ALo(34,"translate"),t.qZA()()(),t.TgZ(35,"div",15)(36,"ul",16),t.YNc(37,pe,4,4,"li",17),t.qZA()(),t.TgZ(38,"button",18),t.NdJ("click",function(){return c.carParkOccupancyHidden=!c.carParkOccupancyHidden}),t._UZ(39,"i"),t.qZA()(),t.YNc(40,me,10,24,"div",19),t.qZA()(),t.TgZ(41,"div",13)(42,"div",14)(43,"div",3)(44,"div",4)(45,"div",5)(46,"h3",6),t._uU(47),t.ALo(48,"translate"),t.qZA()()(),t.TgZ(49,"div",15)(50,"ul",16),t.YNc(51,ge,4,4,"li",17),t.qZA()(),t.TgZ(52,"button",18),t.NdJ("click",function(){return c.carParkDailyOccupancyHidden=!c.carParkDailyOccupancyHidden}),t._UZ(53,"i"),t.qZA()(),t.YNc(54,ve,10,24,"div",19),t.qZA()(),t.TgZ(55,"div",13)(56,"div",14)(57,"div",3)(58,"div",4)(59,"div",5)(60,"h3",6),t._uU(61),t.ALo(62,"translate"),t.qZA()()(),t.TgZ(63,"button",18),t.NdJ("click",function(){return c.maxNormalSeasonalLotsHidden=!c.maxNormalSeasonalLotsHidden}),t._UZ(64,"i"),t.qZA()(),t.YNc(65,fe,10,30,"div",19),t.qZA()(),t.TgZ(66,"div",20)(67,"div",21)(68,"div",3)(69,"div",4)(70,"div",22)(71,"h3",6),t._uU(72),t.ALo(73,"translate"),t.qZA(),t.TgZ(74,"button",23),t.NdJ("click",function(){return c.carParkRevenueHidden=!c.carParkRevenueHidden}),t._UZ(75,"i"),t.qZA()()()(),t.YNc(76,Te,10,23,"div",19),t.qZA()(),t.TgZ(77,"div",24)(78,"div",21)(79,"div",3)(80,"div",4)(81,"div",22)(82,"h3",6),t._uU(83),t.ALo(84,"translate"),t.qZA(),t.TgZ(85,"button",23),t.NdJ("click",function(){return c.carParkTransactionsHidden=!c.carParkTransactionsHidden}),t._UZ(86,"i"),t.qZA()()()(),t.YNc(87,Ee,10,22,"div",19),t.qZA()(),t.TgZ(88,"div",25)(89,"div",21)(90,"div",3)(91,"div",4)(92,"div",22)(93,"h3",6),t._uU(94),t.ALo(95,"translate"),t.qZA(),t.TgZ(96,"button",23),t.NdJ("click",function(){return c.carParkFaultsHidden=!c.carParkFaultsHidden}),t._UZ(97,"i"),t.qZA()()()(),t.YNc(98,Ue,10,23,"div",19),t.qZA()()),2&i&&(t.xp6(7),t.hij(" ",t.lcZ(8,38,"Parking Vehicle Type")," "),t.xp6(4),t.Q6J("ngForOf",c.parkingVehicleTypes),t.xp6(2),t.Q6J("ngForOf",c.parkingVehicleTypes),t.xp6(7),t.hij(" ",t.lcZ(21,40,"Parking Duration")," "),t.xp6(4),t.Q6J("ngForOf",c.parkingDurations),t.xp6(2),t.Q6J("ngForOf",c.parkingDurations),t.xp6(7),t.hij(" ",t.lcZ(34,42,"Car Park Occupancy")," "),t.xp6(4),t.Q6J("ngForOf",c.parkingOccupancy.tabs),t.xp6(2),t.Gre("la ",c.carParkOccupancyHidden?"la-arrows":"la-minus-square",""),t.xp6(1),t.Q6J("ngIf",!c.carParkOccupancyHidden),t.xp6(7),t.hij(" ",t.lcZ(48,44,"Daily Opccupancy")," "),t.xp6(4),t.Q6J("ngForOf",c.parkingDailyOccupancy.tabs),t.xp6(2),t.Gre("la ",c.carParkDailyOccupancyHidden?"la-arrows":"la-minus-square",""),t.xp6(1),t.Q6J("ngIf",!c.carParkDailyOccupancyHidden),t.xp6(7),t.hij(" ",t.lcZ(62,46,"Max Normal/Seasonal Lots")," "),t.xp6(3),t.Gre("la ",c.maxNormalSeasonalLotsHidden?"la-arrows":"la-minus-square",""),t.xp6(1),t.Q6J("ngIf",!c.maxNormalSeasonalLotsHidden),t.xp6(7),t.hij(" ",t.lcZ(73,48,"Car Park Revenue")," "),t.xp6(3),t.Gre("la ",c.carParkRevenueHidden?"la-arrows":"la-minus-square",""),t.xp6(1),t.Q6J("ngIf",!c.carParkRevenueHidden),t.xp6(7),t.hij(" ",t.lcZ(84,50,"Car Park Transactions")," "),t.xp6(3),t.Gre("la ",c.carParkTransactionsHidden?"la-arrows":"la-minus-square",""),t.xp6(1),t.Q6J("ngIf",!c.carParkTransactionsHidden),t.xp6(7),t.hij(" ",t.lcZ(95,52,"Car Park Faults")," "),t.xp6(3),t.Gre("la ",c.carParkFaultsHidden?"la-arrows":"la-minus-square",""),t.xp6(1),t.Q6J("ngIf",!c.carParkFaultsHidden))},dependencies:[r.mk,r.sg,r.O5,g.o,k.J,E.b,I.r,$.H,r.rS,d.X$],encapsulation:2}),m})(),Se=(()=>{class m{constructor(i,c,v){this.statisticService=i,this.carparkService=c,this.route=v,this.rawCarParks=[],this.fromCarParks=[],this.fromCarParkId=null,this.rangeType=S.Nxg.Month,this.parkingDurations=[],this.parkingVehicleTypes=[],this.parkingOccupancyRaw=[],this.parkingDailyOccupancyRaw=[],this.maxNormalSeasonalLotsRaw=[],this.carParkTransactions=[],this.carParkRevenue=[],this.carParkFaults=[]}ngOnInit(){this.route.queryParams.subscribe(i=>{this.fromDate=L.ou.fromISO(i.fromDate).toJSDate(),this.toDate=L.ou.fromISO(i.toDate).toJSDate(),this.rangeType=i.rangeType||S.Nxg.Month,this.carparkService.getSimpleList().subscribe(c=>{this.rawCarParks=c,this.fromCarParkId=i.fromCarParkId?parseInt(i.fromCarParkId,10):this.rawCarParks[0].id,this.reloadData()})})}requestData(i){let c,v;switch(this.rangeType){case S.Nxg.Month:c=L.ou.fromJSDate(i).startOf("month").toISO(),v=L.ou.fromJSDate(i).endOf("month").toISO();break;case S.Nxg.Year:c=L.ou.fromJSDate(i).startOf("year").toISO(),v=L.ou.fromJSDate(i).endOf("year").toISO()}return{carParkIds:this.fromCarParkId,from:c,to:v,rangeType:this.rangeType}}parseDateString(i){const c=L.ou.fromFormat(i,"yyyyMMdd");switch(this.rangeType){case S.Nxg.Month:return c.day.toString();case S.Nxg.Year:return c.month.toString()}}parseStatisticDates(i){return i.map(c=>({name:c.name,series:this.applyTimeRangeResults(c.series.map(v=>({name:this.parseDateString(v.name),value:v.value})))}))}maxDayMonth(){return this.rangeType===S.Nxg.Year?12:Math.max(L.ou.fromJSDate(this.fromDate).daysInMonth,L.ou.fromJSDate(this.toDate).daysInMonth)}applyTimeRangeResults(i){const c=this.maxDayMonth(),v=i.map(u=>u.name),T=[];for(let u=1;u<=c;u++){const O=u.toString();-1===v.indexOf(O)&&T.push({name:O,value:0})}return T.concat(i).sort((u,O)=>u.name-O.name)}applyOccupancyTimeRangeResults(i){const c=this.maxDayMonth(),v=i.map(u=>u.title),T=[];for(let u=1;u<=c;u++){const O=u.toString();-1===v.indexOf(O)&&T.push({title:O,normal:0,season:0})}return T.concat(i).sort((u,O)=>u.title-O.title)}parseOccupancyDates(i){return this.applyOccupancyTimeRangeResults(i.map(c=>({...c,title:this.parseDateString(c.title)})))}displayDate(i){switch(this.rangeType){case S.Nxg.Month:return L.ou.fromJSDate(i).toLocaleString({month:"short",year:"numeric"});case S.Nxg.Year:return i.getFullYear().toString()}}reloadData(){const i=this.requestData(this.fromDate),c=this.requestData(this.toDate),v=[this.displayDate(this.fromDate),this.displayDate(this.toDate)];(0,f.aj)(this.statisticService.getDurationStatistics(i),this.statisticService.getDurationStatistics(c)).subscribe(T=>{this.parkingDurations=T.map((u,O)=>({name:v[O],series:(0,S.BF0)((0,S.dGr)(u.parkingDurations))})).filter(u=>u.series.length)}),(0,f.aj)(this.statisticService.getVehicleTypeStatistics(i),this.statisticService.getVehicleTypeStatistics(c)).subscribe(T=>{this.parkingVehicleTypes=T.map((u,O)=>({name:v[O],series:(0,S.BF0)((0,S.dGr)(u.parkingVehicleTypes))})).filter(u=>u.series.length)}),(0,f.aj)(this.statisticService.getOccupancyStatistics(i),this.statisticService.getOccupancyStatistics(c)).subscribe(T=>{this.parkingOccupancyRaw=T.map((u,O)=>({...u,carParkCode:v[O],parkingOccupancy:this.parseOccupancyDates(u.parkingOccupancy)})).filter(u=>u.parkingOccupancy.length)}),(0,f.aj)(this.statisticService.getDailyOccupancyStatistics({...i}),this.statisticService.getDailyOccupancyStatistics({...c})).subscribe(T=>{this.parkingDailyOccupancyRaw=T.map((u,O)=>({...u,carParkCode:v[O],parkingOccupancy:(0,C.range)(0,24).map(J=>{const X=u.parkingOccupancy.findIndex(W=>Number(W.title)===J);return X>-1?{title:J,season:u.parkingOccupancy[X].season,normal:u.parkingOccupancy[X].normal}:{title:J,season:0,normal:0}})})).filter(u=>u.parkingOccupancy.length)}),(0,f.aj)(this.statisticService.getMaxNormalSeasonalLotsStatistics(i),this.statisticService.getMaxNormalSeasonalLotsStatistics(c)).subscribe(T=>{this.maxNormalSeasonalLotsRaw=T.map((u,O)=>({...u,carParkCode:v[O],parkingOccupancy:this.parseOccupancyDates(u.parkingOccupancy)})).filter(u=>u.parkingOccupancy.length)}),(0,f.aj)(this.statisticService.getFaultStatistics(i),this.statisticService.getFaultStatistics(c)).subscribe(T=>{this.carParkFaults=this.parseStatisticDates(T.map((u,O)=>(0,S.XNF)(`${O} - ${v[O]}`,u.carParkFaults)).filter(u=>u.series.length))}),(0,f.aj)(this.statisticService.getRevenueStatistics(i),this.statisticService.getRevenueStatistics(c)).subscribe(T=>{this.carParkRevenue=this.parseStatisticDates(T.map((u,O)=>(0,S.XNF)(`${O} - ${v[O]}`,u.carParkRevenue.map(J=>({...J,value:J.value/100})))).filter(u=>u.series.length))}),(0,f.aj)(this.statisticService.getTransactionStatistics(i),this.statisticService.getTransactionStatistics(c)).subscribe(T=>{this.carParkTransactions=this.parseStatisticDates(T.map((u,O)=>(0,S.XNF)(`${O} - ${v[O]}`,u.carParkTransactions)).filter(u=>u.series.length))})}parkingOccupancyYAxisFormat(i){return i+"%"}changeFromDate(i){this.fromDate=i,this.reloadData()}changeToDate(i){this.toDate=i,this.reloadData()}changeCarPark(){this.reloadData()}}return m.\u0275fac=function(i){return new(i||m)(t.Y36(e.B),t.Y36(w.x),t.Y36(F.gz))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-dashboard-comparison"]],decls:19,vars:19,consts:[[1,"body-wrapper"],[1,"m-subheader"],[1,"align-items-center"],[1,"row","form-group","m-form__group"],[1,"col-lg-3"],["bindLabel","name","bindValue","id",1,"rounded",3,"items","ngModel","ngModelChange"],[1,"col-form-label","col-lg-1","col-sm-6","m--padding-left-0","m--padding-right-0"],[1,"col-lg-2","col-sm-6"],[3,"type","data","rounded","select"],[3,"type","rounded","data","select"],[1,"m-content"],[3,"parkingDurations","parkingVehicleTypes","parkingOccupancyRaw","parkingDailyOccupancyRaw","maxNormalSeasonalLotsRaw","carParkTransactions","carParkRevenue","carParkFaults"]],template:function(i,c){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"app-title-bar"),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"ng-select",5),t.NdJ("ngModelChange",function(T){return c.fromCarParkId=T})("ngModelChange",function(){return c.changeCarPark()}),t.qZA()(),t._UZ(7,"div",4),t.TgZ(8,"label",6),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"div",7)(12,"app-datepicker",8),t.NdJ("select",function(T){return c.changeFromDate(T)}),t.qZA()(),t.TgZ(13,"span"),t._uU(14,"vs"),t.qZA(),t.TgZ(15,"div",7)(16,"app-datepicker",9),t.NdJ("select",function(T){return c.changeToDate(T)}),t.qZA()()()()(),t.TgZ(17,"div",10),t._UZ(18,"app-dashboard-comparison-detail",11),t.qZA()()),2&i&&(t.xp6(6),t.Q6J("items",c.rawCarParks)("ngModel",c.fromCarParkId),t.xp6(3),t.hij(" ",t.lcZ(10,17,"Time Range"),": "),t.xp6(3),t.Q6J("type",c.rangeType)("data",c.fromDate)("rounded",!0),t.xp6(4),t.Q6J("type",c.rangeType)("rounded",!0)("data",c.toDate),t.xp6(2),t.Q6J("parkingDurations",c.parkingDurations)("parkingVehicleTypes",c.parkingVehicleTypes)("parkingOccupancyRaw",c.parkingOccupancyRaw)("parkingDailyOccupancyRaw",c.parkingDailyOccupancyRaw)("maxNormalSeasonalLotsRaw",c.maxNormalSeasonalLotsRaw)("carParkTransactions",c.carParkTransactions)("carParkRevenue",c.carParkRevenue)("carParkFaults",c.carParkFaults))},dependencies:[x.G,h.JJ,h.On,U.C,M.w9,se,d.X$],encapsulation:2}),m})();var Oe=p(96599);let Ze=(()=>{class m{constructor(i,c,v,T){this.statisticService=i,this.carparkService=c,this.route=v,this.translate=T,this.rawCarParks=[],this.fromCarParks=[],this.toCarParks=[],this.fromCarParkId=null,this.toCarParkId=null,this.timeRange={value:[L.ou.local().minus({weeks:1}).toJSDate(),new Date],type:S.Nxg.Day},this.parkingDurations=[],this.parkingVehicleTypes=[],this.parkingOccupancyRaw=[],this.parkingDailyOccupancyRaw=[],this.maxNormalSeasonalLotsRaw=[],this.carParkTransactions=[],this.carParkRevenue=[],this.carParkFaults=[]}ngOnInit(){this.route.queryParams.subscribe(i=>{i.fromDate&&i.toDate&&(this.timeRange={value:[L.ou.fromISO(i.fromDate).startOf(i.rangeType).toJSDate(),L.ou.fromISO(i.fromDate).endOf(i.rangeType).toJSDate()],type:i.rangeType||S.Nxg.Day}),this.carparkService.getSimpleList().subscribe(c=>{this.rawCarParks=c,this.fromCarParkId=i.fromCarParkId?parseInt(i.fromCarParkId,10):this.rawCarParks[0].id,this.toCarParkId=i.toCarParkId?parseInt(i.toCarParkId,10):this.rawCarParks[1].id,this.reloadData(),this.reloadCarParkOptions()})})}reloadCarParkOptions(){this.fromCarParks=this.rawCarParks.filter(i=>i.id!==this.toCarParkId),this.toCarParks=this.rawCarParks.filter(i=>i.id!==this.fromCarParkId)}requestData(i){return{carParkIds:i,from:this.timeRange.value[0].toISOString(),to:this.timeRange.value[1].toISOString(),rangeType:this.timeRange.type}}reloadData(){const i=this.requestData(this.fromCarParkId),c=this.requestData(this.toCarParkId);(0,f.aj)(this.statisticService.getDurationStatistics(i),this.statisticService.getDurationStatistics(c)).subscribe(v=>{this.parkingDurations=v.map(T=>({name:T.carParkCode,series:(0,S.BF0)((0,S.dGr)(T.parkingDurations))}))}),(0,f.aj)(this.statisticService.getVehicleTypeStatistics(i),this.statisticService.getVehicleTypeStatistics(c)).subscribe(v=>{this.parkingVehicleTypes=v.map(T=>({name:T.carParkCode,series:(0,S.BF0)((0,S.dGr)(T.parkingVehicleTypes))}))}),(0,f.aj)(this.statisticService.getOccupancyStatistics(i),this.statisticService.getOccupancyStatistics(c)).subscribe(v=>{this.parkingOccupancyRaw=v}),(0,f.aj)(this.statisticService.getFaultStatistics(i),this.statisticService.getFaultStatistics(c)).subscribe(v=>{this.carParkFaults=v.map((T,u)=>(0,S.XNF)(`${u+1} ${T.carParkCode}`,T.carParkFaults))}),(0,f.aj)(this.statisticService.getRevenueStatistics(i),this.statisticService.getRevenueStatistics(c)).subscribe(v=>{this.carParkRevenue=v.map((T,u)=>(0,S.XNF)(`${u+1} ${T.carParkCode}`,T.carParkRevenue.map(O=>({...O,value:O.value/100}))))}),(0,f.aj)(this.statisticService.getTransactionStatistics(i),this.statisticService.getTransactionStatistics(c)).subscribe(v=>{this.carParkTransactions=v.map((T,u)=>(0,S.XNF)(`${u+1} ${T.carParkCode}`,T.carParkTransactions))}),(0,f.aj)(this.statisticService.getDailyOccupancyStatistics({...i}),this.statisticService.getDailyOccupancyStatistics({...c})).subscribe(v=>{this.parkingDailyOccupancyRaw=v}),(0,f.aj)(this.statisticService.getMaxNormalSeasonalLotsStatistics(i),this.statisticService.getMaxNormalSeasonalLotsStatistics(c)).subscribe(v=>{this.maxNormalSeasonalLotsRaw=v})}parkingOccupancyYAxisFormat(i){return i+"%"}changeDateRange(i){this.timeRange=i,this.reloadData()}changeCarPark(){this.reloadCarParkOptions(),this.reloadData()}}return m.\u0275fac=function(i){return new(i||m)(t.Y36(e.B),t.Y36(w.x),t.Y36(F.gz),t.Y36(d.sK))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-dashboard-comparison"]],decls:18,vars:13,consts:[[1,"body-wrapper"],[1,"m-subheader"],[1,"align-items-center"],[1,"row","form-group","m-form__group"],[1,"col-lg-2"],["bindLabel","name","bindValue","id",1,"rounded",3,"items","ngModel","ngModelChange"],[1,"col-form-label","col-md-1"],[1,"col-lg-3"],[1,"col-form-label","col-xl-1","col-lg-2","col-sm-6","m--padding-left-0","m--padding-right-0"],[1,"col-lg-3","col-sm-6"],[3,"data","select"],[1,"m-content"],[3,"parkingDurations","parkingVehicleTypes","parkingOccupancyRaw","parkingDailyOccupancyRaw","maxNormalSeasonalLotsRaw","carParkTransactions","carParkRevenue","carParkFaults"]],template:function(i,c){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"app-title-bar"),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"ng-select",5),t.NdJ("ngModelChange",function(T){return c.fromCarParkId=T})("ngModelChange",function(){return c.changeCarPark()}),t.qZA()(),t.TgZ(7,"label",6),t._uU(8," VS "),t.qZA(),t.TgZ(9,"div",4)(10,"ng-select",5),t.NdJ("ngModelChange",function(T){return c.toCarParkId=T})("ngModelChange",function(){return c.changeCarPark()}),t.qZA()(),t._UZ(11,"div",7),t.TgZ(12,"label",8),t._uU(13," Time Range "),t.qZA(),t.TgZ(14,"div",9)(15,"app-datepicker-tab",10),t.NdJ("select",function(T){return c.changeDateRange(T)}),t.qZA()()()()(),t.TgZ(16,"div",11),t._UZ(17,"app-dashboard-comparison-detail",12),t.qZA()()),2&i&&(t.xp6(6),t.Q6J("items",c.fromCarParks)("ngModel",c.fromCarParkId),t.xp6(4),t.Q6J("items",c.toCarParks)("ngModel",c.toCarParkId),t.xp6(5),t.Q6J("data",c.timeRange),t.xp6(2),t.Q6J("parkingDurations",c.parkingDurations)("parkingVehicleTypes",c.parkingVehicleTypes)("parkingOccupancyRaw",c.parkingOccupancyRaw)("parkingDailyOccupancyRaw",c.parkingDailyOccupancyRaw)("maxNormalSeasonalLotsRaw",c.maxNormalSeasonalLotsRaw)("carParkTransactions",c.carParkTransactions)("carParkRevenue",c.carParkRevenue)("carParkFaults",c.carParkFaults))},dependencies:[x.G,h.JJ,h.On,Oe.K,M.w9,se],encapsulation:2}),m})();var re=p(36328),te=p(80529),Pe=p(19832),Le=p(34984);function oe(m){return new Pe.w(m,"../assets/i18n/",".json")}const we=[{path:"",component:P.f,children:[{path:"",component:re.M},{path:"comparison/carparks",component:Ze,data:{breadcrumb:{label:"Car Parks"}}},{path:"comparison/range",component:Se,data:{breadcrumb:{label:"Range"}}}]}];let Me=(()=>{class m{}return m.\u0275fac=function(i){return new(i||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({providers:[e.B,w.x],imports:[r.ez,F.Bz.forChild(we),b.x,h.u5,Z.D,Le.Ns.forRoot({echarts:()=>p.e(4734).then(p.bind(p,14734))}),R.a4,M.A0,H.kn,y.zk,d.aw.forChild({loader:{provide:d.Zw,useFactory:oe,deps:[te.eN]}}),F.Bz]}),m})()},36328:(G,Q,p)=>{p.d(Q,{M:()=>Ot});var r=p(38014),h=p(21837),F=p(8929),H=p(36053),w=p(72986),e=p(94650),Z=p(60097),M=p(20388),R=p(89383),y=p(36895),b=p(24006),P=p(9389),S=p(96599),C=p(88796);function L(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div",11)(1,"label",12)(2,"input",13),e.NdJ("click",function(){const l=e.CHM(a).$implicit,D=e.oxw();return e.KtG(D.changeComparisonType(l.value))}),e.qZA(),e._uU(3),e._UZ(4,"span"),e.qZA()()}if(2&o){const a=_.$implicit,n=e.oxw();e.xp6(2),e.Q6J("checked",a.value===n.comparisonType),e.xp6(1),e.hij(" ",a.text," ")}}function f(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div")(1,"div",5)(2,"div",14)(3,"label")(4,"span",15),e._uU(5,"*"),e.qZA(),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"ng-select",16),e.NdJ("ngModelChange",function(s){e.CHM(a);const l=e.oxw();return e.KtG(l.fromCarParkId=s)})("ngModelChange",function(s){e.CHM(a);const l=e.oxw();return e.KtG(l.changeCompareCarPark(s))}),e.qZA()(),e.TgZ(9,"div",14)(10,"label",17)(11,"span",15),e._uU(12,"*"),e.qZA(),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"ng-select",18),e.NdJ("ngModelChange",function(s){e.CHM(a);const l=e.oxw();return e.KtG(l.timeRangeType=s)}),e.qZA()()(),e.TgZ(16,"div",19)(17,"div",14)(18,"label")(19,"span",15),e._uU(20,"*"),e.qZA(),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"app-datepicker",20),e.NdJ("select",function(s){e.CHM(a);const l=e.oxw();return e.KtG(l.changeFromTime(s))}),e.qZA()(),e.TgZ(24,"div",14)(25,"label"),e._uU(26," \xa0 "),e.qZA(),e.TgZ(27,"app-datepicker",20),e.NdJ("select",function(s){e.CHM(a);const l=e.oxw();return e.KtG(l.changeToTime(s))}),e.qZA()()()()}if(2&o){const a=e.oxw();e.xp6(6),e.hij(" ",e.lcZ(7,13,"Car Park"),": "),e.xp6(2),e.Q6J("items",a.fromCarParks)("ngModel",a.fromCarParkId),e.xp6(5),e.hij(" ",e.lcZ(14,15,"View By"),": "),e.xp6(2),e.Q6J("items",a.timeRangeOptions)("clearable",!1)("searchable",!1)("ngModel",a.timeRangeType),e.xp6(6),e.hij(" ",e.lcZ(22,17,"Time Range"),": "),e.xp6(2),e.Q6J("type",a.timeRangeType)("data",a.timeRange.value[0]),e.xp6(4),e.Q6J("type",a.timeRangeType)("data",a.timeRange.value[1])}}function t(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div")(1,"div",5)(2,"div",14)(3,"label")(4,"span",15),e._uU(5,"*"),e.qZA(),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"ng-select",21),e.NdJ("ngModelChange",function(s){e.CHM(a);const l=e.oxw();return e.KtG(l.fromCarParkId=s)})("ngModelChange",function(s){e.CHM(a);const l=e.oxw();return e.KtG(l.changeCompareCarPark(s))}),e.qZA()(),e.TgZ(9,"div",14)(10,"label",17),e._uU(11," \xa0 "),e.qZA(),e.TgZ(12,"ng-select",21),e.NdJ("ngModelChange",function(s){e.CHM(a);const l=e.oxw();return e.KtG(l.toCarParkId=s)})("ngModelChange",function(s){e.CHM(a);const l=e.oxw();return e.KtG(l.changeCompareCarPark(s))}),e.qZA()()(),e.TgZ(13,"div",19)(14,"div",14)(15,"label")(16,"span",15),e._uU(17,"*"),e.qZA(),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"app-datepicker-tab",22),e.NdJ("select",function(s){e.CHM(a);const l=e.oxw();return e.KtG(l.changeTimeRange(s))}),e.qZA()()()()}if(2&o){const a=e.oxw();e.xp6(6),e.hij(" ",e.lcZ(7,7,"Car Parks"),": "),e.xp6(2),e.Q6J("items",a.fromCarParks)("ngModel",a.fromCarParkId),e.xp6(4),e.Q6J("items",a.toCarParks)("ngModel",a.toCarParkId),e.xp6(6),e.hij(" ",e.lcZ(19,9,"Time Range"),": "),e.xp6(2),e.Q6J("data",a.timeRange)}}var x=(()=>{return(o=x||(x={})).Time="time",o.CarPark="carpark",x;var o})();let U=(()=>{class o{constructor(a,n,s){this.carparkService=a,this.modalRef=n,this.translate=s,this.comparisonType=x.Time,this.carParks=[],this.cancel=new e.vpe,this.submit=new e.vpe,this.fromCarParkId=null,this.toCarParkId=null,this.timeRange={value:[h.ou.local().minus({months:1}).toJSDate(),new Date],type:r.Nxg.Month},this.comparisonTypeOptions=[{value:x.Time,text:"By Time"},{value:x.CarPark,text:"By Car Park"}],this.timeRangeOptions=r.e8f.slice(1)}get timeRangeType(){return this.timeRange.type}set timeRangeType(a){this.timeRange={...this.timeRange,type:a}}reloadCarParkOptions(){this.fromCarParks=this.carParks.filter(a=>a.id!==this.toCarParkId),this.toCarParks=this.carParks.filter(a=>a.id!==this.fromCarParkId)}changeCompareCarPark(){this.reloadCarParkOptions()}changeComparisonType(a){this.comparisonType=a}changeTimeRange(a){this.timeRange=a}changeFromTime(a){this.timeRange={type:this.timeRangeType,value:[a,this.timeRange.value[1]]}}changeToTime(a){this.timeRange={type:this.timeRangeType,value:[this.timeRange.value[0],a]}}onCancel(){this.cancel.emit()}onSubmit(){this.submit.emit({comparisonType:this.comparisonType,fromCarParkId:this.fromCarParkId,toCarParkId:this.toCarParkId,fromDate:this.timeRange.value[0].toISOString(),toDate:this.timeRange.value[1].toISOString(),rangeType:this.timeRange.type})}ngOnInit(){this.carparkService.getSimpleList().subscribe(s=>{this.carParks=s,this.fromCarParkId=this.carParks[0]?this.carParks[0].id:null,this.toCarParkId=this.carParks[1]?this.carParks[1].id:null,this.reloadCarParkOptions()});const a=this.timeRangeOptions.map(s=>s.text);this.translate.get(a).subscribe(s=>{this.timeRangeOptions.forEach(l=>{for(let D in s)s.hasOwnProperty(D)&&l.text===D&&(l.text=s[D])})});const n=this.comparisonTypeOptions.map(s=>s.text);this.translate.get(n).subscribe(s=>{this.comparisonTypeOptions.forEach(l=>{for(let D in s)s.hasOwnProperty(D)&&l.text===D&&(l.text=s[D])})})}}return o.\u0275fac=function(a){return new(a||o)(e.Y36(Z.x),e.Y36(M.UZ),e.Y36(R.sK))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-compare-form"]],inputs:{comparisonType:"comparisonType",carParks:"carParks"},outputs:{cancel:"cancel",submit:"submit"},decls:19,vars:12,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","m-form__group","row"],["class","col-6",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"modal-body","text-right","border-top"],["type","reset",1,"btn","btn-outline-main",3,"click"],["type","reset",1,"btn","btn-main","m--margin-left-30",3,"click"],[1,"col-6"],[1,"m-radio","m-radio--state-brand"],["type","radio","name","compare-type",3,"checked","click"],[1,"col-lg-6"],[1,"m--font-danger"],["bindLabel","name","bindValue","id",3,"items","ngModel","ngModelChange"],[1,""],["bindLabel","text","bindValue","value",3,"items","clearable","searchable","ngModel","ngModelChange"],[1,"row"],[3,"type","data","select"],["bindLabel","name","bindValue","id",1,"rounded",3,"items","ngModel","ngModelChange"],["containerClass","m-input",3,"data","select"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return n.onCancel()}),e.TgZ(5,"span",3),e._uU(6,"\xd7"),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5),e.YNc(9,L,5,2,"div",6),e.qZA(),e.YNc(10,f,28,19,"div",7),e.YNc(11,t,21,11,"div",7),e.qZA(),e.TgZ(12,"div",8)(13,"button",9),e.NdJ("click",function(){return n.onCancel()}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"button",10),e.NdJ("click",function(){return n.onSubmit()}),e._uU(17),e.ALo(18,"translate"),e.qZA()()),2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,6,"Make Comparison")," "),e.xp6(7),e.Q6J("ngForOf",n.comparisonTypeOptions),e.xp6(1),e.Q6J("ngIf","time"==n.comparisonType),e.xp6(1),e.Q6J("ngIf","carpark"==n.comparisonType),e.xp6(3),e.hij(" ",e.lcZ(15,8,"Cancel")," "),e.xp6(3),e.hij(" ",e.lcZ(18,10,"Next")," "))},dependencies:[y.sg,y.O5,b.JJ,b.On,P.C,S.K,C.w9,R.X$],encapsulation:2}),o})();var d=p(34793),g=p(77407),k=p(76916),E=p(38231),I=p(40269),$=p(34523),ce=p(95369),K=p(37340),j=p(97640),le=p(29132),ee=p(10100),ie=p(58663),pe=p(53831),de=p(25141),he=p(53525),ne=p(68210),V=p(24657),me=p(65200),ge=p(44147),ue=p(85909);const _e=["tooltipTemplate"],ve=["seriesTooltipTemplate"];function xe(o,_){if(1&o){const a=e.EpF();e.O4$(),e.TgZ(0,"g",8),e.NdJ("dimensionsChanged",function(s){e.CHM(a);const l=e.oxw();return e.KtG(l.updateXAxisHeight(s))}),e.qZA()}if(2&o){const a=e.oxw();e.Q6J("xScale",a.xScale)("dims",a.dims)("showLabel",a.showXAxisLabel)("labelText",a.xAxisLabel)("tickFormatting",a.xAxisTickFormatting)}}function ye(o,_){if(1&o){const a=e.EpF();e.O4$(),e.TgZ(0,"g",9),e.NdJ("dimensionsChanged",function(s){e.CHM(a);const l=e.oxw();return e.KtG(l.updateYAxisWidth(s))}),e.qZA()}if(2&o){const a=e.oxw();e.Q6J("yScale",a.yScale)("dims",a.dims)("yOrient",a.yOrientLeft)("showGridLines",a.showGridLines)("showLabel",a.showYAxisLabel)("labelText",a.yAxisLabel)("tickFormatting",a.yAxisTickFormatting)}}function fe(o,_){if(1&o){const a=e.EpF();e.O4$(),e.TgZ(0,"g")(1,"g",10),e.NdJ("bandwidth",function(s){e.CHM(a);const l=e.oxw();return e.KtG(l.updateLineWidth(s))})("select",function(s){const D=e.CHM(a).$implicit,Y=e.oxw();return e.KtG(Y.onClick(s,D))})("activate",function(s){const D=e.CHM(a).$implicit,Y=e.oxw();return e.KtG(Y.onActivate(s,D))})("deactivate",function(s){const D=e.CHM(a).$implicit,Y=e.oxw();return e.KtG(Y.onDeactivate(s,D))})("dataLabelHeightChanged",function(s){const D=e.CHM(a).index,Y=e.oxw();return e.KtG(Y.onDataLabelMaxHeightChanged(s,D))}),e.qZA()()}if(2&o){const a=_.$implicit,n=e.oxw();e.Q6J("@animationState","active"),e.uIk("transform",n.groupTransform(a)),e.xp6(1),e.Q6J("xScale",n.xScale)("yScale",n.yScale)("activeEntries",n.activeEntries)("colors",n.colors)("series",a.series)("dims",n.dims)("gradient",n.gradient)("tooltipDisabled",n.tooltipDisabled)("tooltipTemplate",n.tooltipTemplate)("showDataLabel",n.showDataLabel)("dataLabelFormatting",n.dataLabelFormatting)("seriesName",a.name)("animations",n.animations)}}function Ce(o,_){if(1&o&&(e.O4$(),e.TgZ(0,"g"),e._UZ(1,"g",11),e.qZA()),2&o){const a=_.$implicit,n=e.oxw();e.xp6(1),e.Q6J("xScale",n.xScaleLine)("yScale",n.yScaleLine)("colors",n.colorsLine)("data",a)("activeEntries",n.activeEntries)("scaleType",n.scaleType)("curve",n.curve)("rangeFillOpacity",n.rangeFillOpacity)("animations",n.animations)}}function be(o,_){if(1&o){const a=e.EpF();e.O4$(),e.TgZ(0,"g",12),e.NdJ("hover",function(s){e.CHM(a);const l=e.oxw();return e.KtG(l.updateHoveredVertical(s))})("onClick",function(s){e.CHM(a);const l=e.oxw();return e.KtG(l.onClickTooltip(s))}),e.qZA()}if(2&o){const a=e.oxw();e.Q6J("dims",a.dims)("xSet",a.xSet)("xScale",a.xScaleLine)("yScale",a.yScaleLine)("results",a.combinedSeries)("colors",a.colorsLine)("tooltipDisabled",a.tooltipDisabled)}}function Te(o,_){if(1&o){const a=e.EpF();e.O4$(),e.TgZ(0,"g")(1,"g",13),e.NdJ("select",function(s){const D=e.CHM(a).$implicit,Y=e.oxw();return e.KtG(Y.onClick(s,D))})("activate",function(s){e.CHM(a);const l=e.oxw();return e.KtG(l.onActivate(s))})("deactivate",function(s){e.CHM(a);const l=e.oxw();return e.KtG(l.onDeactivate(s))}),e.qZA()()}if(2&o){const a=_.$implicit,n=e.oxw();e.xp6(1),e.Q6J("xScale",n.xScaleLine)("yScale",n.yScaleLine)("colors",n.colorsLine)("data",a)("scaleType",n.scaleType)("visibleValue",n.hoveredVertical)("activeEntries",n.activeEntries)("tooltipDisabled",n.tooltipDisabled)}}const De=function(o,_){return[o,_]};let ke=(()=>{class o extends j.ep{constructor(){super(...arguments),this.curve=pe.Z,this.legend=!1,this.legendTitle="Legend",this.tooltipDisabled=!1,this.showGridLines=!0,this.activeEntries=[],this.roundDomains=!1,this.animations=!0,this.barPadding=8,this.activate=new e.vpe,this.deactivate=new e.vpe,this.margin=[10,20,10,20],this.xAxisHeight=0,this.yAxisWidth=0,this.scaleType="linear",this.yOrientLeft="left",this.yOrientRight="right",this.legendSpacing=0}trackBy(a,n){return n.name}update(){super.update(),this.dims=(0,j.iG)({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.schemeType}),this.legendSpacing=this.yAxis?this.showYAxisLabel&&this.yAxis?100:40:0,this.groupDomain=this.getGroupDomain(),this.innerDomain=this.getInnerDomain(),this.valueDomain=this.getValueDomain(),this.xScale=this.getXScale(),this.yScale=this.getYScale(),this.xDomainLine=this.getXDomainLine(),this.filteredDomain&&(this.xDomainLine=this.filteredDomain),this.yDomainLine=this.getYDomainLine(),this.seriesDomain=this.getSeriesDomain(),this.xScaleLine=this.getXScaleLine(this.xDomainLine,this.dims.width),this.yScaleLine=this.yScale,this.setColors(),this.legendOptions=this.getLegendOptions(),this.transform=`translate(${this.dims.xOffset} , ${this.margin[0]})`}getGroupDomain(){const a=[];for(const n of this.results)a.includes(n.name)||a.push(n.name);return a}getInnerDomain(){const a=[];for(const n of this.results)for(const s of n.series)a.includes(s.name)||a.push(s.name);return a}getValueDomain(){const a=[];let n=0,s=0;for(const Y of this.results){let q=0,ae=0;for(const z of Y.series)z.value<0?q+=z.value:ae+=z.value,n=z.value<n?z.value:n,s=z.value>s?z.value:s;a.push(q),a.push(ae)}return a.push(n),a.push(s),[Math.min(0,...a),this.yScaleMax?Math.max(this.yScaleMax,...a):Math.max(...a)]}deactivateAll(){this.activeEntries=[...this.activeEntries];for(const a of this.activeEntries)this.deactivate.emit({value:a,entries:[]});this.activeEntries=[]}hideCircles(){this.hoveredVertical=null,this.deactivateAll()}updateHoveredVertical(a){this.hoveredVertical=a.value,this.deactivateAll()}updateDomain(a){this.filteredDomain=a,this.xDomainLine=this.filteredDomain,this.xScaleLine=this.getXScaleLine(this.xDomainLine,this.dims.width)}getSeriesDomain(){const a=this.results[0]?this.results[0].series.map(n=>({series:this.results.map(l=>{const D=l.series.find(Y=>Y.name===n.name);return{name:l.name,value:D?D.value:0}}),name:n.name})):[];return this.combinedSeries=this.lineChart.slice(0).concat(a),this.combinedSeries.map(n=>n.name)}isDate(a){return a instanceof Date}getScaleType(a){let n=!0,s=!0;for(const l of a)this.isDate(l)||(n=!1),"number"!=typeof l&&(s=!1);return n?"time":s?"linear":"ordinal"}getXDomainLine(){let a=[];for(const s of this.lineChart)for(const l of s.series)a.includes(l.name)||a.push(l.name);this.scaleType=this.getScaleType(a);let n=[];return"time"===this.scaleType?n=[Math.min(...a),Math.max(...a)]:"linear"===this.scaleType?(a=a.map(Number),n=[Math.min(...a),Math.max(...a)]):n=a,this.xSet=a,n}getYDomainLine(){const a=[];for(const l of this.lineChart)for(const D of l.series)a.indexOf(D.value)<0&&a.push(D.value),void 0!==D.min&&a.indexOf(D.min)<0&&a.push(D.min),void 0!==D.max&&a.indexOf(D.max)<0&&a.push(D.max);let n=Math.min(...a);const s=Math.max(...a);if(this.yRightAxisScaleFactor){const l=this.yRightAxisScaleFactor(n,s);return[Math.min(0,l.min),l.max]}return n=Math.min(0,n),[n,s]}getXScaleLine(a,n){let s;return void 0===this.bandwidth&&(this.bandwidth=this.dims.width-this.barPadding),"time"===this.scaleType?s=(0,le.Z)().range([0,n]).domain(a):"linear"===this.scaleType?(s=(0,ee.Z)().range([0,n]).domain(a),this.roundDomains&&(s=s.nice())):"ordinal"===this.scaleType&&(s=(0,ie.x)().range([this.bandwidth/2,n-this.bandwidth/2]).domain(a)),s}getYScaleLine(a,n){const s=(0,ee.Z)().range([n,0]).domain(a);return this.roundDomains?s.nice():s}getXScale(){const a=this.groupDomain.length/(this.dims.width/this.barPadding+1);return(0,ie.Z)().rangeRound([0,this.dims.width]).paddingInner(a).domain(this.groupDomain)}getYScale(){const a=(0,ee.Z)().range([this.dims.height,0]).domain(this.valueDomain);return this.roundDomains?a.nice():a}getXDomain(){return this.results.map(a=>a.name)}getYDomain(){const a=this.results.map(l=>l.value),n=Math.min(0,...a),s=Math.max(...a);if(this.yLeftAxisScaleFactor){const l=this.yLeftAxisScaleFactor(n,s);return[Math.min(0,l.min),l.max]}return[n,s]}onClick(a){this.select.emit(a)}setColors(){let a;a="ordinal"===this.schemeType?this.innerDomain:this.valueDomain,this.colors=new j.vH(this.scheme,this.schemeType,a,this.customColors),this.colorsLine=new j.vH(this.colorSchemeLine,this.schemeType,a,this.customColors)}getLegendOptions(){const a={scaleType:this.schemeType,colors:void 0,domain:[],title:void 0};return"ordinal"===a.scaleType?(a.domain=this.seriesDomain,a.colors=this.colorsLine,a.title=this.legendTitle):(a.domain=this.seriesDomain,a.colors=this.colors.scale),a}updateLineWidth(a){this.bandwidth=a}updateYAxisWidth({width:a}){this.yAxisWidth=a+20,this.update()}updateXAxisHeight({height:a}){this.xAxisHeight=a,this.update()}onActivate(a){this.activeEntries.findIndex(s=>s.name===a.name&&s.value===a.value&&s.series===a.series)>-1||(this.activeEntries=[a,...this.activeEntries],this.activate.emit({value:a,entries:this.activeEntries}))}onDeactivate(a){const n=this.activeEntries.findIndex(s=>s.name===a.name&&s.value===a.value&&s.series===a.series);this.activeEntries.splice(n,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:a,entries:this.activeEntries})}groupTransform(a){return`translate(${this.xScale(a.name)}, 0)`}onClickTooltip(a){this.select.emit({series:a})}}return o.\u0275fac=function(){let _;return function(n){return(_||(_=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["combo-chart-component"]],contentQueries:function(a,n,s){if(1&a&&(e.Suo(s,_e,5),e.Suo(s,ve,5)),2&a){let l;e.iGM(l=e.CRH())&&(n.tooltipTemplate=l.first),e.iGM(l=e.CRH())&&(n.seriesTooltipTemplate=l.first)}},viewQuery:function(a,n){if(1&a&&e.Gf(j.Bk,5),2&a){let s;e.iGM(s=e.CRH())&&(n.lineSeriesComponent=s.first)}},hostBindings:function(a,n){1&a&&e.NdJ("mouseleave",function(){return n.hideCircles()})},inputs:{curve:"curve",legend:"legend",legendTitle:"legendTitle",xAxis:"xAxis",yAxis:"yAxis",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",showRightYAxisLabel:"showRightYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",yAxisLabelRight:"yAxisLabelRight",tooltipDisabled:"tooltipDisabled",gradient:"gradient",showGridLines:"showGridLines",activeEntries:"activeEntries",schemeType:"schemeType",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",yRightAxisTickFormatting:"yRightAxisTickFormatting",roundDomains:"roundDomains",yScaleMax:"yScaleMax",colorSchemeLine:"colorSchemeLine",autoScale:"autoScale",lineChart:"lineChart",yLeftAxisScaleFactor:"yLeftAxisScaleFactor",yRightAxisScaleFactor:"yRightAxisScaleFactor",rangeFillOpacity:"rangeFillOpacity",animations:"animations",barPadding:"barPadding"},outputs:{activate:"activate",deactivate:"deactivate"},features:[e.qOj],decls:10,vars:18,consts:[[3,"view","showLegend","legendOptions","activeEntries","animations","legendLabelClick","legendLabelActivate","legendLabelDeactivate"],[1,"bar-chart","chart"],["ngx-charts-x-axis","",3,"xScale","dims","showLabel","labelText","tickFormatting","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","yOrient","showGridLines","showLabel","labelText","tickFormatting","dimensionsChanged",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"line-chart","chart"],["ngx-charts-tooltip-area","",3,"dims","xSet","xScale","yScale","results","colors","tooltipDisabled","hover","onClick",4,"ngIf"],[4,"ngFor","ngForOf"],["ngx-charts-x-axis","",3,"xScale","dims","showLabel","labelText","tickFormatting","dimensionsChanged"],["ngx-charts-y-axis","",3,"yScale","dims","yOrient","showGridLines","showLabel","labelText","tickFormatting","dimensionsChanged"],["ngx-charts-series-vertical","","type","stacked",3,"xScale","yScale","activeEntries","colors","series","dims","gradient","tooltipDisabled","tooltipTemplate","showDataLabel","dataLabelFormatting","seriesName","animations","bandwidth","select","activate","deactivate","dataLabelHeightChanged"],["ngx-charts-line-series","",3,"xScale","yScale","colors","data","activeEntries","scaleType","curve","rangeFillOpacity","animations"],["ngx-charts-tooltip-area","",3,"dims","xSet","xScale","yScale","results","colors","tooltipDisabled","hover","onClick"],["ngx-charts-circle-series","",3,"xScale","yScale","colors","data","scaleType","visibleValue","activeEntries","tooltipDisabled","select","activate","deactivate"]],template:function(a,n){1&a&&(e.TgZ(0,"ngx-charts-chart",0),e.NdJ("legendLabelClick",function(l){return n.onClick(l)})("legendLabelActivate",function(l){return n.onActivate(l)})("legendLabelDeactivate",function(l){return n.onDeactivate(l)}),e.O4$(),e.TgZ(1,"g",1),e.YNc(2,xe,1,5,"g",2),e.YNc(3,ye,1,7,"g",3),e.YNc(4,fe,2,15,"g",4),e.qZA(),e.TgZ(5,"g",5)(6,"g"),e.YNc(7,Ce,2,9,"g",4),e.YNc(8,be,1,7,"g",6),e.YNc(9,Te,2,8,"g",7),e.qZA()()()),2&a&&(e.Q6J("view",e.WLB(15,De,n.width+n.legendSpacing,n.height))("showLegend",n.legend)("legendOptions",n.legendOptions)("activeEntries",n.activeEntries)("animations",n.animations),e.xp6(1),e.uIk("transform",n.transform),e.xp6(1),e.Q6J("ngIf",n.xAxis),e.xp6(1),e.Q6J("ngIf",n.yAxis),e.xp6(1),e.Q6J("ngForOf",n.results)("ngForTrackBy",n.trackBy),e.xp6(1),e.uIk("transform",n.transform),e.xp6(2),e.Q6J("ngForOf",n.lineChart)("ngForTrackBy",n.trackBy),e.xp6(1),e.Q6J("ngIf",!n.tooltipDisabled&&(null==n.combinedSeries?null:n.combinedSeries.length)),e.xp6(1),e.Q6J("ngForOf",n.lineChart))},dependencies:[y.sg,y.O5,de.I,he.M,ne.s,V.x,me.g,ge.A,ue.B],styles:[".ngx-charts{float:left;overflow:visible}.ngx-charts .circle,.ngx-charts .bar,.ngx-charts .arc{cursor:pointer}.ngx-charts .bar.active,.ngx-charts .bar:hover,.ngx-charts .cell.active,.ngx-charts .cell:hover,.ngx-charts .arc.active,.ngx-charts .arc:hover,.ngx-charts .card.active,.ngx-charts .card:hover{opacity:.8;transition:opacity .1s ease-in-out}.ngx-charts .bar:focus,.ngx-charts .cell:focus,.ngx-charts .arc:focus,.ngx-charts .card:focus{outline:none}.ngx-charts g:focus{outline:none}.ngx-charts .line-series.inactive,.ngx-charts .line-series-range.inactive,.ngx-charts .area-series.inactive{transition:opacity .1s ease-in-out;opacity:.2}.ngx-charts .line-highlight{display:none}.ngx-charts .line-highlight.active{display:block}.ngx-charts .area{opacity:.6}.ngx-charts .circle:hover{cursor:pointer}.ngx-charts .label{font-size:12px;font-weight:400}.ngx-charts .tooltip-anchor{fill:#000}.ngx-charts .gridline-path{stroke:#ddd;stroke-width:1;fill:none}.ngx-charts .grid-panel rect{fill:none}.ngx-charts .grid-panel.odd rect{fill:#0000000d}\n"],encapsulation:2,data:{animation:[(0,K.X$)("animationState",[(0,K.eR)(":leave",[(0,K.oB)({opacity:1,transform:"*"}),(0,K.jt)(500,(0,K.oB)({opacity:0,transform:"scale(0)"}))])])]},changeDetection:0}),o})();p(9419),p(41003);var Ae=p(28100),se=p(34984),Se=p(80646),Oe=p(45823),Ze=p(47423),re=p(73325),te=p(29562),Pe=p(28213),Le=p(66616),oe=p(47044),we=p(21811);function Me(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"li",5)(1,"label",6),e.NdJ("ngModelChange",function(s){const D=e.CHM(a).$implicit;return e.KtG(D.value=s)})("ngModelChange",function(s){const D=e.CHM(a).$implicit,Y=e.oxw();return e.KtG(Y.handleCheckChange(s,D))}),e._uU(2),e.qZA()()}if(2&o){const a=_.$implicit;e.xp6(1),e.Q6J("ngModel",a.value),e.xp6(1),e.Oqu(a.name)}}let m=(()=>{class o{constructor(){this.selListOut=new e.vpe}handleCheckChange(a,n){this.selListOut.emit(n)}}return o.\u0275fac=function(a){return new(a||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["show-dashboard"]],inputs:{itemList:"itemList"},outputs:{selListOut:"selListOut"},decls:8,vars:2,consts:[["nz-button","","nzTye","default","nzShape","round","nz-dropdown","","nzTrigger","click",2,"width","200px","height","40px","text-align","left",3,"nzDropdownMenu"],["nz-icon","","nzType","down","nzTheme","outline",2,"position","absolute","right","10px","top","50%","margin-top","-6px"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",4,"ngFor","ngForOf"],["nz-menu-item",""],["nz-checkbox","",3,"ngModel","ngModelChange"]],template:function(a,n){if(1&a&&(e.TgZ(0,"button",0)(1,"span"),e._uU(2,"Show Dashbord"),e.qZA(),e._UZ(3,"span",1),e.qZA(),e.TgZ(4,"nz-dropdown-menu",null,2)(6,"ul",3),e.YNc(7,Me,3,2,"li",4),e.qZA()()),2&a){const s=e.MAs(5);e.Q6J("nzDropdownMenu",s),e.xp6(7),e.Q6J("ngForOf",n.itemList)}},dependencies:[y.sg,Ze.Ls,re.wO,re.r9,te.cm,te.RR,te.wA,Pe.Ie,Le.ix,oe.w,we.dQ,b.JJ,b.On]}),o})();var A=p(3927),i=p(27221),c=p(86181),v=p(80529),T=p(28555),u=p(91599);let O=(()=>{class o extends A.su{constructor(a,n,s){super(a,n),this.http=a,this.store=n,this.modelName="asset",this.baseUrl="scp-mg-devicemgt/status_tracking/findStatusTrackingByParam",this.handleError=s.createHandleError(`${this.modelName}Service`)}filterModel(a,n){const s=(0,c.U8)(`${this.baseUrl}`,{...a,...(0,c.jq)(n)});return this.get(this.getUrl(s)).pipe((0,i.K)(this.handleError(`${this.modelName}Filter`,{}))).map(l=>Array.isArray(l)?(0,A.eC)(l):(0,A.O7)(l))}}return o.\u0275fac=function(a){return new(a||o)(e.LFG(v.eN),e.LFG(T.yh),e.LFG(u.k))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var J=p(52746),X=p(35635);function W(o,_){if(1&o&&e._uU(0),2&o){const a=_.range;e.lnq(" ",a[0],"-",a[1]," of ",_.$implicit," items ")}}function Qe(o,_){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&o){const a=_.$implicit;e.xp6(1),e.Oqu(a.text)}}function ze(o,_){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA()()),2&o){const a=_.$implicit;e.ekj("ant-table-row-odd",_.index%2==1),e.xp6(2),e.Oqu(a.relKey),e.xp6(2),e.Oqu(a.status),e.xp6(2),e.Oqu(a.startTime),e.xp6(2),e.Oqu(a.endTime)}}let qe=(()=>{class o extends J.t{constructor(a){super(),this.trackingService=a,this.tableHeaders=[{text:"RelKey",column:"relKey",width:"150px"},{text:"Status",column:"status",width:"150px"},{text:"StartTime",column:"startTime",width:"200px"},{text:"EndTime",column:"endTime",width:"200px"}],this.stake=""}get filterParams(){return{stake:this.stake}}ngOnInit(){this.reloadData()}pageChanged(a){this.pagination=a,this.reloadData()}reloadData(){this.reloadDataService(this.trackingService)}getTrackingData(a){this.stake=a,this.reloadData()}}return o.\u0275fac=function(a){return new(a||o)(e.Y36(O))},o.\u0275cmp=e.Xpm({type:o,selectors:[["downtime-tracking"]],features:[e._Bn([O]),e.qOj],decls:17,vars:11,consts:[[1,"m-portlet__frame"],[1,"form-group"],[1,"m-portlet__filter"],[1,"col-form-label","col-form-label-nowrap"],[1,"m-input-icon","m-input-icon--left"],["type","text","nz-input","","placeholder","Stake Key",3,"ngModel","ngModelChange"],["rangeTemplate",""],[3,"nzData","nzFrontPagination","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzShowSizeChanger","nzShowTotal","nzQueryParams"],["basicTable",""],[4,"ngFor","ngForOf"],[3,"ant-table-row-odd",4,"ngFor","ngForOf"]],template:function(a,n){if(1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3)(4,"h5"),e._uU(5,"Stake Key:"),e.qZA()(),e.TgZ(6,"div",4)(7,"input",5),e.NdJ("ngModelChange",function(l){return n.stake=l})("ngModelChange",function(l){return n.getTrackingData(l)}),e.qZA()()()(),e.YNc(8,W,1,3,"ng-template",null,6,e.W1O),e.TgZ(10,"nz-table",7,8),e.NdJ("nzQueryParams",function(l){return n.onQueryParamsChange(l)}),e.TgZ(12,"thead")(13,"tr"),e.YNc(14,Qe,2,1,"th",9),e.qZA()(),e.TgZ(15,"tbody"),e.YNc(16,ze,9,6,"tr",10),e.qZA()()()),2&a){const s=e.MAs(9),l=e.MAs(11);e.xp6(7),e.Q6J("ngModel",n.stake),e.xp6(3),e.Q6J("nzData",n.listData)("nzFrontPagination",!1)("nzLoading",n.loading)("nzTotal",n.pagination.totalCount)("nzPageSize",n.pagination.rowsPerPage)("nzPageIndex",n.pagination.page)("nzShowSizeChanger",!0)("nzShowTotal",s),e.xp6(4),e.Q6J("ngForOf",n.tableHeaders),e.xp6(2),e.Q6J("ngForOf",l.data)}},dependencies:[y.sg,X.Zp,I.N8,I.Uo,I._C,I.Om,I.p0,I.$Z,b.Fj,b.JJ,b.On]}),o})();var $e=p(53033);const Ge=["barChartElement"];function Be(o,_){if(1&o&&e._UZ(0,"nz-option",27),2&o){const a=_.$implicit;e.Q6J("nzValue",a.id)("nzLabel",a.name)}}function Ve(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div")(1,"div",28)(2,"button",29),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.showItem("totalBoard",s.showDashbord.totalBoard))}),e._UZ(3,"i",30),e.qZA()(),e.TgZ(4,"div",31)(5,"div",32)(6,"div",33)(7,"div",34)(8,"div",35)(9,"div",36),e._uU(10," Total Transactions "),e.qZA(),e.TgZ(11,"div",37),e._uU(12),e.qZA()()()()(),e.TgZ(13,"div",38)(14,"div",33)(15,"div",34)(16,"div",35)(17,"div",36),e._uU(18," Total Revenue "),e.qZA(),e.TgZ(19,"div",39),e._uU(20),e.ALo(21,"excurrency"),e.ALo(22,"number"),e.qZA()()()()(),e.TgZ(23,"div",32)(24,"div",19)(25,"div",34)(26,"div",35)(27,"div",36),e._uU(28," Average Occupancy "),e.qZA(),e.TgZ(29,"div",40),e._uU(30),e.ALo(31,"number"),e.qZA()()()()(),e.TgZ(32,"div",38)(33,"div",19)(34,"div",41)(35,"div",35)(36,"div",42),e._uU(37," Hourly Revenue "),e.qZA(),e.TgZ(38,"div",39),e._uU(39),e.ALo(40,"excurrency"),e.ALo(41,"number"),e.qZA(),e.TgZ(42,"div",42),e._uU(43," Season Revenue "),e.qZA(),e.TgZ(44,"div",37),e._uU(45),e.ALo(46,"excurrency"),e.ALo(47,"number"),e.qZA()()()()()()()}if(2&o){const a=e.oxw();e.Gre("m--padding-right-10 flex-column ",a.showDashbord.parking?"col-lg-6":"col-lg-12",""),e.xp6(12),e.hij(" ",a.overallStatistic?a.overallStatistic.totalTransactions:0," "),e.xp6(8),e.hij(" ",a.overallStatistic?e.xi3(21,8,e.xi3(22,11,a.overallStatistic.totalRevenue.amount,"1.2"),a.overallStatistic.totalRevenue.currency):0," "),e.xp6(10),e.hij(" ",a.overallStatistic?e.lcZ(31,14,a.overallStatistic.averageOccupancy):0," % "),e.xp6(9),e.hij(" ",a.overallStatistic?e.xi3(40,16,e.xi3(41,19,a.overallStatistic.hourlyRevenue.amount,"1.2"),a.overallStatistic.hourlyRevenue.currency):0," "),e.xp6(6),e.hij(" ",a.overallStatistic?e.xi3(46,22,e.xi3(47,25,a.overallStatistic.seasonRevenue.amount,"1.2"),a.overallStatistic.seasonRevenue.currency):0," ")}}function Ke(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div")(1,"div",28)(2,"button",29),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.showItem("parking",s.showDashbord.parking))}),e._UZ(3,"i",30),e.qZA()(),e.TgZ(4,"div",31)(5,"div",43)(6,"div",44)(7,"div",20)(8,"div",21)(9,"div",45)(10,"h3",23),e._uU(11," Parking Vehicle Type "),e.qZA()()()(),e.TgZ(12,"div"),e._UZ(13,"app-pie-chart",46),e.qZA()()(),e.TgZ(14,"div",43)(15,"div",47)(16,"div",20)(17,"div",21)(18,"div",45)(19,"h3",23),e._uU(20," Parking Duration "),e.qZA()()()(),e.TgZ(21,"div"),e._UZ(22,"app-pie-chart",46),e.qZA()()()()()}if(2&o){const a=e.oxw();e.Gre("",a.showDashbord.totalBoard?"col-lg-6":"col-lg-12"," flex-column"),e.xp6(13),e.Q6J("view",a.chartView)("results",a.parkingVehicleTypes)("displayLegend",a.displayPercentLegend),e.xp6(9),e.Q6J("view",a.chartView)("results",a.parkingDurations)("displayLegend",a.displayPercentLegend)}}function je(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div")(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"h3",48),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",24),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.showItem("status",s.showDashbord.status))}),e._UZ(9,"i",30),e.qZA()()()(),e.TgZ(10,"div",34)(11,"div",49),e._UZ(12,"div",50),e.qZA()()()()}if(2&o){const a=e.oxw();e.Gre("",a.showDashbord.analysis?"col-lg-6":"col-lg-12"," m--padding-right-10"),e.xp6(6),e.hij(" ",e.lcZ(7,5,"EV Charging Status")," "),e.xp6(6),e.Q6J("options",a.option)}}function We(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div")(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"h3",23),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",24),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.showItem("analysis",s.showDashbord.analysis))}),e._UZ(9,"i",30),e.qZA()()()(),e.TgZ(10,"div",34)(11,"div",49)(12,"div",51),e._UZ(13,"div",50),e.qZA()()()()()}if(2&o){const a=e.oxw();e.Gre("",a.showDashbord.status?"col-lg-6":"col-lg-12"," m--padding-right-10"),e.xp6(6),e.hij(" ",e.lcZ(7,5,"EV Charging Analysis")," "),e.xp6(7),e.Q6J("options",a.analysisOption)}}function Xe(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div")(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"h3",48),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",24),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.showItem("status",s.showDashbord.status))}),e._UZ(9,"i",30),e.qZA()()()(),e.TgZ(10,"div",34)(11,"div",49),e._UZ(12,"div",50),e.qZA()()()()}if(2&o){const a=e.oxw();e.Gre("",a.showDashbord.analysis?"col-lg-6":"col-lg-12"," m--padding-right-10"),e.xp6(6),e.hij(" ",e.lcZ(7,5,"Top 5 Carparks with Most Parking Defaulters")," "),e.xp6(6),e.Q6J("options",a.defaultersOption)}}function et(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div")(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"h3",23),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",24),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.showItem("analysis",s.showDashbord.analysis))}),e._UZ(9,"i",30),e.qZA()()()(),e.TgZ(10,"div",34)(11,"div",49)(12,"div",51),e._UZ(13,"div",50),e.qZA()()()()()}if(2&o){const a=e.oxw();e.Gre("",a.showDashbord.status?"col-lg-6":"col-lg-12"," m--padding-right-10"),e.xp6(6),e.hij(" ",e.lcZ(7,5,"Top 10 Carpark with Highest Revenue leakages")," "),e.xp6(7),e.Q6J("options",a.leakageOption)}}function tt(o,_){if(1&o&&(e.ynx(0),e.TgZ(1,"tr",63)(2,"td",64),e._uU(3),e.qZA(),e.TgZ(4,"td",65),e._uU(5),e.qZA(),e.TgZ(6,"td",65),e._uU(7),e.qZA()(),e.BQk()),2&o){const a=_.$implicit;e.xp6(3),e.hij(" ",a.timestamp," "),e.xp6(2),e.hij(" ",a.vehicle," "),e.xp6(2),e.hij(" ",a.Frequented," ")}}function at(o,_){if(1&o&&(e.TgZ(0,"div",57)(1,"div",49)(2,"table",58)(3,"thead",59)(4,"tr",60)(5,"th",61),e._uU(6," Timestamp "),e.qZA(),e.TgZ(7,"th",61),e._uU(8," Vehicle Plate "),e.qZA(),e.TgZ(9,"th",61),e._uU(10," Frequented "),e.qZA()()(),e.TgZ(11,"tbody"),e.YNc(12,tt,8,3,"ng-container",62),e.qZA()()()()),2&o){const a=e.oxw(2);e.xp6(12),e.Q6J("ngForOf",a.watchlist)}}function it(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div",52)(1,"div",53)(2,"div",54)(3,"div",21)(4,"div",22)(5,"h3",23),e._uU(6," Top 10 Vehicle in Watchlist "),e.qZA(),e.TgZ(7,"button",55),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.showItem("carparkOccupancy",s.showDashbord.carparkOccupancy))}),e._UZ(8,"i",30),e.qZA(),e.TgZ(9,"button",24),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.parkingOccupancy.hidden=!s.parkingOccupancy.hidden)}),e._UZ(10,"i"),e.qZA()()()(),e.YNc(11,at,13,1,"div",56),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(10),e.Gre("la ",a.parkingOccupancy.hidden?"la-arrows":"la-minus-square",""),e.xp6(1),e.Q6J("ngIf",!a.parkingOccupancy.hidden)}}function nt(o,_){if(1&o&&e._UZ(0,"app-chart-legend",73),2&o){const a=e.oxw(3);e.Q6J("data",a.occupancyLegend)("display",a.lineLegend)("horizontal",!0)("colors",a.occupancyColorScheme.domain)}}function st(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"combo-chart-component",74),e.NdJ("select",function(s){e.CHM(a);const l=e.oxw(3);return e.KtG(l.selectOccupancy(s))}),e.qZA()}if(2&o){const a=e.oxw(3);e.Q6J("scheme",a.occupancyColorScheme)("results",a.parkingOccupancy.parkingOccupancy)("lineChart",a.parkingOccupancy.lines)("colorSchemeLine",a.parkingOccupancy.lineSchema)("gradient",!1)("xAxis",!0)("yAxis",!0)("barPadding",a.parkingOccupancy.barPadding)("yScaleMax",a.parkingOccupancy.maxYAxisOccupancy)}}function rt(o,_){if(1&o&&e._UZ(0,"ngx-charts-bar-vertical-stacked",75),2&o){const a=e.oxw(3);e.Q6J("scheme",a.occupancyColorScheme)("results",a.parkingOccupancy.parkingOccupancyAverage)("gradient",!1)("xAxis",!0)("yAxis",!0)("barPadding",a.parkingOccupancy.barPadding)("yScaleMax",a.parkingOccupancy.maxYAxisOccupancy)}}function ot(o,_){if(1&o&&(e.TgZ(0,"div",34)(1,"div",49),e.YNc(2,nt,1,4,"app-chart-legend",67),e.TgZ(3,"div",68)(4,"div",51,69),e.YNc(6,st,1,9,"combo-chart-component",70),e.qZA(),e.TgZ(7,"div",71),e.YNc(8,rt,1,7,"ngx-charts-bar-vertical-stacked",72),e.qZA()()()()),2&o){const a=e.oxw(2);e.xp6(2),e.Q6J("ngIf",a.parkingOccupancy.parkingOccupancy),e.xp6(4),e.Q6J("ngIf",a.parkingOccupancy.parkingOccupancy),e.xp6(2),e.Q6J("ngIf",a.parkingOccupancy.parkingOccupancyAverage)}}function ct(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div",66)(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"h3",23),e._uU(6," Car Park Occupancy "),e.qZA(),e.TgZ(7,"button",55),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.showItem("carparkOccupancy",s.showDashbord.carparkOccupancy))}),e._UZ(8,"i",30),e.qZA(),e.TgZ(9,"button",24),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.parkingOccupancy.hidden=!s.parkingOccupancy.hidden)}),e._UZ(10,"i"),e.qZA()()()(),e.YNc(11,ot,9,3,"div",25),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(10),e.Gre("la ",a.parkingOccupancy.hidden?"la-arrows":"la-minus-square",""),e.xp6(1),e.Q6J("ngIf",!a.parkingOccupancy.hidden)}}function lt(o,_){if(1&o&&e._UZ(0,"app-chart-legend",73),2&o){const a=e.oxw(3);e.Q6J("data",a.dailyOccupancyLegend)("display",a.lineLegend)("horizontal",!0)("colors",a.occupancyColorScheme.domain)}}function pt(o,_){if(1&o&&e._UZ(0,"combo-chart-component",77),2&o){const a=e.oxw(3);e.Q6J("scheme",a.occupancyColorScheme)("results",a.dailyOccupancy.parkingOccupancy)("lineChart",a.dailyOccupancy.lines)("colorSchemeLine",a.dailyOccupancy.lineSchema)("gradient",!1)("xAxis",!0)("yAxis",!0)("barPadding",a.dailyOccupancy.barPadding)("yScaleMax",a.dailyOccupancy.maxYAxisOccupancy)}}function dt(o,_){if(1&o&&e._UZ(0,"ngx-charts-bar-vertical-stacked",75),2&o){const a=e.oxw(3);e.Q6J("scheme",a.occupancyColorScheme)("results",a.dailyOccupancy.parkingOccupancyAverage)("gradient",!1)("xAxis",!0)("yAxis",!0)("barPadding",a.dailyOccupancy.barPadding)("yScaleMax",a.dailyOccupancy.maxYAxisOccupancy)}}function ht(o,_){if(1&o&&(e.TgZ(0,"div",34)(1,"div",49),e.YNc(2,lt,1,4,"app-chart-legend",67),e.TgZ(3,"div",68)(4,"div",51),e.YNc(5,pt,1,9,"combo-chart-component",76),e.qZA(),e.TgZ(6,"div",71),e.YNc(7,dt,1,7,"ngx-charts-bar-vertical-stacked",72),e.qZA()()()()),2&o){const a=e.oxw(2);e.xp6(2),e.Q6J("ngIf",a.dailyOccupancy.parkingOccupancy),e.xp6(3),e.Q6J("ngIf",null==a.dailyOccupancy.parkingOccupancy?null:a.dailyOccupancy.parkingOccupancy.length),e.xp6(2),e.Q6J("ngIf",null==a.dailyOccupancy.parkingOccupancyAverage?null:a.dailyOccupancy.parkingOccupancyAverage.length)}}function mt(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div",66)(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"h3",23),e._uU(6),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"button",55),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.showItem("dailyOccupancy",s.showDashbord.dailyOccupancy))}),e._UZ(9,"i",30),e.qZA(),e.TgZ(10,"button",24),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.dailyOccupancy.hidden=!s.dailyOccupancy.hidden)}),e._UZ(11,"i"),e.qZA()()()(),e.YNc(12,ht,8,3,"div",25),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(6),e.hij(" Daily Occupancy - ",e.xi3(7,5,a.dailyOccupancy.date,"d MMM")," "),e.xp6(5),e.Gre("la ",a.dailyOccupancy.hidden?"la-arrows":"la-minus-square",""),e.xp6(1),e.Q6J("ngIf",!a.dailyOccupancy.hidden)}}function gt(o,_){if(1&o&&e._UZ(0,"app-chart-legend",73),2&o){const a=e.oxw(3);e.Q6J("data",a.maxNormalSeasonalLots.occupancyLegend)("display",a.lineLegend)("horizontal",!0)("colors",a.occupancyColorScheme.domain)}}function ut(o,_){if(1&o&&e._UZ(0,"app-charts-bar-vertical-2d",80),2&o){const a=e.oxw(3);e.Q6J("scheme",a.occupancyColorScheme)("results",a.maxNormalSeasonalLots.parkingOccupancy)("gradient",!1)("xAxis",!0)("groupPadding",3)("yScaleMax",a.maxNormalSeasonalLots.maxYAxisOccupancy)("yAxis",!0)("showRefLines",!0)("showRefLabels",!1)("referenceLines",a.maxNormalSeasonalLots.referenceLines)}}function _t(o,_){if(1&o&&e._UZ(0,"app-charts-bar-vertical-2d",81),2&o){const a=e.oxw(3);e.Q6J("scheme",a.occupancyColorScheme)("results",a.maxNormalSeasonalLots.parkingOccupancyAverage)("gradient",!1)("xAxis",!0)("yAxis",!0)("groupPadding",a.maxNormalSeasonalLots.barPadding)("yScaleMax",a.maxNormalSeasonalLots.maxYAxisOccupancy)("showRefLines",!0)("showRefLabels",!1)("referenceLines",a.maxNormalSeasonalLots.referenceLines)}}function vt(o,_){if(1&o&&(e.TgZ(0,"div",34)(1,"div",49),e.YNc(2,gt,1,4,"app-chart-legend",67),e.TgZ(3,"div",68)(4,"div",51),e.YNc(5,ut,1,10,"app-charts-bar-vertical-2d",78),e.qZA(),e.TgZ(6,"div",71),e.YNc(7,_t,1,10,"app-charts-bar-vertical-2d",79),e.qZA()()()()),2&o){const a=e.oxw(2);e.xp6(2),e.Q6J("ngIf",a.maxNormalSeasonalLots.parkingOccupancy),e.xp6(3),e.Q6J("ngIf",null==a.maxNormalSeasonalLots.parkingOccupancy?null:a.maxNormalSeasonalLots.parkingOccupancy.length),e.xp6(2),e.Q6J("ngIf",null==a.maxNormalSeasonalLots.parkingOccupancyAverage?null:a.maxNormalSeasonalLots.parkingOccupancyAverage.length)}}function xt(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div",66)(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"h3",23),e._uU(6," Max Normal/Seasonal Lots Occupancy "),e.qZA(),e.TgZ(7,"button",55),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.showItem("seasonal",s.showDashbord.seasonal))}),e._UZ(8,"i",30),e.qZA(),e.TgZ(9,"button",24),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.maxNormalSeasonalLots.hidden=!s.maxNormalSeasonalLots.hidden)}),e._UZ(10,"i"),e.qZA()()()(),e.YNc(11,vt,8,3,"div",25),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(10),e.Gre("la ",a.maxNormalSeasonalLots.hidden?"la-arrows":"la-minus-square",""),e.xp6(1),e.Q6J("ngIf",!a.maxNormalSeasonalLots.hidden)}}function yt(o,_){if(1&o&&(e.TgZ(0,"div",49),e._UZ(1,"ngx-charts-area-chart",84),e.qZA()),2&o){const a=e.oxw(3);e.xp6(1),e.Q6J("scheme",a.lineChartVioletScheme)("results",a.carParkRevenue)("gradient",!0)("xAxis",!0)("yAxis",!0)("showYAxisLabel",!0)}}function ft(o,_){if(1&o&&(e.TgZ(0,"div",34),e.YNc(1,yt,2,6,"div",83),e.qZA()),2&o){const a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",a.carParkRevenue)}}function Ct(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div",82)(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"h3",23),e._uU(6," Car Park Revenue "),e.qZA(),e.TgZ(7,"button",55),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.showItem("revenue",s.showDashbord.revenue))}),e._UZ(8,"i",30),e.qZA(),e.TgZ(9,"button",24),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.carParkRevenueHidden=!s.carParkRevenueHidden)}),e._UZ(10,"i"),e.qZA()()()(),e.YNc(11,ft,2,1,"div",25),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(10),e.Gre("la ",a.carParkRevenueHidden?"la-arrows":"la-minus-square",""),e.xp6(1),e.Q6J("ngIf",!a.carParkRevenueHidden)}}function bt(o,_){if(1&o&&(e.TgZ(0,"div",49),e._UZ(1,"ngx-charts-area-chart",86),e.qZA()),2&o){const a=e.oxw(3);e.xp6(1),e.Q6J("scheme",a.lineChartColorScheme)("results",a.carParkTransactions)("gradient",!0)("xAxis",!0)("yAxis",!0)}}function Tt(o,_){if(1&o&&(e.TgZ(0,"div",34),e.YNc(1,bt,2,5,"div",83),e.qZA()),2&o){const a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",a.carParkTransactions)}}function Dt(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"div",85)(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"h3",23),e._uU(6," Car Park Transactions "),e.qZA(),e.TgZ(7,"button",55),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.showItem("transactions",s.showDashbord.transactions))}),e._UZ(8,"i",30),e.qZA(),e.TgZ(9,"button",24),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.carParkTransactionsHidden=!s.carParkTransactionsHidden)}),e._UZ(10,"i"),e.qZA()()()(),e.YNc(11,Tt,2,1,"div",25),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(10),e.Gre("la ",a.carParkTransactionsHidden?"la-arrows":"la-minus-square",""),e.xp6(1),e.Q6J("ngIf",!a.carParkTransactionsHidden)}}function kt(o,_){if(1&o&&(e.TgZ(0,"div",85)(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"h3",23),e._uU(6," Heat Map "),e.qZA(),e.TgZ(7,"button",87),e._UZ(8,"i",30),e.qZA(),e.TgZ(9,"button",88),e._UZ(10,"i"),e.qZA()()()(),e.TgZ(11,"div",34)(12,"div",49),e._UZ(13,"div",89),e.qZA()()()()),2&o){const a=e.oxw();e.xp6(10),e.Gre("la ",a.carParkTransactionsHidden?"la-arrows":"la-minus-square","")}}function At(o,_){1&o&&(e.TgZ(0,"div",34)(1,"div",49),e._UZ(2,"downtime-tracking"),e.qZA()())}function St(o,_){if(1&o){const a=e.EpF();e.TgZ(0,"app-compare-form",90),e.NdJ("cancel",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.modalRef.hide())})("submit",function(s){e.CHM(a);const l=e.oxw();return e.KtG(l.goCompare(s))}),e.qZA()}if(2&o){const a=e.oxw();e.Q6J("carParks",a.carparks)}}let Ot=(()=>{class o{constructor(a,n,s,l,D){this.router=a,this.statisticService=n,this.carparkService=s,this.translate=l,this.modalService=D,this.resizeEvent$=new F.xQ,this.selectedCarParkId=null,this.timeRange={value:[h.ou.local().minus({weeks:1}).toJSDate(),new Date],type:r.Nxg.Day},this.barPadding=30,this.barDefaultWidth=12,this.fromCarParks=[],this.toCarParks=[],this.fromCarParkId=null,this.toCarParkId=null,this.dashBoardItem=null,this.compareTimeRange={value:[new Date,new Date],type:r.Nxg.Month},this.displayPercentLegend=r.$lo,this.colorScheme={domain:r.DMY},this.occupancyColorScheme={domain:[r.F1,r.Ms$]},this.lineChartColorScheme={domain:[r.Ms$]},this.lineChartVioletScheme={domain:[r.F1]},this.faultChartColorScheme={domain:[r.cEj]},this.occupancyLegend=[{name:"Hourly",color:r.Ms$},{name:"Season",color:r.F1}],this.dailyOccupancyLegend=[{name:"Hourly",color:r.Ms$},{name:"Season",color:r.F1}],this.maxYAxisOccupancy=100,this.chartView=[140,140],this.bsConfig={containerClass:"theme-light",showWeekNumbers:!1},this.vehicleIcon=r.mts,this.overallStatistic=null,this.parkingDurations=null,this.parkingVehicleTypes=null,this.carParkTransactions=null,this.carParkRevenue=null,this.carParkFaults=null,this.parkingOccupancy={parkingOccupancyAverage:null,parkingOccupancy:null,maxYAxisOccupancy:null,barPadding:30,lines:[],lineSchema:{domain:[r.F1,r.Ms$,r.K8l]},hidden:!1},this.dailyOccupancy={date:this.timeRange.value[1],parkingOccupancyAverage:null,parkingOccupancy:null,maxYAxisOccupancy:null,barPadding:30,lines:[],lineSchema:{domain:[r.F1,r.Ms$,r.K8l,r.cEj]},hidden:!1},this.maxNormalSeasonalLots={parkingOccupancyAverage:null,parkingOccupancy:null,maxYAxisOccupancy:null,barPadding:30,loading:!1,occupancyLegend:[{name:"Hourly",color:r.Ms$},{name:"Season",color:r.F1}],referenceLines:[],hidden:!1},this.showDashbord={totalBoard:!0,parking:!0,status:!0,analysis:!0,transactions:!0,revenue:!0,seasonal:!0,dailyOccupancy:!0,carparkOccupancy:!0},this.selectList=[],this.trackingTimeHidden=!1,this.content={stakeStatus:{chargingCnt:1,freeCnt:0,notAvailable:49}},this.watchlist=[{timestamp:"2021-04-25T23:00:00.816253Z",vehicle:"CR01240",Frequented:1},{timestamp:"2021-04-25T23:00:00.816253Z",vehicle:"CR01241",Frequented:2},{timestamp:"2021-04-25T23:00:00.816253Z",vehicle:"CR01242",Frequented:1},{timestamp:"2021-04-25T23:00:00.816253Z",vehicle:"CR01243",Frequented:3},{timestamp:"2021-04-25T23:00:00.816253Z",vehicle:"CR01244",Frequented:1},{timestamp:"2021-04-25T23:00:00.816253Z",vehicle:"CR01245",Frequented:4},{timestamp:"2021-04-25T23:00:00.816253Z",vehicle:"CR01246",Frequented:5},{timestamp:"2021-04-25T23:00:00.816253Z",vehicle:"CR01247",Frequented:1},{timestamp:"2021-04-25T23:00:00.816253Z",vehicle:"CR01248",Frequented:6},{timestamp:"2021-04-25T23:00:00.816253Z",vehicle:"CR01249",Frequented:1}],this.carparkOptions$=s.getSimpleList()}get params(){return{carParkIds:this.selectedCarParkId?this.selectedCarParkId:0,from:this.timeRange.value[0].toISOString(),to:this.timeRange.value[1].toISOString(),rangeType:this.timeRange.type}}onResize(a){this.resizeEvent$.next(a)}lineLegend(a){return a.name}calcBarPadding(a){return a?this.barChartElement.nativeElement.clientWidth/a-this.barDefaultWidth:0}calcMaxYAxisOccupancy(a){return 10*Math.ceil(Math.max(...a.map(n=>n.season+n.normal))/10)}reloadData(){this.statisticService.getOverallStatistics(this.params).subscribe(a=>{this.overallStatistic={...a,totalRevenue:{amount:a.totalRevenue.amount/100,currency:a.totalRevenue.currency},hourlyRevenue:{amount:a.hourlyRevenue.amount/100,currency:a.hourlyRevenue.currency},seasonRevenue:{amount:a.seasonRevenue.amount/100,currency:a.seasonRevenue.currency}}}),this.statisticService.getDurationStatistics(this.params).subscribe(a=>{this.parkingDurations=(0,r.BF0)((0,r.dGr)(a.parkingDurations))}),this.statisticService.getFaultStatistics(this.params).subscribe(a=>{this.carParkFaults=[(0,r.XNF)("Faults",a.carParkFaults)]}),this.statisticService.getRevenueStatistics(this.params).subscribe(a=>{const n=a.carParkRevenue.map(s=>({...s,value:s.value/100}));this.carParkRevenue=[(0,r.XNF)("Revenue",n)]}),this.statisticService.getTransactionStatistics(this.params).subscribe(a=>{this.carParkTransactions=[(0,r.XNF)("Transactions",a.carParkTransactions)]}),this.statisticService.getVehicleTypeStatistics(this.params).subscribe(a=>{this.parkingVehicleTypes=(0,r.BF0)((0,r.dGr)(a.parkingVehicleTypes))}),this.statisticService.getDailyOccupancyStatistics({...this.params,rangeType:r.Nxg.Month,to:this.dailyOccupancy.date.toISOString()}).pipe((0,w.q)(1)).subscribe(a=>{const n=(0,r._lv)(a.parkingOccupancy);this.dailyOccupancy.parkingOccupancyAverage=(0,r.ktj)(a.parkingOccupancy),this.dailyOccupancy.parkingOccupancy=n,this.dailyOccupancy.lines=[{name:"In",series:a.parkingInOut.map(s=>({name:s.title,value:s.in}))},{name:"Out",series:a.parkingInOut.map(s=>({name:s.title,value:s.out}))}],this.dailyOccupancy.maxYAxisOccupancy=this.calcMaxYAxisOccupancy(a.parkingOccupancy),this.dailyOccupancy.barPadding=this.calcBarPadding(a.parkingOccupancy.length)}),this.statisticService.getMaxNormalSeasonalLotsStatistics(this.params).pipe((0,w.q)(1)).subscribe(a=>{const n=(0,r._lv)(a.parkingOccupancy);this.maxNormalSeasonalLots.parkingOccupancyAverage=(0,r.ktj)(a.parkingOccupancy),this.maxNormalSeasonalLots.parkingOccupancy=n,this.maxNormalSeasonalLots.maxYAxisOccupancy=this.calcMaxYAxisOccupancy(a.parkingOccupancy),this.maxNormalSeasonalLots.barPadding=this.calcBarPadding(a.parkingOccupancy.length),this.maxNormalSeasonalLots.referenceLines=[{value:a.slotNumberSeason,name:"Current Season Lots Settings"}]}),(0,H.aj)(this.statisticService.getOccupancyStatistics(this.params).pipe((0,w.q)(1)),this.statisticService.getOccupancyPrediction(this.params).pipe((0,w.q)(1))).subscribe(a=>{const n=(0,r._lv)(a[0].parkingOccupancy);this.parkingOccupancy.parkingOccupancyAverage=(0,r.ktj)(a[0].parkingOccupancy),this.parkingOccupancy.parkingOccupancy=n,this.parkingOccupancy.lines=[{name:"Prediction",series:a[0].parkingOccupancy.map(s=>{const l=a[1].parkingPrediction.findIndex(D=>D.title===s.title);return{name:s.title,value:l>-1?a[1].parkingPrediction[l].season+a[1].parkingPrediction[l].normal:0}})}],this.parkingOccupancy.maxYAxisOccupancy=this.calcMaxYAxisOccupancy([...a[0].parkingOccupancy,...a[1].parkingPrediction]),this.parkingOccupancy.barPadding=this.calcBarPadding(a[0].parkingOccupancy.length)})}goCompare(a){this.router.navigate([a.comparisonType===x.CarPark?"/dashboard/comparison/carparks":"/dashboard/comparison/range"],{queryParams:a}),this.modalRef.hide()}parkingOccupancyYAxisFormat(a){return a+"%"}changeDateRange(a){Array.isArray(a)||(this.timeRange=a,this.dailyOccupancy.date=a.value[1],this.reloadData())}changeCompareDateRange(a){this.compareTimeRange=a}openModal(a){this.modalRef=this.modalService.show(a,{class:"modal-compare"})}getChargingAnalysis(){this.statisticService.dashboardGetData().subscribe(a=>{if("10"===a.messageCode.slice(0,2)){this.content=a.data;const n=[],s=[],l=[],D=[],Y=[],q=this.content.chargeAnalyze,ae=["Charging","Idle","Unavailable"],z=["Power consumption","Charging Degree","Charging Amount","Charging Time"];for(let B=0;B<q.length;B++)n.push(q[B].xaxis),s.push(q[B].chargeCostAmount),D.push(q[B].chargeEnergy),l.push(q[B].chargeCount),Y.push(q[B].chargeTime);const{chargingCnt:Je,freeCnt:Ie,notAvailable:Ye}=this.content.stakeStatus,Fe=[{name:z[0],type:"line",data:l},{name:z[1],type:"line",data:D},{name:z[2],type:"line",data:s},{name:z[3],type:"line",data:Y}];this.option={color:["#2EC7C9","#5AB1EF","#D87A80"],legend:{orient:"horizontal",itemGap:70,itemHeight:6,top:0,bottom:20,data:ae,height:50,textStyle:{fontFamily:"Poppins",fontSize:13,color:"#868aa8"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)",textStyle:{fontFamily:"Poppins"}},series:[{name:"Evc Pile Status",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:Je,name:"Charging"},{value:Ie,name:"Idle"},{value:Ye,name:"Unavailable"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},normal:{label:{textStyle:{fontFamily:"Poppins"}}}},label:{normal:{formatter:"{b} : {c} ({d}%)"}}}]},this.analysisOption={tooltip:{trigger:"axis"},legend:{data:z},toolbox:{show:!0},xAxis:{type:"category",boundaryGap:!1,data:n},yAxis:{type:"value"},series:Fe}}},()=>{this.getChargingAnalysis_mock()})}getChargingAnalysis_mock(){const n=["Power Consumption","Charging Amount","Charging Time"],s=[{name:n[0],type:"line",data:[8,5,6,9]},{name:n[1],type:"line",data:[30,40,20,50]},{name:n[2],type:"line",data:[100,150,70,90]}];this.option={color:["#2EC7C9","#5AB1EF","#D87A80"],legend:{orient:"horizontal",itemGap:70,itemHeight:6,top:0,bottom:20,data:["Charging","Idle","Unavailable"],height:50,textStyle:{fontFamily:"Poppins",fontSize:13,color:"#868aa8"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)",textStyle:{fontFamily:"Poppins"}},series:[{name:"Evc Pile Status",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:10,name:"Charging"},{value:11,name:"Idle"},{value:12,name:"Unavailable"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},normal:{label:{textStyle:{fontFamily:"Poppins"}}}},label:{normal:{formatter:"{b} : {c} ({d}%)"}}}]},this.analysisOption={tooltip:{trigger:"axis"},legend:{data:n},toolbox:{show:!0},xAxis:{type:"category",boundaryGap:!1,data:["2021-02-15","2021-02-16","2021-02-17","2021-02-18"]},yAxis:{type:"value"},series:s}}getDefaultersOption(){const a=["Car Rark A","Car Rark B","Car Rark C","NIE","One-North"];this.defaultersOption={color:["#007082","#008ea5","#01b3cf","#5cd3e6","#84e1ef"],legend:{orient:"vertical",right:10,top:10},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)",textStyle:{fontFamily:"Poppins"}},series:[{name:"Top 5* for carparks",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:20,name:a[0]},{value:21,name:a[1]},{value:22,name:a[2]},{value:25,name:a[3]},{value:20,name:a[4]}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},normal:{label:{textStyle:{fontFamily:"Poppins"}}}},label:{normal:{show:!1,position:"inside",formatter:"{b} : {c} ({d}%)"}}}]}}getLeakageOption(){this.leakageOption={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:["Car Park A","Car Park B","Car Park C","NIE","One-North","Car Park D","Car Park E","Car Park F","NTU","Car Park"],axisTick:{alignWithLabel:!0},axisLabel:{interval:0,rotate:30}}],yAxis:[{type:"value"}],series:[{name:"Top 10 Carpark with Highest Revenue leakages",type:"bar",barWidth:"60%",data:[28,29,30,35,36,38,40,40,40,45]}]}}ngOnInit(){this.getChargingAnalysis(),this.reloadData(),this.hotmap(),this.statisticService.getDashboardFlag().subscribe(l=>{l.dashboardConfig&&(this.showDashbord=JSON.parse(l.dashboardConfig));for(let D in this.showDashbord)this.selectList.push({name:D,value:this.showDashbord[D]})});const a=this.occupancyLegend.map(l=>l.name);this.translate.get(a).subscribe(l=>{this.occupancyLegend.forEach(D=>{for(let Y in l)l.hasOwnProperty(Y)&&D.name===Y&&(D.name=l[Y])})});const n=this.dailyOccupancyLegend.map(l=>l.name);this.translate.get(n).subscribe(l=>{this.dailyOccupancyLegend.forEach(D=>{for(let Y in l)l.hasOwnProperty(Y)&&D.name===Y&&(D.name=l[Y])})});const s=this.maxNormalSeasonalLots.occupancyLegend.map(l=>l.name);this.translate.get(s).subscribe(l=>{this.maxNormalSeasonalLots.occupancyLegend.forEach(D=>{for(let Y in l)l.hasOwnProperty(Y)&&D.name===Y&&(D.name=l[Y])})}),this.getDefaultersOption(),this.getLeakageOption()}ngAfterViewInit(){}showItem(a,n){let s=this.showDashbord;s[a]=!n;const l=JSON.stringify(s);this.statisticService.putDashboardFlag({dashboardConfig:l}).subscribe(Y=>{this.showDashbord=JSON.parse(l),this.selectList.map(q=>{q.name===a&&(q.value=s[a])})})}selectOccupancy(a){this.dailyOccupancy.date=h.ou.fromFormat(a.series,"yyyyMMdd").toJSDate(),this.statisticService.getDailyOccupancyStatistics({...this.params,rangeType:r.Nxg.Month,to:this.dailyOccupancy.date.toISOString()}).pipe((0,w.q)(1)).subscribe(n=>{const s=(0,r._lv)(n.parkingOccupancy);this.dailyOccupancy.parkingOccupancyAverage=(0,r.ktj)(n.parkingOccupancy),this.dailyOccupancy.parkingOccupancy=s,this.dailyOccupancy.lines=[{name:"In",series:n.parkingInOut.map(l=>({name:l.title,value:l.in}))},{name:"Out",series:n.parkingInOut.map(l=>({name:l.title,value:l.out}))}],this.dailyOccupancy.maxYAxisOccupancy=this.calcMaxYAxisOccupancy(n.parkingOccupancy),this.dailyOccupancy.barPadding=this.calcBarPadding(n.parkingOccupancy.length)})}hotmap(){this.carparkService.filterModel({},{totalCount:0,rowsPerPage:999999,page:1,sortBy:null,descending:!0,totalPages:1}).subscribe(a=>{setTimeout(()=>{var n=new google.maps.Map(document.getElementById("HOT_MAPS"),{zoom:14,center:{lat:1.346987,lng:103.714679}});let s=a.data.map(l=>({location:new google.maps.LatLng(l.geopoint.lat,l.geopoint.lng),weight:(l.live?l.totalLots-l.live.availableLots-l.seasonLots:0)<=0?0:l.totalLots-l.live.availableLots-l.seasonLots}));new google.maps.visualization.HeatmapLayer({data:s,map:n,radius:30,maxIntensity:20})},1e3)})}}return o.\u0275fac=function(a){return new(a||o)(e.Y36(d.F0),e.Y36(g.B),e.Y36(Z.x),e.Y36(R.sK),e.Y36(M.tT))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-dashboard"]],viewQuery:function(a,n){if(1&a&&e.Gf(Ge,5),2&a){let s;e.iGM(s=e.CRH())&&(n.barChartElement=s.first)}},hostBindings:function(a,n){1&a&&e.NdJ("resize",function(l){return n.onResize(l)},!1,e.Jf7)},decls:45,vars:24,consts:[[1,"body-wrapper"],[1,"m-subheader"],[1,"align-items-center"],[1,"row","form-group","m-form__group"],[1,"col-form-label","col-lg-1","col-sm-6"],[1,"col-lg-2"],["nzSize","large","nzPlaceHolder","Please Select",1,"rounded",2,"width","100%",3,"ngModel","nzDropdownMatchSelectWidth","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[1,"col-form-label","col-xl-1","col-lg-2","col-sm-6","m--padding-right-0"],[1,"col-lg-3","col-sm-6"],[3,"data","select"],[3,"itemList","selListOut"],[1,"m-content"],[1,"row","general-statistics"],[3,"class",4,"ngIf"],["class","occupancy-statistics background-transparent",4,"ngIf"],["class","occupancy-statistics",4,"ngIf"],["class","revenue-statistics",4,"ngIf"],["class","transaction-statistics",4,"ngIf"],[1,"m-portlet"],[1,"m-portlet__head"],[1,"m-portlet__head-caption"],[1,"m-portlet__head-title","w-100"],[1,"m-portlet__head-text"],[1,"btn","btn-outline-main","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","m-btn--air","float-right","m--margin-top-20",3,"click"],["class","m-portlet__body",4,"ngIf"],["modal",""],[3,"nzValue","nzLabel"],[1,"felx-right"],[1,"btn","btn-outline-main","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","m-btn--air","float-right","m--margin-right-20",3,"click"],[1,"fa","fa-times"],[1,"row"],[1,"col-sm-6","m--padding-left-10","m--padding-right-10"],[1,"m-portlet","m--margin-bottom-20"],[1,"m-portlet__body"],[1,"card-statistics"],[1,"stats-title"],[1,"stats-value","text-main"],[1,"col-sm-6","m--padding-left-10"],[1,"stats-value","text-f1"],[1,"stats-value","text-f4"],[1,"stats-revenue-box"],[1,"stats-title-revenue"],[1,"col-sm-6","m--padding-right-10"],[1,"m-portlet","m-portlet--bordered-semi","card-stats-chart","parking-vehicle-chart"],[1,"m-portlet__head-title"],[3,"view","results","displayLegend"],[1,"m-portlet","m-portlet--bordered-semi","card-stats-chart","parking-duration-chart"],[1,"m-portlet__head-text","col-6"],[1,"stats-chart-container"],["echarts","",1,"demo-chart",3,"options"],[1,"col-10"],[1,"occupancy-statistics","background-transparent"],[1,"m-portlet","background-transparent"],[1,"m-portlet__head",2,"border-bottom","none"],[1,"btn","btn-outline-main","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","m-btn--air","float-right","m--margin-top-20","m--margin-left-20",3,"click"],["class","m-portlet__body","style","padding: 0;",4,"ngIf"],[1,"m-portlet__body",2,"padding","0"],[1,"table","table-striped",2,"border-collapse","separate","border-spacing","0px 10px"],[1,"",2,"color","#b6b9bd"],[1,"text-center"],["scope","col"],[4,"ngFor","ngForOf"],[1,"text-center","bg-white"],["scope","row",1,"py-4"],[1,"py-4"],[1,"occupancy-statistics"],[3,"data","display","horizontal","colors",4,"ngIf"],[1,"row","states-chart"],["barChartElement",""],[3,"scheme","results","lineChart","colorSchemeLine","gradient","xAxis","yAxis","barPadding","yScaleMax","select",4,"ngIf"],[1,"col-2","m--padding-0","bar-chart-avg"],[3,"scheme","results","gradient","xAxis","yAxis","barPadding","yScaleMax",4,"ngIf"],[3,"data","display","horizontal","colors"],[3,"scheme","results","lineChart","colorSchemeLine","gradient","xAxis","yAxis","barPadding","yScaleMax","select"],[3,"scheme","results","gradient","xAxis","yAxis","barPadding","yScaleMax"],[3,"scheme","results","lineChart","colorSchemeLine","gradient","xAxis","yAxis","barPadding","yScaleMax",4,"ngIf"],[3,"scheme","results","lineChart","colorSchemeLine","gradient","xAxis","yAxis","barPadding","yScaleMax"],[3,"scheme","results","gradient","xAxis","groupPadding","yScaleMax","yAxis","showRefLines","showRefLabels","referenceLines",4,"ngIf"],[3,"scheme","results","gradient","xAxis","yAxis","groupPadding","yScaleMax","showRefLines","showRefLabels","referenceLines",4,"ngIf"],[3,"scheme","results","gradient","xAxis","groupPadding","yScaleMax","yAxis","showRefLines","showRefLabels","referenceLines"],[3,"scheme","results","gradient","xAxis","yAxis","groupPadding","yScaleMax","showRefLines","showRefLabels","referenceLines"],[1,"revenue-statistics"],["class","stats-chart-container",4,"ngIf"],["yAxisLabel","(S$)",3,"scheme","results","gradient","xAxis","yAxis","showYAxisLabel"],[1,"transaction-statistics"],[3,"scheme","results","gradient","xAxis","yAxis"],[1,"btn","btn-outline-main","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","m-btn--air","float-right","m--margin-top-20","m--margin-left-20"],[1,"btn","btn-outline-main","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","m-btn--air","float-right","m--margin-top-20"],["id","HOT_MAPS",2,"width","100%","height","800px"],[3,"carParks","cancel","submit"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0),e._UZ(1,"app-title-bar"),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"label",4),e._uU(6," Car Park "),e.qZA(),e.TgZ(7,"div",5)(8,"nz-select",6),e.NdJ("ngModelChange",function(l){return n.selectedCarParkId=l})("ngModelChange",function(){return n.reloadData()}),e.YNc(9,Be,1,2,"nz-option",7),e.ALo(10,"async"),e.qZA()(),e.TgZ(11,"label",8),e._uU(12," Time Range "),e.qZA(),e.TgZ(13,"div",9)(14,"app-datepicker-tab",10),e.NdJ("select",function(l){return n.changeDateRange(l)}),e.qZA()(),e.TgZ(15,"show-dashboard",11),e.NdJ("selListOut",function(l){return n.showItem(l.name,!l.value)}),e.qZA()()()(),e.TgZ(16,"div",12)(17,"div",13),e.YNc(18,Ve,48,28,"div",14),e.YNc(19,Ke,23,9,"div",14),e.qZA(),e.TgZ(20,"div",13),e.YNc(21,je,13,7,"div",14),e.YNc(22,We,14,7,"div",14),e.qZA(),e.TgZ(23,"div",13),e.YNc(24,Xe,13,7,"div",14),e.YNc(25,et,14,7,"div",14),e.qZA(),e.YNc(26,it,12,4,"div",15),e.YNc(27,ct,12,4,"div",16),e.YNc(28,mt,13,8,"div",16),e.YNc(29,xt,12,4,"div",16),e.YNc(30,Ct,12,4,"div",17),e.YNc(31,Dt,12,4,"div",18),e.YNc(32,kt,14,3,"div",18),e.TgZ(33,"div")(34,"div",19)(35,"div",20)(36,"div",21)(37,"div",22)(38,"h3",23),e._uU(39," DownTime Tracking "),e.qZA(),e.TgZ(40,"button",24),e.NdJ("click",function(){return n.trackingTimeHidden=!n.trackingTimeHidden}),e._UZ(41,"i"),e.qZA()()()(),e.YNc(42,At,3,0,"div",25),e.qZA()()()(),e.YNc(43,St,1,1,"ng-template",null,26,e.W1O)),2&a&&(e.xp6(8),e.Q6J("ngModel",n.selectedCarParkId)("nzDropdownMatchSelectWidth",!1),e.xp6(1),e.Q6J("ngForOf",e.lcZ(10,22,n.carparkOptions$)),e.xp6(5),e.Q6J("data",n.timeRange),e.xp6(1),e.Q6J("itemList",n.selectList),e.xp6(3),e.Q6J("ngIf",n.showDashbord.totalBoard),e.xp6(1),e.Q6J("ngIf",n.showDashbord.parking),e.xp6(2),e.Q6J("ngIf",n.showDashbord.status),e.xp6(1),e.Q6J("ngIf",n.showDashbord.analysis),e.xp6(2),e.Q6J("ngIf",n.showDashbord.status),e.xp6(1),e.Q6J("ngIf",n.showDashbord.analysis),e.xp6(1),e.Q6J("ngIf",n.showDashbord.carparkOccupancy),e.xp6(1),e.Q6J("ngIf",n.showDashbord.carparkOccupancy),e.xp6(1),e.Q6J("ngIf",n.showDashbord.dailyOccupancy),e.xp6(1),e.Q6J("ngIf",n.showDashbord.seasonal),e.xp6(1),e.Q6J("ngIf",n.showDashbord.revenue),e.xp6(1),e.Q6J("ngIf",n.showDashbord.transactions),e.xp6(1),e.Q6J("ngIf",n.showDashbord.transactions),e.xp6(9),e.Gre("la ",n.trackingTimeHidden?"la-arrows":"la-minus-square",""),e.xp6(1),e.Q6J("ngIf",!n.trackingTimeHidden))},dependencies:[y.sg,y.O5,k.G,E.Ip,E.Vq,I.Uo,I._C,I.Om,I.p0,I.$Z,b.JJ,b.On,$.o,S.K,ce.J,ke,Ae.b,se._w,Se.r,Oe.X,U,m,qe,y.Ov,y.JJ,y.uU,$e.Z,R.X$],styles:[".states-chart[_ngcontent-%COMP%]{height:470px}.stats-revenue-box[_ngcontent-%COMP%]{padding-top:12px;padding-bottom:10px;padding-left:35px}.demo-chart[_ngcontent-%COMP%]{height:400px}.flex-column[_ngcontent-%COMP%]{display:flex;flex-direction:column}.felx-right[_ngcontent-%COMP%]{margin-bottom:10px;justify-content:flex-end;visibility:hidden;position:absolute;right:0;top:-50px}.flex-column[_ngcontent-%COMP%]:hover   .felx-right[_ngcontent-%COMP%]{visibility:visible}.background-transparent[_ngcontent-%COMP%]{background:transparent;box-shadow:none}[_nghost-%COMP%]     .ant-select-single.ant-select-lg:not(.ant-select-customize-input) .ant-select-selector{border-radius:30px}"]}),o})()},34984:(G,Q,p)=>{p.d(Q,{Ns:()=>S,_w:()=>P});var r=p(15861),h=p(94650),F=p(21086),H=p(68896),w=p(8929),e=p(20353),Z=p(34202),M=p(66753),R=p(87545);class y{constructor(L){this.changes=L}static of(L){return new y(L)}notEmpty(L){if(this.changes[L]){const f=this.changes[L].currentValue;if(null!=f)return(0,F.of)(f)}return H.E}has(L){return this.changes[L]?(0,F.of)(this.changes[L].currentValue):H.E}notFirst(L){return this.changes[L]&&!this.changes[L].isFirstChange()?(0,F.of)(this.changes[L].currentValue):H.E}notFirstAndEmpty(L){if(this.changes[L]&&!this.changes[L].isFirstChange()){const f=this.changes[L].currentValue;if(null!=f)return(0,F.of)(f)}return H.E}}const b=new h.OlP("NGX_ECHARTS_CONFIG");let P=(()=>{class C{constructor(f,t,x){this.el=t,this.ngZone=x,this.autoResize=!0,this.loadingType="default",this.chartInit=new h.vpe,this.optionsError=new h.vpe,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartPieSelectChanged=this.createLazyEvent("pieselectchanged"),this.chartPieSelected=this.createLazyEvent("pieselected"),this.chartPieUnselected=this.createLazyEvent("pieunselected"),this.chartMapSelectChanged=this.createLazyEvent("mapselectchanged"),this.chartMapSelected=this.createLazyEvent("mapselected"),this.chartMapUnselected=this.createLazyEvent("mapunselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartFocusNodeAdjacency=this.createLazyEvent("focusnodeadjacency"),this.chartUnfocusNodeAdjacency=this.createLazyEvent("unfocusnodeadjacency"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.resize$=new w.xQ,this.echarts=f.echarts}ngOnChanges(f){const t=y.of(f);t.notFirstAndEmpty("options").subscribe(x=>this.onOptionsChange(x)),t.notFirstAndEmpty("merge").subscribe(x=>this.setOption(x)),t.has("loading").subscribe(x=>this.toggleLoading(!!x)),t.notFirst("theme").subscribe(()=>this.refreshChart())}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe((0,M.p)(100,e.z,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(()=>{this.animationFrameID=window.requestAnimationFrame(()=>this.resize$.next())})),this.resizeOb.observe(this.el.nativeElement))}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(f){this.chart&&(f?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading())}setOption(f,t){if(this.chart)try{this.chart.setOption(f,t)}catch(x){console.error(x),this.optionsError.emit(x)}}refreshChart(){var f=this;return(0,r.Z)(function*(){f.dispose(),yield f.initChart()})()}createChart(){const f=this.el.nativeElement;if(window&&window.getComputedStyle){const t=window.getComputedStyle(f,null).getPropertyValue("height");(!t||"0px"===t)&&(!f.style.height||"0px"===f.style.height)&&(f.style.height="400px")}return this.ngZone.runOutsideAngular(()=>("function"==typeof this.echarts?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:x})=>x(f,this.theme,this.initOpts)))}initChart(){var f=this;return(0,r.Z)(function*(){yield f.onOptionsChange(f.options),f.merge&&f.chart&&f.setOption(f.merge)})()}onOptionsChange(f){var t=this;return(0,r.Z)(function*(){!f||(t.chart||(t.chart=yield t.createChart(),t.chartInit.emit(t.chart)),t.setOption(t.options,!0))})()}createLazyEvent(f){return this.chartInit.pipe((0,R.w)(t=>new Z.y(x=>(t.on(f,U=>this.ngZone.run(()=>x.next(U))),()=>{this.chart&&(this.chart.isDisposed()||t.off(f))}))))}}return C.\u0275fac=function(f){return new(f||C)(h.Y36(b),h.Y36(h.SBq),h.Y36(h.R0b))},C.\u0275dir=h.lG2({type:C,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",loading:"loading",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartPieSelectChanged:"chartPieSelectChanged",chartPieSelected:"chartPieSelected",chartPieUnselected:"chartPieUnselected",chartMapSelectChanged:"chartMapSelectChanged",chartMapSelected:"chartMapSelected",chartMapUnselected:"chartMapUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartFocusNodeAdjacency:"chartFocusNodeAdjacency",chartUnfocusNodeAdjacency:"chartUnfocusNodeAdjacency",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],features:[h.TTD]}),C})(),S=(()=>{class C{static forRoot(f){return{ngModule:C,providers:[{provide:b,useValue:f}]}}static forChild(){return{ngModule:C}}}return C.\u0275fac=function(f){return new(f||C)},C.\u0275mod=h.oAB({type:C}),C.\u0275inj=h.cJS({}),C})()}}]);