"use strict";(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[8069],{68069:(_n,O,s)=>{s.r(O),s.d(O,{BusDepotsModule:()=>un,createTranslateLoader:()=>ot,routes:()=>at});var d=s(36895),P=s(80529),u=s(34793),Z=s(60097),it=s(91599),rt=s(42684),lt=s(51766),I=s(31289),st=s(4666),N=s(73071),A=s(71942),S=s(30329),m=s(89383),Q=s(19832),pt=s(97640),ct=s(59245),dt=s(21532),mt=s(59501),b=s(82174),j=s(61643),c=s(24006),H=s(76284),ut=s(64870),_t=s(372),Y=s(36511),gt=s(24277),ft=s(3108),B=s(88796),ht=s(22630),G=s(67556),K=s(70853),$=s(37096),xt=s(44466),t=s(94650);function Zt(n){return new Q.w(n,"../assets/i18n/",".json")}let bt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[Y.I,H.z,ut.P,G.z$,K.Z],imports:[d.ez,c.u5,S.D,_t.kn,b.su,j.r,ft._,u.Bz,B.A0,gt.p,ht.z,m.aw.forChild({loader:{provide:m.Zw,useFactory:Zt,deps:[P.eN]}}),$.Zf,xt.m]}),n})();var p=s(38014),z=s(8929),E=s(1059),R=s(80013),V=s(75778),T=s(2994),W=s(87545),X=s(88117),M=s(72986),C=s(20388),vt=s(67869),Tt=s(21838);function Ct(n,i){1&n&&(t.TgZ(0,"div",59),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Field is required.")," "))}function At(n,i){1&n&&(t.TgZ(0,"div",59),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Field is required.")," "))}function Mt(n,i){1&n&&(t.TgZ(0,"div",59),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Field is required.")," "))}function wt(n,i){1&n&&(t.TgZ(0,"div",59),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Field is required.")," "))}function Lt(n,i){if(1&n&&(t.TgZ(0,"option",60),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&n){const e=i.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",t.lcZ(2,2,e.value)," ")}}function kt(n,i){1&n&&(t.TgZ(0,"div",59),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Field is required.")," "))}function Dt(n,i){if(1&n&&(t.TgZ(0,"option",60),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&n){const e=i.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",t.lcZ(2,2,e.value)," ")}}function qt(n,i){1&n&&(t.TgZ(0,"div",59),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Field is required.")," "))}function yt(n,i){1&n&&(t.TgZ(0,"div",61),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Field is required.")," "))}function Ut(n,i){1&n&&(t.TgZ(0,"div",59),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Field is required.")," "))}function Ft(n,i){1&n&&(t.TgZ(0,"div",59),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Field is required.")," "))}function Jt(n,i){1&n&&(t.TgZ(0,"div",59),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Field is required.")," "))}function Ot(n,i){1&n&&(t.TgZ(0,"div",59),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Field is required.")," "))}function Pt(n,i){1&n&&(t.TgZ(0,"div",59),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Field is required.")," "))}function It(n,i){1&n&&(t.TgZ(0,"div",59),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Field is required.")," "))}function Nt(n,i){1&n&&(t.TgZ(0,"div",59),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Field is required.")," "))}function St(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",62),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.cancel())}),t._UZ(1,"i",63),t._uU(2),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" ",e.cancelText," ")}}function Qt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",64)(1,"h4",65),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",66),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.bsModalRef.hide())}),t.TgZ(5,"span",67),t._uU(6,"\xd7"),t.qZA()()(),t.TgZ(7,"div",68)(8,"agm-map",69),t.NdJ("mapClick",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.changeLocationPicker(a))}),t._UZ(9,"agm-marker",70),t.qZA()(),t.TgZ(10,"div",71)(11,"button",72),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.bsModalRef.hide())}),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"button",73),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.doPickLocation())}),t._uU(15),t.ALo(16,"translate"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,10,"Pick Location")),t.xp6(6),t.Q6J("latitude",null==e.locationPicker.center?null:e.locationPicker.center.lat)("longitude",null==e.locationPicker.center?null:e.locationPicker.center.lng)("zoom",e.locationPicker.zoom)("fullscreenControl",!0),t.xp6(1),t.Q6J("latitude",null==e.locationPicker.marker?null:e.locationPicker.marker.lat)("longitude",null==e.locationPicker.marker?null:e.locationPicker.marker.lng)("title","Location"),t.xp6(3),t.hij(" ",t.lcZ(13,12,"Close")," "),t.xp6(3),t.hij(" ",t.lcZ(16,14,"OK")," ")}}const jt=function(){return{standalone:!0}};let Ht=(()=>{class n{constructor(e,o,a,r,l,_){this.userService=e,this.codeTablesService=o,this.bsModalService=a,this.bsModalRef=r,this.assetsService=l,this.translate=_,this.submitText="Submit",this.form=(0,p.aq7)(),this.submitted=new t.vpe,this.canceled=new t.vpe,this.ownerInput$=new z.xQ,this.operatorInput$=new z.xQ,this.locationPicker={zoom:2,center:{},marker:{}},this.mondayHour=(0,p.wZt)(p.jjc.Monday),this.tuesdayHour=(0,p.wZt)(p.jjc.Tuesday),this.wednesdayHour=(0,p.wZt)(p.jjc.Wednesday),this.thursdayHour=(0,p.wZt)(p.jjc.Thursday),this.fridayHour=(0,p.wZt)(p.jjc.Friday),this.saturdayHour=(0,p.wZt)(p.jjc.Saturday),this.sundayHour=(0,p.wZt)(p.jjc.Sunday),this.publicHolidayHour=(0,p.wZt)(p.jjc.PublicHoliday)}ngOnInit(){this.owner$=this.ownerInput$.pipe((0,E.O)(""),(0,R.b)(200),(0,V.x)(),(0,T.b)(()=>this.ownerLoading=!0),(0,W.w)(e=>this.userService.searchOwners(e).pipe((0,T.b)(()=>this.ownerLoading=!1))),(0,X.B)()),this.owner$.pipe((0,M.q)(1)).subscribe(e=>this.form.carParkOwnerId=this.form.carParkOwnerId||e[0]&&e[0].id),this.operator$=this.operatorInput$.pipe((0,E.O)(""),(0,R.b)(200),(0,V.x)(),(0,T.b)(()=>this.operatorLoading=!0),(0,W.w)(e=>this.userService.searchOperators(e).pipe((0,T.b)(()=>this.operatorLoading=!1))),(0,X.B)()),this.operator$.pipe((0,M.q)(1)).subscribe(e=>this.form.carParkOperatorId=this.form.carParkOperatorId||e[0]&&e[0].id),this.carParkTypeOptions$=this.codeTablesService.filterModelByType(p.BcL.Carpark),this.carParkGroupOptions$=this.codeTablesService.filterModelByType(p.BcL.CarparkGroup),window.navigator.geolocation&&window.navigator.geolocation.getCurrentPosition(({coords:e})=>{this.locationPicker={...this.locationPicker,zoom:10,center:{lat:e.latitude,lng:e.longitude},marker:{lat:e.latitude,lng:e.longitude}}})}cancel(){this.canceled.emit()}submit(e){return this.form={...this.form,totalPower:Number(this.form.totalPower)},e.valid&&this.submitted.emit(this.form)}openLocationPicker(e){this.bsModalRef=this.bsModalService.show(e)}changeLocationPicker({coords:e}){this.locationPicker={...this.locationPicker,marker:e}}doPickLocation(){this.form={...this.form,geopoint:this.locationPicker.marker},this.bsModalRef.hide()}onImageChanged(e){this.assetsService.uploadImage(e).subscribe(o=>this.form.images[0]?this.form.images[0].carParkImage=o:this.form.images=[{carParkImage:o}])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(N.K),t.Y36(Y.I),t.Y36(C.tT),t.Y36(C.UZ),t.Y36(H.z),t.Y36(m.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-depot-form-basic"]],inputs:{submitText:"submitText",cancelText:"cancelText",form:"form"},outputs:{submitted:"submitted",canceled:"canceled"},decls:211,vars:125,consts:[[1,"m-form","m-form--fit","m-form--label-align-right",3,"ngSubmit"],["formRef","ngForm"],[1,"m-portlet__head"],[1,"m-portlet__head-caption"],[1,"m-portlet__head-title"],[1,"m-portlet__head-text"],[1,"m-portlet__body"],[1,"form-group","m-form__group","row"],[1,"col-form-label","col-lg-2","col-sm-12"],[1,"col-md-10","col-sm-12"],[3,"image","imageChanged"],[1,"row","form-group","m-form__group"],[1,"m--font-danger"],[1,"col-lg-4","col-sm-12"],["name","owner","bindLabel","name","bindValue","id","required","",3,"items","ngModel","typeahead","loading","ngModelChange"],["ownerRef","ngModel"],["class","form-control-feedback",4,"ngIf"],["name","operator","bindLabel","name","bindValue","id","required","",3,"items","ngModel","typeahead","loading","ngModelChange"],["operatorRef","ngModel"],["type","text","name","code","required","",1,"form-control","m-input",3,"ngModel","ngModelChange"],["carParkCodeRef","ngModel"],["type","text","name","name","required","",1,"form-control","m-input",3,"ngModel","ngModelChange"],["nameRef","ngModel"],["name","carParkType","required","",1,"form-control","m-input",3,"ngModel","ngModelChange"],["carParkTypeRef","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["name","carParkGroup","required","",1,"form-control","m-input",3,"ngModel","ngModelChange"],["groupRef","ngModel"],[1,"col","m--align-left","mt-2"],[1,"m-checkbox"],["type","checkbox","name","indoor",3,"ngModel","ngModelChange"],["indoor","ngModel"],["type","checkbox","name","chargingPile",3,"ngModel","ngModelChange"],["chargingPile","ngModel"],[1,"row","form-group","m-form__group",3,"hidden"],["att-numberonly","","name","totalPower","required","",1,"w-100",3,"ngModel","nzMin","nzStep","nzPrecision","ngModelOptions","nzPrecisionMode","ngModelChange"],["totalPowerRef","ngModel"],["style","color:red;","class","form-control-feedback",4,"ngIf"],["type","text","name","address","required","",1,"form-control","m-input",3,"ngModel","ngModelChange"],["addressRef","ngModel"],["type","text","name","postalCode","required","",1,"form-control","m-input",3,"ngModel","ngModelChange"],["postalCodeRef","ngModel"],["type","text","name","latitude","required","",1,"form-control","m-input",3,"ngModel","ngModelChange"],["latitudeRef","ngModel"],["type","text","name","longitude","required","",1,"form-control","m-input",3,"ngModel","ngModelChange"],["longitudeRef","ngModel"],[1,"col","m--align-right","btn-sm","m--margin-top-20"],[1,"btn","btn-main",3,"click"],["type","text","name","rateDisplay","required","",1,"form-control","m-input",3,"ngModel","ngModelChange"],["rateDisplayRef","ngModel"],["type","text","name","seasonRateDisplay","required","",1,"form-control","m-input",3,"ngModel","ngModelChange"],["seasonRateDisplayRef","ngModel"],["type","text","name","openingHourDisplay","required","",1,"form-control","m-input",3,"ngModel","ngModelChange"],["openingHourDisplayRef","ngModel"],[1,"m-form__actions","m-form__actions--right"],["class","btn btn-outline-main",3,"click",4,"ngIf"],["type","submit",1,"btn","btn-main","m--margin-left-30"],["locationPickerRef",""],[1,"form-control-feedback"],[3,"value"],[1,"form-control-feedback",2,"color","red"],[1,"btn","btn-outline-main",3,"click"],[1,"la","la-arrow-left"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[2,"height","400px",3,"latitude","longitude","zoom","fullscreenControl","mapClick"],[3,"latitude","longitude","title"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-main",3,"click"],["type","button",1,"btn","btn-main",3,"click"]],template:function(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"form",0,1),t.NdJ("ngSubmit",function(){t.CHM(a);const l=t.MAs(1);return t.KtG(o.submit(l))}),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),t._uU(6),t.ALo(7,"translate"),t.qZA()()()(),t.TgZ(8,"div",6)(9,"div",7)(10,"label",8),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",9)(14,"app-image-input",10),t.NdJ("imageChanged",function(l){return o.onImageChanged(l)}),t.qZA()()(),t.TgZ(15,"div",11)(16,"label",8)(17,"span",12),t._uU(18,"*"),t.qZA(),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"div",13)(22,"ng-select",14,15),t.NdJ("ngModelChange",function(l){return o.form.carParkOwnerId=l}),t.ALo(24,"async"),t.qZA(),t.YNc(25,Ct,3,3,"div",16),t.qZA(),t.TgZ(26,"label",8)(27,"span",12),t._uU(28,"*"),t.qZA(),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"div",13)(32,"ng-select",17,18),t.NdJ("ngModelChange",function(l){return o.form.carParkOperatorId=l}),t.ALo(34,"async"),t.qZA(),t.YNc(35,At,3,3,"div",16),t.qZA()(),t.TgZ(36,"div",11)(37,"label",8)(38,"span",12),t._uU(39,"*"),t.qZA(),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"div",13)(43,"input",19,20),t.NdJ("ngModelChange",function(l){return o.form.carParkCode=l}),t.qZA(),t.YNc(45,Mt,3,3,"div",16),t.qZA(),t.TgZ(46,"label",8)(47,"span",12),t._uU(48,"*"),t.qZA(),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.TgZ(51,"div",13)(52,"input",21,22),t.NdJ("ngModelChange",function(l){return o.form.name=l}),t.qZA(),t.YNc(54,wt,3,3,"div",16),t.qZA()(),t.TgZ(55,"div",11)(56,"label",8)(57,"span",12),t._uU(58,"*"),t.qZA(),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"div",13)(62,"select",23,24),t.NdJ("ngModelChange",function(l){return o.form.carParkTypeId=l}),t.TgZ(64,"option",25),t._uU(65),t.ALo(66,"translate"),t.qZA(),t.YNc(67,Lt,3,4,"option",26),t.ALo(68,"async"),t.qZA(),t.YNc(69,kt,3,3,"div",16),t.qZA(),t.TgZ(70,"label",8)(71,"span",12),t._uU(72,"*"),t.qZA(),t._uU(73),t.ALo(74,"translate"),t.qZA(),t.TgZ(75,"div",13)(76,"select",27,28),t.NdJ("ngModelChange",function(l){return o.form.carParkGroupId=l}),t.TgZ(78,"option",25),t._uU(79),t.ALo(80,"translate"),t.qZA(),t.YNc(81,Dt,3,4,"option",26),t.ALo(82,"async"),t.qZA(),t.YNc(83,qt,3,3,"div",16),t.qZA()(),t.TgZ(84,"div",11)(85,"label",8)(86,"span",12),t._uU(87,"*"),t.qZA(),t._uU(88),t.ALo(89,"translate"),t.qZA(),t.TgZ(90,"div",13)(91,"div",29)(92,"label",30)(93,"input",31,32),t.NdJ("ngModelChange",function(l){return o.form.indoor=l}),t.qZA(),t._UZ(95,"span"),t.qZA()()(),t.TgZ(96,"label",8)(97,"span",12),t._uU(98,"*"),t.qZA(),t._uU(99),t.ALo(100,"translate"),t.qZA(),t.TgZ(101,"div",13)(102,"div",29)(103,"label",30)(104,"input",33,34),t.NdJ("ngModelChange",function(l){return o.form.chargingPile=l}),t.qZA(),t._UZ(106,"span"),t.qZA()()()(),t.TgZ(107,"div",35)(108,"label",8)(109,"span",12),t._uU(110,"*"),t.qZA(),t._uU(111),t.ALo(112,"translate"),t.qZA(),t.TgZ(113,"div",13)(114,"nz-input-number",36,37),t.NdJ("ngModelChange",function(l){return o.form.totalPower=l}),t.qZA(),t.YNc(116,yt,3,3,"div",38),t.qZA()()(),t.TgZ(117,"div",2)(118,"div",3),t._UZ(119,"hr"),t.TgZ(120,"div",4)(121,"h3",5),t._uU(122),t.ALo(123,"translate"),t.qZA()()()(),t.TgZ(124,"div",6)(125,"div",11)(126,"label",8)(127,"span",12),t._uU(128,"*"),t.qZA(),t._uU(129),t.ALo(130,"translate"),t.qZA(),t.TgZ(131,"div",13)(132,"input",39,40),t.NdJ("ngModelChange",function(l){return o.form.address.address=l}),t.qZA(),t.YNc(134,Ut,3,3,"div",16),t.qZA(),t.TgZ(135,"label",8)(136,"span",12),t._uU(137,"*"),t.qZA(),t._uU(138),t.ALo(139,"translate"),t.qZA(),t.TgZ(140,"div",13)(141,"input",41,42),t.NdJ("ngModelChange",function(l){return o.form.address.postalCode=l}),t.qZA(),t.YNc(143,Ft,3,3,"div",16),t.qZA()(),t.TgZ(144,"div",11)(145,"label",8)(146,"span",12),t._uU(147,"*"),t.qZA(),t._uU(148),t.ALo(149,"translate"),t.qZA(),t.TgZ(150,"div",13)(151,"input",43,44),t.NdJ("ngModelChange",function(l){return o.form.geopoint.lat=l}),t.qZA(),t.YNc(153,Jt,3,3,"div",16),t.qZA(),t.TgZ(154,"label",8)(155,"span",12),t._uU(156,"*"),t.qZA(),t._uU(157),t.ALo(158,"translate"),t.qZA(),t.TgZ(159,"div",13)(160,"input",45,46),t.NdJ("ngModelChange",function(l){return o.form.geopoint.lng=l}),t.qZA(),t.YNc(162,Ot,3,3,"div",16),t.qZA(),t.TgZ(163,"div",47)(164,"button",48),t.NdJ("click",function(){t.CHM(a);const l=t.MAs(210);return t.KtG(o.openLocationPicker(l))}),t._uU(165),t.ALo(166,"translate"),t.qZA()()()(),t.TgZ(167,"div",2)(168,"div",3),t._UZ(169,"hr"),t.TgZ(170,"div",4)(171,"h3",5),t._uU(172),t.ALo(173,"translate"),t.qZA()()()(),t.TgZ(174,"div",6)(175,"div",11)(176,"label",8)(177,"span",12),t._uU(178,"*"),t.qZA(),t._uU(179),t.ALo(180,"translate"),t.qZA(),t.TgZ(181,"div",13)(182,"input",49,50),t.NdJ("ngModelChange",function(l){return o.form.rateDisplay=l}),t.qZA(),t.YNc(184,Pt,3,3,"div",16),t.qZA()(),t.TgZ(185,"div",11)(186,"label",8)(187,"span",12),t._uU(188,"*"),t.qZA(),t._uU(189),t.ALo(190,"translate"),t.qZA(),t.TgZ(191,"div",13)(192,"input",51,52),t.NdJ("ngModelChange",function(l){return o.form.seasonRateDisplay=l}),t.qZA(),t.YNc(194,It,3,3,"div",16),t.qZA()(),t.TgZ(195,"div",11)(196,"label",8)(197,"span",12),t._uU(198,"*"),t.qZA(),t._uU(199),t.ALo(200,"translate"),t.qZA(),t.TgZ(201,"div",13)(202,"input",53,54),t.NdJ("ngModelChange",function(l){return o.form.openingHourDisplay=l}),t.qZA(),t.YNc(204,Nt,3,3,"div",16),t.qZA()()(),t.TgZ(205,"div",55),t.YNc(206,St,3,1,"button",56),t.TgZ(207,"button",57),t._uU(208),t.qZA()()(),t.YNc(209,Qt,17,16,"ng-template",null,58,t.W1O)}if(2&e){const a=t.MAs(1),r=t.MAs(23),l=t.MAs(33),_=t.MAs(44),f=t.MAs(53),h=t.MAs(63),w=t.MAs(77),L=t.MAs(115),k=t.MAs(133),D=t.MAs(142),q=t.MAs(152),y=t.MAs(161),U=t.MAs(183),F=t.MAs(193),J=t.MAs(203);t.xp6(6),t.hij(" ",t.lcZ(7,70,"Basic Info")," "),t.xp6(5),t.hij(" ",t.lcZ(12,72,"Profile Picture"),": "),t.xp6(3),t.Q6J("image",null==o.form.images[0]?null:o.form.images[0].carParkImage),t.xp6(5),t.hij(" ",t.lcZ(20,74,"Depot Owner"),": "),t.xp6(3),t.Q6J("items",t.lcZ(24,76,o.owner$))("ngModel",o.form.carParkOwnerId)("typeahead",o.ownerInput$)("loading",o.ownerLoading),t.xp6(3),t.Q6J("ngIf",r.invalid&&(r.dirty||r.touched||a.submitted)),t.xp6(4),t.hij(" ",t.lcZ(30,78,"Depot Operator"),": "),t.xp6(3),t.Q6J("items",t.lcZ(34,80,o.operator$))("ngModel",o.form.carParkOperatorId)("typeahead",o.operatorInput$)("loading",o.operatorLoading),t.xp6(3),t.Q6J("ngIf",l.invalid&&(l.dirty||l.touched||a.submitted)),t.xp6(5),t.hij(" ",t.lcZ(41,82,"Depot No."),": "),t.xp6(3),t.Q6J("ngModel",o.form.carParkCode),t.xp6(2),t.Q6J("ngIf",_.invalid&&(_.dirty||_.touched||a.submitted)),t.xp6(4),t.hij(" ",t.lcZ(50,84,"Depot Name"),": "),t.xp6(3),t.Q6J("ngModel",o.form.name),t.xp6(2),t.Q6J("ngIf",f.invalid&&(f.dirty||f.touched||a.submitted)),t.xp6(5),t.hij(" ",t.lcZ(60,86,"Depot Type"),": "),t.xp6(3),t.Q6J("ngModel",o.form.carParkTypeId),t.xp6(3),t.Oqu(t.lcZ(66,88,"Select")),t.xp6(2),t.Q6J("ngForOf",t.lcZ(68,90,o.carParkTypeOptions$)),t.xp6(2),t.Q6J("ngIf",h.invalid&&(h.dirty||h.touched||a.submitted)),t.xp6(4),t.hij(" ",t.lcZ(74,92,"Depot Group"),": "),t.xp6(3),t.Q6J("ngModel",o.form.carParkGroupId),t.xp6(3),t.Oqu(t.lcZ(80,94,"Select")),t.xp6(2),t.Q6J("ngForOf",t.lcZ(82,96,o.carParkGroupOptions$)),t.xp6(2),t.Q6J("ngIf",w.invalid&&(w.dirty||w.touched||a.submitted)),t.xp6(5),t.hij(" ",t.lcZ(89,98,"Indoor Parking"),": "),t.xp6(5),t.Q6J("ngModel",o.form.indoor),t.xp6(6),t.hij(" ",t.lcZ(100,100,"Charging Parking"),": "),t.xp6(5),t.Q6J("ngModel",o.form.chargingPile),t.xp6(3),t.Q6J("hidden",!o.form.chargingPile),t.xp6(4),t.hij(" ",t.lcZ(112,102,"Total Power Available (A)"),": "),t.xp6(3),t.Q6J("ngModel",o.form.totalPower)("nzMin",0)("nzStep",.1)("nzPrecision",4)("ngModelOptions",t.DdM(124,jt))("nzPrecisionMode","cut"),t.xp6(2),t.Q6J("ngIf",L.invalid&&(L.dirty||L.touched||a.submitted)),t.xp6(6),t.hij(" ",t.lcZ(123,104,"Location")," "),t.xp6(7),t.hij(" ",t.lcZ(130,106,"Address"),": "),t.xp6(3),t.Q6J("ngModel",o.form.address.address),t.xp6(2),t.Q6J("ngIf",k.invalid&&(k.dirty||k.touched||a.submitted)),t.xp6(4),t.hij(" ",t.lcZ(139,108,"Postal Code"),": "),t.xp6(3),t.Q6J("ngModel",o.form.address.postalCode),t.xp6(2),t.Q6J("ngIf",D.invalid&&(D.dirty||D.touched||a.submitted)),t.xp6(5),t.hij(" ",t.lcZ(149,110,"Latitude"),": "),t.xp6(3),t.Q6J("ngModel",o.form.geopoint.lat),t.xp6(2),t.Q6J("ngIf",q.invalid&&(q.dirty||q.touched||a.submitted)),t.xp6(4),t.hij(" ",t.lcZ(158,112,"Longitude"),": "),t.xp6(3),t.Q6J("ngModel",o.form.geopoint.lng),t.xp6(2),t.Q6J("ngIf",y.invalid&&(y.dirty||y.touched||a.submitted)),t.xp6(3),t.Oqu(t.lcZ(166,114,"Pick location")),t.xp6(7),t.hij(" ",t.lcZ(173,116,"Display")," "),t.xp6(7),t.hij(" ",t.lcZ(180,118,"Rate"),": "),t.xp6(3),t.Q6J("ngModel",o.form.rateDisplay),t.xp6(2),t.Q6J("ngIf",U.invalid&&(U.dirty||U.touched||a.submitted)),t.xp6(5),t.hij(" ",t.lcZ(190,120,"Season Rate"),": "),t.xp6(3),t.Q6J("ngModel",o.form.seasonRateDisplay),t.xp6(2),t.Q6J("ngIf",F.invalid&&(F.dirty||F.touched||a.submitted)),t.xp6(5),t.hij(" ",t.lcZ(200,122,"Open Hour"),": "),t.xp6(3),t.Q6J("ngModel",o.form.openingHourDisplay),t.xp6(2),t.Q6J("ngIf",J.invalid&&(J.dirty||J.touched||a.submitted)),t.xp6(2),t.Q6J("ngIf",o.cancelText),t.xp6(2),t.Oqu(o.submitText)}},dependencies:[d.sg,d.O5,c._Y,c.YN,c.Kr,c.Fj,c.Wl,c.EJ,c.JJ,c.JL,c.Q7,c.On,c.F,vt.F,b.SA,b.pt,B.w9,$._V,Tt.z,d.Ov,d.rS,m.X$],encapsulation:2}),n})();function Yt(n,i){1&n&&(t.TgZ(0,"div",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Field is required.")," "))}function Bt(n,i){1&n&&(t.TgZ(0,"div",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Field is required.")," "))}function Gt(n,i){1&n&&(t.TgZ(0,"div",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Field is required.")," "))}function Kt(n,i){1&n&&(t.TgZ(0,"div",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Field is required.")," "))}function $t(n,i){1&n&&(t.TgZ(0,"div",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Field is required.")," "))}function zt(n,i){1&n&&(t.TgZ(0,"div",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Field is required.")," "))}function Et(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3",5),t._uU(4),t.ALo(5,"translate"),t.qZA()()()(),t.TgZ(6,"div",6)(7,"div",7)(8,"label",8)(9,"span",9),t._uU(10,"*"),t.qZA(),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",10)(14,"input",27,28),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.form.evTotalLots=a)}),t.qZA(),t.YNc(16,zt,3,3,"div",13),t.qZA()()()}if(2&n){const e=t.MAs(15),o=t.oxw(),a=t.MAs(1);t.xp6(4),t.hij(" ",t.lcZ(5,4,"Charge Park Lots")," "),t.xp6(7),t.hij(" ",t.lcZ(12,6,"Total Lots"),": "),t.xp6(3),t.Q6J("ngModel",o.form.evTotalLots),t.xp6(2),t.Q6J("ngIf",e.invalid&&(e.dirty||e.touched||a.submitted))}}function Rt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.cancel())}),t._UZ(1,"i",30),t._uU(2),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" ",e.cancelText," ")}}let Vt=(()=>{class n{constructor(){this.submitText="Submit",this.form=(0,p.fo4)(),this.submitted=new t.vpe,this.canceled=new t.vpe,this.firstHeader=""}ngOnInit(){this.firstHeader=this.chargingPile?"General Park Lots":"Lots Settings"}cancel(){this.canceled.emit()}submit(e){return console.log(this.form),this.chargingPile||(this.form.evTotalLots=null),e.valid&&this.submitted.emit(this.form)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-depot-form-lots"]],inputs:{submitText:"submitText",cancelText:"cancelText",form:"form",chargingPile:"chargingPile"},outputs:{submitted:"submitted",canceled:"canceled"},decls:62,vars:31,consts:[[1,"m-form","m-form--fit","m-form--label-align-right",3,"ngSubmit"],["formRef","ngForm"],[1,"m-portlet__head"],[1,"m-portlet__head-caption"],[1,"m-portlet__head-title"],[1,"m-portlet__head-text"],[1,"m-portlet__body"],[1,"row","form-group","m-form__group"],[1,"col-form-label","col-lg-2","col-sm-12"],[1,"m--font-danger"],[1,"col-lg-4","col-sm-12"],["type","number","name","totalLots","required","",1,"form-control","m-input",3,"ngModel","ngModelChange"],["totalLotsRef","ngModel"],["class","form-control-feedback",4,"ngIf"],["type","number","name","handicappedLots","required","",1,"form-control","m-input",3,"ngModel","ngModelChange"],["handicappedLotsRef","ngModel"],["type","number","min","0","name","reservedLots","required","",1,"form-control","m-input",3,"ngModel","ngModelChange"],["reservedLotsRef","ngModel"],["type","number","min","0","name","bookingLots","required","",1,"form-control","m-input",3,"ngModel","ngModelChange"],["bookingLotsRef","ngModel"],["type","number","min","0","name","adhocLots","required","",1,"form-control","m-input",3,"ngModel","ngModelChange"],["adhocLotsRef","ngModel"],[3,"ngIf"],[1,"m-form__actions","m-form__actions--right"],["class","btn btn-outline-main",3,"click",4,"ngIf"],["type","submit",1,"btn","btn-main","m--margin-left-30"],[1,"form-control-feedback"],["type","number","name","chargeTotalLots","required","",1,"form-control","m-input",3,"ngModel","ngModelChange"],["chargeTotalLotsRef","ngModel"],[1,"btn","btn-outline-main",3,"click"],[1,"la","la-arrow-left"]],template:function(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"form",0,1),t.NdJ("ngSubmit",function(){t.CHM(a);const l=t.MAs(1);return t.KtG(o.submit(l))}),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),t._uU(6),t.ALo(7,"translate"),t.qZA()()()(),t.TgZ(8,"div",6)(9,"div",7)(10,"label",8)(11,"span",9),t._uU(12,"*"),t.qZA(),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"div",10)(16,"input",11,12),t.NdJ("ngModelChange",function(l){return o.form.totalLots=l}),t.qZA(),t.YNc(18,Yt,3,3,"div",13),t.qZA()(),t.TgZ(19,"div",7)(20,"label",8)(21,"span",9),t._uU(22,"*"),t.qZA(),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"div",10)(26,"input",14,15),t.NdJ("ngModelChange",function(l){return o.form.handicappedLots=l}),t.qZA(),t.YNc(28,Bt,3,3,"div",13),t.qZA(),t.TgZ(29,"label",8)(30,"span",9),t._uU(31,"*"),t.qZA(),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"div",10)(35,"input",16,17),t.NdJ("ngModelChange",function(l){return o.form.reservedLots=l}),t.qZA(),t.YNc(37,Gt,3,3,"div",13),t.qZA()(),t.TgZ(38,"div",7)(39,"label",8)(40,"span",9),t._uU(41,"*"),t.qZA(),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"div",10)(45,"input",18,19),t.NdJ("ngModelChange",function(l){return o.form.bookingLots=l}),t.qZA(),t.YNc(47,Kt,3,3,"div",13),t.qZA(),t.TgZ(48,"label",8)(49,"span",9),t._uU(50,"*"),t.qZA(),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"div",10)(54,"input",20,21),t.NdJ("ngModelChange",function(l){return o.form.adhocLots=l}),t.qZA(),t.YNc(56,$t,3,3,"div",13),t.qZA()()(),t.YNc(57,Et,17,8,"ng-template",22),t.TgZ(58,"div",23),t.YNc(59,Rt,3,1,"button",24),t.TgZ(60,"button",25),t._uU(61),t.qZA()()()}if(2&e){const a=t.MAs(1),r=t.MAs(17),l=t.MAs(27),_=t.MAs(36),f=t.MAs(46),h=t.MAs(55);t.xp6(6),t.hij(" ",t.lcZ(7,19,o.firstHeader)," "),t.xp6(7),t.hij(" ",t.lcZ(14,21,"Total Lots"),": "),t.xp6(3),t.Q6J("ngModel",o.form.totalLots),t.xp6(2),t.Q6J("ngIf",r.invalid&&(r.dirty||r.touched||a.submitted)),t.xp6(5),t.hij(" ",t.lcZ(24,23,"Handicapped Lots"),": "),t.xp6(3),t.Q6J("ngModel",o.form.handicappedLots),t.xp6(2),t.Q6J("ngIf",l.invalid&&(l.dirty||l.touched||a.submitted)),t.xp6(4),t.hij(" ",t.lcZ(33,25,"Reserved Lots"),": "),t.xp6(3),t.Q6J("ngModel",o.form.reservedLots),t.xp6(2),t.Q6J("ngIf",_.invalid&&(_.dirty||_.touched||a.submitted)),t.xp6(5),t.hij(" ",t.lcZ(43,27,"Booking Lots"),": "),t.xp6(3),t.Q6J("ngModel",o.form.bookingLots),t.xp6(2),t.Q6J("ngIf",f.invalid&&(f.dirty||f.touched||a.submitted)),t.xp6(4),t.hij(" ",t.lcZ(52,29,"Adhoc Lots"),": "),t.xp6(3),t.Q6J("ngModel",o.form.adhocLots),t.xp6(2),t.Q6J("ngIf",h.invalid&&(h.dirty||h.touched||a.submitted)),t.xp6(1),t.Q6J("ngIf",o.chargingPile),t.xp6(2),t.Q6J("ngIf",o.cancelText),t.xp6(2),t.Oqu(o.submitText)}},dependencies:[d.O5,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.Q7,c.qQ,c.On,c.F,m.X$],encapsulation:2}),n})();var g=s(40269),Wt=s(95496);function Xt(n,i){if(1&n&&(t.TgZ(0,"th",16)(1,"span"),t._uU(2),t.qZA()()),2&n){const e=i.$implicit;t.xp6(1),t.Udp("width",e.width),t.xp6(1),t.Oqu(e.text)}}function te(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr",10)(1,"td",16)(2,"span"),t._uU(3),t.qZA()(),t.TgZ(4,"td",16)(5,"span"),t._uU(6),t.qZA()(),t.TgZ(7,"td",16)(8,"span"),t._uU(9),t.qZA()(),t.TgZ(10,"td",16)(11,"span"),t._uU(12),t.qZA()(),t.TgZ(13,"td",16)(14,"span"),t._uU(15),t.qZA()(),t.TgZ(16,"td",16)(17,"span"),t._uU(18),t.qZA()(),t.TgZ(19,"td",16)(20,"span")(21,"a",17),t.NdJ("click",function(){const r=t.CHM(e).index,l=t.oxw(2);return t.KtG(l.form.splice(r,1))}),t._UZ(22,"i",18),t.qZA()()()()}if(2&n){const e=i.$implicit,o=t.oxw(2);t.xp6(2),t.Udp("width",o.tableHeaders[0].width),t.xp6(1),t.Oqu(null==e?null:e.code),t.xp6(2),t.Udp("width",o.tableHeaders[1].width),t.xp6(1),t.Oqu(null==e?null:e.name),t.xp6(2),t.Udp("width",o.tableHeaders[2].width),t.xp6(1),t.Oqu(null==e?null:e.ip),t.xp6(2),t.Udp("width",o.tableHeaders[3].width),t.xp6(1),t.Oqu(null==e?null:e.port),t.xp6(2),t.Udp("width",o.tableHeaders[4].width),t.xp6(1),t.Oqu(null==e?null:e.type),t.xp6(2),t.Udp("width",o.tableHeaders[5].width),t.xp6(1),t.Oqu(null==e?null:e.status),t.xp6(2),t.Udp("width",o.tableHeaders[6].width)}}function ee(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.cancel())}),t._UZ(1,"i",20),t._uU(2),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(2),t.hij(" ",e.cancelText," ")}}function ne(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",1)(2,"div",2)(3,"button",3),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.gotoCreate())}),t.TgZ(4,"span"),t._UZ(5,"i",4),t.TgZ(6,"span"),t._uU(7," Add New Station "),t.qZA()()(),t._UZ(8,"div",5),t.qZA(),t.TgZ(9,"div",6)(10,"div",7)(11,"table",8)(12,"thead",9)(13,"tr",10),t.YNc(14,Xt,3,3,"th",11),t.qZA()(),t.TgZ(15,"tbody",12),t.YNc(16,te,23,20,"tr",13),t.qZA()()()(),t.TgZ(17,"div",2),t.YNc(18,ee,3,1,"button",14),t.TgZ(19,"button",15),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.submit())}),t._uU(20),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(14),t.Q6J("ngForOf",e.tableHeaders),t.xp6(2),t.Q6J("ngForOf",e.form),t.xp6(2),t.Q6J("ngIf",e.cancelText),t.xp6(2),t.Oqu(e.submitText)}}function oe(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"app-stations-form",21),t.NdJ("canceled",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.itemCancel())})("submitted",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.itemSubmit(a))}),t.qZA()()}}let ae=(()=>{class n{constructor(e){this.translate=e,this.form=[],this.submitText="Submit",this.submitted=new t.vpe,this.canceled=new t.vpe,this.tableHeaders=[{text:"Station ID",column:"code",width:"80px"},{text:"Station Name",column:"name",width:"120px"},{text:"IP",column:"ip",width:"120px"},{text:"Port",column:"port",width:"120px"},{text:"Type",column:"type",width:"100px"},{text:"Status",column:"status",width:"100px"},{text:"Actions",width:"100px"}],this.managementStatus=p.AnP.Viewing}ngOnInit(){const e=this.tableHeaders.map(o=>o.text);this.translate.get(e).subscribe(o=>{this.tableHeaders.forEach(a=>{for(let r in o)o.hasOwnProperty(r)&&a.text===r&&(a.text=o[r])})})}gotoCreate(){this.managementStatus=p.AnP.Creating}itemCancel(){this.managementStatus=p.AnP.Viewing}itemSubmit(e){this.form.push(e),this.managementStatus=p.AnP.Viewing}cancel(){this.canceled.emit()}submit(){this.submitted.emit(this.form)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-depot-form-stations"]],inputs:{form:"form",submitText:"submitText",cancelText:"cancelText"},outputs:{submitted:"submitted",canceled:"canceled"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"m-form","m-form--label-align-right","m--margin-top-20","m--margin-bottom-30"],[1,"m-form__actions","m-form__actions--right"],[1,"btn","btn-main","m-btn","m-btn--custom","m-btn--icon","m-btn--air","m-btn--pill",3,"click"],[1,"la","la-plus"],[1,"m-separator","m-separator--dashed","d-xl-none"],[1,"m-portlet__body"],[1,"m_datatable","m-datatable","m-datatable--default","m-datatable--brand","m-datatable--loaded"],[1,"m-datatable__table",2,"min-height","auto"],[1,"m-datatable__head"],[1,"m-datatable__row"],["class","m-datatable__cell",4,"ngFor","ngForOf"],[1,"m-datatable__body"],["class","m-datatable__row",4,"ngFor","ngForOf"],["class","btn btn-outline-main",3,"click",4,"ngIf"],[1,"btn","btn-main","m--margin-left-30",3,"click"],[1,"m-datatable__cell"],[1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","no-border",3,"click"],[1,"la","la-trash"],[1,"btn","btn-outline-main",3,"click"],[1,"la","la-arrow-left"],[3,"canceled","submitted"]],template:function(e,o){1&e&&(t.YNc(0,ne,21,4,"div",0),t.YNc(1,oe,2,0,"div",0)),2&e&&(t.Q6J("ngIf","viewing"===o.managementStatus),t.xp6(1),t.Q6J("ngIf","viewing"!==o.managementStatus))},dependencies:[d.sg,d.O5,g.Uo,g._C,g.Om,g.p0,g.$Z,Wt.S],encapsulation:2}),n})();var v=s(79118),ie=s(69659);const re=["evcTable"];function le(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"label",23)(1,"input",24),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw().$implicit,l=t.oxw();return t.KtG(l.choosenTariffIds[r.id]=a)}),t.qZA(),t._UZ(2,"span"),t.qZA()}if(2&n){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.MGl("name","tariff",e.id,""),t.s9C("value",e.id),t.Q6J("ngModel",o.choosenTariffIds[e.id])}}function se(n,i){1&n&&(t.TgZ(0,"span",25),t._UZ(1,"i",26),t.qZA())}const pe=function(n){return["../../tariffs",n]};function ce(n,i){if(1&n&&(t.TgZ(0,"td",14)(1,"span"),t.YNc(2,le,3,3,"label",15),t.YNc(3,se,2,0,"span",16),t.qZA()(),t.TgZ(4,"td",17)(5,"span"),t._uU(6),t.qZA()(),t.TgZ(7,"td",17)(8,"span"),t._uU(9),t.qZA()(),t.TgZ(10,"td",17)(11,"span")(12,"span"),t._UZ(13,"img",18),t.qZA(),t.TgZ(14,"span"),t._uU(15),t.qZA()()(),t.TgZ(16,"td",17)(17,"span"),t._uU(18),t.ALo(19,"titlecase"),t.qZA()(),t.TgZ(20,"td",17)(21,"span"),t._uU(22),t.ALo(23,"titlecase"),t.qZA()(),t.TgZ(24,"td",17)(25,"span"),t._uU(26),t.ALo(27,"date"),t.qZA()(),t.TgZ(28,"td",19)(29,"span",20)(30,"a",21),t._UZ(31,"i",22),t.qZA()()()),2&n){const e=i.$implicit,o=t.oxw();t.xp6(1),t.Udp("width",o.tableHeaders[0].width),t.xp6(1),t.Q6J("ngIf",o.isValidTariff(e)),t.xp6(1),t.Q6J("ngIf",!o.isValidTariff(e)),t.xp6(2),t.Udp("width",o.tableHeaders[1].width),t.xp6(1),t.hij(" ",e.id," "),t.xp6(2),t.Udp("width",o.tableHeaders[2].width),t.xp6(1),t.hij(" ",e.tariffName," "),t.xp6(2),t.Udp("width",o.tableHeaders[3].width),t.xp6(2),t.Q6J("src",o.vehicleIcon(e.vehicleTypeCode),t.LSH),t.xp6(2),t.Oqu(e.vehicleTypeCode),t.xp6(2),t.Udp("width",o.tableHeaders[4].width),t.xp6(1),t.hij(" ",t.lcZ(19,26,e.ownerName)," "),t.xp6(3),t.Udp("width",o.tableHeaders[5].width),t.xp6(1),t.hij(" ",t.lcZ(23,28,e.operatorName)," "),t.xp6(3),t.Udp("width",o.tableHeaders[6].width),t.xp6(1),t.hij(" ",t.lcZ(27,30,e.created)," "),t.xp6(3),t.Udp("width",o.tableHeaders[7].width),t.xp6(1),t.Q6J("routerLink",t.VKq(32,pe,e.id))}}function de(n,i){if(1&n&&(t.TgZ(0,"div",27)(1,"div",28)(2,"div",29)(3,"h3",30),t._uU(4),t.ALo(5,"translate"),t.qZA()()()(),t.TgZ(6,"div",6),t._UZ(7,"app-evc-tariff-table",31,32),t.qZA()),2&n){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,2,"EV Charging Tariff")," "),t.xp6(3),t.Q6J("selectedCostmode",e.evcForm)}}function me(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.cancel())}),t._UZ(1,"i",34),t._uU(2),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" ",e.cancelText," ")}}function ue(n,i){if(1&n&&(t.TgZ(0,"option",50),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("ngValue",e),t.xp6(1),t.hij(" ",e.text," ")}}function _e(n,i){if(1&n&&(t.TgZ(0,"option",50),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("ngValue",e),t.xp6(1),t.hij(" ",e.text," ")}}function ge(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",35)(1,"h4",36),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",37),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.modalRef.hide())}),t.TgZ(5,"span",38),t._uU(6,"\xd7"),t.qZA()()(),t.TgZ(7,"div",39)(8,"div",40)(9,"span",41),t._uU(10,"*"),t.qZA(),t.TgZ(11,"label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"select",42),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.vehicleType=a)}),t.TgZ(15,"option",43),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.YNc(18,ue,2,2,"option",44),t.TgZ(19,"option",45),t._uU(20,"EVC"),t.qZA()()(),t.TgZ(21,"div",40)(22,"span",41),t._uU(23,"*"),t.qZA(),t.TgZ(24,"label"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"select",46),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.tariffType=a)}),t.TgZ(28,"option",43),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.YNc(31,_e,2,2,"option",44),t.TgZ(32,"option",45),t._uU(33,"EVC"),t.qZA()()()(),t.TgZ(34,"div",47)(35,"button",48),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.modalRef.hide())}),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"button",49),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.goNext())}),t._uU(39),t.ALo(40,"translate"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,14,"Create Tariff")),t.xp6(10),t.hij("",t.lcZ(13,16,"Vehicle Type"),":"),t.xp6(2),t.Q6J("ngModel",e.vehicleType),t.xp6(2),t.Oqu(t.lcZ(17,18,"Select")),t.xp6(2),t.Q6J("ngForOf",e.vehicleTypes),t.xp6(1),t.Q6J("value",e.vehicleTypeEVC.value),t.xp6(6),t.hij("",t.lcZ(26,20,"Tariff Type"),":"),t.xp6(2),t.Q6J("ngModel",e.tariffType),t.xp6(2),t.Oqu(t.lcZ(30,22,"Select")),t.xp6(2),t.Q6J("ngForOf",e.tariffTypes),t.xp6(1),t.Q6J("value",e.tariffTypeEVC.value),t.xp6(4),t.hij(" ",t.lcZ(37,24,"Cancel")," "),t.xp6(2),t.Q6J("disabled",!e.vehicleType||!e.tariffType),t.xp6(1),t.hij(" ",t.lcZ(40,26,"Next")," ")}}let fe=(()=>{class n extends v.Gw{constructor(e,o,a,r,l){super(),this.router=e,this.bsModalRef=o,this.tariffService=a,this.modalService=r,this.translate=l,this.form=[],this.evcForm=[],this.submitText="Submit",this.submitted=new t.vpe,this.evcSubmit=new t.vpe,this.canceled=new t.vpe,this.tableHeaders=[{text:"",align:v.iW.Center,width:"80px"},{text:"Tariff ID",width:"120px"},{text:"Tariff Name",width:"100px"},{text:"Vehicle Type",width:"120px"},{text:"Owner",width:"100px"},{text:"Operator",width:"100px"},{text:"Date Created",width:"120px"},{text:"Actions",width:"80px"}],this.vehicleIcon=p.mts,this.choosenTariffIds={},this.tariffTypes=p.ltJ,this.vehicleTypes=p.php,this.tariffType=null,this.vehicleType=null,this.vehicleTypeEVC=p.wxy,this.tariffTypeEVC=p.oJe}submit(){const e=Object.keys(this.choosenTariffIds).filter(a=>a),o=this.data.filter(a=>e.indexOf(`${a.id}`)>-1);this.submitted.emit(o),this.evcSubmit.emit(this.evcTable?.evcEvcTariff())}cancel(){this.canceled.emit()}reloadData(){this.reloadDataService(this.tariffService)}pageChanged(e){this.pagination=e,this.reloadData()}gotoCreate(){this.router.navigate(["/tariffs/create"])}openModal(e){this.modalRef=this.modalService.show(e)}goNext(){this.modalRef.hide(),this.router.navigate(["/tariffs/create"],"EVC"===this.vehicleType?{queryParams:{type:"evc",vehicleType:"evc",model:"add"}}:{queryParams:{type:this.tariffType.value,vehicleType:this.vehicleType.value}})}isValidTariff(e){return e.ownerId===this.depot.carParkOwnerId&&e.operatorId===this.depot.carParkOperatorId}ngOnInit(){this.reloadData(),this.form.forEach(a=>{this.choosenTariffIds[a.id]=!0});const e=this.tableHeaders.map(a=>a.text);this.translate.get(e).subscribe(a=>{this.tableHeaders.forEach(r=>{for(let l in a)a.hasOwnProperty(l)&&r.text===l&&(r.text=a[l])})});const o=this.vehicleTypes.map(a=>(console.log(a.text),a.text));this.translate.get(o).subscribe(a=>{this.vehicleTypes.forEach(r=>{for(let l in a)a.hasOwnProperty(l)&&r.text===l&&(r.text=a[l])})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.F0),t.Y36(C.UZ),t.Y36(I.K),t.Y36(C.tT),t.Y36(m.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-depot-form-tariffs"]],viewQuery:function(e,o){if(1&e&&t.Gf(re,5),2&e){let a;t.iGM(a=t.CRH())&&(o.evcTable=a.first)}},inputs:{depot:"depot",form:"form",evcForm:"evcForm",submitText:"submitText",cancelText:"cancelText",chargingPile:"chargingPile"},outputs:{submitted:"submitted",evcSubmit:"evcSubmit",canceled:"canceled"},features:[t.qOj],decls:22,vars:11,consts:[[1,"m-form","m-form--fit","m-form--label-align-right"],[1,"m-portlet"],[1,"m-form__actions","m-form__actions--right"],[1,"btn","btn-main","m-btn","m-btn--custom","m-btn--icon","m-btn--air","m-btn--pill",3,"click"],[1,"la","la-plus"],[1,"m-separator","m-separator--dashed","d-xl-none"],[1,"m-portlet__body"],[3,"headers","items","loading","scrollingDisabled","pagination","pageChanged"],["listTable",""],["rowTemplate",""],[3,"ngIf"],["class","btn btn-outline-main float-left",3,"click",4,"ngIf"],[1,"btn","btn-main","m--margin-left-30",3,"click"],["template",""],[1,"m-datatable__cell","text-center"],["class","m-checkbox m-checkbox--single m-checkbox--solid m-checkbox--brand m--valign-middle",4,"ngIf"],["class","m--padding-right-10",4,"ngIf"],[1,"m-datatable__cell"],["alt","",3,"src"],[1,"m-datatable__cell","action-cell"],[1,"cell-actions"],[1,"btn","btn-outline-primary","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","no-border",3,"routerLink"],[1,"la","la-eye"],[1,"m-checkbox","m-checkbox--single","m-checkbox--solid","m-checkbox--brand","m--valign-middle"],["type","checkbox",3,"name","value","ngModel","ngModelChange"],[1,"m--padding-right-10"],[1,"la","la-ban"],[1,"m-portlet__head"],[1,"m-portlet__head-caption"],[1,"m-portlet__head-title"],[1,"m-portlet__head-text"],["createCarpark","true",3,"selectedCostmode"],["evcTable",""],[1,"btn","btn-outline-main","float-left",3,"click"],[1,"la","la-arrow-left"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","m-form__group"],[1,"m--font-danger"],["name","tariffType","placeholder","",1,"form-control","m-input",3,"ngModel","ngModelChange"],["value","null","disabled","","selected",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"value"],["name","tariffType",1,"form-control","m-input",3,"ngModel","ngModelChange"],[1,"modal-footer"],[1,"btn","btn-outline-main",3,"click"],[1,"btn","btn-main",3,"disabled","click"],[3,"ngValue"]],template:function(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"button",3),t.NdJ("click",function(){t.CHM(a);const l=t.MAs(21);return t.KtG(o.openModal(l))}),t.TgZ(4,"span"),t._UZ(5,"i",4),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"translate"),t.qZA()()(),t._UZ(9,"div",5),t.qZA(),t.TgZ(10,"div",6)(11,"app-datatable",7,8),t.NdJ("pageChanged",function(l){return o.pageChanged(l)}),t.YNc(13,ce,32,34,"ng-template",null,9,t.W1O),t.qZA()(),t.YNc(15,de,9,4,"ng-template",10),t.TgZ(16,"div",2),t.YNc(17,me,3,1,"button",11),t.TgZ(18,"button",12),t.NdJ("click",function(){return o.submit()}),t._uU(19),t.qZA()()()(),t.YNc(20,ge,41,28,"ng-template",null,13,t.W1O)}2&e&&(t.xp6(7),t.hij(" ",t.lcZ(8,9,"Create Tariff")," "),t.xp6(4),t.Q6J("headers",o.tableHeaders)("items",o.data)("loading",o.loading)("scrollingDisabled",!0)("pagination",o.pagination),t.xp6(4),t.Q6J("ngIf",o.chargingPile),t.xp6(2),t.Q6J("ngIf",o.cancelText),t.xp6(2),t.Oqu(o.submitText))},dependencies:[d.sg,d.O5,c._Y,c.YN,c.Kr,c.Wl,c.EJ,c.JJ,c.JL,c.On,c.F,v.nE,g.Uo,u.yS,ie.q,d.rS,d.uU,m.X$],encapsulation:2}),n})();function he(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"app-depot-form-basic",18),t.NdJ("submitted",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.onBasicSubmitted(a))}),t.ALo(1,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.s9C("submitText",t.lcZ(1,2,"Save & Continue")),t.Q6J("form",e.depotForm)}}function xe(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"app-depot-form-lots",19),t.NdJ("submitted",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.onLotsSubmitted(a))})("canceled",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.goBack())}),t.ALo(1,"translate"),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.s9C("submitText",t.lcZ(1,4,"Save & Continue")),t.s9C("cancelText",t.lcZ(2,6,"Back")),t.Q6J("form",e.depotForm)("chargingPile",e.depotForm.chargingPile)}}function Ze(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"app-depot-form-tariffs",20),t.NdJ("submitted",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.onTariffsSubmitted(a))})("evcSubmit",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.onEvcTariffsSubmitted(a))})("canceled",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.goBack())}),t.ALo(1,"translate"),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.s9C("submitText",t.lcZ(1,6,"Save & Continue")),t.s9C("cancelText",t.lcZ(2,8,"Back")),t.Q6J("depot",e.depotForm)("form",e.depotForm.tariffs)("evcForm",e.evcForm.tariffs)("chargingPile",e.depotForm.chargingPile)}}function be(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"app-depot-form-stations",21),t.NdJ("submitted",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.onStationsSubmitted(a))})("canceled",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.goBack())}),t.ALo(1,"translate"),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.s9C("submitText",t.lcZ(1,3,"Submit")),t.s9C("cancelText",t.lcZ(2,5,"Back")),t.Q6J("form",e.depotForm.stations)}}let ve=(()=>{class n{constructor(e,o,a,r){this.router=e,this.carparkService=o,this.translate=a,this.evcService=r,this.model={},this.depotForm={...(0,p.aq7)(),...(0,p.fo4)(),tariffs:[],stations:[]},this.evcForm={tariffs:[]},this.allElectricPriceArr=[],this.currentStep=0}changeStep(e){this.currentStep=e}goBack(){0!==this.currentStep&&(this.currentStep=this.currentStep-1)}onLotsSubmitted(e){this.depotForm={...this.depotForm,...e},this.currentStep=2}onBasicSubmitted(e){this.depotForm={...this.depotForm,...e},this.currentStep=1}onTariffsSubmitted(e){this.depotForm={...this.depotForm,tariffs:e},this.currentStep=3}onStationsSubmitted(e){this.depotForm={...this.depotForm,stations:e,addressListId:2},console.log(this.selectEvcTariff),this.carparkService.createModel(this.depotForm).subscribe(o=>{if(0!==this.selectEvcTariff.length){const a=this.allElectricPriceArr.filter(l=>l.companyId==this.selectEvcTariff[0].companyId)[0];this.evcService.carparkEvcCostmode({carparkId:o.id,costmodeId:this.selectEvcTariff[0].costmodeId,electricityfee:a.note,priceType:0,remark:null,servicefee:0,servicefeeComm:null,unifyPrice:0,zoneId:0}).subscribe(l=>{console.log(l),this.router.navigate(["/carparks"])})}this.router.navigate(["/carparks"])})}onEvcTariffsSubmitted(e){this.selectEvcTariff=e,this.evcForm={tariffs:e}}currentStepClass(e){return this.currentStep>e?"complete":this.currentStep===e?"active":"disabled"}goStep(e){this.currentStep=e}getAllElecticPrice(){this.evcService.getAllElectricPrice({companyName:"",pageNum:1,pageSize:99999}).subscribe(o=>{"00000"==o.messageCode&&(this.allElectricPriceArr=o.data.content)})}ngOnInit(){this.getAllElecticPrice()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.F0),t.Y36(Z.x),t.Y36(m.sK),t.Y36(G.z$))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-depots-create"]],decls:44,vars:20,consts:[[1,"m-content"],[1,"m-portlet","m-portlet--bordered-semi"],[1,"m-portlet__head"],[1,"row","smpl-step"],[1,"col-3","smpl-step-step",3,"ngClass"],[1,"progress"],[1,"progress-bar"],[1,"smpl-step-icon"],[1,"icon"],[1,"la","la-info"],[1,"smpl-step-info","text-center"],[1,"la","la-columns"],[1,"la","la-dollar"],[1,"la","la-subway"],[3,"form","submitText","submitted",4,"ngIf"],[3,"form","submitText","cancelText","chargingPile","submitted","canceled",4,"ngIf"],[3,"depot","form","evcForm","submitText","cancelText","chargingPile","submitted","evcSubmit","canceled",4,"ngIf"],[3,"form","submitText","cancelText","submitted","canceled",4,"ngIf"],[3,"form","submitText","submitted"],[3,"form","submitText","cancelText","chargingPile","submitted","canceled"],[3,"depot","form","evcForm","submitText","cancelText","chargingPile","submitted","evcSubmit","canceled"],[3,"form","submitText","cancelText","submitted","canceled"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._UZ(6,"div",6),t.qZA(),t.TgZ(7,"a",7)(8,"span",8),t._UZ(9,"i",9),t.qZA()(),t.TgZ(10,"div",10),t._uU(11),t.ALo(12,"translate"),t.qZA()(),t.TgZ(13,"div",4)(14,"div",5),t._UZ(15,"div",6),t.qZA(),t.TgZ(16,"a",7)(17,"span",8),t._UZ(18,"i",11),t.qZA()(),t.TgZ(19,"div",10),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",4)(23,"div",5),t._UZ(24,"div",6),t.qZA(),t.TgZ(25,"a",7)(26,"span",8),t._UZ(27,"i",12),t.qZA()(),t.TgZ(28,"div",10),t._uU(29),t.ALo(30,"translate"),t.qZA()(),t.TgZ(31,"div",4)(32,"div",5),t._UZ(33,"div",6),t.qZA(),t.TgZ(34,"a",7)(35,"span",8),t._UZ(36,"i",13),t.qZA()(),t.TgZ(37,"div",10),t._uU(38),t.ALo(39,"translate"),t.qZA()()()(),t.YNc(40,he,2,4,"app-depot-form-basic",14),t.YNc(41,xe,3,8,"app-depot-form-lots",15),t.YNc(42,Ze,3,10,"app-depot-form-tariffs",16),t.YNc(43,be,3,7,"app-depot-form-stations",17),t.qZA()()),2&e&&(t.xp6(4),t.Q6J("ngClass",o.currentStepClass(0)),t.xp6(7),t.hij(" 1. ",t.lcZ(12,12,"Basic Info")," "),t.xp6(2),t.Q6J("ngClass",o.currentStepClass(1)),t.xp6(7),t.hij(" 2. ",t.lcZ(21,14,"Lots")," "),t.xp6(2),t.Q6J("ngClass",o.currentStepClass(2)),t.xp6(7),t.hij(" 3. ",t.lcZ(30,16,"Tariffs")," "),t.xp6(2),t.Q6J("ngClass",o.currentStepClass(3)),t.xp6(7),t.hij(" 4. ",t.lcZ(39,18,"Stations")," "),t.xp6(2),t.Q6J("ngIf",0===o.currentStep),t.xp6(1),t.Q6J("ngIf",1===o.currentStep),t.xp6(1),t.Q6J("ngIf",2===o.currentStep),t.xp6(1),t.Q6J("ngIf",3===o.currentStep))},dependencies:[d.mk,d.O5,Ht,Vt,ae,fe,m.X$],encapsulation:2}),n})();var tt=s(28555),Te=s(17489),et=(s(19612),s(19690)),nt=s(24850),Ce=s(23175),Ae=s(60086),Me=s(85222),we=s(90650);let Le=(()=>{class n{constructor(){this.iconSize="size-md",this.avatarColumn=4,this.thumbnail=!1}get availableStatus(){return(0,et.TR)(this.item)}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-depot-card"]],inputs:{item:"item",flat:"flat",iconSize:"iconSize",avatarColumn:"avatarColumn",thumbnail:"thumbnail"},decls:16,vars:10,consts:[[1,"right-top-conner"],[1,"fa","fa-exclamation"],[1,"row"],[1,"col-4","image"],[1,"text","flex-column","col-8"],[1,"title","m--marginless"],[1,"m--marginless","name"],[1,"m--marginless","status"],[1,"status-button"]],template:function(e,o){1&e&&(t.TgZ(0,"div")(1,"div",0),t._UZ(2,"i",1),t.qZA(),t.TgZ(3,"div",2),t._UZ(4,"div",3),t.TgZ(5,"div",4)(6,"h5",5),t._uU(7),t.qZA(),t.TgZ(8,"div")(9,"p",6),t._uU(10),t.qZA(),t.TgZ(11,"p",7),t._uU(12),t.qZA()(),t.TgZ(13,"div",8)(14,"span"),t._uU(15),t.qZA()()()()()),2&e&&(t.Gre("car-park-info-wrapper ",o.availableStatus.trim().toLowerCase(),""),t.xp6(4),t.Udp("background-image","url("+((null==o.item.images[0]?null:o.item.images[0].carParkImage)||"assets/app/media/img/icons/park-placeholder.png")+")"),t.xp6(3),t.Oqu(o.item.carParkCode),t.xp6(3),t.Oqu(o.item.name),t.xp6(2),t.AsE("",(null==o.item.live?null:o.item.live.availableLots)||"-"," / ",o.item.totalLots,""),t.xp6(3),t.Oqu(o.availableStatus))},styles:[".car-park-info-wrapper[_ngcontent-%COMP%]{position:relative;height:150px;width:265px;border-radius:8px;box-shadow:0 1px 15px #45414e14;background-color:#fff;overflow:hidden}.car-park-info-wrapper[_ngcontent-%COMP%]   .right-top-conner[_ngcontent-%COMP%]{position:absolute;right:0;top:0;border-color:transparent #32CD32 transparent transparent;border-width:0 30px 30px 0;border-style:solid;width:0;height:0}.car-park-info-wrapper[_ngcontent-%COMP%]   .right-top-conner[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;font-size:14px;transform:translate(18px)}.car-park-info-wrapper[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%]{height:150px}.car-park-info-wrapper[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{padding-right:0;background-position:center;background-repeat:no-repeat;background-size:cover}.car-park-info-wrapper[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px;font-family:Montserrat}.car-park-info-wrapper[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:17px;font-weight:600}.car-park-info-wrapper[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p.name[_ngcontent-%COMP%]{color:#9195a9}.car-park-info-wrapper[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p.status[_ngcontent-%COMP%]{color:#32cd32;font-weight:600}.car-park-info-wrapper[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .status-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:3px 20px;border-radius:12px;background-color:#ebedf2;color:#32cd32;font-weight:600}.car-park-info-wrapper.full[_ngcontent-%COMP%]   .right-top-conner[_ngcontent-%COMP%]{border-color:transparent #f4516c transparent transparent}.car-park-info-wrapper.full[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p.status[_ngcontent-%COMP%], .car-park-info-wrapper.full[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .status-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f4516c}.car-park-info-wrapper.almost[_ngcontent-%COMP%]   .right-top-conner[_ngcontent-%COMP%]{border-color:transparent #ffb822 transparent transparent}.car-park-info-wrapper.almost[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p.status[_ngcontent-%COMP%], .car-park-info-wrapper.almost[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .status-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ffb822}.car-park-info-wrapper.unavailable[_ngcontent-%COMP%]   .right-top-conner[_ngcontent-%COMP%]{border-color:transparent #868aa8 transparent transparent}.car-park-info-wrapper.unavailable[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p.status[_ngcontent-%COMP%], .car-park-info-wrapper.unavailable[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .status-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#868aa8}"]}),n})();function ke(n,i){if(1&n&&t._UZ(0,"app-depot-card",12),2&n){const e=t.oxw().$implicit;t.Q6J("thumbnail",!1)("item",e)("flat",!0)}}const De=function(n){return{url:n}};function qe(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"agm-marker",9),t.NdJ("markerClick",function(){const r=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.clickedMarker(r))}),t.TgZ(1,"agm-snazzy-info-window",10,11),t.YNc(3,ke,1,3,"ng-template"),t.qZA()()}if(2&n){const e=i.$implicit,o=t.oxw(2);t.Q6J("latitude",e.geopoint.lat)("longitude",e.geopoint.lng)("iconUrl",t.VKq(9,De,"./assets/app/media/img/icons/car-park-"+o.getStatus(e).replace(" ","").toLowerCase()+".png")),t.xp6(1),t.Q6J("closeOnMapClick",!0)("showCloseButton",!1)("longitude",e.geopoint.lng)("closeWhenOthersOpen",!0)("latitude",e.geopoint.lat)("isOpen",o.isInfoWindowOpen(e.id))}}function ye(n,i){if(1&n&&(t.TgZ(0,"div",54),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Oqu(e.name)}}function Ue(n,i){if(1&n&&(t.TgZ(0,"div",31)(1,"div",32)(2,"div",33)(3,"div",34)(4,"div",35),t._UZ(5,"img",36),t.qZA(),t.TgZ(6,"button",37),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"div",38)(10,"h5",39),t._uU(11),t.qZA(),t.TgZ(12,"div",40),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"div",41)(16,"div"),t._UZ(17,"i",42),t._uU(18),t.qZA(),t.TgZ(19,"div"),t._UZ(20,"i",43),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"div"),t._UZ(24,"i",44),t._uU(25),t.ALo(26,"translate"),t.qZA()()()()(),t.TgZ(27,"div",45)(28,"div",33)(29,"div",46),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"div",47)(33,"div",33)(34,"div",48)(35,"div",40),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"h6",49),t._uU(39),t.qZA()(),t.TgZ(40,"div",50)(41,"div",40),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"h6",40),t._uU(45),t.qZA()(),t.TgZ(46,"div",50)(47,"div",40),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"h6",40),t._uU(51),t.qZA()(),t.TgZ(52,"div",50)(53,"div",40),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"h6",40),t._uU(57),t.qZA()()()()(),t.TgZ(58,"div",51)(59,"div",46),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.TgZ(62,"div",52),t.YNc(63,ye,2,1,"div",53),t.qZA()()()()),2&n){const e=t.oxw(4);t.xp6(5),t.Q6J("src",e.carparkDetails.images[0].carParkImage,t.LSH),t.xp6(1),t.Q6J("routerLink","./"+e.carparkDetails.id+"/detail-transactions"),t.xp6(1),t.Oqu(t.lcZ(8,19,"View Detail")),t.xp6(4),t.Oqu(e.carparkDetails.name),t.xp6(2),t.Oqu(t.lcZ(14,21,"Manually Payment")),t.xp6(5),t.hij(" ",e.carparkDetails.address.address," "),t.xp6(3),t.hij(" ",t.lcZ(22,23,"Open Now")," "),t.xp6(4),t.hij(" ",t.lcZ(26,25,"No Fault")," "),t.xp6(5),t.Oqu(t.lcZ(31,27,"Depot Lots")),t.xp6(6),t.Oqu(t.lcZ(37,29,"Total")),t.xp6(3),t.Oqu(e.carparkDetails.totalLots),t.xp6(3),t.Oqu(t.lcZ(43,31,"Available")),t.xp6(3),t.Oqu(null==e.carparkDetails.live?null:e.carparkDetails.live.availableLots),t.xp6(3),t.Oqu(t.lcZ(49,33,"In")),t.xp6(3),t.Oqu(e.carparkDetails.seasonLots||0),t.xp6(3),t.Oqu(t.lcZ(55,35,"Out")),t.xp6(3),t.Oqu(e.getNormalLots(e.carparkDetails)),t.xp6(3),t.Oqu(t.lcZ(61,37,"Stations")),t.xp6(3),t.Q6J("ngForOf",e.carparkDetails.stations)}}function Fe(n,i){if(1&n&&t._UZ(0,"app-bus-transactions",55),2&n){const e=t.oxw(4);t.Q6J("parkId",e.carparkDetails.id)}}function Je(n,i){if(1&n&&t._UZ(0,"app-bus-season",55),2&n){const e=t.oxw(4);t.Q6J("parkId",e.carparkDetails.id)}}function Oe(n,i){if(1&n&&t._UZ(0,"app-carpark-vpgs",55),2&n){const e=t.oxw(4);t.Q6J("parkId",e.carparkDetails.id)}}function Pe(n,i){1&n&&t._UZ(0,"app-carpark-ev-status")}function Ie(n,i){if(1&n&&(t.TgZ(0,"div",26)(1,"div",27),t.YNc(2,Ue,64,39,"div",28),t.YNc(3,Fe,1,1,"app-bus-transactions",29),t.YNc(4,Je,1,1,"app-bus-season",29),t.YNc(5,Oe,1,1,"app-carpark-vpgs",29),t.YNc(6,Pe,1,0,"app-carpark-ev-status",30),t.qZA()()),2&n){const e=t.oxw(3);t.xp6(2),t.Q6J("ngIf","default"===e.selectedTab),t.xp6(1),t.Q6J("ngIf","transaction"===e.selectedTab||"ev"===e.selectedTab),t.xp6(1),t.Q6J("ngIf","season"===e.selectedTab),t.xp6(1),t.Q6J("ngIf","vpgs"===e.selectedTab),t.xp6(1),t.Q6J("ngIf","evStatus"===e.selectedTab)}}const x=function(n){return{active:n}};function Ne(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16)(4,"div",17)(5,"span",18),t._UZ(6,"i",19),t.qZA(),t.TgZ(7,"span",20),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.togglePanel=!a.togglePanel)}),t._UZ(8,"i",21),t.qZA()(),t.TgZ(9,"ul",22)(10,"li",23)(11,"a",24),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.handleTabChange("default"))}),t._uU(12),t.qZA()(),t.TgZ(13,"li",23)(14,"a",24),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.handleTabChange("transaction"))}),t._uU(15),t.ALo(16,"translate"),t.qZA()(),t.TgZ(17,"li",23)(18,"a",24),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.handleTabChange("season"))}),t._uU(19),t.ALo(20,"translate"),t.qZA()(),t.TgZ(21,"li",23)(22,"a",24),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.handleTabChange("vpgs"))}),t._uU(23),t.ALo(24,"translate"),t.qZA()(),t.TgZ(25,"li",23)(26,"a",24),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.handleTabChange("ev"))}),t._uU(27),t.ALo(28,"translate"),t.qZA()(),t.TgZ(29,"li",23)(30,"a",24),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.handleTabChange("evStatus"))}),t._uU(31),t.ALo(32,"translate"),t.qZA()()()()(),t.YNc(33,Ie,7,5,"div",25),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(5),t.Q6J("routerLink","./"+e.carparkDetails.id+"/transactions"),t.xp6(6),t.Q6J("ngClass",t.VKq(24,x,"default"===e.selectedTab)),t.xp6(1),t.hij(" ",e.carparkDetails.name," "),t.xp6(2),t.Q6J("ngClass",t.VKq(26,x,"transaction"===e.selectedTab)),t.xp6(1),t.hij(" ",t.lcZ(16,14,"Transactions")," "),t.xp6(3),t.Q6J("ngClass",t.VKq(28,x,"season"===e.selectedTab)),t.xp6(1),t.hij(" ",t.lcZ(20,16,"Season Parking")," "),t.xp6(3),t.Q6J("ngClass",t.VKq(30,x,"vpgs"===e.selectedTab)),t.xp6(1),t.hij(" ",t.lcZ(24,18,"VPGS")," "),t.xp6(3),t.Q6J("ngClass",t.VKq(32,x,"ev"===e.selectedTab)),t.xp6(1),t.hij(" ",t.lcZ(28,20,"EV Transactions")," "),t.xp6(3),t.Q6J("ngClass",t.VKq(34,x,"evStatus"===e.selectedTab)),t.xp6(1),t.hij(" ",t.lcZ(32,22,"EV Status")," "),t.xp6(2),t.Q6J("ngIf",!e.togglePanel)}}function Se(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",5)(1,"agm-map",6),t.NdJ("zoomChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.zoomChange(a))}),t.YNc(2,qe,4,11,"agm-marker",7),t.qZA(),t.YNc(3,Ne,34,36,"div",8),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("longitude",e.longitude)("latitude",e.latitude)("zoom",15)("disableDefaultUI",!1)("zoomControl",!0),t.xp6(1),t.Q6J("ngForOf",e.items),t.xp6(1),t.Q6J("ngIf",!!e.carparkDetails)}}function Qe(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"a",59),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.clickedScrollbar(r.id))}),t._UZ(1,"img",60),t.TgZ(2,"div",61)(3,"div",62),t._uU(4),t.ALo(5,"titlecase"),t.qZA(),t.TgZ(6,"span")(7,"span",63),t._uU(8,"\u2022"),t.qZA(),t._uU(9),t.qZA()()()}if(2&n){const e=i.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("src",(null==e.images[0]?null:e.images[0].carParkImage)||"assets/app/media/img/icons/park-placeholder.png",t.LSH),t.xp6(3),t.Oqu(t.lcZ(5,6,e.name)),t.xp6(2),t.Gre("status ",o.getStatus(e).trim().toLowerCase(),""),t.xp6(3),t.hij(" ",o.getStatus(e),"")}}function je(n,i){if(1&n&&(t.TgZ(0,"div",56)(1,"div",57),t.YNc(2,Qe,10,8,"a",58),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.items)}}let He=(()=>{class n{constructor(e,o){this.carparkService=e,this.changeDetectorRef=o,this.items=[],this.zoom=1,this.previous=null,this.carparkDetails=null,this.selectedTab="default",this.togglePanel=!1,this.openedWindow=null,this.getCarParkDetailInterval=null,this.isSnazzyInfoWindowOpened=!1}ngOnInit(){this.carparkService.filterModel({lat:1.3329002,lng:103.7413114}).pipe((0,nt.U)(o=>(o.data.forEach(a=>{a.name=a.name.replace(/\b(?:carpark|car park)\b/gi,r=>"Depot")}),o))).subscribe(o=>{this.items=o.data,setTimeout(()=>{this.latitude=1.3329002,this.longitude=103.7413114,this.zoom=12},200)})}zoomChange(e){console.log(e),this.isSnazzyInfoWindowOpened=17===e||16===e}getNormalLots(e){return e.live?e.totalLots-e.live.availableLots-e.seasonLots:"-"}clickedMarker(e){this.getCarParkById(e.id)}clickedScrollbar(e){this.openedWindow=e,this.getCarParkById(e),this.getCarParkDetailInterval&&clearInterval(this.getCarParkDetailInterval),this.getCarParkDetailInterval=setInterval(()=>this.getCarParkById(e),5e3)}getCarParkById(e){this.carparkService.getModel(e||this.carparkDetails.id).pipe((0,M.q)(1),(0,nt.U)(o=>(o.name=o.name.replace(/\b(?:carpark|car park)\b/gi,a=>"Depot"),o))).subscribe(o=>{this.carparkDetails=o})}isInfoWindowOpen(e){return this.openedWindow===e}getStatus(e){return(0,et.TR)(e)}handleTabChange(e){this.selectedTab=e,this.carparkDetails&&"default"===e?this.getCarParkDetailInterval=setInterval(()=>this.getCarParkById(this.carparkDetails.id),5e3):clearInterval(this.getCarParkDetailInterval)}ngOnDestroy(){clearInterval(this.getCarParkDetailInterval)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z.x),t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-depots-map"]],decls:7,vars:5,consts:[["class","st-carpark__map col-10",4,"ngIf"],["fxFlex","1 1 100%",1,"st-carpark__scrollbar","m--padding-0","col-2"],[1,"st-carpark__scrollbar-header","m--padding-top-15","m--padding-bottom-15"],[1,"m-subheader__title","m-subheader__title--separator","m--padding-left-15","m--padding-right-15","text-main"],["class","st-carpark__scrollbar-content",4,"ngIf"],[1,"st-carpark__map","col-10"],[3,"longitude","latitude","zoom","disableDefaultUI","zoomControl","zoomChange"],[3,"latitude","longitude","iconUrl","markerClick",4,"ngFor","ngForOf"],["class","m--margin-top-15",4,"ngIf"],[3,"latitude","longitude","iconUrl","markerClick"],[3,"closeOnMapClick","showCloseButton","longitude","closeWhenOthersOpen","latitude","isOpen"],["infoWindow",""],[3,"thumbnail","item","flat"],[1,"m--margin-top-15"],[1,"m-portlet","m-portlet--tabs"],[1,"m-portlet__head"],[1,"m-portlet__head-tools","position-relative"],[1,"action-group"],[3,"routerLink"],[1,"fa","fa-eye"],[3,"click"],[1,"fa","fa-times-circle"],["role","tablist",1,"nav","nav-tabs","m-tabs-line","m-tabs-line--primary","m-tabs-line--2x","custom-tabs"],[1,"nav-item","m-tabs__item"],[1,"nav-link","m-tabs__link",2,"padding","10px 0",3,"ngClass","click"],["class","m-portlet__body",4,"ngIf"],[1,"m-portlet__body"],[1,"m-portlet__frame"],["class","row container-fluid m-row--col-separator-sm",4,"ngIf"],[3,"parkId",4,"ngIf"],[4,"ngIf"],[1,"row","container-fluid","m-row--col-separator-sm"],[1,"col-md-5"],[1,"row"],[1,"col-4"],[1,"m-rounded",2,"width","110px","margin","0 auto 10px"],["alt","","width","110","height","110",3,"src"],[1,"btn","btn-main","btn-block",2,"min-width","120px",3,"routerLink"],[1,"col","m--padding-left-20","m--padding-right-0","m--padding-left-40"],[1,"m--font-boldest","m--margin-bottom-5","text-main"],[1,"text-muted"],[1,"text-muted","m--margin-top-10"],[1,"la","la-map-marker","m--margin-right-10"],[1,"la","la-clock-o","m--margin-right-10"],[1,"la","la-exclamation-circle","m--margin-right-10"],[1,"col-md-7","m-section"],[1,"col-3","m--font-boldest"],[1,"col-9"],[1,"m--align-center"],[1,"m--font-boldest"],[1,"m--align-center","m--margin-left-20"],[1,"row","m--margin-top-10"],[1,"row","header--stations"],["class","border rounded-circle",4,"ngFor","ngForOf"],[1,"border","rounded-circle"],[3,"parkId"],[1,"st-carpark__scrollbar-content"],[1,"list-group"],["class","m--padding-left-15 m--padding-right-15 list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"m--padding-left-15","m--padding-right-15","list-group-item","list-group-item-action",3,"click"],["width","40px","height","40px","alt","",1,"m--img-rounded","m--img-centered",3,"src"],[1,"info-wrapper","flex-column"],[1,"name"],[2,"font-size","16px"]],template:function(e,o){1&e&&(t.YNc(0,Se,4,7,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.YNc(6,je,3,1,"div",4),t.qZA()),2&e&&(t.Q6J("ngIf",o.items&&o.items.length>0),t.xp6(4),t.hij(" ",t.lcZ(5,3,"Depots")," "),t.xp6(2),t.Q6J("ngIf",o.items&&o.items.length>0))},dependencies:[d.mk,d.sg,d.O5,b.SA,b.pt,j.Q,u.rH,Ce.w,Ae.G,Me.x,we.R,Le,d.rS,m.X$],styles:["agm-map{height:600px}.st-carpark__map .st-carpark__map-list{height:300px;overflow-y:scroll}.st-carpark__map .m-portlet__head{height:3rem}.st-carpark__map .custom-tabs{bottom:0}.st-carpark__map .action-group{position:absolute;right:0;top:50%;transform:translateY(-50%);z-index:99}.st-carpark__map .action-group span:hover{cursor:pointer}.st-carpark__map .action-group span:first-child{margin-right:20px}.si-content{max-width:unset!important;min-width:150px;max-height:unset!important;overflow:visible}.st-carpark__scrollbar{background:#fff;margin-bottom:2.5em}.st-carpark__scrollbar-header{border-bottom:1px solid #f4f5f8}.st-carpark__scrollbar-header h3{font-family:Poppins;font-size:20px;font-weight:600;font-style:normal;font-stretch:normal;letter-spacing:normal;color:#575962}.st-carpark__scrollbar-content{overflow-y:scroll;height:535px}.st-carpark__scrollbar-content .list-group .list-group-item{display:flex;align-items:center;border:unset}.st-carpark__scrollbar-content .list-group .list-group-item>img{margin-right:10px}.list-group-item .name,.st-carpark__status-left-information .name{font-family:Montserrat;font-size:14px;font-weight:600;font-style:normal;font-stretch:normal;letter-spacing:normal;color:#575962}.st-carpark__status-left-information .name{font-weight:400}.list-group-item .status{font-family:LucidaGrande;font-size:12px;font-weight:300;font-style:normal;font-stretch:normal;letter-spacing:normal;color:#34bfa3;text-transform:capitalize}.list-group-item .status.full{color:#f4516c}.list-group-item .status.almost{color:#ffb822}.list-group-item .status.unavailable{color:#868aa8}.st-carpark__status{background:#fff;display:flex;padding:30px}.st-carpark__status-left{display:flex;border-right:solid 1px #f4f5f8}.detail-image,.st-carpark__status-left-detail{text-align:center}\n"],encapsulation:2}),n})();function Ye(n,i){if(1&n&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.text," ")}}function Be(n,i){if(1&n&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.text," ")}}function Ge(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",8)(1,"label",9),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div")(5,"select",20),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.group=a)})("ngModelChange",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.reloadData())}),t.TgZ(6,"option",11),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.YNc(9,Be,2,2,"option",12),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,4,"Group:")," "),t.xp6(3),t.Q6J("ngModel",e.group),t.xp6(2),t.Oqu(t.lcZ(8,6,"All")),t.xp6(2),t.Q6J("ngForOf",e.groups)}}function Ke(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",7)(1,"div",8)(2,"label",9),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div")(6,"select",10),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.status=a)})("ngModelChange",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.reloadData())}),t.TgZ(7,"option",11),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.YNc(10,Ye,2,2,"option",12),t.qZA()()(),t.YNc(11,Ge,10,8,"div",13),t.TgZ(12,"div",8)(13,"label",14),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"div",15)(17,"input",16),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.keyword=a)})("ngModelChange",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.reloadData())}),t.qZA(),t.TgZ(18,"span",17)(19,"span"),t._UZ(20,"i",18),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,7,"Depot"),": "),t.xp6(3),t.Q6J("ngModel",e.status),t.xp6(2),t.Oqu(t.lcZ(9,9,"All")),t.xp6(2),t.Q6J("ngForOf",e.statuses),t.xp6(1),t.Q6J("ngIf",!e.isOwner),t.xp6(3),t.hij(" ",t.lcZ(15,11,"Depot Name"),": "),t.xp6(3),t.Q6J("ngModel",e.keyword)}}function $e(n,i){if(1&n&&(t.TgZ(0,"td",22)(1,"span"),t._uU(2),t.qZA()()),2&n){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Udp("width",o.setTableContent("depot").width),t.xp6(1),t.hij(" ",null==e?null:e.depot," ")}}function ze(n,i){if(1&n&&(t.TgZ(0,"td",22)(1,"span"),t._uU(2),t.ALo(3,"number"),t.qZA()()),2&n){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Udp("width",o.setTableContent("chargers").width),t.xp6(1),t.hij(" ",t.lcZ(3,3,null==e?null:e.chargers)," ")}}function Ee(n,i){if(1&n&&(t.TgZ(0,"td",22)(1,"span"),t._uU(2),t.ALo(3,"number"),t.qZA()()),2&n){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Udp("width",o.setTableContent("connectors").width),t.xp6(1),t.hij(" ",t.lcZ(3,3,null==e?null:e.connectors)," ")}}function Re(n,i){if(1&n&&(t.TgZ(0,"td",22)(1,"span",23),t._uU(2),t.ALo(3,"number"),t.qZA()()),2&n){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Udp("width",o.setTableContent("connectorsAVL").width),t.xp6(1),t.hij(" ",t.lcZ(3,3,null==e?null:e.connectorsAVL)," ")}}function Ve(n,i){if(1&n&&(t.TgZ(0,"td",22)(1,"span",24),t._uU(2),t.ALo(3,"number"),t.qZA()()),2&n){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Udp("width",o.setTableContent("connectorsUse").width),t.xp6(1),t.hij(" ",t.lcZ(3,3,null==e?null:e.connectorsUse)," ")}}function We(n,i){if(1&n&&(t.TgZ(0,"td",22)(1,"span",25),t._uU(2),t.ALo(3,"number"),t.qZA()()),2&n){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Udp("width",o.setTableContent("connectorsDown").width),t.xp6(1),t.hij(" ",t.lcZ(3,3,null==e?null:e.connectorsDown)," ")}}function Xe(n,i){if(1&n&&(t.TgZ(0,"td",22)(1,"span",26),t._uU(2),t.ALo(3,"number"),t.qZA()()),2&n){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Udp("width",o.setTableContent("lotsAVL").width),t.xp6(1),t.hij(" ",t.lcZ(3,3,null==e?null:e.lotsAVL)," ")}}function tn(n,i){if(1&n&&(t.TgZ(0,"td",22)(1,"span",27),t._uU(2),t.ALo(3,"number"),t.qZA()()),2&n){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Udp("width",o.setTableContent("lotsOccupied").width),t.xp6(1),t.hij(" ",t.lcZ(3,3,null==e?null:e.lotsOccupied)," ")}}function en(n,i){if(1&n&&(t.TgZ(0,"td",22)(1,"span"),t._uU(2),t.ALo(3,"number"),t.qZA()()),2&n){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Udp("width",o.setTableContent("capacity").width),t.xp6(1),t.hij(" ",t.lcZ(3,3,null==e?null:e.capacity)," ")}}function nn(n,i){if(1&n&&(t.TgZ(0,"td",22)(1,"span"),t._uU(2),t.ALo(3,"number"),t.qZA()()),2&n){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Udp("width",o.setTableContent("capacityUse").width),t.xp6(1),t.hij(" ",t.lcZ(3,3,null==e?null:e.capacityUse)," ")}}function on(n,i){if(1&n&&(t.TgZ(0,"td",22)(1,"span"),t._uU(2),t.ALo(3,"number"),t.qZA()()),2&n){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Udp("width",o.setTableContent("grid").width),t.xp6(1),t.hij(" ",t.lcZ(3,3,null==e?null:e.grid)," ")}}function an(n,i){if(1&n&&(t.TgZ(0,"td",22)(1,"span"),t._uU(2),t.ALo(3,"number"),t.qZA()()),2&n){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Udp("width",o.setTableContent("energyStorage").width),t.xp6(1),t.hij(" ",t.lcZ(3,3,null==e?null:e.energyStorage)," ")}}function rn(n,i){if(1&n&&(t.TgZ(0,"td",22)(1,"span")(2,"a",28),t._uU(3),t.ALo(4,"translate"),t.qZA()()()),2&n){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Udp("width",o.setTableContent("action").width),t.xp6(1),t.Q6J("routerLink","./"+e.id+"/detail-transactions"),t.xp6(1),t.Oqu(t.lcZ(4,4,"Detail"))}}function ln(n,i){if(1&n&&(t.YNc(0,$e,3,3,"td",21),t.YNc(1,ze,4,5,"td",21),t.YNc(2,Ee,4,5,"td",21),t.YNc(3,Re,4,5,"td",21),t.YNc(4,Ve,4,5,"td",21),t.YNc(5,We,4,5,"td",21),t.YNc(6,Xe,4,5,"td",21),t.YNc(7,tn,4,5,"td",21),t.YNc(8,en,4,5,"td",21),t.YNc(9,nn,4,5,"td",21),t.YNc(10,on,4,5,"td",21),t.YNc(11,an,4,5,"td",21),t.YNc(12,rn,5,6,"td",21)),2&n){const e=t.oxw();t.Q6J("ngIf",e.setTableContent("depot").show),t.xp6(1),t.Q6J("ngIf",e.setTableContent("chargers").show),t.xp6(1),t.Q6J("ngIf",e.setTableContent("connectors").show),t.xp6(1),t.Q6J("ngIf",e.setTableContent("connectorsAVL").show),t.xp6(1),t.Q6J("ngIf",e.setTableContent("connectorsUse").show),t.xp6(1),t.Q6J("ngIf",e.setTableContent("connectorsDown").show),t.xp6(1),t.Q6J("ngIf",e.setTableContent("lotsAVL").show),t.xp6(1),t.Q6J("ngIf",e.setTableContent("lotsOccupied").show),t.xp6(1),t.Q6J("ngIf",e.setTableContent("capacity").show),t.xp6(1),t.Q6J("ngIf",e.setTableContent("capacityUse").show),t.xp6(1),t.Q6J("ngIf",e.setTableContent("grid").show),t.xp6(1),t.Q6J("ngIf",e.setTableContent("energyStorage").show),t.xp6(1),t.Q6J("ngIf",e.setTableContent("action").show)}}let sn=(()=>{class n extends v.Gw{constructor(e,o,a,r,l){super(),this.router=e,this.carParkService=o,this.translate=a,this.vehicleService=r,this.busService=l,this.tableHeaders=[{text:"Depot",column:"depot",width:"80px"},{text:"Chargers",column:"chargers",width:"80px"},{text:"Ports",column:"connectors",width:"90px"},{text:"Ports Avail",column:"connectorsAVL",width:"100px"},{text:"Ports In-use",column:"connectorsUse",width:"140px"},{text:"Ports Down",column:"connectorsDown",width:"100px"},{text:"Lots Avail",column:"lotsAVL",width:"120px"},{text:"Lots Occupied",column:"lotsOccupied",width:"120px"},{text:"Capacity (kWh)",column:"capacity",width:"80px"},{text:"In-use (kWh)",column:"capacityUse",width:"100px"},{text:"Grid (kWh)",column:"grid",width:"80px"},{text:"Storage System (kWh)",column:"energyStorage",width:"120px"},{text:"Action",column:"action",width:"120px"}],this.statuses=p.$Id,this.status="",this.paymentMethods=p.Hl7,this.paymentMethod="",this.faults=p.cPJ,this.fault="",this.groups=[],this.group="",this.vacancies=[],this.vacancyColor=p.M8c,this.keyword="",this.depotList=[]}get dataList(){return this._dataList}get filterParams(){return{type:this.status,paymentMethod:this.paymentMethod,fault:this.fault,group:this.group,keyword:this.keyword}}getDataFromParent(){this.vacancies=this.data&&this.data.map(e=>e.type!==p.D63.Closed?[{value:e.availableLots,color:p.M8c.Available},{value:e.seasonLots,color:p.M8c.Season},{value:e.usedNormalLots,color:p.M8c.Normal}]:[]),this._dataList=this.data.map((e,o)=>this.depotList.length>o?{...e,...this.depotList[o]}:{...e,...this.depotList[o%3],depot:65+o-3<91?`Depot ${String.fromCharCode(65+o-3)}`:"Depot Z"})}setTableHeaders(){let e=[];e=this.isOperator?["id","name","totalLots","availableLots","usedNormalLots","availability","method","fault","action"]:this.isOwner?["id","name","totalLots","availableLots","availability","action"]:this.isAdmin?["id","carParkCode","name","totalLots","availableLots","availability","method","fault","action"]:["id","carParkCode","name","totalLots","availableLots","usedNormalLots","availability","method","fault","action"],this.tableHeaders=this.tableHeaders.filter(o=>e.includes(o.column))}setTableContent(e){let o={width:null,show:!1};const a=this.tableHeaders.filter(r=>r.column===e);return a.length&&(o={width:a[0].width,show:!0}),o}setTableHeaderWidth(e){return this.tableHeaders[0].width}ngOnInit(){this.reloadData(),this.dataListener=this.hadGetData$.subscribe(e=>{e&&this.getDataFromParent()})}ngOnDestroy(){this.dataListener?.unsubscribe()}reloadData(){this.reloadDataService(this.carParkService),this.busService.getDepotListData().subscribe(e=>{this.depotList=e.depotList})}pageChanged(e){this.pagination=e,this.reloadData()}getStatus(e){const o=p.$Id.find(a=>a.value===e);return e?o&&o.text:"-"}getNormalLots(e){return e.live?e.totalLots-e.live.availableLots-e.seasonLots:"-"}get isOperator(){return this.vehicleService.isOperator()}get isOwner(){return this.carParkService.isOwner()}get isAdmin(){return this.carParkService.isAdmin()}setHardCode(e,o,a){const{page:r,rowsPerPage:l}=this.pagination;return"number"===o?`No. ${a+1+(r-1)*l}`:`Name ${a+1+(r-1)*l}`}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.F0),t.Y36(Z.x),t.Y36(m.sK),t.Y36(A.f),t.Y36(K.Z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-depots-list"]],features:[t.qOj],decls:8,vars:5,consts:[[1,"m-portlet"],[1,"m-portlet__body","m-portlet__body--scrollable"],[1,"m-portlet__frame"],["class","form-group m-form__group m-portlet__filters",4,"ngIf"],[3,"headers","items","loading","scrollingDisabled"],["listTable",""],["rowTemplate",""],[1,"form-group","m-form__group","m-portlet__filters"],[1,"m-portlet__filter"],[1,"col-form-label"],["name","status",1,"form-control","m-input",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","m-portlet__filter",4,"ngIf"],[1,"col-form-label",2,"white-space","nowrap"],[1,"m-input-icon","m-input-icon--left"],["type","text","placeholder","",1,"form-control","m-input",3,"ngModel","ngModelChange"],[1,"m-input-icon__icon","m-input-icon__icon--left"],[1,"la","la-search"],[3,"value"],["name","group",1,"form-control","m-input",3,"ngModel","ngModelChange"],["class","m-datatable__cell text-center",4,"ngIf"],[1,"m-datatable__cell","text-center"],[1,"connector-available"],[1,"connector-in-use"],[1,"connector-down"],[1,"lot-available"],[1,"lot-occupied"],[1,"m-link","m--font-primary",3,"routerLink"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,Ke,21,13,"div",3),t.TgZ(4,"app-datatable",4,5),t.YNc(6,ln,13,13,"ng-template",null,6,t.W1O),t.qZA()()()()),2&e&&(t.xp6(3),t.Q6J("ngIf",!o.isOperator),t.xp6(1),t.Q6J("headers",o.tableHeaders)("items",o.dataList)("loading",o.loading)("scrollingDisabled",!0))},dependencies:[d.sg,d.O5,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.On,v.nE,g.Uo,u.yS,d.JJ,m.X$],styles:["[_nghost-%COMP%]     .m-datatable.m-datatable--default>.m-datatable__table>.m-datatable__body .m-datatable__row>.m-datatable__cell>span.connector-available, [_nghost-%COMP%]     .m-datatable.m-datatable--default>.m-datatable__table>.m-datatable__body .m-datatable__row>.m-datatable__cell>span.lot-available{color:#00b050}[_nghost-%COMP%]     .m-datatable.m-datatable--default>.m-datatable__table>.m-datatable__body .m-datatable__row>.m-datatable__cell>span.connector-in-use{color:#18b5f0}[_nghost-%COMP%]     .m-datatable.m-datatable--default>.m-datatable__table>.m-datatable__body .m-datatable__row>.m-datatable__cell>span.connector-down, [_nghost-%COMP%]     .m-datatable.m-datatable--default>.m-datatable__table>.m-datatable__body .m-datatable__row>.m-datatable__cell>span.lot-occupied{color:red}"]}),n})();function pn(n,i){1&n&&t._UZ(0,"app-depots-list")}function cn(n,i){1&n&&t._UZ(0,"app-depots-map",11)}function ot(n){return new Q.w(n,"../assets/i18n/",".json")}const at=[{path:"",component:mt.f,children:[{path:"",component:(()=>{class n{constructor(e,o,a,r,l){this.router=e,this.translate=o,this.store=a,this.vehicleService=r,this.carparkService=l,this.alive=!0,this.currentTab="list",this.user$=a.pipe((0,tt.Ys)("global"))}changeTab(e){this.currentTab=e}gotoCreate(){this.router.navigate(["/bus-depots/create"])}tabClass(e){return e===this.currentTab?"active":""}ngOnInit(){this.user$.takeWhile(()=>this.alive).subscribe(({user:e})=>{this.viewOnly=(0,Te.intersection)([p.i44.ThirdParty,p.i44.Tester,p.i44.Auditor],e.authorities).length>0})}get isOperator(){return this.vehicleService.isOperator()}get isOwner(){return this.carparkService.isOwner()}get createOrNot(){return!(this.isOperator||this.isOwner)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.F0),t.Y36(m.sK),t.Y36(tt.yh),t.Y36(A.f),t.Y36(Z.x))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-depots-home"]],decls:15,vars:11,consts:[[1,"body-wrapper"],[2,"display","flex","justify-content","flex-end","padding-right","16px","margin-top","16px"],["role","group","aria-label","...",1,"m-btn-group","m-btn-group--pill","btn-group","mr-2",2,"height","40px"],["type","button",3,"click"],[1,"la","la-th-list"],[1,"la","la-map"],[1,"btn","btn-main","m-btn","m-btn--custom","m-btn--icon","m-btn--air","m-btn--pill",2,"height","40px","display","flex","align-items","center",3,"click"],[1,"la","la-plus"],[1,"m-content"],[4,"ngIf"],["style","display:flex;",4,"ngIf"],[2,"display","flex"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),t.NdJ("click",function(){return o.changeTab("list")}),t._UZ(4,"i",4),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return o.changeTab("map")}),t._UZ(6,"i",5),t.qZA()(),t.TgZ(7,"button",6),t.NdJ("click",function(){return o.gotoCreate()}),t._UZ(8,"i",7),t.TgZ(9,"span"),t._uU(10),t.ALo(11,"translate"),t.qZA()()(),t.TgZ(12,"div",8),t.YNc(13,pn,1,0,"app-depots-list",9),t.YNc(14,cn,1,0,"app-depots-map",10),t.qZA()()),2&e&&(t.xp6(3),t.Gre("m-btn m-btn--air btn btn-outline-main ","list"===o.currentTab&&"focus",""),t.xp6(2),t.Gre("m-btn m-btn--air btn btn-outline-main ","map"===o.currentTab&&"focus",""),t.xp6(5),t.hij(" ",t.lcZ(11,9,"Create")," "),t.xp6(3),t.Q6J("ngIf","list"===o.currentTab),t.xp6(1),t.Q6J("ngIf","map"===o.currentTab))},dependencies:[d.O5,He,sn,m.X$]}),n})()},{path:"create",component:ve,data:{breadcrumb:{label:"Create"}}},{path:":id",loadChildren:()=>Promise.all([s.e(371),s.e(7530),s.e(9967),s.e(3420),s.e(3809),s.e(2693),s.e(5312),s.e(5509),s.e(4146)]).then(s.bind(s,65509)).then(n=>n.BusDepotModule),data:{breadcrumb:n=>({label:`Depot ${n.snapshot.params.id}`,title:`Depot ${n.snapshot.params.id}`})}}]}];let un=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[it.k,rt.e,Z.x,st.p,lt.C,I.K,N.K,A.f],imports:[d.ez,u.Bz.forChild(at),dt.x,S.D,pt.a4,ct.mr,bt,m.aw.forChild({loader:{provide:m.Zw,useFactory:ot,deps:[P.eN]}}),u.Bz]}),n})()}}]);