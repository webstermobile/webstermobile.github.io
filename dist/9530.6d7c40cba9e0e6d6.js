"use strict";(self.webpackChunkst_admin=self.webpackChunkst_admin||[]).push([[9530],{69530:(Jn,C,i)=>{i.r(C),i.d(C,{MaintenanceModule:()=>An,createTranslateLoader:()=>b});var l=i(36895),_=i(24006),d=i(34793),h=i(69440),y=i(30329),Z=i(21532),w=i(59501),M=i(22730),O=i(46367),A=i(46442),p=i(38014),H=i(6368),v=i(28555),N=i(21837),F=i(61715),g=i(21086),S=i(5646),E=i(74327),I=i(1059),u=i(72986),J=i(17489),U=i(23753),P=i(15439),n=(i(19612),i(94650)),z=i(7053),k=i(4666),G=i(36511),f=i(89383),R=i(71942),Y=i(60097),Q=i(50007),L=i(49651),K=i(76916),D=i(35635),q=i(66616),$=i(47044),B=i(21811),V=i(798),j=i(84607),W=i(72156),X=i(19654),nn=i(16233),tn=i(65274),en=i(37713),x=i(21634),T=i(80409);const on=["enforcementHome"],an=["maintenanceTransactions"];function cn(a,s){if(1&a){const t=n.EpF();n.TgZ(0,"span",50),n.NdJ("click",function(){const c=n.CHM(t).$implicit,r=n.oxw();return n.KtG(r.clickFault(c.code))}),n._uU(1),n.qZA()}if(2&a){const t=s.$implicit,e=n.oxw();n.Tol(e.selectedEquipment==t.code?"newAddStyle  chooseOptions":"chooseOptions"),n.xp6(1),n.hij(" ",t.name," ")}}function sn(a,s){if(1&a&&(n.TgZ(0,"div",59),n._UZ(1,"i"),n.qZA()),2&a){const t=s.ngIf;n.xp6(1),n.Tol(t)}}function ln(a,s){if(1&a){const t=n.EpF();n.TgZ(0,"div",51),n.NdJ("click",function(){const c=n.CHM(t).$implicit,r=n.oxw();return n.KtG(r.openFaultEdit(c))}),n.TgZ(1,"div"),n._UZ(2,"div"),n.TgZ(3,"div",52)(4,"div",53)(5,"div",54),n._uU(6),n.qZA(),n.TgZ(7,"div",55)(8,"small"),n._uU(9),n.qZA()()(),n.YNc(10,sn,2,3,"div",56),n.ALo(11,"async"),n.qZA(),n.TgZ(12,"div",57)(13,"div",58),n._uU(14),n.qZA(),n.TgZ(15,"div"),n._uU(16),n.ALo(17,"titlecase"),n.qZA()()()()}if(2&a){const t=s.$implicit,e=n.oxw();n.xp6(1),n.MT6("fault ",t.faultLevel," ",t.status,""),n.xp6(1),n.Gre("background ",t.faultLevel,""),n.xp6(4),n.Oqu(t.faultName),n.xp6(3),n.Oqu(e.formatRaisedTime(t.raisedTime)),n.xp6(1),n.Q6J("ngIf",n.lcZ(11,15,e.getIcon(t.equipment))),n.xp6(4),n.Oqu(null==t.carPark?null:t.carPark.code),n.xp6(1),n.Gre("m--font-bold status ",t.status,""),n.xp6(1),n.Oqu(n.lcZ(17,17,t.status))}}function rn(a,s){if(1&a){const t=n.EpF();n.TgZ(0,"div",60)(1,"nz-pagination",61),n.NdJ("nzPageIndexChange",function(o){n.CHM(t);const c=n.oxw();return n.KtG(c.currentPage=o)})("nzPageIndexChange",function(){n.CHM(t);const o=n.oxw();return n.KtG(o.handlePageChange())}),n.qZA()()}if(2&a){const t=n.oxw();n.xp6(1),n.Q6J("nzPageIndex",t.currentPage)("nzTotal",t.totalCount)("nzPageSize",20)}}function pn(a,s){if(1&a){const t=n.EpF();n.TgZ(0,"div"),n._UZ(1,"div"),n.TgZ(2,"div",62)(3,"div",63)(4,"div",54),n._uU(5),n.qZA(),n.TgZ(6,"div",64),n.NdJ("click",function(){const c=n.CHM(t).$implicit,r=n.oxw();return n.KtG(r.openFaultCreationFromIntercall(c.id))}),n._UZ(7,"i",65),n.qZA()(),n.TgZ(8,"div")(9,"div",66),n._UZ(10,"i",67),n.TgZ(11,"div"),n._uU(12),n.qZA()(),n.TgZ(13,"div",66),n._UZ(14,"i",68),n.TgZ(15,"div"),n._uU(16),n.qZA()(),n.TgZ(17,"div",69)(18,"small"),n._uU(19),n.qZA()()()(),n.TgZ(20,"div",70)(21,"div",58),n._uU(22),n.qZA(),n.TgZ(23,"div",71),n._uU(24),n.ALo(25,"titlecase"),n.qZA()()()}if(2&a){const t=s.$implicit,e=n.oxw();n.Gre("intercall mb-3 ",null==t.status?null:t.status.toLowerCase(),""),n.xp6(1),n.Gre("background ",null==t.status?null:t.status.toLowerCase(),""),n.xp6(4),n.Oqu(null==t.carPark?null:t.carPark.code),n.xp6(7),n.Oqu(t.phoneNumber),n.xp6(4),n.Oqu(t.duration),n.xp6(3),n.Oqu(e.formatRaisedTime(t.reportDate)),n.xp6(3),n.Oqu(t.gateId),n.xp6(2),n.Oqu(n.lcZ(25,12,t.status))}}function mn(a,s){if(1&a){const t=n.EpF();n.TgZ(0,"div",72)(1,"textarea",73),n.NdJ("ngModelChange",function(o){n.CHM(t);const c=n.oxw();return n.KtG(c.newNote=o)}),n.qZA(),n.TgZ(2,"div",63)(3,"button",74),n.NdJ("click",function(){n.CHM(t);const o=n.oxw();return o.newNote="",n.KtG(o.creatingNote=!1)}),n.TgZ(4,"small"),n._uU(5,"Cancel"),n.qZA()(),n.TgZ(6,"button",75),n.NdJ("click",function(){n.CHM(t);const o=n.oxw();return n.KtG(o.submitNote())}),n.TgZ(7,"small"),n._uU(8,"Submit"),n.qZA()()()()}if(2&a){const t=n.oxw();n.xp6(1),n.Q6J("ngModel",t.newNote)}}function _n(a,s){if(1&a&&(n.TgZ(0,"div",76)(1,"div",77),n._uU(2),n.qZA(),n.TgZ(3,"div",55)(4,"small"),n._uU(5),n.ALo(6,"date"),n.qZA()()()),2&a){const t=s.$implicit;n.xp6(2),n.Oqu(t.message),n.xp6(3),n.Oqu(n.xi3(6,2,t.createdDate,"d LLL yyyy"))}}const m=function(a){return{active:a}};function gn(a,s){if(1&a){const t=n.EpF();n.TgZ(0,"li",38)(1,"a",39),n.NdJ("click",function(){n.CHM(t);const o=n.oxw();return o.showBottom=!0,n.KtG(o.currentTab="ENFORCEMENT")}),n._uU(2," Enforcement "),n.qZA()()}if(2&a){const t=n.oxw();n.xp6(1),n.Q6J("ngClass",n.VKq(1,m,t.showBottom&&"ENFORCEMENT"===t.currentTab))}}function dn(a,s){if(1&a){const t=n.EpF();n.TgZ(0,"li",38)(1,"a",39),n.NdJ("click",function(){n.CHM(t);const o=n.oxw();return o.showBottom=!0,n.KtG(o.currentTab="VEHICLE_VERIFICATION")}),n._uU(2," Vehicle Verification "),n.qZA()()}if(2&a){const t=n.oxw();n.xp6(1),n.Q6J("ngClass",n.VKq(1,m,t.showBottom&&"VEHICLE_VERIFICATION"===t.currentTab))}}function un(a,s){if(1&a){const t=n.EpF();n.TgZ(0,"app-maintenance-transactions",78,79),n.NdJ("verifyVehicle",function(o){n.CHM(t);const c=n.oxw();return n.KtG(c.verifyVehicle(o))})("endTransactions",function(o){n.CHM(t);const c=n.oxw();return n.KtG(c.endTransaction(o))})("closeTransactions",function(o){n.CHM(t);const c=n.oxw();return n.KtG(c.closeTransaction(o))}),n.qZA()}}function fn(a,s){1&a&&n._UZ(0,"app-maintenance-fault-history")}function Cn(a,s){if(1&a){const t=n.EpF();n.TgZ(0,"app-enforcement-home",80,81),n.NdJ("openEnforcementCreation",function(){n.CHM(t);const o=n.oxw();return n.KtG(o.openSideModal("CREATE_ENFORCEMENT"))}),n.qZA()}}function hn(a,s){if(1&a){const t=n.EpF();n.TgZ(0,"app-maintenance-vehicle-verification",82),n.NdJ("submit",function(o){n.CHM(t);const c=n.oxw();return n.KtG(c.submitVerification(o))})("cancel",function(){n.CHM(t);const o=n.oxw();return n.KtG(o.currentTab="TRANSACTIONS")}),n.qZA()}if(2&a){const t=n.oxw();n.Q6J("transactionId",t.transactionId)}}function Mn(a,s){1&a&&n._UZ(0,"app-list-refund")}function On(a,s){if(1&a){const t=n.EpF();n.TgZ(0,"app-fault-detail",83),n.NdJ("solve",function(o){n.CHM(t);const c=n.oxw();return n.KtG(c.onSolve(o))})("assign",function(o){n.CHM(t);const c=n.oxw();return n.KtG(c.onAssign(o))})("cancel",function(o){n.CHM(t);const c=n.oxw();return n.KtG(c.onCancel(o))})("reject",function(o){n.CHM(t);const c=n.oxw();return n.KtG(c.onReject(o))})("edit",function(){n.CHM(t);const o=n.oxw();return n.KtG(o.modalType="UPDATE")}),n.ALo(1,"async"),n.qZA()}if(2&a){const t=n.oxw();n.Q6J("fault",n.lcZ(1,1,t.selectedFault$))}}function vn(a,s){if(1&a){const t=n.EpF();n.TgZ(0,"app-fault-dialog",84),n.NdJ("submit",function(o){n.CHM(t);const c=n.oxw();return n.KtG(c.onSubmitFault(o))})("cancel",function(o){n.CHM(t);const c=n.oxw();return n.KtG(c.onCancel(o))}),n.ALo(1,"async"),n.qZA()}if(2&a){const t=n.oxw();n.Q6J("form",n.lcZ(1,1,t.selectedFault$))}}function Pn(a,s){if(1&a){const t=n.EpF();n.TgZ(0,"app-fault-dialog",84),n.NdJ("submit",function(o){n.CHM(t);const c=n.oxw();return n.KtG(c.onUpdateFault(o))})("cancel",function(o){n.CHM(t);const c=n.oxw();return n.KtG(c.onCancel(o))}),n.ALo(1,"async"),n.qZA()}if(2&a){const t=n.oxw();n.Q6J("form",n.lcZ(1,1,t.selectedFault$))}}function xn(a,s){if(1&a){const t=n.EpF();n.TgZ(0,"app-enforcement-create",85),n.NdJ("submit",function(o){n.CHM(t);const c=n.oxw();return n.KtG(c.onCreateEnforcement(o))})("cancel",function(o){n.CHM(t);const c=n.oxw();return n.KtG(c.onCancel(o))}),n.qZA()}}const Tn=function(a){return{"background-color":a}};let bn=(()=>{class a{constructor(t,e,o,c,r,Hn,Nn,Fn,Sn,En,In){this.router=t,this.store=e,this.maintenanceService=o,this.authenticationService=c,this.transactionService=r,this.codeTablesService=Hn,this.translate=Nn,this.vehicleService=Fn,this.carparkService=Sn,this.nzModalService=En,this.nzMessageService=In,this.currentTab="TRANSACTIONS",this.faultsPagination=[],this.newNote="",this.searchDate=N.ou.local().toFormat("yyyy-LL-dd"),this.alive=!0,this.currentPage=1,this.totalPage=0,this.totalCount=0,this.statusConfig=(0,p.ngG)(),this.chooseOptions=[],this.selectedEquipment="",this.loading=!1,this.user$=e.pipe((0,v.Ys)("global"))}ngOnInit(){this.equipments$=this.codeTablesService.filterModelByType(p.BcL.FaultEquipment).pipe((0,S._)(1),(0,E.x)()),(0,F.F)(3e4).takeWhile(()=>this.alive).pipe((0,I.O)(0)).subscribe(()=>{this.maintenanceService.fetchIntercalls({searchDate:this.searchDate}).pipe((0,u.q)(1)).subscribe(t=>this.intercalls$=(0,g.of)(t)),this.maintenanceService.fetchNotes({searchDate:this.searchDate}).pipe((0,u.q)(1)).subscribe(t=>this.notes$=(0,g.of)(t)),this.maintenanceService.getStatusSign().subscribe(()=>{this.statusConfig.date=P().format("YYYY-MM-DD HH:mmA"),this.statusConfig.status=!0},t=>{this.statusConfig.status&&(this.statusConfig.date=P().format("YYYY-MM-DD HH:mmA"),this.statusConfig.status=!1)})}),this.user$.takeWhile(()=>this.alive).subscribe(({user:t})=>{this.viewOnly=(0,J.intersection)([p.i44.ThirdParty,p.i44.Tester,p.i44.Auditor],t.authorities).length>0}),this.scrolling=(0,U.R)(window,"scroll").subscribe(t=>{this.onScroll()}),this.getFaultsType()}getFaultsType(){this.maintenanceService.getFaultsType().subscribe(t=>{t&&t.length>0&&(t.sort((e,o)=>e.sequence-o.sequence),this.chooseOptions=t,this.selectedEquipment=t[0].code,this.getFaultsListByType())})}getFaultsListByType(){this.loading=!0,this.maintenanceService.getFaultsListByType(this.selectedEquipment,this.currentPage-1).subscribe(t=>{this.loading=!1,t&&(this.faultsPagination=t.content,this.totalPage=t.totalPages,this.totalCount=t.totalElements)},()=>{this.loading=!1})}initFaults(){this.faults$.subscribe(t=>{Array.isArray(t)||(this.faultsPagination=t.content,this.totalPage=t.totalPages,this.totalCount=t.totalElements)})}getFaults(){this.maintenanceService.fetchFaults(this.currentPage-1).pipe((0,u.q)(1)).subscribe(t=>{this.faults$=(0,g.of)(t),this.initFaults()})}handlePageChange(){this.getFaultsListByType()}onScroll(){}createNote(t){t.scrollTo(0,0),this.creatingNote=!0}submitNote(){this.maintenanceService.createNote({message:this.newNote}).subscribe(()=>{this.creatingNote=!1,this.newNote="",this.notes$=this.maintenanceService.fetchNotes({searchDate:this.searchDate})})}onSubmitFault(t){this.maintenanceService.createFault(t).subscribe(()=>{this.modalOpen=!1,this.faults$=this.maintenanceService.fetchFaults(),this.notes$=this.maintenanceService.fetchNotes({searchDate:this.searchDate})})}onUpdateFault(t){this.maintenanceService.updateFault(t).subscribe(()=>{this.modalOpen=!1,this.faults$=this.maintenanceService.fetchFaults(),this.notes$=this.maintenanceService.fetchNotes({searchDate:this.searchDate})})}onCancel(){this.modalOpen=!1}openSideModal(t){this.modalOpen=!0,this.modalType=t,this.store.dispatch({type:H.Us.ToggleAside,payload:{minimizeAside:!0}})}formatRaisedTime(t){return this.maintenanceService.formatTime(t)}openFaultEdit(t){this.selectedFault$=this.maintenanceService.fetchFault(t.id),this.openSideModal("DETAIL")}onSolve({fault:t,callback:e}){this.maintenanceService.solveFault(t).subscribe(()=>{this.modalOpen=!1,this.faults$=this.maintenanceService.fetchFaults(),e&&e()})}onAssign({fault:t,callback:e}){this.maintenanceService.assignFault(t).subscribe(()=>{this.modalOpen=!1,this.faults$=this.maintenanceService.fetchFaults(),e&&e()})}onReject({fault:t,callback:e}){this.maintenanceService.rejectFault(t.id).subscribe(()=>{this.modalOpen=!1,this.faults$=this.maintenanceService.fetchFaults(),e&&e()})}onCreateEnforcement(t){this.maintenanceService.createEnforcement(t).subscribe(()=>{this.modalOpen=!1,this.enforcementHome.reloadData()})}openFaultCreation({carParkId:t}){const e={carParkId:t,raisedBy:this.authenticationService.getCurrentUser().login,equipment:"",faultName:null,faultLevel:"",remark:"",noteMessageFlag:!0};this.selectedFault$=(0,g.of)(e),this.openSideModal("CREATE")}openFaultCreationFromIntercall(t){this.maintenanceService.fetchIntercall(t).subscribe(({carParkId:e})=>this.openFaultCreation({carParkId:e}))}verifyVehicle(t){this.transactionId=t,this.currentTab="VEHICLE_VERIFICATION"}endTransaction(t){this.openModal("end",t,"End Transaction ?")}closeTransaction(t){this.openModal("close",t,"Close Transaction ?")}submitVerification(t){this.transactionService.verifyAbnormalTransaction(t).subscribe(()=>{this.currentTab="TRANSACTIONS"})}getIcon(t){return this.equipments$.map(e=>{const o=e.find(c=>c.name.replace(/\s+/g,"").toLowerCase()===t.replace(/\s+/g,"").toLowerCase());return o&&o.remarks})}ngOnDestroy(){this.alive=!1}openModal(t,e,o){e&&(this.selectedData=e),this.nzModalService.confirm({nzTitle:o,nzOnOk:()=>this.submit(t)})}submit(t){"end"===t?this.router.navigate(["/simulator/exit"],{queryParams:{carparkId:this.selectedData.carPark.id,vehicle:this.selectedData.vehicle.vehicleNumber}}):this.transactionService.closeTransactions(this.selectedData.id).subscribe(e=>{200===e.code&&this.maintenanceTransactions.reloadData(),this.nzMessageService.info(e.message)},e=>{this.nzMessageService.error("Serve Error")})}clickFault(t){this.selectedEquipment=t,this.currentPage=1,this.getFaultsListByType()}get isOperator(){return this.vehicleService.isOperator()}get isAdmin(){return this.carparkService.isAdmin()}get notOwnerAndOperator(){return!(this.isOperator||this.isAdmin)}}return a.\u0275fac=function(t){return new(t||a)(n.Y36(d.F0),n.Y36(v.yh),n.Y36(h.N),n.Y36(z.$),n.Y36(k.p),n.Y36(G.I),n.Y36(f.sK),n.Y36(R.f),n.Y36(Y.x),n.Y36(Q.Sf),n.Y36(L.dD))},a.\u0275cmp=n.Xpm({type:a,selectors:[["app-maintenance-home"]],viewQuery:function(t,e){if(1&t&&(n.Gf(on,5),n.Gf(an,5)),2&t){let o;n.iGM(o=n.CRH())&&(e.enforcementHome=o.first),n.iGM(o=n.CRH())&&(e.maintenanceTransactions=o.first)}},decls:70,vars:48,consts:[[1,"maintenance"],[1,"body-wrapper"],[1,"maintenance-home",2,"position","relative"],[1,"d-flex","align-items-center",2,"position","absolute","right","200px","top","-40px"],[1,"status-circle",3,"ngStyle"],[2,"font-size","18px","font-weight","500"],[1,"top-contents"],[1,"m-content"],[1,"row","h-100"],[1,"col-8","pr-0","d-flex","flex-column","h-100"],[1,"mb-3","m--padding-right-20"],[1,"float-right","create-fault-link","m--font-brand","m--font-bold",3,"click"],[1,"la","la-plus"],[1,"newAddContent"],[3,"class","click",4,"ngFor","ngForOf"],[3,"nzSpinning","nzDelay"],[1,"faults"],["class","fault-wrapper mb-3",3,"click",4,"ngFor","ngForOf"],["class","text-left",4,"ngIf"],[1,"col-2","p-0","d-flex","flex-column"],[1,"mb-3","m--padding-right-15"],[1,"intercalls-title","text-ellipsis"],[1,"intercalls-today"],[3,"class",4,"ngFor","ngForOf"],[1,"notes-section","col-2","p-0","d-flex","flex-column"],[1,"header","mb-3","m--padding-right-15"],[1,"float-left","text-ellipsis"],[1,"float-right","create-note-link","m--font-brand","m--font-bold","text-ellipsis",3,"hidden","click"],[1,"notes"],["notesRef",""],["class","note-create mb-3",4,"ngIf"],["class","note mb-3",4,"ngFor","ngForOf"],[1,"m-portlet","m-portlet--tabs","mb-0","h-100","d-flex","flex-column"],[1,"nav-wrapper"],["role","tablist",1,"navs"],[1,"nav-item"],[1,"nav-link",3,"ngClass","click"],["class","nav-item m-tabs__item",4,"ngIf"],[1,"nav-item","m-tabs__item"],[1,"nav-link","m-tabs__link",3,"ngClass","click"],[1,"btn","btn-outline-main","m-btn","m-btn--icon","m-btn--icon-only","m-btn--custom","m-btn--pill","m-btn--air","btn-toggle","btn-sm",3,"click"],[1,"m-portlet__body","m-portlet__body--scrollable",3,"hidden"],[1,"m-portlet__frame",3,"ngSwitch"],[3,"verifyVehicle","endTransactions","closeTransactions",4,"ngSwitchCase"],[4,"ngSwitchCase"],[3,"openEnforcementCreation",4,"ngSwitchCase"],[3,"transactionId","submit","cancel",4,"ngSwitchCase"],[3,"fault","solve","assign","cancel","reject","edit",4,"ngIf"],[3,"form","submit","cancel",4,"ngIf"],[3,"submit","cancel",4,"ngIf"],[3,"click"],[1,"fault-wrapper","mb-3",3,"click"],[1,"fault__body","mb-3"],[1,"left"],[1,"m--font-bolder"],[1,"text-muted"],["class","right text-muted",4,"ngIf"],[1,"fault__footer"],[1,"m--font-bold","text-ellipsis"],[1,"right","text-muted"],[1,"text-left"],[3,"nzPageIndex","nzTotal","nzPageSize","nzPageIndexChange"],[1,"intercall__body","mb-2"],[1,"d-flex","justify-content-between"],[1,"btn-add",3,"click"],[1,"fa","fa-plus-circle"],[1,"d-flex","m--margin-top-5"],[1,"la","la-phone-square"],[1,"la","la-headphones"],[1,"text-muted","m--margin-top-5"],[1,"intercall__footer","d-flex","justify-content-between","m--margin-top-10"],[1,"m--font-bold","status","text-danger"],[1,"note-create","mb-3"],["rows","4","nz-input","","placeholder","",1,"mb-2",3,"ngModel","ngModelChange"],["nz-button","","nzType","primary","nzGhost","",3,"click"],["nz-button","","nzType","primary",3,"click"],[1,"note","mb-3"],[1,"content","m--font-bold","mb-2","text"],[3,"verifyVehicle","endTransactions","closeTransactions"],["maintenanceTransactions",""],[3,"openEnforcementCreation"],["enforcementHome",""],[3,"transactionId","submit","cancel"],[3,"fault","solve","assign","cancel","reject","edit"],[3,"form","submit","cancel"],[3,"submit","cancel"]],template:function(t,e){if(1&t){const o=n.EpF();n.TgZ(0,"div",0)(1,"div",1),n._UZ(2,"app-title-bar"),n.TgZ(3,"div",2)(4,"div",3),n._UZ(5,"div",4),n.TgZ(6,"span",5),n._uU(7),n.qZA()(),n.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"a",11),n.NdJ("click",function(){return e.openFaultCreation({carParkId:null})}),n._UZ(14,"i",12),n._uU(15,"Create Fault "),n.qZA()(),n.TgZ(16,"div",13),n.YNc(17,cn,2,3,"span",14),n.qZA(),n.TgZ(18,"nz-spin",15)(19,"div",16),n.YNc(20,ln,18,19,"div",17),n.qZA()(),n.YNc(21,rn,2,3,"div",18),n.qZA(),n.TgZ(22,"div",19)(23,"div",20)(24,"h6",21),n._uU(25,"Intercalls Today"),n.qZA()(),n.TgZ(26,"div",22),n.YNc(27,pn,26,14,"div",23),n.ALo(28,"async"),n.qZA()(),n.TgZ(29,"div",24)(30,"div",25)(31,"h6",26),n._uU(32,"Notes"),n.qZA(),n.TgZ(33,"a",27),n.NdJ("click",function(){n.CHM(o);const r=n.MAs(37);return n.KtG(e.createNote(r))}),n._UZ(34,"i",12),n._uU(35,"Create Note"),n.qZA()(),n.TgZ(36,"div",28,29),n.YNc(38,mn,9,1,"div",30),n.YNc(39,_n,7,5,"div",31),n.ALo(40,"async"),n.qZA()()()()(),n.TgZ(41,"div")(42,"div",32)(43,"div",33)(44,"ul",34)(45,"li",35)(46,"a",36),n.NdJ("click",function(){return e.showBottom=!0,e.currentTab="TRANSACTIONS"}),n._uU(47," Transactions "),n.qZA()(),n.TgZ(48,"li",35)(49,"a",36),n.NdJ("click",function(){return e.showBottom=!0,e.currentTab="FAULT_HISTORY"}),n._uU(50," Fault History "),n.qZA()(),n.YNc(51,gn,3,3,"li",37),n.YNc(52,dn,3,3,"li",37),n.TgZ(53,"li",38)(54,"a",39),n.NdJ("click",function(){return e.showBottom=!0,e.currentTab="REFUND_REQUEST"}),n._uU(55," Refund Request "),n.qZA()(),n.TgZ(56,"button",40),n.NdJ("click",function(){return e.showBottom=!e.showBottom}),n._UZ(57,"i"),n.qZA()()(),n.TgZ(58,"div",41)(59,"div",42),n.YNc(60,un,2,0,"app-maintenance-transactions",43),n.YNc(61,fn,1,0,"app-maintenance-fault-history",44),n.YNc(62,Cn,2,0,"app-enforcement-home",45),n.YNc(63,hn,1,1,"app-maintenance-vehicle-verification",46),n.YNc(64,Mn,1,0,"app-list-refund",44),n.qZA()()()()()()(),n.TgZ(65,"div"),n.YNc(66,On,2,3,"app-fault-detail",47),n.YNc(67,vn,2,3,"app-fault-dialog",48),n.YNc(68,Pn,2,3,"app-fault-dialog",48),n.YNc(69,xn,1,0,"app-enforcement-create",49),n.qZA()}2&t&&(n.xp6(5),n.Q6J("ngStyle",n.VKq(40,Tn,e.statusConfig.status?"#00ff00":"#ff0000")),n.xp6(2),n.Oqu(e.statusConfig.date),n.xp6(10),n.Q6J("ngForOf",e.chooseOptions),n.xp6(1),n.Q6J("nzSpinning",e.loading)("nzDelay",500),n.xp6(2),n.Q6J("ngForOf",e.faultsPagination),n.xp6(1),n.Q6J("ngIf",e.totalPage),n.xp6(6),n.Q6J("ngForOf",n.lcZ(28,36,e.intercalls$)),n.xp6(6),n.Q6J("hidden",e.creatingNote),n.xp6(5),n.Q6J("ngIf",e.creatingNote),n.xp6(1),n.Q6J("ngForOf",n.lcZ(40,38,e.notes$)),n.xp6(2),n.Gre("bottom-contents ",e.showBottom?"open":"",""),n.xp6(5),n.Q6J("ngClass",n.VKq(42,m,e.showBottom&&"TRANSACTIONS"===e.currentTab)),n.xp6(3),n.Q6J("ngClass",n.VKq(44,m,e.showBottom&&"FAULT_HISTORY"===e.currentTab)),n.xp6(2),n.Q6J("ngIf",e.notOwnerAndOperator),n.xp6(1),n.Q6J("ngIf",e.notOwnerAndOperator),n.xp6(2),n.Q6J("ngClass",n.VKq(46,m,e.showBottom&&"REFUND_REQUEST"===e.currentTab)),n.xp6(3),n.Gre("la ",e.showBottom?"la-minus-square":"la-arrows",""),n.xp6(1),n.Q6J("hidden",!e.showBottom),n.xp6(1),n.Q6J("ngSwitch",e.currentTab),n.xp6(1),n.Q6J("ngSwitchCase","TRANSACTIONS"),n.xp6(1),n.Q6J("ngSwitchCase","FAULT_HISTORY"),n.xp6(1),n.Q6J("ngSwitchCase","ENFORCEMENT"),n.xp6(1),n.Q6J("ngSwitchCase","VEHICLE_VERIFICATION"),n.xp6(1),n.Q6J("ngSwitchCase","REFUND_REQUEST"),n.xp6(1),n.Gre("side-modal ",e.modalOpen?"open":"",""),n.xp6(1),n.Q6J("ngIf","DETAIL"===e.modalType),n.xp6(1),n.Q6J("ngIf",e.modalOpen&&"CREATE"===e.modalType),n.xp6(1),n.Q6J("ngIf",e.modalOpen&&"UPDATE"===e.modalType),n.xp6(1),n.Q6J("ngIf",e.modalOpen&&"CREATE_ENFORCEMENT"===e.modalType))},dependencies:[l.mk,l.sg,l.O5,l.PC,l.RF,l.n9,K.G,D.Zp,q.ix,$.w,B.dQ,V.P,j.s,W.H,X.e,nn.x,tn.r,_.Fj,_.JJ,_.On,en.R,O.P,x.dE,T.W,l.Ov,l.rS,l.uU],styles:["[_nghost-%COMP%]{display:flex;height:100%}.side-modal[_ngcontent-%COMP%]{width:0;transition:.2s;height:100%;background:white;overflow:auto;border-left:1px solid #ebedf2}.side-modal.open[_ngcontent-%COMP%]{width:300px}.maintenance[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;flex:1}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .top-contents[_ngcontent-%COMP%]{overflow:hidden;display:flex;margin-bottom:auto;flex:1}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .top-contents[_ngcontent-%COMP%] > .m-content[_ngcontent-%COMP%]{padding:15px 30px;flex:1}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .top-contents[_ngcontent-%COMP%]   .create-fault-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .top-contents[_ngcontent-%COMP%]   .create-note-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .top-contents[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%], .maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .top-contents[_ngcontent-%COMP%]   .create-note-link[_ngcontent-%COMP%]{word-break:break-all}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .top-contents[_ngcontent-%COMP%]   .create-note-link[_ngcontent-%COMP%]{text-align:right}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents[_ngcontent-%COMP%]{height:45px;transition:.2s;margin:0 30px 30px}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents.open[_ngcontent-%COMP%]{height:auto}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%]{display:flex;margin-left:auto;margin-top:auto;margin-bottom:auto}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]{padding:0 30px;height:45px;display:flex;align-items:center;border-bottom:1px solid #ebedf2}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]   .navs[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none;padding:0;margin:0;width:100%}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]   .navs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{cursor:pointer;font-weight:400;font-size:1rem}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]   .navs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{height:45px;vertical-align:middle;display:table-cell;color:#6c757d}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]   .navs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover, .maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]   .navs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus, .maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]   .navs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:active, .maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]   .navs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#716aca}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]   .navs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{border-bottom:1px solid #00bdb5}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents[_ngcontent-%COMP%]   .m-portlet__body[_ngcontent-%COMP%]{display:flex;flex:1;padding:0 30px;margin-top:15px;overflow:auto}.maintenance[_ngcontent-%COMP%]   .maintenance-home[_ngcontent-%COMP%]   .bottom-contents[_ngcontent-%COMP%]   .m-portlet__body[_ngcontent-%COMP%]   .m-portlet__frame[_ngcontent-%COMP%]{padding-bottom:30px}.faults[_ngcontent-%COMP%]{display:flex;margin:0 7px 0 -5px;overflow:auto;flex-wrap:wrap;padding-right:10px}.faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]{flex:0 0 25%;max-width:25%;padding:0 5px}.faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault[_ngcontent-%COMP%]{padding:15px 10px;position:relative;border-left:4px solid #c4c5d6}.faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault.level1[_ngcontent-%COMP%]{border-left:4px solid #c4c5d6}.faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault.level2[_ngcontent-%COMP%]{border-left:4px solid #ffb822}.faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault.level3[_ngcontent-%COMP%]{border-left:4px solid #f4516c}.faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault.new[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{background-color:#f4516c}.faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault.pending[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{background-color:#ffb822}.faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault.assigned[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{background-color:#c4c5d6}.faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{background-color:#c4c5d6;position:absolute;width:100%;height:100%;top:0;left:0;opacity:.1}.faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault[_ngcontent-%COMP%]   .fault__body[_ngcontent-%COMP%], .faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault[_ngcontent-%COMP%]   .fault__footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault[_ngcontent-%COMP%]   .fault__body[_ngcontent-%COMP%]   .status.new[_ngcontent-%COMP%], .faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault[_ngcontent-%COMP%]   .fault__footer[_ngcontent-%COMP%]   .status.new[_ngcontent-%COMP%]{color:#f4516c}.faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault[_ngcontent-%COMP%]   .fault__body[_ngcontent-%COMP%]   .status.pending[_ngcontent-%COMP%], .faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault[_ngcontent-%COMP%]   .fault__footer[_ngcontent-%COMP%]   .status.pending[_ngcontent-%COMP%]{color:#ffb822}.faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault[_ngcontent-%COMP%]   .fault__body[_ngcontent-%COMP%]   .status.assigned[_ngcontent-%COMP%], .faults[_ngcontent-%COMP%]   .fault-wrapper[_ngcontent-%COMP%]   .fault[_ngcontent-%COMP%]   .fault__footer[_ngcontent-%COMP%]   .status.assigned[_ngcontent-%COMP%]{color:#c4c5d6}.intercalls-today[_ngcontent-%COMP%]{display:flex;overflow:auto;flex-direction:column;padding-right:15px;margin-right:7px}.intercalls-today[_ngcontent-%COMP%]   .intercall[_ngcontent-%COMP%]{border-left:4px solid #c4c5d6;padding:15px 10px;position:relative}.intercalls-today[_ngcontent-%COMP%]   .intercall[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{background-color:#c4c5d6;position:absolute;width:100%;height:100%;top:0;left:0;opacity:.1;pointer-events:none}.intercalls-today[_ngcontent-%COMP%]   .intercall.ongoing[_ngcontent-%COMP%]{border-left:4px solid #36a3f7}.intercalls-today[_ngcontent-%COMP%]   .intercall.ongoing[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{background-color:#36a3f7}.intercalls-today[_ngcontent-%COMP%]   .intercall.pending[_ngcontent-%COMP%]{border-left:4px solid #ffb822}.intercalls-today[_ngcontent-%COMP%]   .intercall.pending[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{background-color:#ffb822}.intercalls-today[_ngcontent-%COMP%]   .intercall.success[_ngcontent-%COMP%]{border-left:4px solid #34bfa3}.intercalls-today[_ngcontent-%COMP%]   .intercall.success[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{background-color:#34bfa3}.intercalls-today[_ngcontent-%COMP%]   .intercall.hangup[_ngcontent-%COMP%]{border-left:4px solid #f4516c}.intercalls-today[_ngcontent-%COMP%]   .intercall.hangup[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{background-color:#f4516c}.intercalls-today[_ngcontent-%COMP%]   .intercall[_ngcontent-%COMP%]   .intercall__body[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-direction:column}.intercalls-today[_ngcontent-%COMP%]   .intercall[_ngcontent-%COMP%]   .intercall__body[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]{color:#716aca;cursor:pointer}.notes-section[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{width:40%}.notes-section[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:60%}.notes-section[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]{display:flex;overflow:auto;flex-direction:column;padding-right:15px}.notes-section[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{background:white;padding:15px 10px}.notes-section[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.notes-section[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]   .note-create[_ngcontent-%COMP%]{background:white;padding:15px 10px}.notes-section[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]   .note-create[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{outline:none;resize:none}.newAddContent[_ngcontent-%COMP%]{height:32px;line-height:32px;margin-bottom:10px}.chooseOptions[_ngcontent-%COMP%]{margin-right:30px;cursor:pointer;font-size:18px}.newAddStyle[_ngcontent-%COMP%]{border-bottom:3px solid #00bdb5}.chooseOptions[_ngcontent-%COMP%]:hover{margin-right:30px;cursor:pointer;color:#00bdb5;font-size:18px;border-bottom:3px solid #00bdb5}[_nghost-%COMP%]     .ant-pagination ul{width:auto;display:block}"]}),a})();var yn=i(80529),Zn=i(19832);function b(a){return new Zn.w(a,"../assets/i18n/",".json")}const wn=[{path:"",component:w.f,children:[{path:"",component:bn},{path:"enforcement/create",component:O.P,data:{breadcrumb:{title:"Create Enforcement",label:"Create Enforcement"}}}]}];let An=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=n.oAB({type:a}),a.\u0275inj=n.cJS({providers:[h.N],imports:[l.ez,d.Bz.forChild(wn),Z.x,y.D,M.S,_.u5,A.s,x.uK,T.j,f.aw.forChild({loader:{provide:f.Zw,useFactory:b,deps:[yn.eN]}}),d.Bz,M.S]}),a})()}}]);